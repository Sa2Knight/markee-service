{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/core-js/internals/to-string-tag-support.js","webpack:///./node_modules/core-js/internals/function-bind-context.js","webpack:///./node_modules/core-js/internals/function-bind.js","webpack:///./node_modules/core-js/internals/object-get-own-property-names-external.js","webpack:///./node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack:///./node_modules/core-js/internals/ie8-dom-define.js","webpack:///./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack:///./node_modules/core-js/internals/array-for-each.js","webpack:///./node_modules/core-js/internals/an-instance.js","webpack:///./node_modules/core-js/internals/html.js","webpack:///./node_modules/core-js/internals/a-function.js","webpack:///./node_modules/core-js/internals/check-correctness-of-iteration.js","webpack:///./node_modules/core-js/internals/engine-is-ios.js","webpack:///./node_modules/core-js/internals/require-object-coercible.js","webpack:///./node_modules/core-js/internals/array-method-has-species-support.js","webpack:///./node_modules/base64-js/index.js","webpack:///./node_modules/core-js/internals/iterate.js","webpack:///./node_modules/core-js/internals/to-absolute-index.js","webpack:///./node_modules/core-js/internals/export.js","webpack:///./node_modules/core-js/internals/object-get-own-property-names.js","webpack:///./node_modules/core-js/modules/es.regexp.to-string.js","webpack:///./node_modules/core-js/internals/set-species.js","webpack:///./node_modules/core-js/internals/iterator-close.js","webpack:///./node_modules/core-js/internals/task.js","webpack:///./node_modules/core-js/internals/engine-v8-version.js","webpack:///./node_modules/core-js/modules/es.object.get-prototype-of.js","webpack:///./node_modules/core-js/internals/engine-user-agent.js","webpack:///./node_modules/core-js/internals/get-iterator-method.js","webpack:///./node_modules/core-js/internals/object-define-properties.js","webpack:///./node_modules/core-js/internals/a-possible-prototype.js","webpack:///./node_modules/core-js/modules/es.string.iterator.js","webpack:///./node_modules/core-js/internals/iterators.js","webpack:///./node_modules/core-js/internals/path.js","webpack:///./node_modules/core-js/internals/indexed-object.js","webpack:///./node_modules/core-js/internals/add-to-unscopables.js","webpack:///./node_modules/core-js/internals/host-report-errors.js","webpack:///./node_modules/core-js/internals/species-constructor.js","webpack:///./node_modules/core-js/internals/native-symbol.js","webpack:///./node_modules/core-js/modules/es.reflect.construct.js","webpack:///./node_modules/core-js/internals/array-includes.js","webpack:///./node_modules/core-js/modules/es.array.filter.js","webpack:///./node_modules/core-js/modules/es.map.js","webpack:///./node_modules/core-js/internals/to-length.js","webpack:///./node_modules/core-js/internals/has.js","webpack:///./node_modules/core-js/internals/shared.js","webpack:///./node_modules/core-js/internals/own-keys.js","webpack:///./node_modules/core-js/internals/create-property-descriptor.js","webpack:///./node_modules/core-js/internals/engine-is-node.js","webpack:///./node_modules/core-js/internals/object-assign.js","webpack:///./node_modules/core-js/internals/string-multibyte.js","webpack:///./node_modules/core-js/internals/collection-strong.js","webpack:///./node_modules/core-js/internals/array-species-create.js","webpack:///./node_modules/core-js/internals/internal-state.js","webpack:///./node_modules/core-js/internals/collection.js","webpack:///./node_modules/core-js/internals/redefine.js","webpack:///./node_modules/@babel/runtime/helpers/typeof.js","webpack:///./node_modules/core-js/internals/inherit-if-required.js","webpack:///./node_modules/core-js/internals/object-get-own-property-symbols.js","webpack:///./node_modules/core-js/internals/define-well-known-symbol.js","webpack:///./node_modules/core-js/internals/enum-bug-keys.js","webpack:///./node_modules/fabric/dist/fabric.js","webpack:///./node_modules/core-js/internals/to-object.js","webpack:///./node_modules/core-js/internals/object-create.js","webpack:///./node_modules/core-js/internals/define-iterator.js","webpack:///./node_modules/core-js/internals/native-weak-map.js","webpack:///./node_modules/core-js/internals/array-fill.js","webpack:///./node_modules/core-js/internals/an-object.js","webpack:///./node_modules/core-js/internals/descriptors.js","webpack:///./node_modules/core-js/internals/create-property.js","webpack:///./node_modules/core-js/internals/is-object.js","webpack:///./node_modules/core-js/internals/inspect-source.js","webpack:///./node_modules/core-js/internals/uid.js","webpack:///./node_modules/core-js/internals/create-non-enumerable-property.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/core-js/internals/is-forced.js","webpack:///./node_modules/core-js/internals/object-define-property.js","webpack:///./node_modules/core-js/internals/create-iterator-constructor.js","webpack:///./node_modules/@vue/shared/dist/shared.esm-bundler.js","webpack:///./node_modules/core-js/internals/engine-is-webos-webkit.js","webpack:///./node_modules/core-js/modules/es.symbol.js","webpack:///./node_modules/core-js/internals/array-method-is-strict.js","webpack:///./node_modules/core-js/internals/to-integer.js","webpack:///./node_modules/core-js/modules/es.promise.finally.js","webpack:///./node_modules/core-js/internals/regexp-flags.js","webpack:///./node_modules/core-js/internals/iterators-core.js","webpack:///./node_modules/core-js/internals/object-to-string.js","webpack:///./node_modules/core-js/internals/microtask.js","webpack:///./node_modules/core-js/internals/well-known-symbol.js","webpack:///./node_modules/buffer/index.js","webpack:///./node_modules/core-js/modules/es.object.keys.js","webpack:///./node_modules/core-js/internals/array-iteration.js","webpack:///./node_modules/core-js/internals/freezing.js","webpack:///./node_modules/core-js/internals/to-primitive.js","webpack:///./node_modules/core-js/internals/is-pure.js","webpack:///./node_modules/core-js/internals/classof-raw.js","webpack:///./node_modules/core-js/internals/shared-store.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/core-js/internals/object-keys-internal.js","webpack:///./node_modules/core-js/modules/es.array.fill.js","webpack:///./node_modules/core-js/internals/document-create-element.js","webpack:///./node_modules/core-js/modules/es.object.assign.js","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///./node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///./node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createSuper.js","webpack:///./node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///./node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///./node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///./node_modules/@vue/reactivity/dist/reactivity.esm-bundler.js","webpack:///./node_modules/@vue/runtime-core/dist/runtime-core.esm-bundler.js","webpack:///./node_modules/@vue/runtime-dom/dist/runtime-dom.esm-bundler.js","webpack:///./src/App.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack:///./src/compositions/useFabric.ts","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?dfb6","webpack:///./src/main.ts","webpack:///./node_modules/core-js/internals/promise-resolve.js","webpack:///./node_modules/core-js/internals/set-global.js","webpack:///./node_modules/core-js/internals/hidden-keys.js","webpack:///./node_modules/core-js/internals/fails.js","webpack:///./node_modules/core-js/internals/get-built-in.js","webpack:///./node_modules/core-js/internals/object-property-is-enumerable.js","webpack:///./node_modules/core-js/modules/es.symbol.iterator.js","webpack:///./node_modules/core-js/internals/object-set-prototype-of.js","webpack:///./node_modules/core-js/modules/es.object.to-string.js","webpack:///./node_modules/core-js/internals/set-to-string-tag.js","webpack:///./node_modules/core-js/internals/global.js","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack:///./node_modules/core-js/modules/web.dom-collections.iterator.js","webpack:///./node_modules/core-js/internals/object-keys.js","webpack:///./node_modules/core-js/modules/es.symbol.description.js","webpack:///./node_modules/core-js/internals/object-get-prototype-of.js","webpack:///./node_modules/core-js/internals/correct-prototype-getter.js","webpack:///./node_modules/core-js/modules/es.array.iterator.js","webpack:///./node_modules/core-js/internals/redefine-all.js","webpack:///./node_modules/isarray/index.js","webpack:///./node_modules/core-js/modules/es.object.get-own-property-descriptor.js","webpack:///./node_modules/core-js/internals/well-known-symbol-wrapped.js","webpack:///./node_modules/core-js/internals/perform.js","webpack:///./node_modules/core-js/modules/es.promise.js","webpack:///./node_modules/core-js/internals/copy-constructor-properties.js","webpack:///./node_modules/core-js/internals/is-array.js","webpack:///./node_modules/core-js/internals/is-array-iterator-method.js","webpack:///./node_modules/core-js/internals/new-promise-capability.js","webpack:///./node_modules/core-js/internals/internal-metadata.js","webpack:///./node_modules/core-js/internals/classof.js","webpack:///./node_modules/core-js/internals/shared-key.js","webpack:///./node_modules/core-js/internals/to-indexed-object.js","webpack:///./node_modules/core-js/internals/dom-iterables.js","webpack:///./node_modules/core-js/internals/use-symbol-as-uid.js","webpack:///./node_modules/core-js/internals/native-promise-constructor.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","wellKnownSymbol","TO_STRING_TAG","test","String","aFunction","fn","that","length","undefined","a","b","apply","arguments","isObject","slice","factories","construct","C","argsLength","args","list","Function","join","this","partArgs","boundFunction","concat","toIndexedObject","$getOwnPropertyNames","f","toString","windowNames","window","getOwnPropertyNames","getWindowNames","it","error","DESCRIPTORS","propertyIsEnumerableModule","createPropertyDescriptor","toPrimitive","has","IE8_DOM_DEFINE","$getOwnPropertyDescriptor","getOwnPropertyDescriptor","O","P","fails","createElement","global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","$forEach","arrayMethodIsStrict","STRICT_METHOD","callbackfn","Constructor","TypeError","getBuiltIn","ITERATOR","SAFE_CLOSING","called","iteratorWithReturn","next","done","Array","from","exec","SKIP_CLOSING","ITERATION_SUPPORT","userAgent","V8_VERSION","SPECIES","METHOD_NAME","array","constructor","foo","Boolean","byteLength","toByteArray","fromByteArray","lookup","revLookup","Arr","Uint8Array","code","len","charCodeAt","getLens","b64","Error","validLen","indexOf","placeHoldersLen","lens","_byteLength","tmp","arr","curByte","tripletToBase64","num","encodeChunk","uint8","start","end","output","push","extraBytes","parts","maxChunkLength","len2","anObject","isArrayIteratorMethod","toLength","getIteratorMethod","iteratorClose","Result","stopped","result","iterable","unboundFunction","options","iterator","iterFn","index","step","AS_ENTRIES","IS_ITERATOR","INTERRUPTED","stop","condition","callFn","toInteger","max","Math","min","integer","redefine","setGlobal","copyConstructorProperties","isForced","source","FORCED","target","targetProperty","sourceProperty","descriptor","TARGET","GLOBAL","STATIC","stat","noTargetGet","forced","sham","internalObjectKeys","enumBugKeys","hiddenKeys","flags","TO_STRING","RegExpPrototype","RegExp","nativeToString","NOT_GENERIC","INCORRECT_NAME","R","rf","unsafe","definePropertyModule","CONSTRUCTOR_NAME","configurable","returnMethod","defer","channel","port","html","IS_IOS","IS_NODE","location","set","setImmediate","clear","clearImmediate","process","MessageChannel","Dispatch","counter","queue","ONREADYSTATECHANGE","run","id","runner","listener","event","data","post","postMessage","protocol","host","nextTick","now","port2","port1","onmessage","addEventListener","importScripts","appendChild","removeChild","setTimeout","match","version","versions","v8","split","$","toObject","nativeGetPrototypeOf","CORRECT_PROTOTYPE_GETTER","FAILS_ON_PRIMITIVES","getPrototypeOf","classof","Iterators","objectKeys","defineProperties","Properties","keys","charAt","InternalStateModule","defineIterator","STRING_ITERATOR","setInternalState","getInternalState","getterFor","iterated","type","string","point","state","propertyIsEnumerable","UNSCOPABLES","ArrayPrototype","console","defaultConstructor","S","getOwnPropertySymbols","nativeConstruct","NEW_TARGET_BUG","F","ARGS_BUG","Target","newTarget","$args","proto","instance","toAbsoluteIndex","createMethod","IS_INCLUDES","$this","el","fromIndex","includes","$filter","filter","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","collection","collectionStrong","init","argument","IS_PURE","store","copyright","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","bitmap","writable","IndexedObject","$assign","assign","A","B","symbol","alphabet","chr","T","argumentsLength","j","requireObjectCoercible","CONVERT_TO_STRING","pos","first","second","position","size","codeAt","redefineAll","anInstance","iterate","setSpecies","fastKey","internalStateGetterFor","getConstructor","wrapper","IS_MAP","ADDER","last","define","previous","entry","getEntry","removed","prev","add","setStrong","ITERATOR_NAME","getInternalCollectionState","getInternalIteratorState","kind","isArray","originalArray","NATIVE_WEAK_MAP","objectHas","shared","sharedKey","WeakMap","enforce","TYPE","wmget","wmhas","wmset","metadata","facade","STATE","InternalMetadataModule","checkCorrectnessOfIteration","setToStringTag","inheritIfRequired","common","IS_WEAK","NativeConstructor","NativePrototype","exported","fixMethod","KEY","nativeMethod","REPLACE","entries","REQUIRED","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","BUGGY_ZERO","$instance","dummy","inspectSource","enforceInternalState","TEMPLATE","simple","_typeof","obj","setPrototypeOf","Wrapper","NewTarget","NewTargetPrototype","path","wrappedWellKnownSymbolModule","NAME","fabric","document","HTMLDocument","Document","implementation","createHTMLDocument","jsdom","virtualWindow","JSDOM","decodeURIComponent","features","FetchExternalResources","resources","jsdomImplForWrapper","implForWrapper","nodeCanvas","Canvas","DOMParser","resizeCanvasIfNeeded","pipelineState","targetCanvas","width","height","dWidth","destinationWidth","dHeight","destinationHeight","copyGLTo2DDrawImage","gl","glCanvas","canvas","ctx","getContext","translate","scale","sourceY","drawImage","copyGLTo2DPutImageData","numBytes","u8","imageBuffer","u8Clamped","Uint8ClampedArray","readPixels","RGBA","UNSIGNED_BYTE","imgData","ImageData","putImageData","isTouchSupported","navigator","maxTouchPoints","isLikelyNode","Buffer","SHARED_ATTRIBUTES","DPI","reNum","commaWsp","rePathCommand","reNonWord","fontPaths","iMatrix","svgNS","perfLimitSizeTotal","maxCacheSideLimit","minCacheSideLimit","charWidthsCache","textureSize","disableStyleCopyPaste","enableGLFiltering","devicePixelRatio","webkitDevicePixelRatio","mozDevicePixelRatio","browserShadowBlurConstant","arcToSegmentsCache","boundsOfCurveCache","cachesBoundsOfCurve","forceGLPutImageData","initFilterBackend","isWebglSupported","log","maxTextureSize","WebglFilterBackend","tileSize","Canvas2dFilterBackend","_removeEventListener","eventName","handler","__eventListeners","eventListener","util","fill","on","prop","off","fire","listenersForEvent","Observable","_objects","_onObjectAdded","renderOnAddRemove","requestRenderAll","insertAt","nonSplicing","objects","splice","remove","somethingRemoved","_onObjectRemoved","forEachObject","callback","context","getObjects","item","isEmpty","contains","complexity","reduce","memo","current","CommonMethods","_setOptions","_initGradient","filler","colorStops","Gradient","_initPattern","Pattern","_setObject","_set","toggle","sqrt","atan2","pow","PiBy180","PI","PiBy2","cos","angle","angleSlice","sin","sign","removeFromArray","idx","getRandomInt","floor","random","degreesToRadians","degrees","radiansToDegrees","radians","rotatePoint","origin","subtractEquals","v","rotateVector","Point","x","y","addEquals","vector","rx","ry","transformPoint","ignoreOffset","makeBoundingBoxFromPoints","points","transform","xPoints","minX","maxX","yPoints","minY","maxY","left","top","invertTransform","toFixed","number","fractionDigits","parseFloat","Number","parseUnit","fontSize","unit","Text","DEFAULT_SVG_FONT_SIZE","falseFunction","getKlass","namespace","camelize","toUpperCase","resolveNamespace","getSvgAttributes","attributes","loadImage","url","crossOrigin","img","createImage","onLoadCallback","onload","onerror","src","substring","loadImageInDom","div","style","querySelector","parentNode","enlivenObjects","reviver","enlivenedObjects","numLoadedObjects","numTotalObjects","onLoaded","klass","fromObject","enlivenPatterns","patterns","numLoadedPatterns","numPatterns","enlivenedPatterns","pattern","groupSVGElements","elements","centerPoint","Group","sourcePath","populateWithProperties","destination","properties","drawDashedLine","x2","y2","da","dx","dy","rot","dc","di","draw","save","moveTo","rotate","restore","createCanvasElement","copyCanvasElement","newCanvas","toDataURL","canvasEl","format","quality","multiplyTransformMatrices","is2x2","qrDecompose","denom","scaleX","scaleY","skewX","skewY","translateX","translateY","calcRotateMatrix","theta","calcDimensionsMatrix","scaleMatrix","flipX","flipY","multiply","tan","composeMatrix","matrix","resetObjectTransform","saveObjectTransform","isTransparent","tolerance","temp","_isTransparent","imageData","getImageData","parsePreserveAspectRatioAttribute","attribute","align","meetOrSlice","alignX","alignY","aspectRatioAttrs","pop","clearFabricFontCache","fontFamily","toLowerCase","limitDimsByArea","ar","maximumArea","roughWidth","perfLimitSizeY","capValue","findScaleToFit","findScaleToCover","matrixToSVG","map","NUM_FRACTION_DIGITS","removeTransformFromObject","inverted","finalTransform","calcOwnMatrix","applyTransformToObject","addTransformToObject","center","setPositionByOrigin","sizeAfterTransform","dimX","dimY","transformMatrix","bbox","_join","commandLengths","h","q","repeatedCommands","M","segmentToBezier","th2","th3","cosTh","sinTh","cx1","cy1","mT","fromX","fromY","costh2","sinth2","costh3","sinth3","toX","toY","cp1X","cp1Y","cp2X","cp2Y","arcToSegments","large","sweep","rotateX","th","abs","px","py","rx2","ry2","py2","px2","pl","root","cx","cy","mTheta","calcVectorAngle","dtheta","segments","ceil","mDelta","ux","uy","vx","vy","ta","tb","getBoundsOfCurve","x0","y0","x1","y1","x3","y3","argsString","t1","t2","b2ac","sqrtb2ac","tvalues","bounds","mt","jlen","fromArcToBeziers","fx","fy","coords","tx","ty","segsNorm","makePathSimpler","converted","controlX","controlY","destinationPath","calcLineLength","CB1","CB2","CB3","CB4","getPointOnCubicBezierIterator","p1x","p1y","p2x","p2y","p3x","p3y","p4x","p4y","pct","c1","c2","c3","c4","getTangentCubicIterator","invT","tangentX","tangentY","QB1","QB2","QB3","getPointOnQuadraticBezierIterator","getTangentQuadraticIterator","pathIterator","perc","tempP","tmpLen","findPercentageForDistance","segInfo","distance","nextLen","lastPerc","nextStep","angleFinder","getPathSegmentsInfo","tempInfo","totalLength","info","command","destX","destY","getPointOnPath","infos","segPercent","segment","lerp","parsePath","pathString","currentPath","parsed","coordsStr","re","rNumber","rNumberCommaWsp","rFlagCommaWsp","rArcSeq","regArcArgumentSequence","coordsParsed","trim","isNaN","commandLength","repeatedCommand","k","klen","getBoundsOfArc","bound","segs","drawArc","unshift","beziers","bezier","bezierCurveTo","fromArcToBeizers","invoke","method","byProperty","find","value1","value2","extend","deep","Element","clone","replace","character","capitalize","firstLetterOnly","escapeXml","graphemeSplit","textstring","graphemes","getWholeChar","str","emptyFunction","IS_DONTENUM_BUGGY","addMethods","parent","superclass","returnValue","valueOf","Subclass","callSuper","methodName","parentMethod","_this","superClassMethod","createClass","initialize","shift","subclasses","couldUseAttachEvent","attachEvent","touchEvents","getTouchInfo","touchProp","changedTouches","addListener","element","removeListener","removeEventListener","getPointer","scroll","getScrollLeftTop","_evt","clientX","clientY","isTouchEvent","pointerType","setStyle","styles","elementStyle","cssText","setOpacity","normalizedProperty","styleFloat","parseEl","supportsOpacity","opacity","supportsFilters","reOpacity","es","currentStyle","hasLayout","zoom","_slice","getById","getElementById","sliceCanConvertNodelists","getElementStyle","toArray","arrayLike","childNodes","err","makeElement","tagName","className","htmlFor","setAttribute","addClass","wrapElement","replaceChild","docElement","documentElement","body","scrollLeft","scrollTop","nodeType","getElementOffset","docElem","scrollLeftTop","doc","ownerDocument","box","offset","offsetAttributes","borderLeftWidth","borderTopWidth","paddingLeft","paddingTop","attr","parseInt","getBoundingClientRect","clientLeft","clientTop","getNodeCanvas","impl","_canvas","_image","cleanUpJsdomNode","_currentSrc","_attributes","_classList","setImageSmoothing","imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","msImageSmoothingEnabled","oImageSmoothingEnabled","defaultView","getComputedStyle","selectProp","makeElementUnselectable","onselectstart","unselectable","makeElementSelectable","addParamToUrl","param","emptyFn","request","onComplete","xhr","XMLHttpRequest","parameters","onreadystatechange","readyState","open","setRequestHeader","send","warn","noop","defaultEasing","animate","requestAnimFrame","timestamp","time","Date","duration","finish","onChange","abort","easing","startValue","endValue","byValue","onStart","tick","ticktime","currentTime","timePerc","valuePerc","_requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","_cancelAnimFrame","cancelAnimationFrame","clearTimeout","cancelAnimFrame","calculateColor","begin","color","animateColor","fromColor","toColor","startColor","Color","getSource","endColor","originalOnComplete","originalOnChange","posValue","colorEasing","normalize","asin","elastic","opts","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","ease","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","svgValidTagNames","svgViewBoxElements","svgInvalidAncestors","svgValidParents","attributesMap","display","visibility","colorAttributes","stroke","fSize","cPath","normalizeAttr","normalizeValue","parentAttributes","parseTransformAttribute","visible","fillIndex","strokeIndex","getSvgRegex","_setStrokeFillOpacity","setAlpha","getAlpha","toRgba","_getMultipleNodes","nodeNames","nodeName","nodeList","nodeArray","getElementsByTagName","parseStyleString","oStyle","chunk","pair","parseStyleObject","getGlobalStylesForElement","svgUid","rule","cssRules","elementMatchesRule","selectors","firstMatching","parentMatching","selectorMatches","doesSomeParentMatch","selector","matcher","classNames","getAttribute","elementById","node","nodelist","parseUseDirectives","attrs","xlink","substr","el2","cloneNode","currentTrans","oldLength","applyViewboxTransform","el3","createElementNS","setAttributeNS","nodeValue","firstChild","removeAttribute","svgValidTagNamesRegEx","svgViewBoxElementsRegEx","svgInvalidAncestorsRegEx","svgValidParentsRegEx","gradientDefs","clipPaths","rotateMatrix","multiplierX","multiplierY","skewMatrix","translateMatrix","transforms","transformList","reTransformList","reTransform","attributeValue","matrices","operation","combinedMatrix","reViewBoxAttrValue","viewBoxWidth","viewBoxHeight","viewBoxAttr","widthAttr","heightAttr","preserveAspectRatio","missingViewBox","missingDimAttr","toBeParsed","parsedDim","widthDiff","heightDiff","hasAncestorWithNodeName","recursivelyParseGradientsXlink","gradient","gradientsAttrs","xlinkAttr","xLink","referencedGradient","hasAttribute","children","referenceClone","parseSVGDocument","parsingOptions","__uid","descendants","selectNodes","getGradientDefs","getCSSRules","parseElements","instances","reFontDeclaration","parseFontDeclaration","fontStyle","fontWeight","lineHeight","tagArray","elList","parseAttributes","parentFontSize","ownAttributes","cssAttrs","parseStyleAttribute","normalizedAttr","normalizedValue","normalizedStyle","font","mergedAttrs","ElementsParser","parse","parsePointsAttribute","parsedPoints","rules","allRules","styleContents","textContent","ruleObj","declaration","propertyValuePairs","_rule","loadSVGFromURL","xml","responseXML","results","_options","allElements","loadSVGFromString","parser","parseFromString","regexUrl","numElements","createObjects","createObject","findTag","fromElement","createCallback","checkIfDone","resolveGradient","Image","_originalElement","_removeTransformMatrix","resolveClipPath","extractPropertyDefinition","storage","regex","lastIndex","gradientDef","opacityAttr","createClipPathCallback","container","_newObj","fillRule","clipRule","usingElement","objTransformInv","gTransform","clipPath","calcTransformMatrix","clipPathTag","clipPathOwner","scalarAdd","scalar","scalarAddEquals","subtract","scalarSubtract","scalarSubtractEquals","multiplyEquals","divide","divideEquals","eq","lt","lte","gt","gte","distanceFrom","midPointFrom","setXY","setX","setY","setFromPoint","swap","Intersection","status","appendPoint","appendPoints","intersectLineLine","a1","a2","b1","b2","uaT","ubT","uB","ua","ub","intersectLinePolygon","inter","intersectPolygonPolygon","points1","points2","intersectPolygonRectangle","r1","r2","topRight","bottomLeft","inter1","inter2","inter3","inter4","_tryParsingColor","setSource","hue2rgb","colorNameMap","sourceFromHex","sourceFromRgb","sourceFromHsl","_rgbToHsl","g","round","_source","toRgb","toHsl","hsl","toHsla","toHex","toHexa","alpha","toGrayscale","average","currentAlpha","toBlackWhite","threshold","overlayWith","otherColor","otherAlpha","otherSource","reRGBa","reHSLa","reHex","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","fromRgb","fromSource","fromRgba","fromHsl","fromHsla","fromHex","isShortNotation","isRGBa","oColor","scaleMap","skewMap","controls","LEFT","TOP","RIGHT","BOTTOM","CENTER","opposite","bottom","right","findCornerQuadrant","fabricObject","control","cornerAngle","fireEvent","canvasOptions","scaleIsProportional","eventData","uniScaleKey","uniformIsToggled","uniformScaling","isTransformCentered","originX","originY","scalingIsForbidden","by","scaleProportionally","lockX","lockScalingX","lockY","lockScalingY","scaleCursorStyleHandler","notAllowed","skewCursorStyleHandler","lockSkewingY","lockSkewingX","scaleSkewCursorStyleHandler","altActionKey","scaleOrSkewActionName","isAlternative","rotationStyleHandler","lockRotation","cursorStyle","commonEventInfo","e","pointer","wrapWithFixedAnchor","actionHandler","getCenterPoint","constraint","translateToOriginPoint","actionPerformed","getLocalPoint","corner","getZoom","padding","localPoint","toLocalPoint","offsetX","offsetY","targetHasOneFlip","compensateScaleForSkew","oppositeSkew","scaleToCompensate","axis","reference","newDim","_getTransformedDimensions","newValue","skewObjectX","newSkew","dimNoSkew","totalSkewSize","currentSkew","hasSkewed","dimBeforeSkewing","skewObjectY","skewHandlerX","localPointFromCenter","finalHandler","skewHandlerY","rotationWithSnapping","pivotPoint","lastAngle","ey","ex","curAngle","hasRotated","snapAngle","snapThreshold","rightAngleLocked","leftAngleLocked","scaleObject","newPoint","dim","signX","signY","forbidScaling","gestureScale","lockScalingFlip","hasScaled","original","originalDistance","oldScaleX","oldScaleY","scaleObjectFromCorner","scaleObjectX","scaleObjectY","scalingYOrSkewingX","scalingY","scalingXOrSkewingY","scalingX","changeWidth","hasResized","strokePadding","strokeWidth","strokeUniform","multiplier","oldWidth","newWidth","dragHandler","newLeft","newTop","moveX","moveY","scalingEqually","controlsUtils","renderCircleControl","styleOverride","xSize","sizeX","cornerSize","ySize","sizeY","transparentCorners","cornerStrokeColor","myLeft","myTop","fillStyle","cornerColor","strokeStyle","lineWidth","beginPath","arc","renderSquareControl","xSizeBy2","ySizeBy2","strokeRect","Control","actionName","touchSizeX","touchSizeY","withConnection","mouseDownHandler","mouseUpHandler","getActionHandler","getMouseDownHandler","getMouseUpHandler","cursorStyleHandler","getActionName","getVisibility","controlKey","objectVisibility","_controlsVisibility","setVisibility","positionHandler","finalMatrix","calcCornerCoords","objectAngle","objectCornerSize","centerX","centerY","isTouch","cosHalfOffset","sinHalfOffset","cosHalfOffsetComp","sinHalfOffsetComp","controlTriangleAngle","cornerHypotenuse","newTheta","newThetaComp","tl","tr","bl","br","render","cornerStyle","getColorStop","colorAlpha","keyValuePairs","getLinearCoords","getRadialCoords","__convertPercentUnitsToValues","svgOptions","gradientUnits","propValue","finalValue","gradientTransform","option","addColorStop","propertiesToInclude","toSVG","markup","commonAttributes","needsSwap","withViewport","additionalTransform","sort","pathOffset","reverse","minRadius","maxRadius","percentageShift","colorStop","toLive","createLinearGradient","createRadialGradient","colorStopEls","repeat","patternTransform","setOptions","isError","patternSource","patternWidth","patternHeight","patternOffsetX","patternOffsetY","patternImgSrc","complete","naturalWidth","naturalHeight","createPattern","Shadow","blur","affectStroke","includeDefaultValues","nonScaling","_parseShadow","shadow","shadowStr","offsetsAndBlur","reOffsetsAndBlur","fBoxX","fBoxY","BLUR_BOX","StaticCanvas","CANVAS_INIT_ERROR","renderAndResetBound","renderAndReset","requestRenderAllBound","_initStatic","backgroundColor","backgroundImage","overlayColor","overlayImage","stateful","controlsAboveOverlay","allowTouchScrolling","viewportTransform","backgroundVpt","overlayVpt","enableRetinaScaling","vptCoords","skipOffscreen","cb","_createLowerCanvas","_initOptions","interactive","_initRetinaScaling","setOverlayImage","setBackgroundImage","setBackgroundColor","setOverlayColor","calcOffset","_isRetinaScaling","getRetinaScaling","scaleRatio","__initRetinaScaling","lowerCanvasEl","contextContainer","upperCanvasEl","contextTop","_offset","image","__setBgOverlayImage","__setBgOverlayColor","_createCanvasElement","_applyCanvasStyle","getWidth","getHeight","setWidth","setDimensions","setHeight","dimensions","cssValue","cssOnly","_setBackstoreDimension","hasLostContext","backstoreOnly","_setCssDimension","_isCurrentlyDrawing","freeDrawingBrush","_setBrushStyles","cacheCanvasEl","wrapperEl","setViewportTransform","vpt","activeObject","_activeObject","backgroundObject","overlayObject","group","setCoords","calcViewportBoundaries","zoomToPoint","before","after","setZoom","absolutePan","relativePan","getElement","setupState","clearContext","clearRect","_hasITextHandlers","_mouseUpITextHandler","_iTextInstances","renderAll","canvasToDrawOn","renderCanvas","isRendering","iVpt","cancelRequestedRender","_renderBackground","_renderObjects","drawControls","shouldCache","_transformDone","renderCache","forClipping","drawClipPathOnCanvas","_renderOverlay","globalCompositeOperation","zoomX","zoomY","_cacheCanvas","cacheTranslationX","cacheTranslationY","_renderBackgroundOrOverlay","needsVpt","lineTo","closePath","getCenter","centerObjectH","_centerObject","centerObjectV","centerObject","viewportCenterObject","vpCenter","getVpCenter","viewportCenterObjectH","viewportCenterObjectV","toDatalessJSON","toDatalessObject","_toObjectMethod","_toObjects","_toObject","__serializeBgOverlay","excludeFromExport","originalValue","bgImage","overlay","background","svgViewportTransformation","_setSVGPreamble","_setSVGHeader","clipPathId","_setSVGBgOverlayColor","_setSVGBgOverlayImage","_setSVGObjects","suppressPreamble","encoding","viewBox","createSVGFontFacesMarkup","createSVGRefElementsMarkup","createSVGClipPathMarkup","toClipPathSVG","shouldTransform","row","rowIndex","_char","charIndex","fontList","_setSVGObject","finalWidth","finalHeight","shouldInvert","sendToBack","objs","activeSelection","bringToFront","sendBackwards","intersecting","newIdx","objsMoved","_findNewLowerIndex","isIntersecting","intersectsWithObject","isContainedWithinObject","bringForward","_findNewUpperIndex","dispose","DataURLExporter","EMPTY_JSON","supports","setLineDash","toJSON","createPNGStream","createJPEGStream","BaseBrush","strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeDashArray","limitedToCanvasSize","lineCap","miterLimit","lineJoin","_saveAndTransform","_setShadow","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","needsFullRender","_resetShadow","_isOutSideCanvas","PencilBrush","decimate","_points","_drawSegment","p1","p2","midPoint","quadraticCurveTo","onMouseDown","_isMainEvent","_prepareForDrawing","_captureDrawingPath","_render","onMouseMove","oldEnd","onMouseUp","_finalizeAndAddPath","_reset","_addPoint","pointerPoint","convertPointsToSVGPath","multSignX","multSignY","manyPoints","createPath","pathData","Path","decimatePoints","cDistance","adjustedDistance","lastPoint","newPoints","CircleBrush","drawDot","addPoint","dot","radius","originalRenderOnAddRemove","circles","circle","Circle","circleRadius","circleColor","SprayBrush","density","dotWidth","dotWidthVariance","randomOpacity","optimizeOverlapping","sprayChunks","addSprayChunk","sprayChunkPoints","rects","ilen","sprayChunk","rect","Rect","_getOptimizedRects","uniqueRects","uniqueRectsArray","globalAlpha","fillRect","PatternBrush","getPatternSrc","dotDistance","patternCanvas","patternCtx","getPatternSrcFunction","getPattern","topLeft","_getLeftTopCoords","supportLineDash","STROKE_OFFSET","_initInteractive","_createCacheCanvas","centeredScaling","centeredRotation","centeredKey","selection","selectionKey","altSelectionKey","selectionColor","selectionDashArray","selectionBorderColor","selectionLineWidth","selectionFullyContained","hoverCursor","moveCursor","defaultCursor","freeDrawingCursor","rotationCursor","notAllowedCursor","containerClass","perPixelTargetFind","targetFindTolerance","skipTargetFind","isDrawingMode","preserveObjectStacking","stopContextMenu","fireRightClick","fireMiddleClick","targets","_hoveredTarget","_hoveredTargets","_currentTransform","_groupSelector","_initWrapperElement","_createUpperCanvas","_initEventListeners","_chooseObjectsToRender","objsToRender","activeGroupObjects","activeObjects","getActiveObjects","contextTopDirty","renderTopLayer","_drawSelection","renderTop","_normalizePointer","invertedM","vptPointer","restorePointerVpt","isTargetTransparent","normalizedPointer","targetRelativeX","targetRelativeY","_cacheContext","contextCache","originalColor","selectionBackgroundColor","_isSelectionKeyPressed","selectionKeyPressed","_shouldClearSelection","evented","selectable","_shouldCenterTransform","action","altKey","centerTransform","_getOriginFromCorner","_getActionFromCorner","alreadySelected","_setupCurrentTransform","__corner","lastX","lastY","shiftKey","_beforeTransform","setCursor","cursor","groupSelector","aleft","atop","_setLineDash","findTarget","skipGroup","activeTarget","activeTargetSubs","ignoreZoom","aObjects","shouldLookForActive","_findTargetCorner","_searchPossibleTargets","_checkTarget","globalPointer","containsPoint","isEditing","subTarget","objToCheck","pointerToUse","subTargetCheck","_absolutePointer","_pointer","cssScale","boundsWidth","boundsHeight","retinaScaling","lowerCanvasClass","_copyCanvasStyle","fromEl","toEl","getSelectionContext","getSelectionElement","getActiveObject","active","_discardActiveObject","_fireSelectionEvents","oldObjects","somethingChanged","added","oldObject","selected","deselected","updated","setActiveObject","currentActives","_setActiveObject","onSelect","onDeselect","discardActiveObject","removeListeners","_renderControls","originalProperties","_realizeGroupTransformOnObject","_unwindGroupTransformOnObject","layoutProps","originalValues","clearContextTop","RIGHT_CLICK","MIDDLE_CLICK","LEFT_CLICK","addEventOptions","passive","checkClick","button","mainTouchId","_bindEvents","addOrRemove","_getEventPrefix","enablePointerEvents","functor","eventjsFunctor","canvasElement","eventTypePrefix","_onResize","_onMouseDown","_onMouseMove","_onMouseOut","_onMouseEnter","_onMouseWheel","_onContextMenu","_onDoubleClick","_onDragOver","_onDragEnter","_onDragLeave","_onDrop","_onTouchStart","eventjs","_onGesture","_onDrag","_onOrientationChange","_onShake","_onLongPress","_onMouseUp","_onTouchEnd","eventsBound","_simpleEventHandler","self","__onTransformGesture","__onDrag","__onMouseWheel","_target","hiddenTextarea","focus","__onOrientationChange","__onShake","__onLongPress","preventDefault","_fireEnterLeaveEvents","stopPropagation","_cacheTransformEventData","_handleEvent","_resetTransformEventData","getPointerId","evt","identifier","pointerId","isPrimary","touches","__onMouseDown","__onMouseUp","_willAddMouseDown","__onMouseMove","_shouldRender","shouldRender","isClick","_onMouseUpInDrawingMode","_finalizeCurrentTransform","targetWasActive","_maybeGroupObjects","activeOn","isMoving","_setCursorFromEvent","eventType","subTargets","absolutePointer","currentTarget","currentSubTargets","_scaling","hasStateChanged","_addEventOptions","_fire","_onMouseDownInDrawingMode","_onMouseMoveInDrawingMode","_previousPointer","shouldGroup","_shouldGroup","_handleGrouping","saveState","_transformObject","_fireOverOutEvents","fireSyntheticInOutEvents","oldTarget","evtOut","canvasEvtOut","evtIn","canvasEvtIn","_draggedoverTarget","config","inOpt","outOpt","outFires","inFires","targetChanged","previousTarget","nextTarget","reset","_performTransformAction","getCornerCursor","_updateActiveSelection","_createActiveSelection","currentActiveObjects","removeWithUpdate","addWithUpdate","_createGroup","isActiveLower","groupObjects","exitEditing","ActiveSelection","_groupSelectedObjects","aGroup","_collectObjects","currentObject","selectionX1Y1","selectionX2Y2","allowIntersect","intersectsWithRect","isContainedWithinRect","toCanvasElement","cropping","scaledWidth","scaledHeight","originalWidth","originalHeight","newZoom","vp","originalInteractive","newVp","originalRetina","originalContextTop","loadFromJSON","json","serialized","JSON","_enlivenObjects","_setBgOverlay","enlivenedCanvasClip","__setupCanvas","loaded","cbIfLoaded","__setBgOverlay","enlivedObject","_toDataURL","_toDataURLWithMultiplier","toDataURLWithMultiplier","stringify","cloneWithoutData","backgroundImageOpacity","backgroundImageStretch","supportsLineDash","objectCaching","ALIASING_LIMIT","touchCornerSize","borderColor","borderDashArray","cornerDashArray","strokeDashOffset","borderOpacityWhenMoving","borderScaleFactor","minScaleLimit","hasControls","hasBorders","lockMovementX","lockMovementY","statefullCache","noScaleCache","dirty","paintFirst","stateProperties","cacheProperties","colorProperties","absolutePositioned","_cacheProperties","_updateCacheCanvas","_limitCacheSize","dims","limitedDims","capped","_getCacheCanvasDimensions","objectScale","getTotalObjectScaling","neededX","neededY","drawingWidth","drawingHeight","minCacheSize","dimensionsChanged","cacheWidth","cacheHeight","zoomChanged","shouldRedraw","additionalWidth","additionalHeight","shouldResizeCanvas","canvasWidth","canvasHeight","sizeGrowing","sizeShrinking","setTransform","needFullTransform","_removeDefaultValues","getObjectScaling","retina","getObjectOpacity","shouldConstrainValue","isChanged","groupNeedsUpdate","_constrainScale","isOnACache","setOnGroup","getViewportTransform","isNotVisible","isOnScreen","_setupCompositeOperation","drawSelectionBackground","_setOpacity","drawCacheOnCanvas","_removeCacheCanvas","drawObject","propertySet","isCacheDirty","hasStroke","hasFill","needsItsOwnCache","ownCaching","willDrawShadow","drawClipPathOnCache","originalFill","originalStroke","_setClippingProperties","_drawClipPath","skipCanvas","_getNonTransformedDimensions","_removeShadow","_setStrokeStyles","decl","lineDashOffset","gradientTrasnform","_applyPatternForTransformedGradient","_applyPatternGradientTransform","_setFillStyles","dashArray","alternative","drawBorders","forActiveSelection","drawBordersInGroup","scaling","multX","multY","_renderPaintInOrder","_renderStroke","_renderFill","_renderDashedStroke","pCtx","pCanvas","_findCenterFromElement","_assignTransformMatrixProps","preserveAspectRatioOptions","cropX","cropY","offsetLeft","offsetTop","objectForm","_fromObject","cloneAsImage","utils","origParams","originalGroup","originalShadow","withoutTransform","withoutShadow","boundingRect","getBoundingRect","shadowOffset","originalCanvas","isType","shouldCenterOrigin","_setOriginToCenter","_resetOrigin","centerH","viewportCenterH","centerV","viewportCenterV","viewportCenter","getLocalPointer","pClicked","objectLeftTop","createAccessors","extraParam","enlivedProps","originXOffset","originYOffset","translateToGivenOrigin","fromOriginX","fromOriginY","toOriginX","toOriginY","translateToCenterPoint","leftTop","getPointByOrigin","adjustPosition","to","offsetFrom","offsetTo","hypotFull","getScaledWidth","xFull","yFull","_originalOriginX","_originalOriginY","originPoint","arrayFromCoords","multiplyMatrices","oCoords","aCoords","lineCoords","ownMatrixCache","matrixCache","_getCoords","absolute","calculate","calcACoords","calcLineCoords","getCoords","pointTL","pointBR","intersection","other","otherCoords","lines","_getImageLines","_findCrossPoints","some","_containsCenterOfCanvas","isPartiallyOnScreen","allPointsAreOutside","every","topline","rightline","bottomline","leftline","xi","iLine","xcount","lineKey","getScaledHeight","scaleToWidth","boundingRectFactor","scaleToHeight","calcCoords","calcOCoords","cosP","sinP","cosPSinP","cosPMinusSinP","_calcRotateMatrix","_calcTranslateMatrix","startMatrix","_calculateCurrentDimensions","forEachControl","w","skipCorners","_setCornerCoords","transformMatrixKey","sep","prefix","cache","tMatrix","_calcDimensionsTransformMatrix","flipping","noSkew","_finalizeDimensions","getSvgColorString","getSvgStyles","skipShadow","getSvgFilter","getSvgSpanStyles","useWhiteSpace","term","textDecoration","getSvgTextDecoration","deltaY","decoration","getSvgCommons","getSvgTransform","full","svgTransform","_setSVGBg","textBgRects","_getFillAttributes","_createBaseSVGMarkup","_toSVG","_createBaseClipPathSVGMarkup","objectMarkup","commonPieces","clipPathMarkup","noStyle","styleInfo","shadowInfo","withShadow","vectorEffect","absoluteClipPath","addPaintOrder","originalSet","saveProps","props","tmpObj","_isEqual","origValue","currentValue","firstPass","dashedPropertySet","forTouch","isControlVisible","touchCorner","controlObject","wh","shouldStroke","setControlVisible","setControlsVisibility","FX_DURATION","fxCenterObjectH","callbacks","empty","fxCenterObjectV","fxRemove","skipCallbacks","propsToAnimate","_animate","propPair","propIsColor","valueProgress","timeProgress","coordProps","makeEdgeToOriginGetter","propertyNames","originValues","axis1","axis2","dimension","nearest","farthest","Line","_setWidthHeight","_getLeftToOriginX","_getTopToOriginY","calcLinePoints","origStrokeStyle","xMult","yMult","ATTRIBUTE_NAMES","parsedAttributes","_callback","pi","isValidRadius","startAngle","endAngle","setRadius","svgString","startX","startY","endX","endY","largeFlag","getRadiusX","getRadiusY","Triangle","widthBy2","heightBy2","piBy2","Ellipse","getRx","getRy","_initRxRy","isRounded","Polyline","_setPositionDimensions","correctLeftTop","calcDim","_calcDimensions","fromSVG","diffX","diffY","commonRender","fromElementGenerator","_class","Polygon","_toString","fromArray","_renderPathCommands","subpathStartX","subpathStartY","_getOffsetTransform","digits","aX","aY","deltaX","pathUrl","useSetOnGroup","isAlreadyGrouped","_updateObjectsACoords","_calcBounds","_updateObjectsCoords","skipControls","_updateObjectCoords","objectLeft","objectTop","nested","_restoreObjectsState","_includeDefaultValues","objsToObject","originalDefaults","_obj","ownCache","groupMatrix","realizeTransform","parentMatrix","destroy","toActiveSelection","ungroupOnCanvas","setObjectsCoords","onlyWidthHeight","iLen","jLen","_getBounds","minXY","maxXY","enlivedClipPath","toGroup","newGroup","childrenOverride","srcFromAttribute","_lastScaleX","_lastScaleY","_filterScalingX","_filterScalingY","minimumScaleTrigger","cacheKey","imageSmoothing","filters","_initElement","_element","setElement","removeTexture","_initConfig","applyFilters","resizeFilter","applyResizeFilters","backend","filterBackend","evictCachesForKey","getCrossOrigin","getOriginalSize","_stroke","filterObj","getSrc","hasCrop","strokeSvg","imageMarkup","imageRendering","getSvgSrc","origFill","filtered","setSrc","minimumScale","elementToFilter","_filteredEl","sourceWidth","sourceHeight","isNeutralState","imgElement","_needsResize","elementToDraw","elWidth","elHeight","sX","sY","sW","sH","maxDestW","maxDestH","_resetWidthHeight","CSS_CANVAS","_initFilters","pAR","rWidth","rHeight","pWidth","pHeight","_object","resizeFilters","fromURL","imgOptions","_getAngleValueForStraighten","straighten","fxStraighten","straightenObject","fxStraightenObject","testPrecision","precision","fragmentSource","fragmentShader","createShader","FRAGMENT_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","setupGLContext","captureGPUInfo","isSupported","getParameter","MAX_TEXTURE_SIZE","precisions","webGlPrecision","createWebGLCanvas","aPosition","Float32Array","chooseFastestCopyGLTo2DMethod","canUseImageData","canMeasurePerf","performance","canUseArrayBuffer","ArrayBuffer","canUseUint8Clamped","copyGLTo2D","startTime","drawImageTime","putImageDataTime","testContext","glOptions","premultipliedAlpha","depth","stencil","antialias","clearColor","cachedTexture","getCachedTexture","sourceTexture","createTexture","targetTexture","originalTexture","passes","webgl","programCache","pass","tempFbo","createFramebuffer","bindFramebuffer","FRAMEBUFFER","applyTo","bindTexture","TEXTURE_2D","deleteTexture","deleteFramebuffer","clearWebGLCaches","textureCache","textureImageSource","texture","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","texImage2D","uniqueId","gpuInfo","renderer","vendor","ext","getExtension","UNMASKED_RENDERER_WEBGL","UNMASKED_VENDOR_WEBGL","sourceElement","originalImageData","originalEl","BaseFilter","vertexSource","createProgram","vertexShader","VERTEX_SHADER","getShaderInfoLog","program","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","attributeLocations","getAttributeLocations","uniformLocations","getUniformLocations","uStepW","getUniformLocation","uStepH","getAttribLocation","sendAttributeData","aPositionData","attributeLocation","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","enableVertexAttribArray","vertexAttribPointer","FLOAT","bufferData","STATIC_DRAW","_setupFrameBuffer","framebufferTexture2D","COLOR_ATTACHMENT0","_swapTextures","main","mainParameter","applyToWebGL","applyTo2d","retrieveShader","shader","useProgram","uniform1f","sendUniformData","viewport","drawArrays","TRIANGLE_STRIP","bindAdditionalTexture","textureUnit","activeTexture","TEXTURE0","unbindAdditionalTexture","getMainParameter","setMainParameter","createHelpLayer","helpLayer","mainP","ColorMatrix","colorsOnly","uColorMatrix","uConstants","constants","uniformMatrix4fv","uniform4fv","Brightness","brightness","uBrightness","Convolute","opaque","Convolute_3_1","Convolute_3_0","Convolute_5_1","Convolute_5_0","Convolute_7_1","Convolute_7_0","Convolute_9_1","Convolute_9_0","dstOff","scx","scy","srcOff","wt","weights","side","halfSide","sw","sh","createImageData","dst","alphaFac","uMatrix","uOpaque","uHalfSize","uSize","uniform1fv","Grayscale","lightness","luminosity","uMode","uniform1i","Invert","invert","uInvert","Noise","noise","rand","uNoise","uSeed","Pixelate","blocksize","_i","_j","_iLen","_jLen","uBlocksize","RemoveColor","useAlpha","lowC","highC","uLow","uHigh","Brownie","Vintage","Kodachrome","Technicolor","Polaroid","Sepia","BlackWhite","BlendColor","screen","diff","lighten","darken","exclusion","tint","buildSource","tg","alpha1","uColor","BlendImage","mask","TEXTURE1","calculateMatrix","canvas1","blendData","blendImage","uTransformMatrix","uImage","uniformMatrix3fv","Resize","resizeType","lanczosLobes","uDelta","uTaps","uniform2fv","horizontal","taps","filterWindow","getFilterWindow","generateShader","tempScale","getTaps","lobeFunction","lanczosCreate","offsets","fragmentSourceTOP","dW","dH","lobes","xx","rcpScaleX","rcpScaleY","newData","oW","oH","sliceByTwo","hermiteFastResize","bilinearFiltering","lanczosResize","tmpCanvas","mult","doneW","doneH","stepW","stepH","dX","dY","u","weight","fX","fY","ratioX","icenter","ratioY","range2X","cacheLanc","range2Y","lanczos","rcpRatioX","rcpRatioY","srcData","destData","destImg","xDiff","yDiff","chnl","origPix","w4","pixels","destImage","destPixels","ratioW","ratioH","ratioWHalf","ratioHHalf","img2","data2","weightsAlpha","gxR","gxG","gxB","gxA","yy","w0","Contrast","contrast","contrastF","uContrast","Saturation","saturation","adjust","uSaturation","Blur","aspectRatio","simpleBlur","canvas2","blurLayer1","blurLayer2","percent","ctx1","ctx2","nSamples","newImageData","delta","chooseRightDelta","blurScale","Gamma","gamma","rInv","gInv","bInv","rVals","gVals","bVals","uGamma","uniform3fv","Composed","subFilters","HueRotation","rotation","rad","aThird","aThirdSqtSin","OneMinusCos","additionalProps","_dimensionAffectingProps","_reNewline","_reSpacesAndTabs","_reSpaceAndTab","_reWords","underline","overline","linethrough","textAlign","superscript","baseline","subscript","textBackgroundColor","_fontSizeFraction","_fontSizeMult","charSpacing","_measuringContext","_styleProperties","__charBounds","CACHE_FONT_SIZE","MIN_TEXT_WIDTH","text","__skipDimension","setPathInfo","initDimensions","segmentsInfo","getMeasuringContext","_splitText","newLines","_splitTextIntoLines","textLines","_textLines","graphemeLines","_unwrappedTextLines","_unwrappedLines","_text","graphemeText","_clearCache","calcTextWidth","cursorWidth","calcTextHeight","enlargeSpaces","diffSpace","currentLineWidth","numberOfSpaces","accumulatedSpace","line","charBound","spaces","isEndOfWrapping","getLineWidth","kernedWidth","lineIndex","missingNewlineOffset","_setTextStyles","_renderTextLinesBackground","_renderTextDecoration","_renderText","_renderTextStroke","_renderTextFill","charStyle","forMeasuring","textBaseline","_getFontDeclaration","maxWidth","_renderTextLine","_renderChars","styleHas","heightOfLine","lineLeftOffset","lastColor","charBox","currentColor","leftOffset","_getLeftOffset","lineTopOffset","_getTopOffset","boxStart","boxWidth","getHeightOfLine","_getLineLeftOffset","getValueOfPropertyAt","renderLeft","getFontCache","cacheProp","_measureChar","previousChar","prevCharStyle","coupleWidth","previousWidth","fontCache","fontDeclaration","previousFontDeclaration","couple","stylesAreEqual","fontMultiplier","measureText","getHeightOfChar","measureLine","lineInfo","_measureLine","_getWidthOfCharSpacing","grapheme","prevGrapheme","graphemeInfo","startingPoint","totalPathLength","numOfSpaces","lineBounds","positionInPath","_getGraphemeBox","_setGraphemeOnPath","centerPosition","skipLeft","getCompleteStyleDeclaration","prevStyle","previousBox","__lineHeights","maxHeight","_renderTextCommon","lineHeights","isEmptyStyles","actualStyle","nextStyle","timeToRender","isJustify","charsToRender","shortCut","_renderChar","_hasStyleChanged","_applyPatternGradientTransformText","handleFiller","fillOffsets","strokeOffsets","_getStyleDeclaration","fullDecl","shouldFill","fillText","strokeText","setSuperscript","_setScript","setSubscript","schema","loc","get2DCursorLocation","setSelectionStyles","thisStyle","_hasStyleChangedForSvg","__lineWidths","_shouldClearDimensionCache","shouldClear","_forceClearCache","_size","_dy","lastDecoration","currentDecoration","currentFill","lastFill","topOffset","styleObject","family","fontIsGeneric","genericFonts","newLine","newText","additionalProperties","needsDims","isAddingPath","_key","parsedAnchor","textAnchor","originalStrokeWidth","textHeightScaleFactor","lineHeightDiff","scaledDiff","textHeight","offX","objectCopy","textInstance","pathInstance","p3","0","cleanStyle","letterCount","stylePropertyValue","stylesCount","allStyleObjectPropertiesMatch","graphemeCount","stylePropertyHasBeenSet","removeStyle","lineNum","charNum","_extendStyles","_getLineStyle","_setLineStyle","_setStyleDeclaration","selectionStart","skipWrapping","getSelectionStyles","startIndex","endIndex","selectionEnd","getStyleAtPosition","lineStyle","_deleteStyleDeclaration","_deleteLineStyle","parseDecoration","IText","editable","editingBorderColor","cursorColor","cursorDelay","cursorDuration","caching","_reSpace","_currentCursorOpacity","_selectionDirection","_abortCursorAnimation","__widthOfSpace","inCompositionMode","initBehavior","setSelectionStart","_updateAndFire","setSelectionEnd","_fireSelectionChanged","_updateTextarea","initDelayedCursor","cursorOffsetCache","renderCursorOrSelection","skipRestore","_clearTextArea","boundaries","_getCursorBoundaries","renderCursor","renderSelection","_getCursorBoundariesOffsets","cursorPosition","cursorLocation","charHeight","__isMousedown","startLine","endLine","startChar","endChar","lineOffset","realLineHeight","boxEnd","compositionColor","getCurrentCharFontSize","cp","_getCurrentCharIndex","getCurrentCharColor","initAddedHandler","initRemovedHandler","initCursorSelectionHandlers","initDoubleClickSimulation","mouseMoveHandler","_initCanvasHandlers","_removeCanvasHandlers","_tick","_currentTickState","_animateCursor","targetOpacity","completeMethod","tickState","isAborted","_onTickComplete","_cursorTimeout1","_currentTickCompleteState","restart","delay","abortCursorAnimation","_cursorTimeout2","selectAll","getSelectedText","findWordBoundaryLeft","startFrom","findWordBoundaryRight","findLineBoundaryLeft","findLineBoundaryRight","searchWordBoundary","direction","selectWord","newSelectionStart","newSelectionEnd","selectLine","enterEditing","exitEditingOnOthers","initHiddenTextarea","_saveEditingProps","_setEditingProps","_textBeforeEdit","initMouseMoveHandler","getSelectionStartFromPointer","currentStart","currentEnd","__selectionStartOnMouseDown","restartCursorIfNeeded","fromStringToGraphemeSelection","smallerTextStart","graphemeStart","smallerTextEnd","graphemeEnd","fromGraphemeToStringSelection","newSelection","updateTextareaPosition","updateFromTextArea","_calcTextareaPosition","desiredPosition","compositionStart","upperCanvas","upperCanvasWidth","upperCanvasHeight","clientWidth","clientHeight","_savedProps","_restoreEditingProps","isTextChanged","_removeExtraneousStyles","removeStyleFromTo","styleObj","cursorStart","cursorEnd","lineStart","charStart","lineEnd","charEnd","shiftLineStyles","numericChar","clonedStyles","numericLine","insertNewlineStyleObject","qty","copiedStyle","currentCharStyle","newLineStyles","somethingAdded","isEndOfLine","numIndex","styleCarriedOver","insertCharStyleObject","quantity","currentLineStyles","currentLineStylesCloned","numericIndex","newStyle","insertNewStyleBlock","insertedText","cursorLoc","addedLines","linesLength","setSelectionStartEndWithShift","setSelectionInBoundaries","__lastClickTime","__lastLastClickTime","__lastPointer","__newClickTime","newPointer","isTripleClick","_stopEvent","__lastIsEditing","__lastSelected","initMousedownHandler","initMouseupHandler","initClicks","doubleClickHandler","tripleClickHandler","_mouseDownHandler","setCursorByClick","_mouseDownHandlerBefore","currentActive","mouseOffset","prevWidth","_getNewSelectionStartFromOffset","distanceBtwLastCharAndCursor","distanceBtwNextCharAndCursor","onKeyDown","onKeyUp","onInput","copy","paste","onCompositionStart","onCompositionUpdate","onCompositionEnd","_clickHandlerInitialized","onClick","keysMap","9","27","33","34","35","36","37","38","39","40","ctrlKeysMapUp","67","88","ctrlKeysMapDown","65","keyCode","ctrlKey","metaKey","stopImmediatePropagation","_copyDone","fromPaste","removedText","removeFrom","removeTo","nextText","charCount","nextCharCount","charDiff","textareaSelection","backDelete","copiedText","copiedTextStyle","compositionEnd","_getClipboardData","clipboardData","_getWidthBeforeCursor","widthBeforeCursor","getDownCursorOffset","isRight","selectionProp","_getSelectionForOffset","indexOnOtherLine","_getIndexOnLine","textAfterCursor","getUpCursorOffset","textBeforeCursor","charWidth","foundMatch","widthOfCharsOnLine","indexOnLine","leftEdge","rightEdge","offsetFromLeftEdge","offsetFromRightEdge","moveCursorDown","_moveCursorUpOrDown","moveCursorUp","moveCursorWithShift","moveCursorWithoutShift","moveCursorLeft","_moveCursorLeftOrRight","_move","_moveLeft","_moveRight","moveCursorLeftWithoutShift","change","moveCursorLeftWithShift","moveCursorRight","moveCursorRightWithShift","moveCursorRightWithoutShift","changed","removeChars","insertChars","multipleSpacesRegex","_getSVGLeftTopOffsets","textAndBg","_getSVGTextAndBg","textTop","textLeft","_wrapSVGTextAndBg","lineTop","noShadow","textSpans","textTopOffset","textLeftOffset","_setSVGTextLineBg","_setSVGTextLineText","_createTextCharSpan","styleDecl","shouldUseWhitespace","styleProps","fillStyles","dySpan","_pushTextBgRect","fillColor","_getSVGLineTopOffset","lastHeight","svgStyle","Textbox","minWidth","dynamicMinWidth","__cachedLines","_wordJoiners","splitByGrapheme","_styleMap","_generateStyleMap","textInfo","realLineCount","realLineCharCount","isWrapping","nextOffset","nextLineIndex","shouldLimit","mapNextLine","_wrapText","desiredWidth","wrapped","_wrapLine","_measureWord","word","charOffset","_line","reservedSpace","words","infix","wordWidth","infixWidth","largestWordWidth","lineJustStarted","additionalSpace","getMinWidth","linesToKeep","scaleSkewStyleHandler","scaleStyleHandler","objectControls","ml","mr","mb","mtr","textBoxControls","activeXDocument","documentCreateElement","GT","LT","PROTOTYPE","SCRIPT","IE_PROTO","EmptyConstructor","scriptTag","content","NullProtoObjectViaActiveX","write","close","parentWindow","NullProtoObjectViaIFrame","iframeDocument","iframe","JS","contentWindow","NullProtoObject","domain","ActiveXObject","createIteratorConstructor","IteratorsCore","IteratorPrototype","BUGGY_SAFARI_ITERATORS","KEYS","VALUES","ENTRIES","returnThis","Iterable","IteratorConstructor","DEFAULT","IS_SET","CurrentIteratorPrototype","methods","getIterationMethod","KIND","defaultIterator","IterablePrototype","INCORRECT_VALUES_NAME","nativeIterator","anyNativeIterator","values","endPos","propertyKey","functionToString","postfix","read","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","Infinity","rt","LN2","replacement","feature","detection","POLYFILL","NATIVE","$defineProperty","Attributes","makeMap","expectsLowerCase","val","GLOBALS_WHITE_LISTED","isGloballyWhitelisted","specialBooleanAttrs","isSpecialBooleanAttr","normalizeStyle","res","normalized","isString","parseStringStyle","listDelimiterRE","propertyDelimiterRE","ret","normalizeClass","HTML_TAGS","SVG_TAGS","isHTMLTag","isSVGTag","looseCompareArrays","equal","looseEqual","aValidType","isDate","bValidType","getTime","aKeysCount","bKeysCount","aHasKey","bHasKey","looseIndexOf","findIndex","toDisplayString","replacer","isMap","isSet","isPlainObject","EMPTY_OBJ","EMPTY_ARR","NOOP","NO","onRE","isOn","isModelListener","startsWith","hasOwn","toTypeString","isFunction","isSymbol","isPromise","then","catch","objectToString","toRawType","isIntegerKey","isReservedProp","cacheStringFunction","hit","camelizeRE","_","hyphenateRE","hyphenate","toHandlerKey","hasChanged","oldValue","invokeArrayFns","fns","arg","def","toNumber","NATIVE_SYMBOL","USE_SYMBOL_AS_UID","nativeObjectCreate","getOwnPropertyNamesExternal","getOwnPropertyDescriptorModule","uid","defineWellKnownSymbol","HIDDEN","SYMBOL","TO_PRIMITIVE","ObjectPrototype","$Symbol","$stringify","nativeGetOwnPropertyDescriptor","nativeDefineProperty","nativeGetOwnPropertyNames","nativePropertyIsEnumerable","AllSymbols","ObjectPrototypeSymbols","StringToSymbolRegistry","SymbolToStringRegistry","WellKnownSymbolsStore","QObject","USE_SETTER","findChild","setSymbolDescriptor","ObjectPrototypeDescriptor","wrap","tag","description","$defineProperties","$getOwnPropertySymbols","$propertyIsEnumerable","$create","V","names","IS_OBJECT_PROTOTYPE","setter","keyFor","sym","useSetter","useSimple","FORCED_JSON_STRINGIFY","space","$replacer","NativePromise","speciesConstructor","promiseResolve","NON_GENERIC","real","onFinally","ignoreCase","multiline","dotAll","unicode","sticky","PrototypeOfArrayIteratorPrototype","arrayIterator","NEW_ITERATOR_PROTOTYPE","TO_STRING_TAG_SUPPORT","flush","head","notify","promise","macrotask","IS_WEBOS_WEBKIT","MutationObserver","WebKitMutationObserver","Promise","queueMicrotaskDescriptor","queueMicrotask","exit","enter","resolve","createTextNode","observe","characterData","task","createWellKnownSymbol","withoutSetter","base64","ieee754","typedArraySupport","__proto__","subarray","kMaxLength","TYPED_ARRAY_SUPPORT","RangeError","encodingOrOffset","allocUnsafe","fromArrayBuffer","fromString","assertSize","alloc","checked","isEncoding","actual","fromArrayLike","byteOffset","isBuffer","isnan","SlowBuffer","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","bidirectionalIndexOf","dir","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","buf","readUInt16BE","foundIndex","found","hexWrite","remaining","strLen","utf8Write","blitBuffer","asciiWrite","asciiToBytes","latin1Write","base64Write","ucs2Write","utf16leToBytes","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","decodeCodePointsArray","INSPECT_MAX_BYTES","poolSize","_augment","species","allocUnsafeSlow","_isBuffer","compare","swap16","swap32","swap64","equals","inspect","thisStart","thisEnd","thisCopy","targetCopy","isFinite","_arr","MAX_ARGUMENTS_LENGTH","codePoints","fromCharCode","out","bytes","checkOffset","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","maxBytes","writeUIntBE","writeUInt8","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","limit","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","base64clean","stringtrim","units","leadSurrogate","byteArray","hi","lo","nativeKeys","arraySpeciesCreate","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_OUT","NO_HOLES","specificCreate","filterOut","isExtensible","preventExtensions","input","PREFERRED_STRING","SHARED","addToUnscopables","EXISTS","_classCallCheck","_defineProperties","_createClass","protoProps","staticProps","_setPrototypeOf","_inherits","subClass","superClass","_getPrototypeOf","_isNativeReflectConstruct","Reflect","Proxy","_assertThisInitialized","ReferenceError","_possibleConstructorReturn","assertThisInitialized","_createSuper","Derived","hasNativeReflectConstruct","isNativeReflectConstruct","Super","possibleConstructorReturn","_isNativeFunction","_construct","Parent","Class","_wrapNativeSuper","_cache","Map","isNativeFunction","targetMap","effectStack","activeEffect","ITERATE_KEY","MAP_KEY_ITERATE_KEY","isEffect","_isEffect","raw","effect","createReactiveEffect","lazy","onStop","scheduler","enableTracking","resetTracking","allowRecurse","deps","delete","shouldTrack","trackStack","pauseTracking","track","depsMap","dep","Set","trigger","effects","effectsToAdd","isNonTrackableKeys","builtInSymbols","createGetter","shallowGet","readonlyGet","shallowReadonlyGet","arrayInstrumentations","isReadonly","shallow","receiver","shallowReadonlyMap","readonlyMap","shallowReactiveMap","reactiveMap","targetIsArray","isRef","shouldUnwrap","readonly","reactive","toRaw","createSetter","shallowSet","hadKey","deleteProperty","ownKeys","mutableHandlers","readonlyHandlers","shallowReactiveHandlers","toReactive","toReadonly","toShallow","getProto","get$1","isShallow","rawTarget","rawKey","has$1","set$1","deleteEntry","hadItems","createForEach","thisArg","observed","createIterableMethod","targetIsMap","isPair","isKeyOnly","innerIterator","createReadonlyMethod","mutableInstrumentations","shallowInstrumentations","readonlyInstrumentations","shallowReadonlyInstrumentations","iteratorMethods","createInstrumentationGetter","instrumentations","mutableCollectionHandlers","shallowCollectionHandlers","readonlyCollectionHandlers","targetTypeMap","rawType","getTargetType","createReactiveObject","shallowReactive","baseHandlers","collectionHandlers","proxyMap","existingProxy","targetType","proxy","isReactive","isProxy","__v_isRef","unref","ref","shallowUnwrapHandlers","proxyRefs","objectWithRefs","ObjectRefImpl","newVal","toRef","ComputedRefImpl","_setter","_dirty","_value","getterOrOptions","callWithErrorHandling","handleError","callWithAsyncErrorHandling","throwInDev","contextVNode","vnode","cur","exposedInstance","errorInfo","errorCapturedHooks","ec","appErrorHandler","appContext","errorHandler","logError","isFlushing","isFlushPending","flushIndex","pendingPreFlushCbs","activePreFlushCbs","preFlushIndex","pendingPostFlushCbs","activePostFlushCbs","postFlushIndex","resolvedPromise","currentFlushPromise","currentPreFlushParentJob","findInsertionIndex","job","jobId","getId","middle","middleJobId","queueJob","queueFlush","flushJobs","invalidateJob","queueCb","activeQueue","pendingQueue","queuePreFlushCb","queuePostFlushCb","flushPreFlushCbs","seen","parentJob","flushPostFlushCbs","deduped","rawArgs","modelArg","modifiersKey","handlerName","onceHandler","emitted","normalizeEmitsOptions","comp","asMixin","deopt","__emits","emits","hasExtends","extendEmits","normalizedFromExtend","mixins","extends","isEmitListener","isRenderingCompiledSlot","setCompiledSlotRendering","currentRenderingInstance","currentScopeId","setCurrentRenderingInstance","__scopeId","withCtx","renderFnWithContext","openBlock","prevInstance","closeBlock","_c","renderComponentRoot","Component","withProxy","propsOptions","slots","emit","fallthroughAttrs","shapeFlag","proxyToUse","normalizeVNode","getFunctionalFallthrough","inheritAttrs","filterModelListeners","cloneVNode","dirs","transition","blockStack","createVNode","Comment","filterSingleRoot","singleRoot","child","isVNode","shouldUpdateComponent","prevVNode","nextVNode","optimized","prevProps","prevChildren","component","nextProps","nextChildren","patchFlag","emitsOptions","$stable","hasPropsChanged","dynamicProps","nextKeys","updateHOCHostEl","subTree","isSuspense","__isSuspense","normalizeSuspenseChildren","fallback","normalizeSuspenseSlot","default","singleChild","queueEffectWithSuspense","suspense","pendingBranch","initProps","rawProps","isStateful","isSSR","InternalObjectKey","propsDefaults","setFullProps","updateProps","rawPrevProps","rawCurrentProps","kebabKey","resolvePropValue","propsToUpdate","camelizedKey","needCastKeys","camelKey","opt","hasDefault","defaultValue","setCurrentInstance","normalizePropsOptions","__props","extendProps","normalizedKey","validatePropName","booleanIndex","getTypeIndex","stringIndex","getType","ctor","isSameType","expectedTypes","injectHook","hook","currentInstance","prepend","hooks","wrappedHook","__weh","isUnmounted","createHook","lifecycle","isInSSRComponentSetup","onBeforeMount","onMounted","onBeforeUpdate","onUpdated","onBeforeUnmount","onUnmounted","onRenderTriggered","onRenderTracked","onErrorCaptured","INITIAL_WATCHER_VALUE","watch","doWatch","immediate","onTrack","onTrigger","cleanup","forceTrigger","_shallow","traverse","onInvalidate","baseGetter","queuePostRenderEffect","isMounted","recordInstanceBoundEffect","instanceWatch","publicThis","useTransitionState","isLeaving","isUnmounting","leavingVNodes","TransitionHookValidator","BaseTransitionImpl","appear","persisted","onBeforeEnter","onEnter","onAfterEnter","onEnterCancelled","onBeforeLeave","onLeave","onAfterLeave","onLeaveCancelled","onBeforeAppear","onAppear","onAfterAppear","onAppearCancelled","getCurrentInstance","prevTransitionKey","getTransitionRawChildren","emptyPlaceholder","innerChild","getKeepAliveChild","enterHooks","resolveTransitionHooks","setTransitionHooks","oldChild","oldInnerChild","transitionKeyChanged","getTransitionKey","isSameVNodeType","leavingHooks","afterLeave","update","delayLeave","earlyRemove","delayedLeave","leavingVNodesCache","getLeavingNodesForType","_leaveCb","BaseTransition","callHook","leavingVNode","afterHook","cancelHook","_enterCb","cancelled","isKeepAlive","ssContent","ssFallback","keepComment","keyedFragmentCount","Fragment","__isKeepAlive","matches","onActivated","registerKeepAliveHook","onDeactivated","__wdc","isDeactivated","injectToKeepAliveRoot","keepAliveRoot","injected","resetShapeFlag","getInnerChild","isInternalKey","normalizeSlotValue","normalizeSlot","rawSlot","normalizeObjectSlots","rawSlots","_ctx","normalizeVNodeSlots","initSlots","updateSlots","needDeletionCheck","deletionComparisonTarget","withDirectives","directives","internalInstance","bindings","modifiers","mounted","invokeDirectiveHook","oldBindings","binding","createAppContext","app","isNativeTag","globalProperties","optionMergeStrategies","isCustomElement","warnHandler","components","provides","createAppAPI","hydrate","rootComponent","rootProps","installedPlugins","_uid","_component","_props","_container","_context","plugin","install","mixin","directive","rootContainer","isHydrate","isSVG","__vue_app__","initFeatureFlags","defineComponent","setup","isAsyncWrapper","__asyncLoader","prodEffectOptions","setRef","rawRef","oldRawRef","parentSuspense","exposed","owner","oldRef","refs","doSet","createRenderer","baseCreateRenderer","createHydrationFns","insert","hostInsert","hostRemove","patchProp","hostPatchProp","forcePatchProp","hostForcePatchProp","hostCreateElement","createText","hostCreateText","createComment","hostCreateComment","setText","hostSetText","setElementText","hostSetElementText","hostParentNode","nextSibling","hostNextSibling","setScopeId","hostSetScopeId","hostCloneNode","insertStaticContent","hostInsertStaticContent","patch","n1","n2","anchor","parentComponent","slotScopeIds","getNextHostNode","unmount","dynamicChildren","processText","processCommentNode","Static","mountStaticNode","processFragment","processElement","processComponent","internals","moveStaticNode","removeStaticNode","mountElement","patchElement","vnodeHook","is","mountChildren","unmountChildren","onVnodeBeforeMount","invokeVNodeHook","scopeId","needCallTransitionHooks","beforeEnter","onVnodeMounted","parentVNode","cloneIfMounted","oldProps","newProps","onVnodeBeforeUpdate","patchProps","class","areChildrenSVG","patchBlockChildren","patchChildren","onVnodeUpdated","oldChildren","newChildren","fallbackContainer","oldVNode","newVNode","fragmentStartAnchor","fragmentEndAnchor","fragmentSlotScopeIds","traverseStaticChildren","activate","mountComponent","updateComponent","initialVNode","createComponentInstance","setupComponent","asyncDep","registerDep","setupRenderEffect","placeholder","asyncResolved","updateComponentPreRender","bu","originNext","nextTree","prevTree","bm","hydrateNode","scopedInitialVNode","prevShapeFlag","patchKeyedChildren","patchUnkeyedChildren","newLength","commonLength","nextChild","parentAnchor","l2","e1","e2","nextPos","s1","s2","keyToNewIndexMap","patched","toBePatched","moved","maxNewIndexSoFar","newIndexToOldIndexMap","prevChild","newIndex","increasingNewIndexSequence","getSequence","nextIndex","move","moveType","needTransition","leave","performLeave","doRemove","deactivate","shouldInvokeDirs","onVnodeBeforeUnmount","unmountComponent","onVnodeUnmounted","removeFragment","performRemove","bum","um","suspenseId","pendingId","_vnode","mc","pc","pbc","createApp","ch1","ch2","arrI","isTeleport","__isTeleport","NULL_DYNAMIC_COMPONENT","currentBlock","disableTracking","createBlock","__v_isVNode","normalizeKey","normalizeRef","_createVNode","isBlockNode","cloned","normalizeChildren","isClassComponent","__vccOpts","targetAnchor","staticCount","extraProps","mergeRef","mergedProps","mergeProps","createTextVNode","flag","slot","slotFlag","toMerge","existing","incoming","provide","parentProvides","inject","treatDefaultAsFactory","shouldCacheAccess","applyOptions","deferredData","deferredWatch","deferredProvide","extendsOptions","dataOptions","computed","computedOptions","watchOptions","provideOptions","injectOptions","beforeMount","beforeUpdate","activated","deactivated","beforeDestroy","beforeUnmount","destroyed","unmounted","renderTracked","renderTriggered","errorCaptured","expose","globalMixins","callSyncHook","applyMixins","methodHandler","dataFn","resolveData","createWatcher","callHookWithMixinAndExtends","base","selfHook","createPathGetter","resolveMergedOptions","__merged","mergeOptions","strats","getPublicInstance","isStatefulComponent","publicPropertiesMap","$el","$data","$props","$attrs","$slots","$refs","$parent","$root","$emit","$options","$forceUpdate","$nextTick","$watch","PublicInstanceProxyHandlers","accessCache","normalizedProps","publicGetter","cssModule","__cssModules","RuntimeCompiledPublicInstanceProxyHandlers","unscopables","emptyAppContext","uid$1","setupContext","bc","rtg","rtc","compile","setupResult","setupStatefulComponent","createSetupContext","resolvedResult","handleSetupResult","finishComponentSetup","template","delimiters","_rc","getComponentName","displayName","propsOrChildren","tempContainer","tempSVGContainer","nodeOps","insertBefore","multiple","innerHTML","patchClass","transitionClasses","_vtc","patchStyle","importantRE","setProperty","prefixed","autoPrefix","prefixes","prefixCache","rawName","cached","xlinkNS","patchAttr","removeAttributeNS","isBoolean","patchDOMProp","_getNow","skipTimestampCheck","createEvent","timeStamp","ffMatch","cachedNow","getNow","patchEvent","prevValue","nextValue","invokers","_vei","existingInvoker","parseName","invoker","createInvoker","optionsModifierRE","initialValue","attached","patchStopImmediatePropagation","originalStop","_stopped","nativeOnRE","shouldSetAsProp","_trueValue","_falseValue","TRANSITION","ANIMATION","Transition","resolveTransitionProps","DOMTransitionPropsValidators","css","enterFromClass","enterActiveClass","enterToClass","appearFromClass","appearActiveClass","appearToClass","leaveFromClass","leaveActiveClass","leaveToClass","baseProps","durations","normalizeDuration","enterDuration","leaveDuration","finishEnter","isAppear","removeTransitionClass","finishLeave","makeEnterHook","nextFrame","addTransitionClass","whenTransitionEnds","forceReflow","NumberOf","cls","classList","endId","expectedType","explicitTimeout","_endId","resolveIfNotStale","timeout","propCount","getTransitionInfo","endEvent","ended","onEnd","getStyleProperties","transitionDelays","transitionDurations","transitionTimeout","getTimeout","animationDelays","animationDurations","animationTimeout","hasTransform","delays","toMs","offsetHeight","getModelAssigner","composing","initEvent","dispatchEvent","vModelText","_assign","castToNumber","domValue","activeElement","rendererOptions","ensureRenderer","mount","containerOrSelector","normalizeContainer","SVGElement","addLine","addRect","addCircle","addTextBox","_defineProperty","enumerableOnly","symbols","_objectSpread2","getOwnPropertyDescriptors","THEME_COLOR","WHITE","ORANGE","useFabric","canvasId","selectedObject","defaultObjectOption","backGroundUrl","updateSelectedObject","clearSelectedObject","addObject","removeObject","removeSelectedObject","textBox","toBase64","required","onSave","newColor","newObject","rootDiv","append","App","CustomEvent","detail","HTMLElement","customElements","newPromiseCapability","promiseCapability","variable","NASHORN_BUG","1","aPossiblePrototype","CORRECT_SETTER","TAG","check","globalThis","createProperty","ArrayIteratorMethods","ArrayValues","NativeSymbol","EmptyStringDescriptionStore","SymbolWrapper","symbolPrototype","symbolToString","native","regexp","desc","ARRAY_ITERATOR","Arguments","Internal","OwnPromiseCapability","PromiseWrapper","nativeThen","microtask","hostReportErrors","newPromiseCapabilityModule","perform","PROMISE","getInternalPromiseState","PromiseConstructor","$fetch","newGenericPromiseCapability","DISPATCH_EVENT","NATIVE_REJECTION_EVENT","PromiseRejectionEvent","UNHANDLED_REJECTION","REJECTION_HANDLED","PENDING","FULFILLED","REJECTED","HANDLED","UNHANDLED","GLOBAL_CORE_JS_PROMISE","FakePromise","INCORRECT_ITERATION","all","isThenable","isReject","notified","chain","reactions","ok","exited","reaction","fail","reject","rejection","onHandleUnhandled","onUnhandled","reason","IS_UNHANDLED","isUnhandled","unwrap","internalReject","internalResolve","executor","onFulfilled","onRejected","fetch","capability","$promiseResolve","alreadyCalled","race","PromiseCapability","$$resolve","$$reject","FREEZING","METADATA","setMetadata","objectID","weakData","getWeakData","onFreeze","meta","classofRaw","CORRECT_ARGUMENTS","tryGet","callee","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","'use strict';\nvar aFunction = require('../internals/a-function');\nvar isObject = require('../internals/is-object');\n\nvar slice = [].slice;\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!(argsLength in factories)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func -- we have no proper alternatives, IE8- only\n    factories[argsLength] = Function('C,a', 'return new C(' + list.join(',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.es/ecma262/#sec-function.prototype.bind\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = slice.call(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = partArgs.concat(slice.call(arguments));\n    return this instanceof boundFunction ? construct(fn, args.length, args) : fn.apply(that, args);\n  };\n  if (isObject(fn.prototype)) boundFunction.prototype = fn.prototype;\n  return boundFunction;\n};\n","/* eslint-disable es/no-object-getownpropertynames -- safe */\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar $getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\n\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return $getOwnPropertyNames(it);\n  } catch (error) {\n    return windowNames.slice();\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]'\n    ? getWindowNames(it)\n    : $getOwnPropertyNames(toIndexedObject(it));\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- requied for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n} : [].forEach;\n","module.exports = function (it, Constructor, name) {\n  if (!(it instanceof Constructor)) {\n    throw TypeError('Incorrect ' + (name ? name + ' ' : '') + 'invocation');\n  } return it;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line es/no-array-from, no-throw-literal -- required for testing\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n","var userAgent = require('../internals/engine-user-agent');\n\nmodule.exports = /(?:iphone|ipod|ipad).*applewebkit/i.test(userAgent);\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","var anObject = require('../internals/an-object');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that, 1 + AS_ENTRIES + INTERRUPTED);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (typeof iterFn != 'function') throw TypeError('Target is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = toLength(iterable.length); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && result instanceof Result) return result;\n      } return new Result(false);\n    }\n    iterator = iterFn.call(iterable);\n  }\n\n  next = iterator.next;\n  while (!(step = next.call(iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator);\n      throw error;\n    }\n    if (typeof result == 'object' && result && result instanceof Result) return result;\n  } return new Result(false);\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar definePropertyModule = require('../internals/object-define-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);\n  var defineProperty = definePropertyModule.f;\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {\n    defineProperty(Constructor, SPECIES, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n","var anObject = require('../internals/an-object');\n\nmodule.exports = function (iterator) {\n  var returnMethod = iterator['return'];\n  if (returnMethod !== undefined) {\n    return anObject(returnMethod.call(iterator)).value;\n  }\n};\n","var global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar bind = require('../internals/function-bind-context');\nvar html = require('../internals/html');\nvar createElement = require('../internals/document-create-element');\nvar IS_IOS = require('../internals/engine-is-ios');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar location = global.location;\nvar set = global.setImmediate;\nvar clear = global.clearImmediate;\nvar process = global.process;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\n\nvar run = function (id) {\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\n\nvar runner = function (id) {\n  return function () {\n    run(id);\n  };\n};\n\nvar listener = function (event) {\n  run(event.data);\n};\n\nvar post = function (id) {\n  // old engines have not location.origin\n  global.postMessage(id + '', location.protocol + '//' + location.host);\n};\n\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!set || !clear) {\n  set = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func -- spec requirement\n      (typeof fn == 'function' ? fn : Function(fn)).apply(undefined, args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clear = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (IS_NODE) {\n    defer = function (id) {\n      process.nextTick(runner(id));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(runner(id));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  // except iOS - https://github.com/zloirock/core-js/issues/624\n  } else if (MessageChannel && !IS_IOS) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = bind(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (\n    global.addEventListener &&\n    typeof postMessage == 'function' &&\n    !global.importScripts &&\n    location && location.protocol !== 'file:' &&\n    !fails(post)\n  ) {\n    defer = post;\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in createElement('script')) {\n    defer = function (id) {\n      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(runner(id), 0);\n    };\n  }\n}\n\nmodule.exports = {\n  set: set,\n  clear: clear\n};\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  version = match[0] + match[1];\n} else if (userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = match[1];\n  }\n}\n\nmodule.exports = version && +version;\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toObject = require('../internals/to-object');\nvar nativeGetPrototypeOf = require('../internals/object-get-prototype-of');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetPrototypeOf(1); });\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !CORRECT_PROTOTYPE_GETTER }, {\n  getPrototypeOf: function getPrototypeOf(it) {\n    return nativeGetPrototypeOf(toObject(it));\n  }\n});\n\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","var classof = require('../internals/classof');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it) && it !== null) {\n    throw TypeError(\"Can't set \" + String(it) + ' as a prototype');\n  } return it;\n};\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: String(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","module.exports = {};\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var global = require('../internals/global');\n\nmodule.exports = function (a, b) {\n  var console = global.console;\n  if (console && console.error) {\n    arguments.length === 1 ? console.error(a) : console.error(a, b);\n  }\n};\n","var anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aFunction(S);\n};\n","var IS_NODE = require('../internals/engine-is-node');\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  // eslint-disable-next-line es/no-symbol -- required for testing\n  return !Symbol.sham &&\n    // Chrome 38 Symbol has incorrect toString conversion\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    (IS_NODE ? V8_VERSION === 38 : V8_VERSION > 37 && V8_VERSION < 41);\n});\n","var $ = require('../internals/export');\nvar getBuiltIn = require('../internals/get-built-in');\nvar aFunction = require('../internals/a-function');\nvar anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar create = require('../internals/object-create');\nvar bind = require('../internals/function-bind');\nvar fails = require('../internals/fails');\n\nvar nativeConstruct = getBuiltIn('Reflect', 'construct');\n\n// `Reflect.construct` method\n// https://tc39.es/ecma262/#sec-reflect.construct\n// MS Edge supports only 2 arguments and argumentsList argument is optional\n// FF Nightly sets third argument as `new.target`, but does not create `this` from it\nvar NEW_TARGET_BUG = fails(function () {\n  function F() { /* empty */ }\n  return !(nativeConstruct(function () { /* empty */ }, [], F) instanceof F);\n});\nvar ARGS_BUG = !fails(function () {\n  nativeConstruct(function () { /* empty */ });\n});\nvar FORCED = NEW_TARGET_BUG || ARGS_BUG;\n\n$({ target: 'Reflect', stat: true, forced: FORCED, sham: FORCED }, {\n  construct: function construct(Target, args /* , newTarget */) {\n    aFunction(Target);\n    anObject(args);\n    var newTarget = arguments.length < 3 ? Target : aFunction(arguments[2]);\n    if (ARGS_BUG && !NEW_TARGET_BUG) return nativeConstruct(Target, args, newTarget);\n    if (Target == newTarget) {\n      // w/o altered newTarget, optimization for 0-4 arguments\n      switch (args.length) {\n        case 0: return new Target();\n        case 1: return new Target(args[0]);\n        case 2: return new Target(args[0], args[1]);\n        case 3: return new Target(args[0], args[1], args[2]);\n        case 4: return new Target(args[0], args[1], args[2], args[3]);\n      }\n      // w/o altered newTarget, lot of arguments case\n      var $args = [null];\n      $args.push.apply($args, args);\n      return new (bind.apply(Target, $args))();\n    }\n    // with altered newTarget, not support built-in constructors\n    var proto = newTarget.prototype;\n    var instance = create(isObject(proto) ? proto : Object.prototype);\n    var result = Function.apply.call(Target, instance, args);\n    return isObject(result) ? result : instance;\n  }\n});\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Map` constructor\n// https://tc39.es/ecma262/#sec-map-objects\nmodule.exports = collection('Map', function (init) {\n  return function Map() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.10.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: ' 2021 Denis Pushkarev (zloirock.ru)'\n});\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var classof = require('../internals/classof-raw');\nvar global = require('../internals/global');\n\nmodule.exports = classof(global.process) == 'process';\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\n\n// eslint-disable-next-line es/no-object-assign -- safe\nvar $assign = Object.assign;\n// eslint-disable-next-line es/no-object-defineproperty -- required for testing\nvar defineProperty = Object.defineProperty;\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\nmodule.exports = !$assign || fails(function () {\n  // should have correct order of operations (Edge bug)\n  if (DESCRIPTORS && $assign({ b: 1 }, $assign(defineProperty({}, 'a', {\n    enumerable: true,\n    get: function () {\n      defineProperty(this, 'b', {\n        value: 3,\n        enumerable: false\n      });\n    }\n  }), { b: 2 })).b !== 1) return true;\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line es/no-symbol -- safe\n  var symbol = Symbol();\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return $assign({}, A)[symbol] != 7 || objectKeys($assign({}, B)).join('') != alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`\n  var T = toObject(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject(arguments[index++]);\n    var keys = getOwnPropertySymbols ? objectKeys(S).concat(getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","var toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.{ codePointAt, at }` methods implementation\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = String(requireObjectCoercible($this));\n    var position = toInteger(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = S.charCodeAt(position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING ? S.charAt(position) : first\n        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.es/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","'use strict';\nvar defineProperty = require('../internals/object-define-property').f;\nvar create = require('../internals/object-create');\nvar redefineAll = require('../internals/redefine-all');\nvar bind = require('../internals/function-bind-context');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar defineIterator = require('../internals/define-iterator');\nvar setSpecies = require('../internals/set-species');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fastKey = require('../internals/internal-metadata').fastKey;\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, CONSTRUCTOR_NAME);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        index: create(null),\n        first: undefined,\n        last: undefined,\n        size: 0\n      });\n      if (!DESCRIPTORS) that.size = 0;\n      if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var entry = getEntry(that, key);\n      var previous, index;\n      // change existing entry\n      if (entry) {\n        entry.value = value;\n      // create new entry\n      } else {\n        state.last = entry = {\n          index: index = fastKey(key, true),\n          key: key,\n          value: value,\n          previous: previous = state.last,\n          next: undefined,\n          removed: false\n        };\n        if (!state.first) state.first = entry;\n        if (previous) previous.next = entry;\n        if (DESCRIPTORS) state.size++;\n        else that.size++;\n        // add to index\n        if (index !== 'F') state.index[index] = entry;\n      } return that;\n    };\n\n    var getEntry = function (that, key) {\n      var state = getInternalState(that);\n      // fast case\n      var index = fastKey(key);\n      var entry;\n      if (index !== 'F') return state.index[index];\n      // frozen object case\n      for (entry = state.first; entry; entry = entry.next) {\n        if (entry.key == key) return entry;\n      }\n    };\n\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        var that = this;\n        var state = getInternalState(that);\n        var data = state.index;\n        var entry = state.first;\n        while (entry) {\n          entry.removed = true;\n          if (entry.previous) entry.previous = entry.previous.next = undefined;\n          delete data[entry.index];\n          entry = entry.next;\n        }\n        state.first = state.last = undefined;\n        if (DESCRIPTORS) state.size = 0;\n        else that.size = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = this;\n        var state = getInternalState(that);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.next;\n          var prev = entry.previous;\n          delete state.index[entry.index];\n          entry.removed = true;\n          if (prev) prev.next = next;\n          if (next) next.previous = prev;\n          if (state.first == entry) state.first = next;\n          if (state.last == entry) state.last = prev;\n          if (DESCRIPTORS) state.size--;\n          else that.size--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        var state = getInternalState(this);\n        var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.next : state.first) {\n          boundFunction(entry.value, entry.key, this);\n          // revert to the last existing entry\n          while (entry && entry.removed) entry = entry.previous;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(this, key);\n      }\n    });\n\n    redefineAll(C.prototype, IS_MAP ? {\n      // 23.1.3.6 Map.prototype.get(key)\n      get: function get(key) {\n        var entry = getEntry(this, key);\n        return entry && entry.value;\n      },\n      // 23.1.3.9 Map.prototype.set(key, value)\n      set: function set(key, value) {\n        return define(this, key === 0 ? 0 : key, value);\n      }\n    } : {\n      // 23.2.3.1 Set.prototype.add(value)\n      add: function add(value) {\n        return define(this, value = value === 0 ? 0 : value, value);\n      }\n    });\n    if (DESCRIPTORS) defineProperty(C.prototype, 'size', {\n      get: function () {\n        return getInternalState(this).size;\n      }\n    });\n    return C;\n  },\n  setStrong: function (C, CONSTRUCTOR_NAME, IS_MAP) {\n    var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';\n    var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);\n    var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    defineIterator(C, CONSTRUCTOR_NAME, function (iterated, kind) {\n      setInternalState(this, {\n        type: ITERATOR_NAME,\n        target: iterated,\n        state: getInternalCollectionState(iterated),\n        kind: kind,\n        last: undefined\n      });\n    }, function () {\n      var state = getInternalIteratorState(this);\n      var kind = state.kind;\n      var entry = state.last;\n      // revert to the last existing entry\n      while (entry && entry.removed) entry = entry.previous;\n      // get next entry\n      if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {\n        // or finish the iteration\n        state.target = undefined;\n        return { value: undefined, done: true };\n      }\n      // return step by kind\n      if (kind == 'keys') return { value: entry.key, done: false };\n      if (kind == 'values') return { value: entry.value, done: false };\n      return { value: [entry.key, entry.value], done: false };\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(CONSTRUCTOR_NAME);\n  }\n};\n","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    metadata.facade = it;\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar iterate = require('../internals/iterate');\nvar anInstance = require('../internals/an-instance');\nvar isObject = require('../internals/is-object');\nvar fails = require('../internals/fails');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar inheritIfRequired = require('../internals/inherit-if-required');\n\nmodule.exports = function (CONSTRUCTOR_NAME, wrapper, common) {\n  var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;\n  var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var NativeConstructor = global[CONSTRUCTOR_NAME];\n  var NativePrototype = NativeConstructor && NativeConstructor.prototype;\n  var Constructor = NativeConstructor;\n  var exported = {};\n\n  var fixMethod = function (KEY) {\n    var nativeMethod = NativePrototype[KEY];\n    redefine(NativePrototype, KEY,\n      KEY == 'add' ? function add(value) {\n        nativeMethod.call(this, value === 0 ? 0 : value);\n        return this;\n      } : KEY == 'delete' ? function (key) {\n        return IS_WEAK && !isObject(key) ? false : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : KEY == 'get' ? function get(key) {\n        return IS_WEAK && !isObject(key) ? undefined : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : KEY == 'has' ? function has(key) {\n        return IS_WEAK && !isObject(key) ? false : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : function set(key, value) {\n        nativeMethod.call(this, key === 0 ? 0 : key, value);\n        return this;\n      }\n    );\n  };\n\n  var REPLACE = isForced(\n    CONSTRUCTOR_NAME,\n    typeof NativeConstructor != 'function' || !(IS_WEAK || NativePrototype.forEach && !fails(function () {\n      new NativeConstructor().entries().next();\n    }))\n  );\n\n  if (REPLACE) {\n    // create collection constructor\n    Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);\n    InternalMetadataModule.REQUIRED = true;\n  } else if (isForced(CONSTRUCTOR_NAME, true)) {\n    var instance = new Constructor();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~ Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    // eslint-disable-next-line no-new -- required for testing\n    var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) { new NativeConstructor(iterable); });\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new NativeConstructor();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n\n    if (!ACCEPT_ITERABLES) {\n      Constructor = wrapper(function (dummy, iterable) {\n        anInstance(dummy, Constructor, CONSTRUCTOR_NAME);\n        var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);\n        if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n        return that;\n      });\n      Constructor.prototype = NativePrototype;\n      NativePrototype.constructor = Constructor;\n    }\n\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n\n    // weak collections should not contains .clear method\n    if (IS_WEAK && NativePrototype.clear) delete NativePrototype.clear;\n  }\n\n  exported[CONSTRUCTOR_NAME] = Constructor;\n  $({ global: true, forced: Constructor != NativeConstructor }, exported);\n\n  setToStringTag(Constructor, CONSTRUCTOR_NAME);\n\n  if (!IS_WEAK) common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);\n\n  return Constructor;\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  var state;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) {\n      createNonEnumerableProperty(value, 'name', key);\n    }\n    state = enforceInternalState(value);\n    if (!state.source) {\n      state.source = TEMPLATE.join(typeof key == 'string' ? key : '');\n    }\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;","var isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    typeof (NewTarget = dummy.constructor) == 'function' &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","var path = require('../internals/path');\nvar has = require('../internals/has');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineProperty = require('../internals/object-define-property').f;\n\nmodule.exports = function (NAME) {\n  var Symbol = path.Symbol || (path.Symbol = {});\n  if (!has(Symbol, NAME)) defineProperty(Symbol, NAME, {\n    value: wrappedWellKnownSymbolModule.f(NAME)\n  });\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","/* build: `node build.js modules=ALL exclude=gestures,accessors requirejs minifier=uglifyjs` */\n/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */\n\nvar fabric = fabric || { version: '4.4.0' };\nif (typeof exports !== 'undefined') {\n  exports.fabric = fabric;\n}\n/* _AMD_START_ */\nelse if (typeof define === 'function' && define.amd) {\n  define([], function() { return fabric; });\n}\n/* _AMD_END_ */\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n  if (document instanceof (typeof HTMLDocument !== 'undefined' ? HTMLDocument : Document)) {\n    fabric.document = document;\n  }\n  else {\n    fabric.document = document.implementation.createHTMLDocument('');\n  }\n  fabric.window = window;\n}\nelse {\n  // assume we're running under node.js when document/window are not present\n  var jsdom = require('jsdom');\n  var virtualWindow = new jsdom.JSDOM(\n    decodeURIComponent('%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E'),\n    {\n      features: {\n        FetchExternalResources: ['img']\n      },\n      resources: 'usable'\n    }).window;\n  fabric.document = virtualWindow.document;\n  fabric.jsdomImplForWrapper = require('jsdom/lib/jsdom/living/generated/utils').implForWrapper;\n  fabric.nodeCanvas = require('jsdom/lib/jsdom/utils').Canvas;\n  fabric.window = virtualWindow;\n  DOMParser = fabric.window.DOMParser;\n}\n\n/**\n * True when in environment that supports touch events\n * @type boolean\n */\nfabric.isTouchSupported = 'ontouchstart' in fabric.window || 'ontouchstart' in fabric.document ||\n  (fabric.window && fabric.window.navigator && fabric.window.navigator.maxTouchPoints > 0);\n\n/**\n * True when in environment that's probably Node.js\n * @type boolean\n */\nfabric.isLikelyNode = typeof Buffer !== 'undefined' &&\n                      typeof window === 'undefined';\n\n/* _FROM_SVG_START_ */\n/**\n * Attributes parsed from all SVG elements\n * @type array\n */\nfabric.SHARED_ATTRIBUTES = [\n  'display',\n  'transform',\n  'fill', 'fill-opacity', 'fill-rule',\n  'opacity',\n  'stroke', 'stroke-dasharray', 'stroke-linecap', 'stroke-dashoffset',\n  'stroke-linejoin', 'stroke-miterlimit',\n  'stroke-opacity', 'stroke-width',\n  'id', 'paint-order', 'vector-effect',\n  'instantiated_by_use', 'clip-path',\n];\n/* _FROM_SVG_END_ */\n\n/**\n * Pixel per Inch as a default value set to 96. Can be changed for more realistic conversion.\n */\nfabric.DPI = 96;\nfabric.reNum = '(?:[-+]?(?:\\\\d+|\\\\d*\\\\.\\\\d+)(?:[eE][-+]?\\\\d+)?)';\nfabric.commaWsp = '(?:\\\\s+,?\\\\s*|,\\\\s*)';\nfabric.rePathCommand = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:[eE][-+]?\\d+)?)/ig;\nfabric.reNonWord = /[ \\n\\.,;!\\?\\-]/;\nfabric.fontPaths = { };\nfabric.iMatrix = [1, 0, 0, 1, 0, 0];\nfabric.svgNS = 'http://www.w3.org/2000/svg';\n\n/**\n * Pixel limit for cache canvases. 1Mpx , 4Mpx should be fine.\n * @since 1.7.14\n * @type Number\n * @default\n */\nfabric.perfLimitSizeTotal = 2097152;\n\n/**\n * Pixel limit for cache canvases width or height. IE fixes the maximum at 5000\n * @since 1.7.14\n * @type Number\n * @default\n */\nfabric.maxCacheSideLimit = 4096;\n\n/**\n * Lowest pixel limit for cache canvases, set at 256PX\n * @since 1.7.14\n * @type Number\n * @default\n */\nfabric.minCacheSideLimit = 256;\n\n/**\n * Cache Object for widths of chars in text rendering.\n */\nfabric.charWidthsCache = { };\n\n/**\n * if webgl is enabled and available, textureSize will determine the size\n * of the canvas backend\n * @since 2.0.0\n * @type Number\n * @default\n */\nfabric.textureSize = 2048;\n\n/**\n * When 'true', style information is not retained when copy/pasting text, making\n * pasted text use destination style.\n * Defaults to 'false'.\n * @type Boolean\n * @default\n */\nfabric.disableStyleCopyPaste = false;\n\n/**\n * Enable webgl for filtering picture is available\n * A filtering backend will be initialized, this will both take memory and\n * time since a default 2048x2048 canvas will be created for the gl context\n * @since 2.0.0\n * @type Boolean\n * @default\n */\nfabric.enableGLFiltering = true;\n\n/**\n * Device Pixel Ratio\n * @see https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/HTML-canvas-guide/SettingUptheCanvas/SettingUptheCanvas.html\n */\nfabric.devicePixelRatio = fabric.window.devicePixelRatio ||\n                          fabric.window.webkitDevicePixelRatio ||\n                          fabric.window.mozDevicePixelRatio ||\n                          1;\n/**\n * Browser-specific constant to adjust CanvasRenderingContext2D.shadowBlur value,\n * which is unitless and not rendered equally across browsers.\n *\n * Values that work quite well (as of October 2017) are:\n * - Chrome: 1.5\n * - Edge: 1.75\n * - Firefox: 0.9\n * - Safari: 0.95\n *\n * @since 2.0.0\n * @type Number\n * @default 1\n */\nfabric.browserShadowBlurConstant = 1;\n\n/**\n * This object contains the result of arc to bezier conversion for faster retrieving if the same arc needs to be converted again.\n * It was an internal variable, is accessible since version 2.3.4\n */\nfabric.arcToSegmentsCache = { };\n\n/**\n * This object keeps the results of the boundsOfCurve calculation mapped by the joined arguments necessary to calculate it.\n * It does speed up calculation, if you parse and add always the same paths, but in case of heavy usage of freedrawing\n * you do not get any speed benefit and you get a big object in memory.\n * The object was a private variable before, while now is appended to the lib so that you have access to it and you\n * can eventually clear it.\n * It was an internal variable, is accessible since version 2.3.4\n */\nfabric.boundsOfCurveCache = { };\n\n/**\n * If disabled boundsOfCurveCache is not used. For apps that make heavy usage of pencil drawing probably disabling it is better\n * @default true\n */\nfabric.cachesBoundsOfCurve = true;\n\n/**\n * Skip performance testing of setupGLContext and force the use of putImageData that seems to be the one that works best on\n * Chrome + old hardware. if your users are experiencing empty images after filtering you may try to force this to true\n * this has to be set before instantiating the filtering backend ( before filtering the first image )\n * @type Boolean\n * @default false\n */\nfabric.forceGLPutImageData = false;\n\nfabric.initFilterBackend = function() {\n  if (fabric.enableGLFiltering && fabric.isWebglSupported && fabric.isWebglSupported(fabric.textureSize)) {\n    console.log('max texture size: ' + fabric.maxTextureSize);\n    return (new fabric.WebglFilterBackend({ tileSize: fabric.textureSize }));\n  }\n  else if (fabric.Canvas2dFilterBackend) {\n    return (new fabric.Canvas2dFilterBackend());\n  }\n};\n\n\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n  // ensure globality even if entire library were function wrapped (as in Meteor.js packaging system)\n  window.fabric = fabric;\n}\n\n\n(function() {\n\n  /**\n   * @private\n   * @param {String} eventName\n   * @param {Function} handler\n   */\n  function _removeEventListener(eventName, handler) {\n    if (!this.__eventListeners[eventName]) {\n      return;\n    }\n    var eventListener = this.__eventListeners[eventName];\n    if (handler) {\n      eventListener[eventListener.indexOf(handler)] = false;\n    }\n    else {\n      fabric.util.array.fill(eventListener, false);\n    }\n  }\n\n  /**\n   * Observes specified event\n   * @memberOf fabric.Observable\n   * @alias on\n   * @param {String|Object} eventName Event name (eg. 'after:render') or object with key/value pairs (eg. {'after:render': handler, 'selection:cleared': handler})\n   * @param {Function} handler Function that receives a notification when an event of the specified type occurs\n   * @return {Self} thisArg\n   * @chainable\n   */\n  function on(eventName, handler) {\n    if (!this.__eventListeners) {\n      this.__eventListeners = { };\n    }\n    // one object with key/value pairs was passed\n    if (arguments.length === 1) {\n      for (var prop in eventName) {\n        this.on(prop, eventName[prop]);\n      }\n    }\n    else {\n      if (!this.__eventListeners[eventName]) {\n        this.__eventListeners[eventName] = [];\n      }\n      this.__eventListeners[eventName].push(handler);\n    }\n    return this;\n  }\n\n  /**\n   * Stops event observing for a particular event handler. Calling this method\n   * without arguments removes all handlers for all events\n   * @memberOf fabric.Observable\n   * @alias off\n   * @param {String|Object} eventName Event name (eg. 'after:render') or object with key/value pairs (eg. {'after:render': handler, 'selection:cleared': handler})\n   * @param {Function} handler Function to be deleted from EventListeners\n   * @return {Self} thisArg\n   * @chainable\n   */\n  function off(eventName, handler) {\n    if (!this.__eventListeners) {\n      return this;\n    }\n\n    // remove all key/value pairs (event name -> event handler)\n    if (arguments.length === 0) {\n      for (eventName in this.__eventListeners) {\n        _removeEventListener.call(this, eventName);\n      }\n    }\n    // one object with key/value pairs was passed\n    else if (arguments.length === 1 && typeof arguments[0] === 'object') {\n      for (var prop in eventName) {\n        _removeEventListener.call(this, prop, eventName[prop]);\n      }\n    }\n    else {\n      _removeEventListener.call(this, eventName, handler);\n    }\n    return this;\n  }\n\n  /**\n   * Fires event with an optional options object\n   * @memberOf fabric.Observable\n   * @param {String} eventName Event name to fire\n   * @param {Object} [options] Options object\n   * @return {Self} thisArg\n   * @chainable\n   */\n  function fire(eventName, options) {\n    if (!this.__eventListeners) {\n      return this;\n    }\n\n    var listenersForEvent = this.__eventListeners[eventName];\n    if (!listenersForEvent) {\n      return this;\n    }\n\n    for (var i = 0, len = listenersForEvent.length; i < len; i++) {\n      listenersForEvent[i] && listenersForEvent[i].call(this, options || { });\n    }\n    this.__eventListeners[eventName] = listenersForEvent.filter(function(value) {\n      return value !== false;\n    });\n    return this;\n  }\n\n  /**\n   * @namespace fabric.Observable\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#events}\n   * @see {@link http://fabricjs.com/events|Events demo}\n   */\n  fabric.Observable = {\n    fire: fire,\n    on: on,\n    off: off,\n  };\n})();\n\n\n/**\n * @namespace fabric.Collection\n */\nfabric.Collection = {\n\n  _objects: [],\n\n  /**\n   * Adds objects to collection, Canvas or Group, then renders canvas\n   * (if `renderOnAddRemove` is not `false`).\n   * in case of Group no changes to bounding box are made.\n   * Objects should be instances of (or inherit from) fabric.Object\n   * Use of this function is highly discouraged for groups.\n   * you can add a bunch of objects with the add method but then you NEED\n   * to run a addWithUpdate call for the Group class or position/bbox will be wrong.\n   * @param {...fabric.Object} object Zero or more fabric instances\n   * @return {Self} thisArg\n   * @chainable\n   */\n  add: function () {\n    this._objects.push.apply(this._objects, arguments);\n    if (this._onObjectAdded) {\n      for (var i = 0, length = arguments.length; i < length; i++) {\n        this._onObjectAdded(arguments[i]);\n      }\n    }\n    this.renderOnAddRemove && this.requestRenderAll();\n    return this;\n  },\n\n  /**\n   * Inserts an object into collection at specified index, then renders canvas (if `renderOnAddRemove` is not `false`)\n   * An object should be an instance of (or inherit from) fabric.Object\n   * Use of this function is highly discouraged for groups.\n   * you can add a bunch of objects with the insertAt method but then you NEED\n   * to run a addWithUpdate call for the Group class or position/bbox will be wrong.\n   * @param {Object} object Object to insert\n   * @param {Number} index Index to insert object at\n   * @param {Boolean} nonSplicing When `true`, no splicing (shifting) of objects occurs\n   * @return {Self} thisArg\n   * @chainable\n   */\n  insertAt: function (object, index, nonSplicing) {\n    var objects = this._objects;\n    if (nonSplicing) {\n      objects[index] = object;\n    }\n    else {\n      objects.splice(index, 0, object);\n    }\n    this._onObjectAdded && this._onObjectAdded(object);\n    this.renderOnAddRemove && this.requestRenderAll();\n    return this;\n  },\n\n  /**\n   * Removes objects from a collection, then renders canvas (if `renderOnAddRemove` is not `false`)\n   * @param {...fabric.Object} object Zero or more fabric instances\n   * @return {Self} thisArg\n   * @chainable\n   */\n  remove: function() {\n    var objects = this._objects,\n        index, somethingRemoved = false;\n\n    for (var i = 0, length = arguments.length; i < length; i++) {\n      index = objects.indexOf(arguments[i]);\n\n      // only call onObjectRemoved if an object was actually removed\n      if (index !== -1) {\n        somethingRemoved = true;\n        objects.splice(index, 1);\n        this._onObjectRemoved && this._onObjectRemoved(arguments[i]);\n      }\n    }\n\n    this.renderOnAddRemove && somethingRemoved && this.requestRenderAll();\n    return this;\n  },\n\n  /**\n   * Executes given function for each object in this group\n   * @param {Function} callback\n   *                   Callback invoked with current object as first argument,\n   *                   index - as second and an array of all objects - as third.\n   *                   Callback is invoked in a context of Global Object (e.g. `window`)\n   *                   when no `context` argument is given\n   *\n   * @param {Object} context Context (aka thisObject)\n   * @return {Self} thisArg\n   * @chainable\n   */\n  forEachObject: function(callback, context) {\n    var objects = this.getObjects();\n    for (var i = 0, len = objects.length; i < len; i++) {\n      callback.call(context, objects[i], i, objects);\n    }\n    return this;\n  },\n\n  /**\n   * Returns an array of children objects of this instance\n   * Type parameter introduced in 1.3.10\n   * since 2.3.5 this method return always a COPY of the array;\n   * @param {String} [type] When specified, only objects of this type are returned\n   * @return {Array}\n   */\n  getObjects: function(type) {\n    if (typeof type === 'undefined') {\n      return this._objects.concat();\n    }\n    return this._objects.filter(function(o) {\n      return o.type === type;\n    });\n  },\n\n  /**\n   * Returns object at specified index\n   * @param {Number} index\n   * @return {Self} thisArg\n   */\n  item: function (index) {\n    return this._objects[index];\n  },\n\n  /**\n   * Returns true if collection contains no objects\n   * @return {Boolean} true if collection is empty\n   */\n  isEmpty: function () {\n    return this._objects.length === 0;\n  },\n\n  /**\n   * Returns a size of a collection (i.e: length of an array containing its objects)\n   * @return {Number} Collection size\n   */\n  size: function() {\n    return this._objects.length;\n  },\n\n  /**\n   * Returns true if collection contains an object\n   * @param {Object} object Object to check against\n   * @return {Boolean} `true` if collection contains an object\n   */\n  contains: function(object) {\n    return this._objects.indexOf(object) > -1;\n  },\n\n  /**\n   * Returns number representation of a collection complexity\n   * @return {Number} complexity\n   */\n  complexity: function () {\n    return this._objects.reduce(function (memo, current) {\n      memo += current.complexity ? current.complexity() : 0;\n      return memo;\n    }, 0);\n  }\n};\n\n\n/**\n * @namespace fabric.CommonMethods\n */\nfabric.CommonMethods = {\n\n  /**\n   * Sets object's properties from options\n   * @param {Object} [options] Options object\n   */\n  _setOptions: function(options) {\n    for (var prop in options) {\n      this.set(prop, options[prop]);\n    }\n  },\n\n  /**\n   * @private\n   * @param {Object} [filler] Options object\n   * @param {String} [property] property to set the Gradient to\n   */\n  _initGradient: function(filler, property) {\n    if (filler && filler.colorStops && !(filler instanceof fabric.Gradient)) {\n      this.set(property, new fabric.Gradient(filler));\n    }\n  },\n\n  /**\n   * @private\n   * @param {Object} [filler] Options object\n   * @param {String} [property] property to set the Pattern to\n   * @param {Function} [callback] callback to invoke after pattern load\n   */\n  _initPattern: function(filler, property, callback) {\n    if (filler && filler.source && !(filler instanceof fabric.Pattern)) {\n      this.set(property, new fabric.Pattern(filler, callback));\n    }\n    else {\n      callback && callback();\n    }\n  },\n\n  /**\n   * @private\n   */\n  _setObject: function(obj) {\n    for (var prop in obj) {\n      this._set(prop, obj[prop]);\n    }\n  },\n\n  /**\n   * Sets property to a given value. When changing position/dimension -related properties (left, top, scale, angle, etc.) `set` does not update position of object's borders/controls. If you need to update those, call `setCoords()`.\n   * @param {String|Object} key Property name or object (if object, iterate over the object properties)\n   * @param {Object|Function} value Property value (if function, the value is passed into it and its return value is used as a new one)\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  set: function(key, value) {\n    if (typeof key === 'object') {\n      this._setObject(key);\n    }\n    else {\n      this._set(key, value);\n    }\n    return this;\n  },\n\n  _set: function(key, value) {\n    this[key] = value;\n  },\n\n  /**\n   * Toggles specified property from `true` to `false` or from `false` to `true`\n   * @param {String} property Property to toggle\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  toggle: function(property) {\n    var value = this.get(property);\n    if (typeof value === 'boolean') {\n      this.set(property, !value);\n    }\n    return this;\n  },\n\n  /**\n   * Basic getter\n   * @param {String} property Property name\n   * @return {*} value of a property\n   */\n  get: function(property) {\n    return this[property];\n  }\n};\n\n\n(function(global) {\n\n  var sqrt = Math.sqrt,\n      atan2 = Math.atan2,\n      pow = Math.pow,\n      PiBy180 = Math.PI / 180,\n      PiBy2 = Math.PI / 2;\n\n  /**\n   * @namespace fabric.util\n   */\n  fabric.util = {\n\n    /**\n     * Calculate the cos of an angle, avoiding returning floats for known results\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} angle the angle in radians or in degree\n     * @return {Number}\n     */\n    cos: function(angle) {\n      if (angle === 0) { return 1; }\n      if (angle < 0) {\n        // cos(a) = cos(-a)\n        angle = -angle;\n      }\n      var angleSlice = angle / PiBy2;\n      switch (angleSlice) {\n        case 1: case 3: return 0;\n        case 2: return -1;\n      }\n      return Math.cos(angle);\n    },\n\n    /**\n     * Calculate the sin of an angle, avoiding returning floats for known results\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} angle the angle in radians or in degree\n     * @return {Number}\n     */\n    sin: function(angle) {\n      if (angle === 0) { return 0; }\n      var angleSlice = angle / PiBy2, sign = 1;\n      if (angle < 0) {\n        // sin(-a) = -sin(a)\n        sign = -1;\n      }\n      switch (angleSlice) {\n        case 1: return sign;\n        case 2: return 0;\n        case 3: return -sign;\n      }\n      return Math.sin(angle);\n    },\n\n    /**\n     * Removes value from an array.\n     * Presence of value (and its position in an array) is determined via `Array.prototype.indexOf`\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} array\n     * @param {*} value\n     * @return {Array} original array\n     */\n    removeFromArray: function(array, value) {\n      var idx = array.indexOf(value);\n      if (idx !== -1) {\n        array.splice(idx, 1);\n      }\n      return array;\n    },\n\n    /**\n     * Returns random number between 2 specified ones.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} min lower limit\n     * @param {Number} max upper limit\n     * @return {Number} random value (between min and max)\n     */\n    getRandomInt: function(min, max) {\n      return Math.floor(Math.random() * (max - min + 1)) + min;\n    },\n\n    /**\n     * Transforms degrees to radians.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} degrees value in degrees\n     * @return {Number} value in radians\n     */\n    degreesToRadians: function(degrees) {\n      return degrees * PiBy180;\n    },\n\n    /**\n     * Transforms radians to degrees.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number} radians value in radians\n     * @return {Number} value in degrees\n     */\n    radiansToDegrees: function(radians) {\n      return radians / PiBy180;\n    },\n\n    /**\n     * Rotates `point` around `origin` with `radians`\n     * @static\n     * @memberOf fabric.util\n     * @param {fabric.Point} point The point to rotate\n     * @param {fabric.Point} origin The origin of the rotation\n     * @param {Number} radians The radians of the angle for the rotation\n     * @return {fabric.Point} The new rotated point\n     */\n    rotatePoint: function(point, origin, radians) {\n      point.subtractEquals(origin);\n      var v = fabric.util.rotateVector(point, radians);\n      return new fabric.Point(v.x, v.y).addEquals(origin);\n    },\n\n    /**\n     * Rotates `vector` with `radians`\n     * @static\n     * @memberOf fabric.util\n     * @param {Object} vector The vector to rotate (x and y)\n     * @param {Number} radians The radians of the angle for the rotation\n     * @return {Object} The new rotated point\n     */\n    rotateVector: function(vector, radians) {\n      var sin = fabric.util.sin(radians),\n          cos = fabric.util.cos(radians),\n          rx = vector.x * cos - vector.y * sin,\n          ry = vector.x * sin + vector.y * cos;\n      return {\n        x: rx,\n        y: ry\n      };\n    },\n\n    /**\n     * Apply transform t to point p\n     * @static\n     * @memberOf fabric.util\n     * @param  {fabric.Point} p The point to transform\n     * @param  {Array} t The transform\n     * @param  {Boolean} [ignoreOffset] Indicates that the offset should not be applied\n     * @return {fabric.Point} The transformed point\n     */\n    transformPoint: function(p, t, ignoreOffset) {\n      if (ignoreOffset) {\n        return new fabric.Point(\n          t[0] * p.x + t[2] * p.y,\n          t[1] * p.x + t[3] * p.y\n        );\n      }\n      return new fabric.Point(\n        t[0] * p.x + t[2] * p.y + t[4],\n        t[1] * p.x + t[3] * p.y + t[5]\n      );\n    },\n\n    /**\n     * Returns coordinates of points's bounding rectangle (left, top, width, height)\n     * @param {Array} points 4 points array\n     * @param {Array} [transform] an array of 6 numbers representing a 2x3 transform matrix\n     * @return {Object} Object with left, top, width, height properties\n     */\n    makeBoundingBoxFromPoints: function(points, transform) {\n      if (transform) {\n        for (var i = 0; i < points.length; i++) {\n          points[i] = fabric.util.transformPoint(points[i], transform);\n        }\n      }\n      var xPoints = [points[0].x, points[1].x, points[2].x, points[3].x],\n          minX = fabric.util.array.min(xPoints),\n          maxX = fabric.util.array.max(xPoints),\n          width = maxX - minX,\n          yPoints = [points[0].y, points[1].y, points[2].y, points[3].y],\n          minY = fabric.util.array.min(yPoints),\n          maxY = fabric.util.array.max(yPoints),\n          height = maxY - minY;\n\n      return {\n        left: minX,\n        top: minY,\n        width: width,\n        height: height\n      };\n    },\n\n    /**\n     * Invert transformation t\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} t The transform\n     * @return {Array} The inverted transform\n     */\n    invertTransform: function(t) {\n      var a = 1 / (t[0] * t[3] - t[1] * t[2]),\n          r = [a * t[3], -a * t[1], -a * t[2], a * t[0]],\n          o = fabric.util.transformPoint({ x: t[4], y: t[5] }, r, true);\n      r[4] = -o.x;\n      r[5] = -o.y;\n      return r;\n    },\n\n    /**\n     * A wrapper around Number#toFixed, which contrary to native method returns number, not string.\n     * @static\n     * @memberOf fabric.util\n     * @param {Number|String} number number to operate on\n     * @param {Number} fractionDigits number of fraction digits to \"leave\"\n     * @return {Number}\n     */\n    toFixed: function(number, fractionDigits) {\n      return parseFloat(Number(number).toFixed(fractionDigits));\n    },\n\n    /**\n     * Converts from attribute value to pixel value if applicable.\n     * Returns converted pixels or original value not converted.\n     * @param {Number|String} value number to operate on\n     * @param {Number} fontSize\n     * @return {Number|String}\n     */\n    parseUnit: function(value, fontSize) {\n      var unit = /\\D{0,2}$/.exec(value),\n          number = parseFloat(value);\n      if (!fontSize) {\n        fontSize = fabric.Text.DEFAULT_SVG_FONT_SIZE;\n      }\n      switch (unit[0]) {\n        case 'mm':\n          return number * fabric.DPI / 25.4;\n\n        case 'cm':\n          return number * fabric.DPI / 2.54;\n\n        case 'in':\n          return number * fabric.DPI;\n\n        case 'pt':\n          return number * fabric.DPI / 72; // or * 4 / 3\n\n        case 'pc':\n          return number * fabric.DPI / 72 * 12; // or * 16\n\n        case 'em':\n          return number * fontSize;\n\n        default:\n          return number;\n      }\n    },\n\n    /**\n     * Function which always returns `false`.\n     * @static\n     * @memberOf fabric.util\n     * @return {Boolean}\n     */\n    falseFunction: function() {\n      return false;\n    },\n\n    /**\n     * Returns klass \"Class\" object of given namespace\n     * @memberOf fabric.util\n     * @param {String} type Type of object (eg. 'circle')\n     * @param {String} namespace Namespace to get klass \"Class\" object from\n     * @return {Object} klass \"Class\"\n     */\n    getKlass: function(type, namespace) {\n      // capitalize first letter only\n      type = fabric.util.string.camelize(type.charAt(0).toUpperCase() + type.slice(1));\n      return fabric.util.resolveNamespace(namespace)[type];\n    },\n\n    /**\n     * Returns array of attributes for given svg that fabric parses\n     * @memberOf fabric.util\n     * @param {String} type Type of svg element (eg. 'circle')\n     * @return {Array} string names of supported attributes\n     */\n    getSvgAttributes: function(type) {\n      var attributes = [\n        'instantiated_by_use',\n        'style',\n        'id',\n        'class'\n      ];\n      switch (type) {\n        case 'linearGradient':\n          attributes = attributes.concat(['x1', 'y1', 'x2', 'y2', 'gradientUnits', 'gradientTransform']);\n          break;\n        case 'radialGradient':\n          attributes = attributes.concat(['gradientUnits', 'gradientTransform', 'cx', 'cy', 'r', 'fx', 'fy', 'fr']);\n          break;\n        case 'stop':\n          attributes = attributes.concat(['offset', 'stop-color', 'stop-opacity']);\n          break;\n      }\n      return attributes;\n    },\n\n    /**\n     * Returns object of given namespace\n     * @memberOf fabric.util\n     * @param {String} namespace Namespace string e.g. 'fabric.Image.filter' or 'fabric'\n     * @return {Object} Object for given namespace (default fabric)\n     */\n    resolveNamespace: function(namespace) {\n      if (!namespace) {\n        return fabric;\n      }\n\n      var parts = namespace.split('.'),\n          len = parts.length, i,\n          obj = global || fabric.window;\n\n      for (i = 0; i < len; ++i) {\n        obj = obj[parts[i]];\n      }\n\n      return obj;\n    },\n\n    /**\n     * Loads image element from given url and passes it to a callback\n     * @memberOf fabric.util\n     * @param {String} url URL representing an image\n     * @param {Function} callback Callback; invoked with loaded image\n     * @param {*} [context] Context to invoke callback in\n     * @param {Object} [crossOrigin] crossOrigin value to set image element to\n     */\n    loadImage: function(url, callback, context, crossOrigin) {\n      if (!url) {\n        callback && callback.call(context, url);\n        return;\n      }\n\n      var img = fabric.util.createImage();\n\n      /** @ignore */\n      var onLoadCallback = function () {\n        callback && callback.call(context, img, false);\n        img = img.onload = img.onerror = null;\n      };\n\n      img.onload = onLoadCallback;\n      /** @ignore */\n      img.onerror = function() {\n        fabric.log('Error loading ' + img.src);\n        callback && callback.call(context, null, true);\n        img = img.onload = img.onerror = null;\n      };\n\n      // data-urls appear to be buggy with crossOrigin\n      // https://github.com/kangax/fabric.js/commit/d0abb90f1cd5c5ef9d2a94d3fb21a22330da3e0a#commitcomment-4513767\n      // see https://code.google.com/p/chromium/issues/detail?id=315152\n      //     https://bugzilla.mozilla.org/show_bug.cgi?id=935069\n      // crossOrigin null is the same as not set.\n      if (url.indexOf('data') !== 0 &&\n        crossOrigin !== undefined &&\n        crossOrigin !== null) {\n        img.crossOrigin = crossOrigin;\n      }\n\n      // IE10 / IE11-Fix: SVG contents from data: URI\n      // will only be available if the IMG is present\n      // in the DOM (and visible)\n      if (url.substring(0,14) === 'data:image/svg') {\n        img.onload = null;\n        fabric.util.loadImageInDom(img, onLoadCallback);\n      }\n\n      img.src = url;\n    },\n\n    /**\n     * Attaches SVG image with data: URL to the dom\n     * @memberOf fabric.util\n     * @param {Object} img Image object with data:image/svg src\n     * @param {Function} callback Callback; invoked with loaded image\n     * @return {Object} DOM element (div containing the SVG image)\n     */\n    loadImageInDom: function(img, onLoadCallback) {\n      var div = fabric.document.createElement('div');\n      div.style.width = div.style.height = '1px';\n      div.style.left = div.style.top = '-100%';\n      div.style.position = 'absolute';\n      div.appendChild(img);\n      fabric.document.querySelector('body').appendChild(div);\n      /**\n       * Wrap in function to:\n       *   1. Call existing callback\n       *   2. Cleanup DOM\n       */\n      img.onload = function () {\n        onLoadCallback();\n        div.parentNode.removeChild(div);\n        div = null;\n      };\n    },\n\n    /**\n     * Creates corresponding fabric instances from their object representations\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} objects Objects to enliven\n     * @param {Function} callback Callback to invoke when all objects are created\n     * @param {String} namespace Namespace to get klass \"Class\" object from\n     * @param {Function} reviver Method for further parsing of object elements,\n     * called after each fabric object created.\n     */\n    enlivenObjects: function(objects, callback, namespace, reviver) {\n      objects = objects || [];\n\n      var enlivenedObjects = [],\n          numLoadedObjects = 0,\n          numTotalObjects = objects.length;\n\n      function onLoaded() {\n        if (++numLoadedObjects === numTotalObjects) {\n          callback && callback(enlivenedObjects.filter(function(obj) {\n            // filter out undefined objects (objects that gave error)\n            return obj;\n          }));\n        }\n      }\n\n      if (!numTotalObjects) {\n        callback && callback(enlivenedObjects);\n        return;\n      }\n\n      objects.forEach(function (o, index) {\n        // if sparse array\n        if (!o || !o.type) {\n          onLoaded();\n          return;\n        }\n        var klass = fabric.util.getKlass(o.type, namespace);\n        klass.fromObject(o, function (obj, error) {\n          error || (enlivenedObjects[index] = obj);\n          reviver && reviver(o, obj, error);\n          onLoaded();\n        });\n      });\n    },\n\n    /**\n     * Create and wait for loading of patterns\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} patterns Objects to enliven\n     * @param {Function} callback Callback to invoke when all objects are created\n     * called after each fabric object created.\n     */\n    enlivenPatterns: function(patterns, callback) {\n      patterns = patterns || [];\n\n      function onLoaded() {\n        if (++numLoadedPatterns === numPatterns) {\n          callback && callback(enlivenedPatterns);\n        }\n      }\n\n      var enlivenedPatterns = [],\n          numLoadedPatterns = 0,\n          numPatterns = patterns.length;\n\n      if (!numPatterns) {\n        callback && callback(enlivenedPatterns);\n        return;\n      }\n\n      patterns.forEach(function (p, index) {\n        if (p && p.source) {\n          new fabric.Pattern(p, function(pattern) {\n            enlivenedPatterns[index] = pattern;\n            onLoaded();\n          });\n        }\n        else {\n          enlivenedPatterns[index] = p;\n          onLoaded();\n        }\n      });\n    },\n\n    /**\n     * Groups SVG elements (usually those retrieved from SVG document)\n     * @static\n     * @memberOf fabric.util\n     * @param {Array} elements SVG elements to group\n     * @param {Object} [options] Options object\n     * @param {String} path Value to set sourcePath to\n     * @return {fabric.Object|fabric.Group}\n     */\n    groupSVGElements: function(elements, options, path) {\n      var object;\n      if (elements && elements.length === 1) {\n        return elements[0];\n      }\n      if (options) {\n        if (options.width && options.height) {\n          options.centerPoint = {\n            x: options.width / 2,\n            y: options.height / 2\n          };\n        }\n        else {\n          delete options.width;\n          delete options.height;\n        }\n      }\n      object = new fabric.Group(elements, options);\n      if (typeof path !== 'undefined') {\n        object.sourcePath = path;\n      }\n      return object;\n    },\n\n    /**\n     * Populates an object with properties of another object\n     * @static\n     * @memberOf fabric.util\n     * @param {Object} source Source object\n     * @param {Object} destination Destination object\n     * @return {Array} properties Properties names to include\n     */\n    populateWithProperties: function(source, destination, properties) {\n      if (properties && Object.prototype.toString.call(properties) === '[object Array]') {\n        for (var i = 0, len = properties.length; i < len; i++) {\n          if (properties[i] in source) {\n            destination[properties[i]] = source[properties[i]];\n          }\n        }\n      }\n    },\n\n    /**\n     * Draws a dashed line between two points\n     *\n     * This method is used to draw dashed line around selection area.\n     * See <a href=\"http://stackoverflow.com/questions/4576724/dotted-stroke-in-canvas\">dotted stroke in canvas</a>\n     *\n     * @param {CanvasRenderingContext2D} ctx context\n     * @param {Number} x  start x coordinate\n     * @param {Number} y start y coordinate\n     * @param {Number} x2 end x coordinate\n     * @param {Number} y2 end y coordinate\n     * @param {Array} da dash array pattern\n     */\n    drawDashedLine: function(ctx, x, y, x2, y2, da) {\n      var dx = x2 - x,\n          dy = y2 - y,\n          len = sqrt(dx * dx + dy * dy),\n          rot = atan2(dy, dx),\n          dc = da.length,\n          di = 0,\n          draw = true;\n\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.moveTo(0, 0);\n      ctx.rotate(rot);\n\n      x = 0;\n      while (len > x) {\n        x += da[di++ % dc];\n        if (x > len) {\n          x = len;\n        }\n        ctx[draw ? 'lineTo' : 'moveTo'](x, 0);\n        draw = !draw;\n      }\n\n      ctx.restore();\n    },\n\n    /**\n     * Creates canvas element\n     * @static\n     * @memberOf fabric.util\n     * @return {CanvasElement} initialized canvas element\n     */\n    createCanvasElement: function() {\n      return fabric.document.createElement('canvas');\n    },\n\n    /**\n     * Creates a canvas element that is a copy of another and is also painted\n     * @param {CanvasElement} canvas to copy size and content of\n     * @static\n     * @memberOf fabric.util\n     * @return {CanvasElement} initialized canvas element\n     */\n    copyCanvasElement: function(canvas) {\n      var newCanvas = fabric.util.createCanvasElement();\n      newCanvas.width = canvas.width;\n      newCanvas.height = canvas.height;\n      newCanvas.getContext('2d').drawImage(canvas, 0, 0);\n      return newCanvas;\n    },\n\n    /**\n     * since 2.6.0 moved from canvas instance to utility.\n     * @param {CanvasElement} canvasEl to copy size and content of\n     * @param {String} format 'jpeg' or 'png', in some browsers 'webp' is ok too\n     * @param {Number} quality <= 1 and > 0\n     * @static\n     * @memberOf fabric.util\n     * @return {String} data url\n     */\n    toDataURL: function(canvasEl, format, quality) {\n      return canvasEl.toDataURL('image/' + format, quality);\n    },\n\n    /**\n     * Creates image element (works on client and node)\n     * @static\n     * @memberOf fabric.util\n     * @return {HTMLImageElement} HTML image element\n     */\n    createImage: function() {\n      return fabric.document.createElement('img');\n    },\n\n    /**\n     * Multiply matrix A by matrix B to nest transformations\n     * @static\n     * @memberOf fabric.util\n     * @param  {Array} a First transformMatrix\n     * @param  {Array} b Second transformMatrix\n     * @param  {Boolean} is2x2 flag to multiply matrices as 2x2 matrices\n     * @return {Array} The product of the two transform matrices\n     */\n    multiplyTransformMatrices: function(a, b, is2x2) {\n      // Matrix multiply a * b\n      return [\n        a[0] * b[0] + a[2] * b[1],\n        a[1] * b[0] + a[3] * b[1],\n        a[0] * b[2] + a[2] * b[3],\n        a[1] * b[2] + a[3] * b[3],\n        is2x2 ? 0 : a[0] * b[4] + a[2] * b[5] + a[4],\n        is2x2 ? 0 : a[1] * b[4] + a[3] * b[5] + a[5]\n      ];\n    },\n\n    /**\n     * Decomposes standard 2x3 matrix into transform components\n     * @static\n     * @memberOf fabric.util\n     * @param  {Array} a transformMatrix\n     * @return {Object} Components of transform\n     */\n    qrDecompose: function(a) {\n      var angle = atan2(a[1], a[0]),\n          denom = pow(a[0], 2) + pow(a[1], 2),\n          scaleX = sqrt(denom),\n          scaleY = (a[0] * a[3] - a[2] * a[1]) / scaleX,\n          skewX = atan2(a[0] * a[2] + a[1] * a [3], denom);\n      return {\n        angle: angle / PiBy180,\n        scaleX: scaleX,\n        scaleY: scaleY,\n        skewX: skewX / PiBy180,\n        skewY: 0,\n        translateX: a[4],\n        translateY: a[5]\n      };\n    },\n\n    /**\n     * Returns a transform matrix starting from an object of the same kind of\n     * the one returned from qrDecompose, useful also if you want to calculate some\n     * transformations from an object that is not enlived yet\n     * @static\n     * @memberOf fabric.util\n     * @param  {Object} options\n     * @param  {Number} [options.angle] angle in degrees\n     * @return {Number[]} transform matrix\n     */\n    calcRotateMatrix: function(options) {\n      if (!options.angle) {\n        return fabric.iMatrix.concat();\n      }\n      var theta = fabric.util.degreesToRadians(options.angle),\n          cos = fabric.util.cos(theta),\n          sin = fabric.util.sin(theta);\n      return [cos, sin, -sin, cos, 0, 0];\n    },\n\n    /**\n     * Returns a transform matrix starting from an object of the same kind of\n     * the one returned from qrDecompose, useful also if you want to calculate some\n     * transformations from an object that is not enlived yet.\n     * is called DimensionsTransformMatrix because those properties are the one that influence\n     * the size of the resulting box of the object.\n     * @static\n     * @memberOf fabric.util\n     * @param  {Object} options\n     * @param  {Number} [options.scaleX]\n     * @param  {Number} [options.scaleY]\n     * @param  {Boolean} [options.flipX]\n     * @param  {Boolean} [options.flipY]\n     * @param  {Number} [options.skewX]\n     * @param  {Number} [options.skewX]\n     * @return {Number[]} transform matrix\n     */\n    calcDimensionsMatrix: function(options) {\n      var scaleX = typeof options.scaleX === 'undefined' ? 1 : options.scaleX,\n          scaleY = typeof options.scaleY === 'undefined' ? 1 : options.scaleY,\n          scaleMatrix = [\n            options.flipX ? -scaleX : scaleX,\n            0,\n            0,\n            options.flipY ? -scaleY : scaleY,\n            0,\n            0],\n          multiply = fabric.util.multiplyTransformMatrices,\n          degreesToRadians = fabric.util.degreesToRadians;\n      if (options.skewX) {\n        scaleMatrix = multiply(\n          scaleMatrix,\n          [1, 0, Math.tan(degreesToRadians(options.skewX)), 1],\n          true);\n      }\n      if (options.skewY) {\n        scaleMatrix = multiply(\n          scaleMatrix,\n          [1, Math.tan(degreesToRadians(options.skewY)), 0, 1],\n          true);\n      }\n      return scaleMatrix;\n    },\n\n    /**\n     * Returns a transform matrix starting from an object of the same kind of\n     * the one returned from qrDecompose, useful also if you want to calculate some\n     * transformations from an object that is not enlived yet\n     * @static\n     * @memberOf fabric.util\n     * @param  {Object} options\n     * @param  {Number} [options.angle]\n     * @param  {Number} [options.scaleX]\n     * @param  {Number} [options.scaleY]\n     * @param  {Boolean} [options.flipX]\n     * @param  {Boolean} [options.flipY]\n     * @param  {Number} [options.skewX]\n     * @param  {Number} [options.skewX]\n     * @param  {Number} [options.translateX]\n     * @param  {Number} [options.translateY]\n     * @return {Number[]} transform matrix\n     */\n    composeMatrix: function(options) {\n      var matrix = [1, 0, 0, 1, options.translateX || 0, options.translateY || 0],\n          multiply = fabric.util.multiplyTransformMatrices;\n      if (options.angle) {\n        matrix = multiply(matrix, fabric.util.calcRotateMatrix(options));\n      }\n      if (options.scaleX !== 1 || options.scaleY !== 1 ||\n          options.skewX || options.skewY || options.flipX || options.flipY) {\n        matrix = multiply(matrix, fabric.util.calcDimensionsMatrix(options));\n      }\n      return matrix;\n    },\n\n    /**\n     * reset an object transform state to neutral. Top and left are not accounted for\n     * @static\n     * @memberOf fabric.util\n     * @param  {fabric.Object} target object to transform\n     */\n    resetObjectTransform: function (target) {\n      target.scaleX = 1;\n      target.scaleY = 1;\n      target.skewX = 0;\n      target.skewY = 0;\n      target.flipX = false;\n      target.flipY = false;\n      target.rotate(0);\n    },\n\n    /**\n     * Extract Object transform values\n     * @static\n     * @memberOf fabric.util\n     * @param  {fabric.Object} target object to read from\n     * @return {Object} Components of transform\n     */\n    saveObjectTransform: function (target) {\n      return {\n        scaleX: target.scaleX,\n        scaleY: target.scaleY,\n        skewX: target.skewX,\n        skewY: target.skewY,\n        angle: target.angle,\n        left: target.left,\n        flipX: target.flipX,\n        flipY: target.flipY,\n        top: target.top\n      };\n    },\n\n    /**\n     * Returns true if context has transparent pixel\n     * at specified location (taking tolerance into account)\n     * @param {CanvasRenderingContext2D} ctx context\n     * @param {Number} x x coordinate\n     * @param {Number} y y coordinate\n     * @param {Number} tolerance Tolerance\n     */\n    isTransparent: function(ctx, x, y, tolerance) {\n\n      // If tolerance is > 0 adjust start coords to take into account.\n      // If moves off Canvas fix to 0\n      if (tolerance > 0) {\n        if (x > tolerance) {\n          x -= tolerance;\n        }\n        else {\n          x = 0;\n        }\n        if (y > tolerance) {\n          y -= tolerance;\n        }\n        else {\n          y = 0;\n        }\n      }\n\n      var _isTransparent = true, i, temp,\n          imageData = ctx.getImageData(x, y, (tolerance * 2) || 1, (tolerance * 2) || 1),\n          l = imageData.data.length;\n\n      // Split image data - for tolerance > 1, pixelDataSize = 4;\n      for (i = 3; i < l; i += 4) {\n        temp = imageData.data[i];\n        _isTransparent = temp <= 0;\n        if (_isTransparent === false) {\n          break; // Stop if colour found\n        }\n      }\n\n      imageData = null;\n\n      return _isTransparent;\n    },\n\n    /**\n     * Parse preserveAspectRatio attribute from element\n     * @param {string} attribute to be parsed\n     * @return {Object} an object containing align and meetOrSlice attribute\n     */\n    parsePreserveAspectRatioAttribute: function(attribute) {\n      var meetOrSlice = 'meet', alignX = 'Mid', alignY = 'Mid',\n          aspectRatioAttrs = attribute.split(' '), align;\n\n      if (aspectRatioAttrs && aspectRatioAttrs.length) {\n        meetOrSlice = aspectRatioAttrs.pop();\n        if (meetOrSlice !== 'meet' && meetOrSlice !== 'slice') {\n          align = meetOrSlice;\n          meetOrSlice = 'meet';\n        }\n        else if (aspectRatioAttrs.length) {\n          align = aspectRatioAttrs.pop();\n        }\n      }\n      //divide align in alignX and alignY\n      alignX = align !== 'none' ? align.slice(1, 4) : 'none';\n      alignY = align !== 'none' ? align.slice(5, 8) : 'none';\n      return {\n        meetOrSlice: meetOrSlice,\n        alignX: alignX,\n        alignY: alignY\n      };\n    },\n\n    /**\n     * Clear char widths cache for the given font family or all the cache if no\n     * fontFamily is specified.\n     * Use it if you know you are loading fonts in a lazy way and you are not waiting\n     * for custom fonts to load properly when adding text objects to the canvas.\n     * If a text object is added when its own font is not loaded yet, you will get wrong\n     * measurement and so wrong bounding boxes.\n     * After the font cache is cleared, either change the textObject text content or call\n     * initDimensions() to trigger a recalculation\n     * @memberOf fabric.util\n     * @param {String} [fontFamily] font family to clear\n     */\n    clearFabricFontCache: function(fontFamily) {\n      fontFamily = (fontFamily || '').toLowerCase();\n      if (!fontFamily) {\n        fabric.charWidthsCache = { };\n      }\n      else if (fabric.charWidthsCache[fontFamily]) {\n        delete fabric.charWidthsCache[fontFamily];\n      }\n    },\n\n    /**\n     * Given current aspect ratio, determines the max width and height that can\n     * respect the total allowed area for the cache.\n     * @memberOf fabric.util\n     * @param {Number} ar aspect ratio\n     * @param {Number} maximumArea Maximum area you want to achieve\n     * @return {Object.x} Limited dimensions by X\n     * @return {Object.y} Limited dimensions by Y\n     */\n    limitDimsByArea: function(ar, maximumArea) {\n      var roughWidth = Math.sqrt(maximumArea * ar),\n          perfLimitSizeY = Math.floor(maximumArea / roughWidth);\n      return { x: Math.floor(roughWidth), y: perfLimitSizeY };\n    },\n\n    capValue: function(min, value, max) {\n      return Math.max(min, Math.min(value, max));\n    },\n\n    /**\n     * Finds the scale for the object source to fit inside the object destination,\n     * keeping aspect ratio intact.\n     * respect the total allowed area for the cache.\n     * @memberOf fabric.util\n     * @param {Object | fabric.Object} source\n     * @param {Number} source.height natural unscaled height of the object\n     * @param {Number} source.width natural unscaled width of the object\n     * @param {Object | fabric.Object} destination\n     * @param {Number} destination.height natural unscaled height of the object\n     * @param {Number} destination.width natural unscaled width of the object\n     * @return {Number} scale factor to apply to source to fit into destination\n     */\n    findScaleToFit: function(source, destination) {\n      return Math.min(destination.width / source.width, destination.height / source.height);\n    },\n\n    /**\n     * Finds the scale for the object source to cover entirely the object destination,\n     * keeping aspect ratio intact.\n     * respect the total allowed area for the cache.\n     * @memberOf fabric.util\n     * @param {Object | fabric.Object} source\n     * @param {Number} source.height natural unscaled height of the object\n     * @param {Number} source.width natural unscaled width of the object\n     * @param {Object | fabric.Object} destination\n     * @param {Number} destination.height natural unscaled height of the object\n     * @param {Number} destination.width natural unscaled width of the object\n     * @return {Number} scale factor to apply to source to cover destination\n     */\n    findScaleToCover: function(source, destination) {\n      return Math.max(destination.width / source.width, destination.height / source.height);\n    },\n\n    /**\n     * given an array of 6 number returns something like `\"matrix(...numbers)\"`\n     * @memberOf fabric.util\n     * @param {Array} transform an array with 6 numbers\n     * @return {String} transform matrix for svg\n     * @return {Object.y} Limited dimensions by Y\n     */\n    matrixToSVG: function(transform) {\n      return 'matrix(' + transform.map(function(value) {\n        return fabric.util.toFixed(value, fabric.Object.NUM_FRACTION_DIGITS);\n      }).join(' ') + ')';\n    },\n\n    /**\n     * given an object and a transform, apply the inverse transform to the object,\n     * this is equivalent to remove from that object that transformation, so that\n     * added in a space with the removed transform, the object will be the same as before.\n     * Removing from an object a transform that scale by 2 is like scaling it by 1/2.\n     * Removing from an object a transfrom that rotate by 30deg is like rotating by 30deg\n     * in the opposite direction.\n     * This util is used to add objects inside transformed groups or nested groups.\n     * @memberOf fabric.util\n     * @param {fabric.Object} object the object you want to transform\n     * @param {Array} transform the destination transform\n     */\n    removeTransformFromObject: function(object, transform) {\n      var inverted = fabric.util.invertTransform(transform),\n          finalTransform = fabric.util.multiplyTransformMatrices(inverted, object.calcOwnMatrix());\n      fabric.util.applyTransformToObject(object, finalTransform);\n    },\n\n    /**\n     * given an object and a transform, apply the transform to the object.\n     * this is equivalent to change the space where the object is drawn.\n     * Adding to an object a transform that scale by 2 is like scaling it by 2.\n     * This is used when removing an object from an active selection for example.\n     * @memberOf fabric.util\n     * @param {fabric.Object} object the object you want to transform\n     * @param {Array} transform the destination transform\n     */\n    addTransformToObject: function(object, transform) {\n      fabric.util.applyTransformToObject(\n        object,\n        fabric.util.multiplyTransformMatrices(transform, object.calcOwnMatrix())\n      );\n    },\n\n    /**\n     * discard an object transform state and apply the one from the matrix.\n     * @memberOf fabric.util\n     * @param {fabric.Object} object the object you want to transform\n     * @param {Array} transform the destination transform\n     */\n    applyTransformToObject: function(object, transform) {\n      var options = fabric.util.qrDecompose(transform),\n          center = new fabric.Point(options.translateX, options.translateY);\n      object.flipX = false;\n      object.flipY = false;\n      object.set('scaleX', options.scaleX);\n      object.set('scaleY', options.scaleY);\n      object.skewX = options.skewX;\n      object.skewY = options.skewY;\n      object.angle = options.angle;\n      object.setPositionByOrigin(center, 'center', 'center');\n    },\n\n    /**\n     * given a width and height, return the size of the bounding box\n     * that can contains the box with width/height with applied transform\n     * described in options.\n     * Use to calculate the boxes around objects for controls.\n     * @memberOf fabric.util\n     * @param {Number} width\n     * @param {Number} height\n     * @param {Object} options\n     * @param {Number} options.scaleX\n     * @param {Number} options.scaleY\n     * @param {Number} options.skewX\n     * @param {Number} options.skewY\n     * @return {Object.x} width of containing\n     * @return {Object.y} height of containing\n     */\n    sizeAfterTransform: function(width, height, options) {\n      var dimX = width / 2, dimY = height / 2,\n          points = [\n            {\n              x: -dimX,\n              y: -dimY\n            },\n            {\n              x: dimX,\n              y: -dimY\n            },\n            {\n              x: -dimX,\n              y: dimY\n            },\n            {\n              x: dimX,\n              y: dimY\n            }],\n          transformMatrix = fabric.util.calcDimensionsMatrix(options),\n          bbox = fabric.util.makeBoundingBoxFromPoints(points, transformMatrix);\n      return {\n        x: bbox.width,\n        y: bbox.height,\n      };\n    }\n  };\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n  var _join = Array.prototype.join,\n      commandLengths = {\n        m: 2,\n        l: 2,\n        h: 1,\n        v: 1,\n        c: 6,\n        s: 4,\n        q: 4,\n        t: 2,\n        a: 7\n      },\n      repeatedCommands = {\n        m: 'l',\n        M: 'L'\n      };\n  function segmentToBezier(th2, th3, cosTh, sinTh, rx, ry, cx1, cy1, mT, fromX, fromY) {\n    var costh2 = fabric.util.cos(th2),\n        sinth2 = fabric.util.sin(th2),\n        costh3 = fabric.util.cos(th3),\n        sinth3 = fabric.util.sin(th3),\n        toX = cosTh * rx * costh3 - sinTh * ry * sinth3 + cx1,\n        toY = sinTh * rx * costh3 + cosTh * ry * sinth3 + cy1,\n        cp1X = fromX + mT * ( -cosTh * rx * sinth2 - sinTh * ry * costh2),\n        cp1Y = fromY + mT * ( -sinTh * rx * sinth2 + cosTh * ry * costh2),\n        cp2X = toX + mT * ( cosTh * rx * sinth3 + sinTh * ry * costh3),\n        cp2Y = toY + mT * ( sinTh * rx * sinth3 - cosTh * ry * costh3);\n\n    return ['C',\n      cp1X, cp1Y,\n      cp2X, cp2Y,\n      toX, toY\n    ];\n  }\n\n  /* Adapted from http://dxr.mozilla.org/mozilla-central/source/content/svg/content/src/nsSVGPathDataParser.cpp\n   * by Andrea Bogazzi code is under MPL. if you don't have a copy of the license you can take it here\n   * http://mozilla.org/MPL/2.0/\n   */\n  function arcToSegments(toX, toY, rx, ry, large, sweep, rotateX) {\n    var PI = Math.PI, th = rotateX * PI / 180,\n        sinTh = fabric.util.sin(th),\n        cosTh = fabric.util.cos(th),\n        fromX = 0, fromY = 0;\n\n    rx = Math.abs(rx);\n    ry = Math.abs(ry);\n\n    var px = -cosTh * toX * 0.5 - sinTh * toY * 0.5,\n        py = -cosTh * toY * 0.5 + sinTh * toX * 0.5,\n        rx2 = rx * rx, ry2 = ry * ry, py2 = py * py, px2 = px * px,\n        pl = rx2 * ry2 - rx2 * py2 - ry2 * px2,\n        root = 0;\n\n    if (pl < 0) {\n      var s = Math.sqrt(1 - pl / (rx2 * ry2));\n      rx *= s;\n      ry *= s;\n    }\n    else {\n      root = (large === sweep ? -1.0 : 1.0) *\n              Math.sqrt( pl / (rx2 * py2 + ry2 * px2));\n    }\n\n    var cx = root * rx * py / ry,\n        cy = -root * ry * px / rx,\n        cx1 = cosTh * cx - sinTh * cy + toX * 0.5,\n        cy1 = sinTh * cx + cosTh * cy + toY * 0.5,\n        mTheta = calcVectorAngle(1, 0, (px - cx) / rx, (py - cy) / ry),\n        dtheta = calcVectorAngle((px - cx) / rx, (py - cy) / ry, (-px - cx) / rx, (-py - cy) / ry);\n\n    if (sweep === 0 && dtheta > 0) {\n      dtheta -= 2 * PI;\n    }\n    else if (sweep === 1 && dtheta < 0) {\n      dtheta += 2 * PI;\n    }\n\n    // Convert into cubic bezier segments <= 90deg\n    var segments = Math.ceil(Math.abs(dtheta / PI * 2)),\n        result = [], mDelta = dtheta / segments,\n        mT = 8 / 3 * Math.sin(mDelta / 4) * Math.sin(mDelta / 4) / Math.sin(mDelta / 2),\n        th3 = mTheta + mDelta;\n\n    for (var i = 0; i < segments; i++) {\n      result[i] = segmentToBezier(mTheta, th3, cosTh, sinTh, rx, ry, cx1, cy1, mT, fromX, fromY);\n      fromX = result[i][5];\n      fromY = result[i][6];\n      mTheta = th3;\n      th3 += mDelta;\n    }\n    return result;\n  }\n\n  /*\n   * Private\n   */\n  function calcVectorAngle(ux, uy, vx, vy) {\n    var ta = Math.atan2(uy, ux),\n        tb = Math.atan2(vy, vx);\n    if (tb >= ta) {\n      return tb - ta;\n    }\n    else {\n      return 2 * Math.PI - (ta - tb);\n    }\n  }\n\n  /**\n   * Calculate bounding box of a beziercurve\n   * @param {Number} x0 starting point\n   * @param {Number} y0\n   * @param {Number} x1 first control point\n   * @param {Number} y1\n   * @param {Number} x2 secondo control point\n   * @param {Number} y2\n   * @param {Number} x3 end of bezier\n   * @param {Number} y3\n   */\n  // taken from http://jsbin.com/ivomiq/56/edit  no credits available for that.\n  // TODO: can we normalize this with the starting points set at 0 and then translated the bbox?\n  function getBoundsOfCurve(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var argsString;\n    if (fabric.cachesBoundsOfCurve) {\n      argsString = _join.call(arguments);\n      if (fabric.boundsOfCurveCache[argsString]) {\n        return fabric.boundsOfCurveCache[argsString];\n      }\n    }\n\n    var sqrt = Math.sqrt,\n        min = Math.min, max = Math.max,\n        abs = Math.abs, tvalues = [],\n        bounds = [[], []],\n        a, b, c, t, t1, t2, b2ac, sqrtb2ac;\n\n    b = 6 * x0 - 12 * x1 + 6 * x2;\n    a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;\n    c = 3 * x1 - 3 * x0;\n\n    for (var i = 0; i < 2; ++i) {\n      if (i > 0) {\n        b = 6 * y0 - 12 * y1 + 6 * y2;\n        a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;\n        c = 3 * y1 - 3 * y0;\n      }\n\n      if (abs(a) < 1e-12) {\n        if (abs(b) < 1e-12) {\n          continue;\n        }\n        t = -c / b;\n        if (0 < t && t < 1) {\n          tvalues.push(t);\n        }\n        continue;\n      }\n      b2ac = b * b - 4 * c * a;\n      if (b2ac < 0) {\n        continue;\n      }\n      sqrtb2ac = sqrt(b2ac);\n      t1 = (-b + sqrtb2ac) / (2 * a);\n      if (0 < t1 && t1 < 1) {\n        tvalues.push(t1);\n      }\n      t2 = (-b - sqrtb2ac) / (2 * a);\n      if (0 < t2 && t2 < 1) {\n        tvalues.push(t2);\n      }\n    }\n\n    var x, y, j = tvalues.length, jlen = j, mt;\n    while (j--) {\n      t = tvalues[j];\n      mt = 1 - t;\n      x = (mt * mt * mt * x0) + (3 * mt * mt * t * x1) + (3 * mt * t * t * x2) + (t * t * t * x3);\n      bounds[0][j] = x;\n\n      y = (mt * mt * mt * y0) + (3 * mt * mt * t * y1) + (3 * mt * t * t * y2) + (t * t * t * y3);\n      bounds[1][j] = y;\n    }\n\n    bounds[0][jlen] = x0;\n    bounds[1][jlen] = y0;\n    bounds[0][jlen + 1] = x3;\n    bounds[1][jlen + 1] = y3;\n    var result = [\n      {\n        x: min.apply(null, bounds[0]),\n        y: min.apply(null, bounds[1])\n      },\n      {\n        x: max.apply(null, bounds[0]),\n        y: max.apply(null, bounds[1])\n      }\n    ];\n    if (fabric.cachesBoundsOfCurve) {\n      fabric.boundsOfCurveCache[argsString] = result;\n    }\n    return result;\n  }\n\n  /**\n   * Converts arc to a bunch of bezier curves\n   * @param {Number} fx starting point x\n   * @param {Number} fy starting point y\n   * @param {Array} coords Arc command\n   */\n  function fromArcToBeziers(fx, fy, coords) {\n    var rx = coords[1],\n        ry = coords[2],\n        rot = coords[3],\n        large = coords[4],\n        sweep = coords[5],\n        tx = coords[6],\n        ty = coords[7],\n        segsNorm = arcToSegments(tx - fx, ty - fy, rx, ry, large, sweep, rot);\n\n    for (var i = 0, len = segsNorm.length; i < len; i++) {\n      segsNorm[i][1] += fx;\n      segsNorm[i][2] += fy;\n      segsNorm[i][3] += fx;\n      segsNorm[i][4] += fy;\n      segsNorm[i][5] += fx;\n      segsNorm[i][6] += fy;\n    }\n    return segsNorm;\n  };\n\n  /**\n   * This function take a parsed SVG path and make it simpler for fabricJS logic.\n   * simplification consist of: only UPPERCASE absolute commands ( relative converted to absolute )\n   * S converted in C, T converted in Q, A converted in C.\n   * @param {Array} path the array of commands of a parsed svg path for fabric.Path\n   * @return {Array} the simplified array of commands of a parsed svg path for fabric.Path\n   */\n  function makePathSimpler(path) {\n    // x and y represent the last point of the path. the previous command point.\n    // we add them to each relative command to make it an absolute comment.\n    // we also swap the v V h H with L, because are easier to transform.\n    var x = 0, y = 0, len = path.length,\n        // x1 and y1 represent the last point of the subpath. the subpath is started with\n        // m or M command. When a z or Z command is drawn, x and y need to be resetted to\n        // the last x1 and y1.\n        x1 = 0, y1 = 0, current, i, converted,\n        // previous will host the letter of the previous command, to handle S and T.\n        // controlX and controlY will host the previous reflected control point\n        destinationPath = [], previous, controlX, controlY;\n    for (i = 0; i < len; ++i) {\n      converted = false;\n      current = path[i].slice(0);\n      switch (current[0]) { // first letter\n        case 'l': // lineto, relative\n          current[0] = 'L';\n          current[1] += x;\n          current[2] += y;\n          // falls through\n        case 'L':\n          x = current[1];\n          y = current[2];\n          break;\n        case 'h': // horizontal lineto, relative\n          current[1] += x;\n          // falls through\n        case 'H':\n          current[0] = 'L';\n          current[2] = y;\n          x = current[1];\n          break;\n        case 'v': // vertical lineto, relative\n          current[1] += y;\n          // falls through\n        case 'V':\n          current[0] = 'L';\n          y = current[1];\n          current[1] = x;\n          current[2] = y;\n          break;\n        case 'm': // moveTo, relative\n          current[0] = 'M';\n          current[1] += x;\n          current[2] += y;\n          // falls through\n        case 'M':\n          x = current[1];\n          y = current[2];\n          x1 = current[1];\n          y1 = current[2];\n          break;\n        case 'c': // bezierCurveTo, relative\n          current[0] = 'C';\n          current[1] += x;\n          current[2] += y;\n          current[3] += x;\n          current[4] += y;\n          current[5] += x;\n          current[6] += y;\n          // falls through\n        case 'C':\n          controlX = current[3];\n          controlY = current[4];\n          x = current[5];\n          y = current[6];\n          break;\n        case 's': // shorthand cubic bezierCurveTo, relative\n          current[0] = 'S';\n          current[1] += x;\n          current[2] += y;\n          current[3] += x;\n          current[4] += y;\n          // falls through\n        case 'S':\n          // would be sScC but since we are swapping sSc for C, we check just that.\n          if (previous === 'C') {\n            // calculate reflection of previous control points\n            controlX = 2 * x - controlX;\n            controlY = 2 * y - controlY;\n          }\n          else {\n            // If there is no previous command or if the previous command was not a C, c, S, or s,\n            // the control point is coincident with the current point\n            controlX = x;\n            controlY = y;\n          }\n          x = current[3];\n          y = current[4];\n          current[0] = 'C';\n          current[5] = current[3];\n          current[6] = current[4];\n          current[3] = current[1];\n          current[4] = current[2];\n          current[1] = controlX;\n          current[2] = controlY;\n          // current[3] and current[4] are NOW the second control point.\n          // we keep it for the next reflection.\n          controlX = current[3];\n          controlY = current[4];\n          break;\n        case 'q': // quadraticCurveTo, relative\n          current[0] = 'Q';\n          current[1] += x;\n          current[2] += y;\n          current[3] += x;\n          current[4] += y;\n          // falls through\n        case 'Q':\n          controlX = current[1];\n          controlY = current[2];\n          x = current[3];\n          y = current[4];\n          break;\n        case 't': // shorthand quadraticCurveTo, relative\n          current[0] = 'T';\n          current[1] += x;\n          current[2] += y;\n          // falls through\n        case 'T':\n          if (previous === 'Q') {\n            // calculate reflection of previous control point\n            controlX = 2 * x - controlX;\n            controlY = 2 * y - controlY;\n          }\n          else {\n            // If there is no previous command or if the previous command was not a Q, q, T or t,\n            // assume the control point is coincident with the current point\n            controlX = x;\n            controlY = y;\n          }\n          current[0] = 'Q';\n          x = current[1];\n          y = current[2];\n          current[1] = controlX;\n          current[2] = controlY;\n          current[3] = x;\n          current[4] = y;\n          break;\n        case 'a':\n          current[0] = 'A';\n          current[6] += x;\n          current[7] += y;\n          // falls through\n        case 'A':\n          converted = true;\n          destinationPath = destinationPath.concat(fromArcToBeziers(x, y, current));\n          x = current[6];\n          y = current[7];\n          break;\n        case 'z':\n        case 'Z':\n          x = x1;\n          y = y1;\n          break;\n        default:\n      }\n      if (!converted) {\n        destinationPath.push(current);\n      }\n      previous = current[0];\n    }\n    return destinationPath;\n  };\n\n  /**\n   * Calc length from point x1,y1 to x2,y2\n   * @param {Number} x1 starting point x\n   * @param {Number} y1 starting point y\n   * @param {Number} x2 starting point x\n   * @param {Number} y2 starting point y\n   * @return {Number} length of segment\n   */\n  function calcLineLength(x1, y1, x2, y2) {\n    return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  }\n\n  // functions for the Cubic beizer\n  // taken from: https://github.com/konvajs/konva/blob/7.0.5/src/shapes/Path.ts#L350\n  function CB1(t) {\n    return t * t * t;\n  }\n  function CB2(t) {\n    return 3 * t * t * (1 - t);\n  }\n  function CB3(t) {\n    return 3 * t * (1 - t) * (1 - t);\n  }\n  function CB4(t) {\n    return (1 - t) * (1 - t) * (1 - t);\n  }\n\n  function getPointOnCubicBezierIterator(p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {\n    return function(pct) {\n      var c1 = CB1(pct), c2 = CB2(pct), c3 = CB3(pct), c4 = CB4(pct);\n      return {\n        x: p4x * c1 + p3x * c2 + p2x * c3 + p1x * c4,\n        y: p4y * c1 + p3y * c2 + p2y * c3 + p1y * c4\n      };\n    };\n  }\n\n  function getTangentCubicIterator(p1x, p1y, p2x, p2y, p3x, p3y, p4x, p4y) {\n    return function (pct) {\n      var invT = 1 - pct,\n          tangentX = (3 * invT * invT * (p2x - p1x)) + (6 * invT * pct * (p3x - p2x)) +\n          (3 * pct * pct * (p4x - p3x)),\n          tangentY = (3 * invT * invT * (p2y - p1y)) + (6 * invT * pct * (p3y - p2y)) +\n          (3 * pct * pct * (p4y - p3y));\n      return Math.atan2(tangentY, tangentX);\n    };\n  }\n\n  function QB1(t) {\n    return t * t;\n  }\n\n  function QB2(t) {\n    return 2 * t * (1 - t);\n  }\n\n  function QB3(t) {\n    return (1 - t) * (1 - t);\n  }\n\n  function getPointOnQuadraticBezierIterator(p1x, p1y, p2x, p2y, p3x, p3y) {\n    return function(pct) {\n      var c1 = QB1(pct), c2 = QB2(pct), c3 = QB3(pct);\n      return {\n        x: p3x * c1 + p2x * c2 + p1x * c3,\n        y: p3y * c1 + p2y * c2 + p1y * c3\n      };\n    };\n  }\n\n  function getTangentQuadraticIterator(p1x, p1y, p2x, p2y, p3x, p3y) {\n    return function (pct) {\n      var invT = 1 - pct,\n          tangentX = (2 * invT * (p2x - p1x)) + (2 * pct * (p3x - p2x)),\n          tangentY = (2 * invT * (p2y - p1y)) + (2 * pct * (p3y - p2y));\n      return Math.atan2(tangentY, tangentX);\n    };\n  }\n\n\n  // this will run over a path segment ( a cubic or quadratic segment) and approximate it\n  // with 100 segemnts. This will good enough to calculate the length of the curve\n  function pathIterator(iterator, x1, y1) {\n    var tempP = { x: x1, y: y1 }, p, tmpLen = 0, perc;\n    for (perc = 0.01; perc <= 1; perc += 0.01) {\n      p = iterator(perc);\n      tmpLen += calcLineLength(tempP.x, tempP.y, p.x, p.y);\n      tempP = p;\n    }\n    return tmpLen;\n  }\n\n  /**\n   * Given a pathInfo, and a distance in pixels, find the percentage from 0 to 1\n   * that correspond to that pixels run over the path.\n   * The percentage will be then used to find the correct point on the canvas for the path.\n   * @param {Array} segInfo fabricJS collection of information on a parsed path\n   * @param {Number} distance from starting point, in pixels.\n   * @return {Object} info object with x and y ( the point on canvas ) and angle, the tangent on that point;\n   */\n  function findPercentageForDistance(segInfo, distance) {\n    var perc = 0, tmpLen = 0, iterator = segInfo.iterator, tempP = { x: segInfo.x, y: segInfo.y },\n        p, nextLen, nextStep = 0.01, angleFinder = segInfo.angleFinder, lastPerc;\n    // nextStep > 0.0001 covers 0.00015625 that 1/64th of 1/100\n    // the path\n    while (tmpLen < distance && perc <= 1 && nextStep > 0.0001) {\n      p = iterator(perc);\n      lastPerc = perc;\n      nextLen = calcLineLength(tempP.x, tempP.y, p.x, p.y);\n      // compare tmpLen each cycle with distance, decide next perc to test.\n      if ((nextLen + tmpLen) > distance) {\n        // we discard this step and we make smaller steps.\n        nextStep /= 2;\n        perc -= nextStep;\n      }\n      else {\n        tempP = p;\n        perc += nextStep;\n        tmpLen += nextLen;\n      }\n    }\n    p.angle = angleFinder(lastPerc);\n    return p;\n  }\n\n  /**\n   * Run over a parsed and simplifed path and extrac some informations.\n   * informations are length of each command and starting point\n   * @param {Array} path fabricJS parsed path commands\n   * @return {Array} path commands informations\n   */\n  function getPathSegmentsInfo(path) {\n    var totalLength = 0, len = path.length, current,\n        //x2 and y2 are the coords of segment start\n        //x1 and y1 are the coords of the current point\n        x1 = 0, y1 = 0, x2 = 0, y2 = 0, info = [], iterator, tempInfo, angleFinder;\n    for (var i = 0; i < len; i++) {\n      current = path[i];\n      tempInfo = {\n        x: x1,\n        y: y1,\n        command: current[0],\n      };\n      switch (current[0]) { //first letter\n        case 'M':\n          tempInfo.length = 0;\n          x2 = x1 = current[1];\n          y2 = y1 = current[2];\n          break;\n        case 'L':\n          tempInfo.length = calcLineLength(x1, y1, current[1], current[2]);\n          x1 = current[1];\n          y1 = current[2];\n          break;\n        case 'C':\n          iterator = getPointOnCubicBezierIterator(\n            x1,\n            y1,\n            current[1],\n            current[2],\n            current[3],\n            current[4],\n            current[5],\n            current[6]\n          );\n          angleFinder = getTangentCubicIterator(\n            x1,\n            y1,\n            current[1],\n            current[2],\n            current[3],\n            current[4],\n            current[5],\n            current[6]\n          );\n          tempInfo.iterator = iterator;\n          tempInfo.angleFinder = angleFinder;\n          tempInfo.length = pathIterator(iterator, x1, y1);\n          x1 = current[5];\n          y1 = current[6];\n          break;\n        case 'Q':\n          iterator = getPointOnQuadraticBezierIterator(\n            x1,\n            y1,\n            current[1],\n            current[2],\n            current[3],\n            current[4]\n          );\n          angleFinder = getTangentQuadraticIterator(\n            x1,\n            y1,\n            current[1],\n            current[2],\n            current[3],\n            current[4]\n          );\n          tempInfo.iterator = iterator;\n          tempInfo.angleFinder = angleFinder;\n          tempInfo.length = pathIterator(iterator, x1, y1);\n          x1 = current[3];\n          y1 = current[4];\n          break;\n        case 'Z':\n        case 'z':\n          // we add those in order to ease calculations later\n          tempInfo.destX = x2;\n          tempInfo.destY = y2;\n          tempInfo.length = calcLineLength(x1, y1, x2, y2);\n          x1 = x2;\n          y1 = y2;\n          break;\n      }\n      totalLength += tempInfo.length;\n      info.push(tempInfo);\n    }\n    info.push({ length: totalLength, x: x1, y: y1 });\n    return info;\n  }\n\n  function getPointOnPath(path, distance, infos) {\n    if (!infos) {\n      infos = getPathSegmentsInfo(path);\n    }\n    var i = 0;\n    while ((distance - infos[i].length > 0) && i < (infos.length - 2)) {\n      distance -= infos[i].length;\n      i++;\n    }\n    // var distance = infos[infos.length - 1] * perc;\n    var segInfo = infos[i], segPercent = distance / segInfo.length,\n        command = segInfo.command, segment = path[i], info;\n\n    switch (command) {\n      case 'M':\n        return { x: segInfo.x, y: segInfo.y, angle: 0 };\n      case 'Z':\n      case 'z':\n        info = new fabric.Point(segInfo.x, segInfo.y).lerp(\n          new fabric.Point(segInfo.destX, segInfo.destY),\n          segPercent\n        );\n        info.angle = Math.atan2(segInfo.destY - segInfo.y, segInfo.destX - segInfo.x);\n        return info;\n      case 'L':\n        info = new fabric.Point(segInfo.x, segInfo.y).lerp(\n          new fabric.Point(segment[1], segment[2]),\n          segPercent\n        );\n        info.angle = Math.atan2(segment[2] - segInfo.y, segment[1] - segInfo.x);\n        return info;\n      case 'C':\n        return findPercentageForDistance(segInfo, distance);\n      case 'Q':\n        return findPercentageForDistance(segInfo, distance);\n    }\n  }\n\n  function parsePath(pathString) {\n    var result = [],\n        coords = [],\n        currentPath,\n        parsed,\n        re = fabric.rePathCommand,\n        rNumber = '[-+]?(?:\\\\d*\\\\.\\\\d+|\\\\d+\\\\.?)(?:[eE][-+]?\\\\d+)?\\\\s*',\n        rNumberCommaWsp = '(' + rNumber + ')' + fabric.commaWsp,\n        rFlagCommaWsp = '([01])' + fabric.commaWsp + '?',\n        rArcSeq = rNumberCommaWsp + '?' + rNumberCommaWsp + '?' + rNumberCommaWsp + rFlagCommaWsp + rFlagCommaWsp +\n          rNumberCommaWsp + '?(' + rNumber + ')',\n        regArcArgumentSequence = new RegExp(rArcSeq, 'g'),\n        match,\n        coordsStr,\n        // one of commands (m,M,l,L,q,Q,c,C,etc.) followed by non-command characters (i.e. command values)\n        path;\n    if (!pathString || !pathString.match) {\n      return result;\n    }\n    path = pathString.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);\n\n    for (var i = 0, coordsParsed, len = path.length; i < len; i++) {\n      currentPath = path[i];\n\n      coordsStr = currentPath.slice(1).trim();\n      coords.length = 0;\n\n      var command = currentPath.charAt(0);\n      coordsParsed = [command];\n\n      if (command.toLowerCase() === 'a') {\n        // arcs have special flags that apparently don't require spaces so handle special\n        for (var args; (args = regArcArgumentSequence.exec(coordsStr));) {\n          for (var j = 1; j < args.length; j++) {\n            coords.push(args[j]);\n          }\n        }\n      }\n      else {\n        while ((match = re.exec(coordsStr))) {\n          coords.push(match[0]);\n        }\n      }\n\n      for (var j = 0, jlen = coords.length; j < jlen; j++) {\n        parsed = parseFloat(coords[j]);\n        if (!isNaN(parsed)) {\n          coordsParsed.push(parsed);\n        }\n      }\n\n      var commandLength = commandLengths[command.toLowerCase()],\n          repeatedCommand = repeatedCommands[command] || command;\n\n      if (coordsParsed.length - 1 > commandLength) {\n        for (var k = 1, klen = coordsParsed.length; k < klen; k += commandLength) {\n          result.push([command].concat(coordsParsed.slice(k, k + commandLength)));\n          command = repeatedCommand;\n        }\n      }\n      else {\n        result.push(coordsParsed);\n      }\n    }\n\n    return result;\n  };\n\n  /**\n   * Calculate bounding box of a elliptic-arc\n   * @deprecated\n   * @param {Number} fx start point of arc\n   * @param {Number} fy\n   * @param {Number} rx horizontal radius\n   * @param {Number} ry vertical radius\n   * @param {Number} rot angle of horizontal axis\n   * @param {Number} large 1 or 0, whatever the arc is the big or the small on the 2 points\n   * @param {Number} sweep 1 or 0, 1 clockwise or counterclockwise direction\n   * @param {Number} tx end point of arc\n   * @param {Number} ty\n   */\n  function getBoundsOfArc(fx, fy, rx, ry, rot, large, sweep, tx, ty) {\n\n    var fromX = 0, fromY = 0, bound, bounds = [],\n        segs = arcToSegments(tx - fx, ty - fy, rx, ry, large, sweep, rot);\n\n    for (var i = 0, len = segs.length; i < len; i++) {\n      bound = getBoundsOfCurve(fromX, fromY, segs[i][1], segs[i][2], segs[i][3], segs[i][4], segs[i][5], segs[i][6]);\n      bounds.push({ x: bound[0].x + fx, y: bound[0].y + fy });\n      bounds.push({ x: bound[1].x + fx, y: bound[1].y + fy });\n      fromX = segs[i][5];\n      fromY = segs[i][6];\n    }\n    return bounds;\n  };\n\n  /**\n   * Draws arc\n   * @deprecated\n   * @param {CanvasRenderingContext2D} ctx\n   * @param {Number} fx\n   * @param {Number} fy\n   * @param {Array} coords coords of the arc, without the front 'A/a'\n   */\n  function drawArc(ctx, fx, fy, coords) {\n    coords = coords.slice(0).unshift('X'); // command A or a does not matter\n    var beziers = fromArcToBeziers(fx, fy, coords);\n    beziers.forEach(function(bezier) {\n      ctx.bezierCurveTo.apply(ctx, bezier.slice(1));\n    });\n  };\n\n  fabric.util.parsePath = parsePath;\n  fabric.util.makePathSimpler = makePathSimpler;\n  fabric.util.getPathSegmentsInfo = getPathSegmentsInfo;\n  fabric.util.fromArcToBeziers = fromArcToBeziers;\n  /**\n   * Typo of `fromArcToBeziers` kept for not breaking the api once corrected.\n   * Will be removed in fabric 5.0\n   * @deprecated\n   */\n  fabric.util.fromArcToBeizers = fromArcToBeziers;\n  fabric.util.getBoundsOfCurve = getBoundsOfCurve;\n  fabric.util.getPointOnPath = getPointOnPath;\n  // kept because we do not want to make breaking changes.\n  // but useless and deprecated.\n  fabric.util.getBoundsOfArc = getBoundsOfArc;\n  fabric.util.drawArc = drawArc;\n})();\n\n\n(function() {\n\n  var slice = Array.prototype.slice;\n\n  /**\n   * Invokes method on all items in a given array\n   * @memberOf fabric.util.array\n   * @param {Array} array Array to iterate over\n   * @param {String} method Name of a method to invoke\n   * @return {Array}\n   */\n  function invoke(array, method) {\n    var args = slice.call(arguments, 2), result = [];\n    for (var i = 0, len = array.length; i < len; i++) {\n      result[i] = args.length ? array[i][method].apply(array[i], args) : array[i][method].call(array[i]);\n    }\n    return result;\n  }\n\n  /**\n   * Finds maximum value in array (not necessarily \"first\" one)\n   * @memberOf fabric.util.array\n   * @param {Array} array Array to iterate over\n   * @param {String} byProperty\n   * @return {*}\n   */\n  function max(array, byProperty) {\n    return find(array, byProperty, function(value1, value2) {\n      return value1 >= value2;\n    });\n  }\n\n  /**\n   * Finds minimum value in array (not necessarily \"first\" one)\n   * @memberOf fabric.util.array\n   * @param {Array} array Array to iterate over\n   * @param {String} byProperty\n   * @return {*}\n   */\n  function min(array, byProperty) {\n    return find(array, byProperty, function(value1, value2) {\n      return value1 < value2;\n    });\n  }\n\n  /**\n   * @private\n   */\n  function fill(array, value) {\n    var k = array.length;\n    while (k--) {\n      array[k] = value;\n    }\n    return array;\n  }\n\n  /**\n   * @private\n   */\n  function find(array, byProperty, condition) {\n    if (!array || array.length === 0) {\n      return;\n    }\n\n    var i = array.length - 1,\n        result = byProperty ? array[i][byProperty] : array[i];\n    if (byProperty) {\n      while (i--) {\n        if (condition(array[i][byProperty], result)) {\n          result = array[i][byProperty];\n        }\n      }\n    }\n    else {\n      while (i--) {\n        if (condition(array[i], result)) {\n          result = array[i];\n        }\n      }\n    }\n    return result;\n  }\n\n  /**\n   * @namespace fabric.util.array\n   */\n  fabric.util.array = {\n    fill: fill,\n    invoke: invoke,\n    min: min,\n    max: max\n  };\n\n})();\n\n\n(function() {\n  /**\n   * Copies all enumerable properties of one js object to another\n   * this does not and cannot compete with generic utils.\n   * Does not clone or extend fabric.Object subclasses.\n   * This is mostly for internal use and has extra handling for fabricJS objects\n   * it skips the canvas and group properties in deep cloning.\n   * @memberOf fabric.util.object\n   * @param {Object} destination Where to copy to\n   * @param {Object} source Where to copy from\n   * @return {Object}\n   */\n\n  function extend(destination, source, deep) {\n    // JScript DontEnum bug is not taken care of\n    // the deep clone is for internal use, is not meant to avoid\n    // javascript traps or cloning html element or self referenced objects.\n    if (deep) {\n      if (!fabric.isLikelyNode && source instanceof Element) {\n        // avoid cloning deep images, canvases,\n        destination = source;\n      }\n      else if (source instanceof Array) {\n        destination = [];\n        for (var i = 0, len = source.length; i < len; i++) {\n          destination[i] = extend({ }, source[i], deep);\n        }\n      }\n      else if (source && typeof source === 'object') {\n        for (var property in source) {\n          if (property === 'canvas' || property === 'group') {\n            // we do not want to clone this props at all.\n            // we want to keep the keys in the copy\n            destination[property] = null;\n          }\n          else if (source.hasOwnProperty(property)) {\n            destination[property] = extend({ }, source[property], deep);\n          }\n        }\n      }\n      else {\n        // this sounds odd for an extend but is ok for recursive use\n        destination = source;\n      }\n    }\n    else {\n      for (var property in source) {\n        destination[property] = source[property];\n      }\n    }\n    return destination;\n  }\n\n  /**\n   * Creates an empty object and copies all enumerable properties of another object to it\n   * @memberOf fabric.util.object\n   * TODO: this function return an empty object if you try to clone null\n   * @param {Object} object Object to clone\n   * @return {Object}\n   */\n  function clone(object, deep) {\n    return extend({ }, object, deep);\n  }\n\n  /** @namespace fabric.util.object */\n  fabric.util.object = {\n    extend: extend,\n    clone: clone\n  };\n  fabric.util.object.extend(fabric.util, fabric.Observable);\n})();\n\n\n(function() {\n\n  /**\n   * Camelizes a string\n   * @memberOf fabric.util.string\n   * @param {String} string String to camelize\n   * @return {String} Camelized version of a string\n   */\n  function camelize(string) {\n    return string.replace(/-+(.)?/g, function(match, character) {\n      return character ? character.toUpperCase() : '';\n    });\n  }\n\n  /**\n   * Capitalizes a string\n   * @memberOf fabric.util.string\n   * @param {String} string String to capitalize\n   * @param {Boolean} [firstLetterOnly] If true only first letter is capitalized\n   * and other letters stay untouched, if false first letter is capitalized\n   * and other letters are converted to lowercase.\n   * @return {String} Capitalized version of a string\n   */\n  function capitalize(string, firstLetterOnly) {\n    return string.charAt(0).toUpperCase() +\n      (firstLetterOnly ? string.slice(1) : string.slice(1).toLowerCase());\n  }\n\n  /**\n   * Escapes XML in a string\n   * @memberOf fabric.util.string\n   * @param {String} string String to escape\n   * @return {String} Escaped version of a string\n   */\n  function escapeXml(string) {\n    return string.replace(/&/g, '&amp;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&apos;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;');\n  }\n\n  /**\n   * Divide a string in the user perceived single units\n   * @memberOf fabric.util.string\n   * @param {String} textstring String to escape\n   * @return {Array} array containing the graphemes\n   */\n  function graphemeSplit(textstring) {\n    var i = 0, chr, graphemes = [];\n    for (i = 0, chr; i < textstring.length; i++) {\n      if ((chr = getWholeChar(textstring, i)) === false) {\n        continue;\n      }\n      graphemes.push(chr);\n    }\n    return graphemes;\n  }\n\n  // taken from mdn in the charAt doc page.\n  function getWholeChar(str, i) {\n    var code = str.charCodeAt(i);\n\n    if (isNaN(code)) {\n      return ''; // Position not found\n    }\n    if (code < 0xD800 || code > 0xDFFF) {\n      return str.charAt(i);\n    }\n\n    // High surrogate (could change last hex to 0xDB7F to treat high private\n    // surrogates as single characters)\n    if (0xD800 <= code && code <= 0xDBFF) {\n      if (str.length <= (i + 1)) {\n        throw 'High surrogate without following low surrogate';\n      }\n      var next = str.charCodeAt(i + 1);\n      if (0xDC00 > next || next > 0xDFFF) {\n        throw 'High surrogate without following low surrogate';\n      }\n      return str.charAt(i) + str.charAt(i + 1);\n    }\n    // Low surrogate (0xDC00 <= code && code <= 0xDFFF)\n    if (i === 0) {\n      throw 'Low surrogate without preceding high surrogate';\n    }\n    var prev = str.charCodeAt(i - 1);\n\n    // (could change last hex to 0xDB7F to treat high private\n    // surrogates as single characters)\n    if (0xD800 > prev || prev > 0xDBFF) {\n      throw 'Low surrogate without preceding high surrogate';\n    }\n    // We can pass over low surrogates now as the second component\n    // in a pair which we have already processed\n    return false;\n  }\n\n\n  /**\n   * String utilities\n   * @namespace fabric.util.string\n   */\n  fabric.util.string = {\n    camelize: camelize,\n    capitalize: capitalize,\n    escapeXml: escapeXml,\n    graphemeSplit: graphemeSplit\n  };\n})();\n\n\n(function() {\n\n  var slice = Array.prototype.slice, emptyFunction = function() { },\n\n      IS_DONTENUM_BUGGY = (function() {\n        for (var p in { toString: 1 }) {\n          if (p === 'toString') {\n            return false;\n          }\n        }\n        return true;\n      })(),\n\n      /** @ignore */\n      addMethods = function(klass, source, parent) {\n        for (var property in source) {\n\n          if (property in klass.prototype &&\n              typeof klass.prototype[property] === 'function' &&\n              (source[property] + '').indexOf('callSuper') > -1) {\n\n            klass.prototype[property] = (function(property) {\n              return function() {\n\n                var superclass = this.constructor.superclass;\n                this.constructor.superclass = parent;\n                var returnValue = source[property].apply(this, arguments);\n                this.constructor.superclass = superclass;\n\n                if (property !== 'initialize') {\n                  return returnValue;\n                }\n              };\n            })(property);\n          }\n          else {\n            klass.prototype[property] = source[property];\n          }\n\n          if (IS_DONTENUM_BUGGY) {\n            if (source.toString !== Object.prototype.toString) {\n              klass.prototype.toString = source.toString;\n            }\n            if (source.valueOf !== Object.prototype.valueOf) {\n              klass.prototype.valueOf = source.valueOf;\n            }\n          }\n        }\n      };\n\n  function Subclass() { }\n\n  function callSuper(methodName) {\n    var parentMethod = null,\n        _this = this;\n\n    // climb prototype chain to find method not equal to callee's method\n    while (_this.constructor.superclass) {\n      var superClassMethod = _this.constructor.superclass.prototype[methodName];\n      if (_this[methodName] !== superClassMethod) {\n        parentMethod = superClassMethod;\n        break;\n      }\n      // eslint-disable-next-line\n      _this = _this.constructor.superclass.prototype;\n    }\n\n    if (!parentMethod) {\n      return console.log('tried to callSuper ' + methodName + ', method not found in prototype chain', this);\n    }\n\n    return (arguments.length > 1)\n      ? parentMethod.apply(this, slice.call(arguments, 1))\n      : parentMethod.call(this);\n  }\n\n  /**\n   * Helper for creation of \"classes\".\n   * @memberOf fabric.util\n   * @param {Function} [parent] optional \"Class\" to inherit from\n   * @param {Object} [properties] Properties shared by all instances of this class\n   *                  (be careful modifying objects defined here as this would affect all instances)\n   */\n  function createClass() {\n    var parent = null,\n        properties = slice.call(arguments, 0);\n\n    if (typeof properties[0] === 'function') {\n      parent = properties.shift();\n    }\n    function klass() {\n      this.initialize.apply(this, arguments);\n    }\n\n    klass.superclass = parent;\n    klass.subclasses = [];\n\n    if (parent) {\n      Subclass.prototype = parent.prototype;\n      klass.prototype = new Subclass();\n      parent.subclasses.push(klass);\n    }\n    for (var i = 0, length = properties.length; i < length; i++) {\n      addMethods(klass, properties[i], parent);\n    }\n    if (!klass.prototype.initialize) {\n      klass.prototype.initialize = emptyFunction;\n    }\n    klass.prototype.constructor = klass;\n    klass.prototype.callSuper = callSuper;\n    return klass;\n  }\n\n  fabric.util.createClass = createClass;\n})();\n\n\n(function () {\n  // since ie11 can use addEventListener but they do not support options, i need to check\n  var couldUseAttachEvent = !!fabric.document.createElement('div').attachEvent,\n      touchEvents = ['touchstart', 'touchmove', 'touchend'];\n  /**\n   * Adds an event listener to an element\n   * @function\n   * @memberOf fabric.util\n   * @param {HTMLElement} element\n   * @param {String} eventName\n   * @param {Function} handler\n   */\n  fabric.util.addListener = function(element, eventName, handler, options) {\n    element && element.addEventListener(eventName, handler, couldUseAttachEvent ? false : options);\n  };\n\n  /**\n   * Removes an event listener from an element\n   * @function\n   * @memberOf fabric.util\n   * @param {HTMLElement} element\n   * @param {String} eventName\n   * @param {Function} handler\n   */\n  fabric.util.removeListener = function(element, eventName, handler, options) {\n    element && element.removeEventListener(eventName, handler, couldUseAttachEvent ? false : options);\n  };\n\n  function getTouchInfo(event) {\n    var touchProp = event.changedTouches;\n    if (touchProp && touchProp[0]) {\n      return touchProp[0];\n    }\n    return event;\n  }\n\n  fabric.util.getPointer = function(event) {\n    var element = event.target,\n        scroll = fabric.util.getScrollLeftTop(element),\n        _evt = getTouchInfo(event);\n    return {\n      x: _evt.clientX + scroll.left,\n      y: _evt.clientY + scroll.top\n    };\n  };\n\n  fabric.util.isTouchEvent = function(event) {\n    return touchEvents.indexOf(event.type) > -1 || event.pointerType === 'touch';\n  };\n})();\n\n\n(function () {\n\n  /**\n   * Cross-browser wrapper for setting element's style\n   * @memberOf fabric.util\n   * @param {HTMLElement} element\n   * @param {Object} styles\n   * @return {HTMLElement} Element that was passed as a first argument\n   */\n  function setStyle(element, styles) {\n    var elementStyle = element.style;\n    if (!elementStyle) {\n      return element;\n    }\n    if (typeof styles === 'string') {\n      element.style.cssText += ';' + styles;\n      return styles.indexOf('opacity') > -1\n        ? setOpacity(element, styles.match(/opacity:\\s*(\\d?\\.?\\d*)/)[1])\n        : element;\n    }\n    for (var property in styles) {\n      if (property === 'opacity') {\n        setOpacity(element, styles[property]);\n      }\n      else {\n        var normalizedProperty = (property === 'float' || property === 'cssFloat')\n          ? (typeof elementStyle.styleFloat === 'undefined' ? 'cssFloat' : 'styleFloat')\n          : property;\n        elementStyle[normalizedProperty] = styles[property];\n      }\n    }\n    return element;\n  }\n\n  var parseEl = fabric.document.createElement('div'),\n      supportsOpacity = typeof parseEl.style.opacity === 'string',\n      supportsFilters = typeof parseEl.style.filter === 'string',\n      reOpacity = /alpha\\s*\\(\\s*opacity\\s*=\\s*([^\\)]+)\\)/,\n\n      /** @ignore */\n      setOpacity = function (element) { return element; };\n\n  if (supportsOpacity) {\n    /** @ignore */\n    setOpacity = function(element, value) {\n      element.style.opacity = value;\n      return element;\n    };\n  }\n  else if (supportsFilters) {\n    /** @ignore */\n    setOpacity = function(element, value) {\n      var es = element.style;\n      if (element.currentStyle && !element.currentStyle.hasLayout) {\n        es.zoom = 1;\n      }\n      if (reOpacity.test(es.filter)) {\n        value = value >= 0.9999 ? '' : ('alpha(opacity=' + (value * 100) + ')');\n        es.filter = es.filter.replace(reOpacity, value);\n      }\n      else {\n        es.filter += ' alpha(opacity=' + (value * 100) + ')';\n      }\n      return element;\n    };\n  }\n\n  fabric.util.setStyle = setStyle;\n\n})();\n\n\n(function() {\n\n  var _slice = Array.prototype.slice;\n\n  /**\n   * Takes id and returns an element with that id (if one exists in a document)\n   * @memberOf fabric.util\n   * @param {String|HTMLElement} id\n   * @return {HTMLElement|null}\n   */\n  function getById(id) {\n    return typeof id === 'string' ? fabric.document.getElementById(id) : id;\n  }\n\n  var sliceCanConvertNodelists,\n      /**\n       * Converts an array-like object (e.g. arguments or NodeList) to an array\n       * @memberOf fabric.util\n       * @param {Object} arrayLike\n       * @return {Array}\n       */\n      toArray = function(arrayLike) {\n        return _slice.call(arrayLike, 0);\n      };\n\n  try {\n    sliceCanConvertNodelists = toArray(fabric.document.childNodes) instanceof Array;\n  }\n  catch (err) { }\n\n  if (!sliceCanConvertNodelists) {\n    toArray = function(arrayLike) {\n      var arr = new Array(arrayLike.length), i = arrayLike.length;\n      while (i--) {\n        arr[i] = arrayLike[i];\n      }\n      return arr;\n    };\n  }\n\n  /**\n   * Creates specified element with specified attributes\n   * @memberOf fabric.util\n   * @param {String} tagName Type of an element to create\n   * @param {Object} [attributes] Attributes to set on an element\n   * @return {HTMLElement} Newly created element\n   */\n  function makeElement(tagName, attributes) {\n    var el = fabric.document.createElement(tagName);\n    for (var prop in attributes) {\n      if (prop === 'class') {\n        el.className = attributes[prop];\n      }\n      else if (prop === 'for') {\n        el.htmlFor = attributes[prop];\n      }\n      else {\n        el.setAttribute(prop, attributes[prop]);\n      }\n    }\n    return el;\n  }\n\n  /**\n   * Adds class to an element\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to add class to\n   * @param {String} className Class to add to an element\n   */\n  function addClass(element, className) {\n    if (element && (' ' + element.className + ' ').indexOf(' ' + className + ' ') === -1) {\n      element.className += (element.className ? ' ' : '') + className;\n    }\n  }\n\n  /**\n   * Wraps element with another element\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to wrap\n   * @param {HTMLElement|String} wrapper Element to wrap with\n   * @param {Object} [attributes] Attributes to set on a wrapper\n   * @return {HTMLElement} wrapper\n   */\n  function wrapElement(element, wrapper, attributes) {\n    if (typeof wrapper === 'string') {\n      wrapper = makeElement(wrapper, attributes);\n    }\n    if (element.parentNode) {\n      element.parentNode.replaceChild(wrapper, element);\n    }\n    wrapper.appendChild(element);\n    return wrapper;\n  }\n\n  /**\n   * Returns element scroll offsets\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to operate on\n   * @return {Object} Object with left/top values\n   */\n  function getScrollLeftTop(element) {\n\n    var left = 0,\n        top = 0,\n        docElement = fabric.document.documentElement,\n        body = fabric.document.body || {\n          scrollLeft: 0, scrollTop: 0\n        };\n\n    // While loop checks (and then sets element to) .parentNode OR .host\n    //  to account for ShadowDOM. We still want to traverse up out of ShadowDOM,\n    //  but the .parentNode of a root ShadowDOM node will always be null, instead\n    //  it should be accessed through .host. See http://stackoverflow.com/a/24765528/4383938\n    while (element && (element.parentNode || element.host)) {\n\n      // Set element to element parent, or 'host' in case of ShadowDOM\n      element = element.parentNode || element.host;\n\n      if (element === fabric.document) {\n        left = body.scrollLeft || docElement.scrollLeft || 0;\n        top = body.scrollTop ||  docElement.scrollTop || 0;\n      }\n      else {\n        left += element.scrollLeft || 0;\n        top += element.scrollTop || 0;\n      }\n\n      if (element.nodeType === 1 && element.style.position === 'fixed') {\n        break;\n      }\n    }\n\n    return { left: left, top: top };\n  }\n\n  /**\n   * Returns offset for a given element\n   * @function\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to get offset for\n   * @return {Object} Object with \"left\" and \"top\" properties\n   */\n  function getElementOffset(element) {\n    var docElem,\n        doc = element && element.ownerDocument,\n        box = { left: 0, top: 0 },\n        offset = { left: 0, top: 0 },\n        scrollLeftTop,\n        offsetAttributes = {\n          borderLeftWidth: 'left',\n          borderTopWidth:  'top',\n          paddingLeft:     'left',\n          paddingTop:      'top'\n        };\n\n    if (!doc) {\n      return offset;\n    }\n\n    for (var attr in offsetAttributes) {\n      offset[offsetAttributes[attr]] += parseInt(getElementStyle(element, attr), 10) || 0;\n    }\n\n    docElem = doc.documentElement;\n    if ( typeof element.getBoundingClientRect !== 'undefined' ) {\n      box = element.getBoundingClientRect();\n    }\n\n    scrollLeftTop = getScrollLeftTop(element);\n\n    return {\n      left: box.left + scrollLeftTop.left - (docElem.clientLeft || 0) + offset.left,\n      top: box.top + scrollLeftTop.top - (docElem.clientTop || 0)  + offset.top\n    };\n  }\n\n  /**\n   * Returns style attribute value of a given element\n   * @memberOf fabric.util\n   * @param {HTMLElement} element Element to get style attribute for\n   * @param {String} attr Style attribute to get for element\n   * @return {String} Style attribute value of the given element.\n   */\n  var getElementStyle;\n  if (fabric.document.defaultView && fabric.document.defaultView.getComputedStyle) {\n    getElementStyle = function(element, attr) {\n      var style = fabric.document.defaultView.getComputedStyle(element, null);\n      return style ? style[attr] : undefined;\n    };\n  }\n  else {\n    getElementStyle = function(element, attr) {\n      var value = element.style[attr];\n      if (!value && element.currentStyle) {\n        value = element.currentStyle[attr];\n      }\n      return value;\n    };\n  }\n\n  (function () {\n    var style = fabric.document.documentElement.style,\n        selectProp = 'userSelect' in style\n          ? 'userSelect'\n          : 'MozUserSelect' in style\n            ? 'MozUserSelect'\n            : 'WebkitUserSelect' in style\n              ? 'WebkitUserSelect'\n              : 'KhtmlUserSelect' in style\n                ? 'KhtmlUserSelect'\n                : '';\n\n    /**\n     * Makes element unselectable\n     * @memberOf fabric.util\n     * @param {HTMLElement} element Element to make unselectable\n     * @return {HTMLElement} Element that was passed in\n     */\n    function makeElementUnselectable(element) {\n      if (typeof element.onselectstart !== 'undefined') {\n        element.onselectstart = fabric.util.falseFunction;\n      }\n      if (selectProp) {\n        element.style[selectProp] = 'none';\n      }\n      else if (typeof element.unselectable === 'string') {\n        element.unselectable = 'on';\n      }\n      return element;\n    }\n\n    /**\n     * Makes element selectable\n     * @memberOf fabric.util\n     * @param {HTMLElement} element Element to make selectable\n     * @return {HTMLElement} Element that was passed in\n     */\n    function makeElementSelectable(element) {\n      if (typeof element.onselectstart !== 'undefined') {\n        element.onselectstart = null;\n      }\n      if (selectProp) {\n        element.style[selectProp] = '';\n      }\n      else if (typeof element.unselectable === 'string') {\n        element.unselectable = '';\n      }\n      return element;\n    }\n\n    fabric.util.makeElementUnselectable = makeElementUnselectable;\n    fabric.util.makeElementSelectable = makeElementSelectable;\n  })();\n\n  function getNodeCanvas(element) {\n    var impl = fabric.jsdomImplForWrapper(element);\n    return impl._canvas || impl._image;\n  };\n\n  function cleanUpJsdomNode(element) {\n    if (!fabric.isLikelyNode) {\n      return;\n    }\n    var impl = fabric.jsdomImplForWrapper(element);\n    if (impl) {\n      impl._image = null;\n      impl._canvas = null;\n      // unsure if necessary\n      impl._currentSrc = null;\n      impl._attributes = null;\n      impl._classList = null;\n    }\n  }\n\n  function setImageSmoothing(ctx, value) {\n    ctx.imageSmoothingEnabled = ctx.imageSmoothingEnabled || ctx.webkitImageSmoothingEnabled\n      || ctx.mozImageSmoothingEnabled || ctx.msImageSmoothingEnabled || ctx.oImageSmoothingEnabled;\n    ctx.imageSmoothingEnabled = value;\n  }\n\n  /**\n   * setImageSmoothing sets the context imageSmoothingEnabled property.\n   * Used by canvas and by ImageObject.\n   * @memberOf fabric.util\n   * @since 4.0.0\n   * @param {HTMLRenderingContext2D} ctx to set on\n   * @param {Boolean} value true or false\n   */\n  fabric.util.setImageSmoothing = setImageSmoothing;\n  fabric.util.getById = getById;\n  fabric.util.toArray = toArray;\n  fabric.util.addClass = addClass;\n  fabric.util.makeElement = makeElement;\n  fabric.util.wrapElement = wrapElement;\n  fabric.util.getScrollLeftTop = getScrollLeftTop;\n  fabric.util.getElementOffset = getElementOffset;\n  fabric.util.getNodeCanvas = getNodeCanvas;\n  fabric.util.cleanUpJsdomNode = cleanUpJsdomNode;\n\n})();\n\n\n(function() {\n\n  function addParamToUrl(url, param) {\n    return url + (/\\?/.test(url) ? '&' : '?') + param;\n  }\n\n  function emptyFn() { }\n\n  /**\n   * Cross-browser abstraction for sending XMLHttpRequest\n   * @memberOf fabric.util\n   * @param {String} url URL to send XMLHttpRequest to\n   * @param {Object} [options] Options object\n   * @param {String} [options.method=\"GET\"]\n   * @param {String} [options.parameters] parameters to append to url in GET or in body\n   * @param {String} [options.body] body to send with POST or PUT request\n   * @param {Function} options.onComplete Callback to invoke when request is completed\n   * @return {XMLHttpRequest} request\n   */\n  function request(url, options) {\n    options || (options = { });\n\n    var method = options.method ? options.method.toUpperCase() : 'GET',\n        onComplete = options.onComplete || function() { },\n        xhr = new fabric.window.XMLHttpRequest(),\n        body = options.body || options.parameters;\n\n    /** @ignore */\n    xhr.onreadystatechange = function() {\n      if (xhr.readyState === 4) {\n        onComplete(xhr);\n        xhr.onreadystatechange = emptyFn;\n      }\n    };\n\n    if (method === 'GET') {\n      body = null;\n      if (typeof options.parameters === 'string') {\n        url = addParamToUrl(url, options.parameters);\n      }\n    }\n\n    xhr.open(method, url, true);\n\n    if (method === 'POST' || method === 'PUT') {\n      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n    }\n\n    xhr.send(body);\n    return xhr;\n  }\n\n  fabric.util.request = request;\n})();\n\n\n/**\n * Wrapper around `console.log` (when available)\n * @param {*} [values] Values to log\n */\nfabric.log = console.log;\n\n/**\n * Wrapper around `console.warn` (when available)\n * @param {*} [values] Values to log as a warning\n */\nfabric.warn = console.warn;\n\n\n(function() {\n\n  function noop() {\n    return false;\n  }\n\n  function defaultEasing(t, b, c, d) {\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n  }\n\n  /**\n   * Changes value from one to another within certain period of time, invoking callbacks as value is being changed.\n   * @memberOf fabric.util\n   * @param {Object} [options] Animation options\n   * @param {Function} [options.onChange] Callback; invoked on every value change\n   * @param {Function} [options.onComplete] Callback; invoked when value change is completed\n   * @param {Number} [options.startValue=0] Starting value\n   * @param {Number} [options.endValue=100] Ending value\n   * @param {Number} [options.byValue=100] Value to modify the property by\n   * @param {Function} [options.easing] Easing function\n   * @param {Number} [options.duration=500] Duration of change (in ms)\n   * @param {Function} [options.abort] Additional function with logic. If returns true, onComplete is called.\n   */\n  function animate(options) {\n\n    requestAnimFrame(function(timestamp) {\n      options || (options = { });\n\n      var start = timestamp || +new Date(),\n          duration = options.duration || 500,\n          finish = start + duration, time,\n          onChange = options.onChange || noop,\n          abort = options.abort || noop,\n          onComplete = options.onComplete || noop,\n          easing = options.easing || defaultEasing,\n          startValue = 'startValue' in options ? options.startValue : 0,\n          endValue = 'endValue' in options ? options.endValue : 100,\n          byValue = options.byValue || endValue - startValue;\n\n      options.onStart && options.onStart();\n\n      (function tick(ticktime) {\n        // TODO: move abort call after calculation\n        // and pass (current,valuePerc, timePerc) as arguments\n        time = ticktime || +new Date();\n        var currentTime = time > finish ? duration : (time - start),\n            timePerc = currentTime / duration,\n            current = easing(currentTime, startValue, byValue, duration),\n            valuePerc = Math.abs((current - startValue) / byValue);\n        if (abort()) {\n          onComplete(endValue, 1, 1);\n          return;\n        }\n        if (time > finish) {\n          onChange(endValue, 1, 1);\n          onComplete(endValue, 1, 1);\n          return;\n        }\n        else {\n          onChange(current, valuePerc, timePerc);\n          requestAnimFrame(tick);\n        }\n      })(start);\n    });\n  }\n\n  var _requestAnimFrame = fabric.window.requestAnimationFrame       ||\n                          fabric.window.webkitRequestAnimationFrame ||\n                          fabric.window.mozRequestAnimationFrame    ||\n                          fabric.window.oRequestAnimationFrame      ||\n                          fabric.window.msRequestAnimationFrame     ||\n                          function(callback) {\n                            return fabric.window.setTimeout(callback, 1000 / 60);\n                          };\n\n  var _cancelAnimFrame = fabric.window.cancelAnimationFrame || fabric.window.clearTimeout;\n\n  /**\n   * requestAnimationFrame polyfill based on http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n   * In order to get a precise start time, `requestAnimFrame` should be called as an entry into the method\n   * @memberOf fabric.util\n   * @param {Function} callback Callback to invoke\n   * @param {DOMElement} element optional Element to associate with animation\n   */\n  function requestAnimFrame() {\n    return _requestAnimFrame.apply(fabric.window, arguments);\n  }\n\n  function cancelAnimFrame() {\n    return _cancelAnimFrame.apply(fabric.window, arguments);\n  }\n\n  fabric.util.animate = animate;\n  fabric.util.requestAnimFrame = requestAnimFrame;\n  fabric.util.cancelAnimFrame = cancelAnimFrame;\n})();\n\n\n(function() {\n  // Calculate an in-between color. Returns a \"rgba()\" string.\n  // Credit: Edwin Martin <edwin@bitstorm.org>\n  //         http://www.bitstorm.org/jquery/color-animation/jquery.animate-colors.js\n  function calculateColor(begin, end, pos) {\n    var color = 'rgba('\n        + parseInt((begin[0] + pos * (end[0] - begin[0])), 10) + ','\n        + parseInt((begin[1] + pos * (end[1] - begin[1])), 10) + ','\n        + parseInt((begin[2] + pos * (end[2] - begin[2])), 10);\n\n    color += ',' + (begin && end ? parseFloat(begin[3] + pos * (end[3] - begin[3])) : 1);\n    color += ')';\n    return color;\n  }\n\n  /**\n   * Changes the color from one to another within certain period of time, invoking callbacks as value is being changed.\n   * @memberOf fabric.util\n   * @param {String} fromColor The starting color in hex or rgb(a) format.\n   * @param {String} toColor The starting color in hex or rgb(a) format.\n   * @param {Number} [duration] Duration of change (in ms).\n   * @param {Object} [options] Animation options\n   * @param {Function} [options.onChange] Callback; invoked on every value change\n   * @param {Function} [options.onComplete] Callback; invoked when value change is completed\n   * @param {Function} [options.colorEasing] Easing function. Note that this function only take two arguments (currentTime, duration). Thus the regular animation easing functions cannot be used.\n   * @param {Function} [options.abort] Additional function with logic. If returns true, onComplete is called.\n   */\n  function animateColor(fromColor, toColor, duration, options) {\n    var startColor = new fabric.Color(fromColor).getSource(),\n        endColor = new fabric.Color(toColor).getSource(),\n        originalOnComplete = options.onComplete,\n        originalOnChange = options.onChange;\n    options = options || {};\n\n    fabric.util.animate(fabric.util.object.extend(options, {\n      duration: duration || 500,\n      startValue: startColor,\n      endValue: endColor,\n      byValue: endColor,\n      easing: function (currentTime, startValue, byValue, duration) {\n        var posValue = options.colorEasing\n          ? options.colorEasing(currentTime, duration)\n          : 1 - Math.cos(currentTime / duration * (Math.PI / 2));\n        return calculateColor(startValue, byValue, posValue);\n      },\n      // has to take in account for color restoring;\n      onComplete: function(current, valuePerc, timePerc) {\n        if (originalOnComplete) {\n          return originalOnComplete(\n            calculateColor(endColor, endColor, 0),\n            valuePerc,\n            timePerc\n          );\n        }\n      },\n      onChange: function(current, valuePerc, timePerc) {\n        if (originalOnChange) {\n          if (Array.isArray(current)) {\n            return originalOnChange(\n              calculateColor(current, current, 0),\n              valuePerc,\n              timePerc\n            );\n          }\n          originalOnChange(current, valuePerc, timePerc);\n        }\n      }\n    }));\n  }\n\n  fabric.util.animateColor = animateColor;\n\n})();\n\n\n(function() {\n\n  function normalize(a, c, p, s) {\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    }\n    else {\n      //handle the 0/0 case:\n      if (c === 0 && a === 0) {\n        s = p / (2 * Math.PI) * Math.asin(1);\n      }\n      else {\n        s = p / (2 * Math.PI) * Math.asin(c / a);\n      }\n    }\n    return { a: a, c: c, p: p, s: s };\n  }\n\n  function elastic(opts, t, d) {\n    return opts.a *\n      Math.pow(2, 10 * (t -= 1)) *\n      Math.sin( (t * d - opts.s) * (2 * Math.PI) / opts.p );\n  }\n\n  /**\n   * Cubic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutCubic(t, b, c, d) {\n    return c * ((t = t / d - 1) * t * t + 1) + b;\n  }\n\n  /**\n   * Cubic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutCubic(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * t * t * t + b;\n    }\n    return c / 2 * ((t -= 2) * t * t + 2) + b;\n  }\n\n  /**\n   * Quartic easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInQuart(t, b, c, d) {\n    return c * (t /= d) * t * t * t + b;\n  }\n\n  /**\n   * Quartic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutQuart(t, b, c, d) {\n    return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n  }\n\n  /**\n   * Quartic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutQuart(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * t * t * t * t + b;\n    }\n    return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n  }\n\n  /**\n   * Quintic easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInQuint(t, b, c, d) {\n    return c * (t /= d) * t * t * t * t + b;\n  }\n\n  /**\n   * Quintic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutQuint(t, b, c, d) {\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  }\n\n  /**\n   * Quintic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutQuint(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * t * t * t * t * t + b;\n    }\n    return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n  }\n\n  /**\n   * Sinusoidal easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInSine(t, b, c, d) {\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n  }\n\n  /**\n   * Sinusoidal easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutSine(t, b, c, d) {\n    return c * Math.sin(t / d * (Math.PI / 2)) + b;\n  }\n\n  /**\n   * Sinusoidal easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutSine(t, b, c, d) {\n    return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n  }\n\n  /**\n   * Exponential easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInExpo(t, b, c, d) {\n    return (t === 0) ? b : c * Math.pow(2, 10 * (t / d - 1)) + b;\n  }\n\n  /**\n   * Exponential easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutExpo(t, b, c, d) {\n    return (t === d) ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n  }\n\n  /**\n   * Exponential easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutExpo(t, b, c, d) {\n    if (t === 0) {\n      return b;\n    }\n    if (t === d) {\n      return b + c;\n    }\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n    }\n    return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n  }\n\n  /**\n   * Circular easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInCirc(t, b, c, d) {\n    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n  }\n\n  /**\n   * Circular easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutCirc(t, b, c, d) {\n    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n  }\n\n  /**\n   * Circular easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutCirc(t, b, c, d) {\n    t /= d / 2;\n    if (t < 1) {\n      return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n    }\n    return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n  }\n\n  /**\n   * Elastic easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInElastic(t, b, c, d) {\n    var s = 1.70158, p = 0, a = c;\n    if (t === 0) {\n      return b;\n    }\n    t /= d;\n    if (t === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    var opts = normalize(a, c, p, s);\n    return -elastic(opts, t, d) + b;\n  }\n\n  /**\n   * Elastic easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutElastic(t, b, c, d) {\n    var s = 1.70158, p = 0, a = c;\n    if (t === 0) {\n      return b;\n    }\n    t /= d;\n    if (t === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    var opts = normalize(a, c, p, s);\n    return opts.a * Math.pow(2, -10 * t) * Math.sin((t * d - opts.s) * (2 * Math.PI) / opts.p ) + opts.c + b;\n  }\n\n  /**\n   * Elastic easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutElastic(t, b, c, d) {\n    var s = 1.70158, p = 0, a = c;\n    if (t === 0) {\n      return b;\n    }\n    t /= d / 2;\n    if (t === 2) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * (0.3 * 1.5);\n    }\n    var opts = normalize(a, c, p, s);\n    if (t < 1) {\n      return -0.5 * elastic(opts, t, d) + b;\n    }\n    return opts.a * Math.pow(2, -10 * (t -= 1)) *\n      Math.sin((t * d - opts.s) * (2 * Math.PI) / opts.p ) * 0.5 + opts.c + b;\n  }\n\n  /**\n   * Backwards easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInBack(t, b, c, d, s) {\n    if (s === undefined) {\n      s = 1.70158;\n    }\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  }\n\n  /**\n   * Backwards easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutBack(t, b, c, d, s) {\n    if (s === undefined) {\n      s = 1.70158;\n    }\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  }\n\n  /**\n   * Backwards easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutBack(t, b, c, d, s) {\n    if (s === undefined) {\n      s = 1.70158;\n    }\n    t /= d / 2;\n    if (t < 1) {\n      return c / 2 * (t * t * (((s *= (1.525)) + 1) * t - s)) + b;\n    }\n    return c / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2) + b;\n  }\n\n  /**\n   * Bouncing easing in\n   * @memberOf fabric.util.ease\n   */\n  function easeInBounce(t, b, c, d) {\n    return c - easeOutBounce (d - t, 0, c, d) + b;\n  }\n\n  /**\n   * Bouncing easing out\n   * @memberOf fabric.util.ease\n   */\n  function easeOutBounce(t, b, c, d) {\n    if ((t /= d) < (1 / 2.75)) {\n      return c * (7.5625 * t * t) + b;\n    }\n    else if (t < (2 / 2.75)) {\n      return c * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75) + b;\n    }\n    else if (t < (2.5 / 2.75)) {\n      return c * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375) + b;\n    }\n    else {\n      return c * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375) + b;\n    }\n  }\n\n  /**\n   * Bouncing easing in and out\n   * @memberOf fabric.util.ease\n   */\n  function easeInOutBounce(t, b, c, d) {\n    if (t < d / 2) {\n      return easeInBounce (t * 2, 0, c, d) * 0.5 + b;\n    }\n    return easeOutBounce(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n  }\n\n  /**\n   * Easing functions\n   * See <a href=\"http://gizma.com/easing/\">Easing Equations by Robert Penner</a>\n   * @namespace fabric.util.ease\n   */\n  fabric.util.ease = {\n\n    /**\n     * Quadratic easing in\n     * @memberOf fabric.util.ease\n     */\n    easeInQuad: function(t, b, c, d) {\n      return c * (t /= d) * t + b;\n    },\n\n    /**\n     * Quadratic easing out\n     * @memberOf fabric.util.ease\n     */\n    easeOutQuad: function(t, b, c, d) {\n      return -c * (t /= d) * (t - 2) + b;\n    },\n\n    /**\n     * Quadratic easing in and out\n     * @memberOf fabric.util.ease\n     */\n    easeInOutQuad: function(t, b, c, d) {\n      t /= (d / 2);\n      if (t < 1) {\n        return c / 2 * t * t + b;\n      }\n      return -c / 2 * ((--t) * (t - 2) - 1) + b;\n    },\n\n    /**\n     * Cubic easing in\n     * @memberOf fabric.util.ease\n     */\n    easeInCubic: function(t, b, c, d) {\n      return c * (t /= d) * t * t + b;\n    },\n\n    easeOutCubic: easeOutCubic,\n    easeInOutCubic: easeInOutCubic,\n    easeInQuart: easeInQuart,\n    easeOutQuart: easeOutQuart,\n    easeInOutQuart: easeInOutQuart,\n    easeInQuint: easeInQuint,\n    easeOutQuint: easeOutQuint,\n    easeInOutQuint: easeInOutQuint,\n    easeInSine: easeInSine,\n    easeOutSine: easeOutSine,\n    easeInOutSine: easeInOutSine,\n    easeInExpo: easeInExpo,\n    easeOutExpo: easeOutExpo,\n    easeInOutExpo: easeInOutExpo,\n    easeInCirc: easeInCirc,\n    easeOutCirc: easeOutCirc,\n    easeInOutCirc: easeInOutCirc,\n    easeInElastic: easeInElastic,\n    easeOutElastic: easeOutElastic,\n    easeInOutElastic: easeInOutElastic,\n    easeInBack: easeInBack,\n    easeOutBack: easeOutBack,\n    easeInOutBack: easeInOutBack,\n    easeInBounce: easeInBounce,\n    easeOutBounce: easeOutBounce,\n    easeInOutBounce: easeInOutBounce\n  };\n\n})();\n\n\n(function(global) {\n\n  'use strict';\n\n  /**\n   * @name fabric\n   * @namespace\n   */\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      clone = fabric.util.object.clone,\n      toFixed = fabric.util.toFixed,\n      parseUnit = fabric.util.parseUnit,\n      multiplyTransformMatrices = fabric.util.multiplyTransformMatrices,\n\n      svgValidTagNames = ['path', 'circle', 'polygon', 'polyline', 'ellipse', 'rect', 'line',\n        'image', 'text'],\n      svgViewBoxElements = ['symbol', 'image', 'marker', 'pattern', 'view', 'svg'],\n      svgInvalidAncestors = ['pattern', 'defs', 'symbol', 'metadata', 'clipPath', 'mask', 'desc'],\n      svgValidParents = ['symbol', 'g', 'a', 'svg', 'clipPath', 'defs'],\n\n      attributesMap = {\n        cx:                   'left',\n        x:                    'left',\n        r:                    'radius',\n        cy:                   'top',\n        y:                    'top',\n        display:              'visible',\n        visibility:           'visible',\n        transform:            'transformMatrix',\n        'fill-opacity':       'fillOpacity',\n        'fill-rule':          'fillRule',\n        'font-family':        'fontFamily',\n        'font-size':          'fontSize',\n        'font-style':         'fontStyle',\n        'font-weight':        'fontWeight',\n        'letter-spacing':     'charSpacing',\n        'paint-order':        'paintFirst',\n        'stroke-dasharray':   'strokeDashArray',\n        'stroke-dashoffset':  'strokeDashOffset',\n        'stroke-linecap':     'strokeLineCap',\n        'stroke-linejoin':    'strokeLineJoin',\n        'stroke-miterlimit':  'strokeMiterLimit',\n        'stroke-opacity':     'strokeOpacity',\n        'stroke-width':       'strokeWidth',\n        'text-decoration':    'textDecoration',\n        'text-anchor':        'textAnchor',\n        opacity:              'opacity',\n        'clip-path':          'clipPath',\n        'clip-rule':          'clipRule',\n        'vector-effect':      'strokeUniform',\n        'image-rendering':    'imageSmoothing',\n      },\n\n      colorAttributes = {\n        stroke: 'strokeOpacity',\n        fill:   'fillOpacity'\n      },\n\n      fSize = 'font-size', cPath = 'clip-path';\n\n  fabric.svgValidTagNamesRegEx = getSvgRegex(svgValidTagNames);\n  fabric.svgViewBoxElementsRegEx = getSvgRegex(svgViewBoxElements);\n  fabric.svgInvalidAncestorsRegEx = getSvgRegex(svgInvalidAncestors);\n  fabric.svgValidParentsRegEx = getSvgRegex(svgValidParents);\n\n  fabric.cssRules = { };\n  fabric.gradientDefs = { };\n  fabric.clipPaths = { };\n\n  function normalizeAttr(attr) {\n    // transform attribute names\n    if (attr in attributesMap) {\n      return attributesMap[attr];\n    }\n    return attr;\n  }\n\n  function normalizeValue(attr, value, parentAttributes, fontSize) {\n    var isArray = Object.prototype.toString.call(value) === '[object Array]',\n        parsed;\n\n    if ((attr === 'fill' || attr === 'stroke') && value === 'none') {\n      value = '';\n    }\n    else if (attr === 'strokeUniform') {\n      return (value === 'non-scaling-stroke');\n    }\n    else if (attr === 'strokeDashArray') {\n      if (value === 'none') {\n        value = null;\n      }\n      else {\n        value = value.replace(/,/g, ' ').split(/\\s+/).map(parseFloat);\n      }\n    }\n    else if (attr === 'transformMatrix') {\n      if (parentAttributes && parentAttributes.transformMatrix) {\n        value = multiplyTransformMatrices(\n          parentAttributes.transformMatrix, fabric.parseTransformAttribute(value));\n      }\n      else {\n        value = fabric.parseTransformAttribute(value);\n      }\n    }\n    else if (attr === 'visible') {\n      value = value !== 'none' && value !== 'hidden';\n      // display=none on parent element always takes precedence over child element\n      if (parentAttributes && parentAttributes.visible === false) {\n        value = false;\n      }\n    }\n    else if (attr === 'opacity') {\n      value = parseFloat(value);\n      if (parentAttributes && typeof parentAttributes.opacity !== 'undefined') {\n        value *= parentAttributes.opacity;\n      }\n    }\n    else if (attr === 'textAnchor' /* text-anchor */) {\n      value = value === 'start' ? 'left' : value === 'end' ? 'right' : 'center';\n    }\n    else if (attr === 'charSpacing') {\n      // parseUnit returns px and we convert it to em\n      parsed = parseUnit(value, fontSize) / fontSize * 1000;\n    }\n    else if (attr === 'paintFirst') {\n      var fillIndex = value.indexOf('fill');\n      var strokeIndex = value.indexOf('stroke');\n      var value = 'fill';\n      if (fillIndex > -1 && strokeIndex > -1 && strokeIndex < fillIndex) {\n        value = 'stroke';\n      }\n      else if (fillIndex === -1 && strokeIndex > -1) {\n        value = 'stroke';\n      }\n    }\n    else if (attr === 'href' || attr === 'xlink:href' || attr === 'font') {\n      return value;\n    }\n    else if (attr === 'imageSmoothing') {\n      return (value === 'optimizeQuality');\n    }\n    else {\n      parsed = isArray ? value.map(parseUnit) : parseUnit(value, fontSize);\n    }\n\n    return (!isArray && isNaN(parsed) ? value : parsed);\n  }\n\n  /**\n    * @private\n    */\n  function getSvgRegex(arr) {\n    return new RegExp('^(' + arr.join('|') + ')\\\\b', 'i');\n  }\n\n  /**\n   * @private\n   * @param {Object} attributes Array of attributes to parse\n   */\n  function _setStrokeFillOpacity(attributes) {\n    for (var attr in colorAttributes) {\n\n      if (typeof attributes[colorAttributes[attr]] === 'undefined' || attributes[attr] === '') {\n        continue;\n      }\n\n      if (typeof attributes[attr] === 'undefined') {\n        if (!fabric.Object.prototype[attr]) {\n          continue;\n        }\n        attributes[attr] = fabric.Object.prototype[attr];\n      }\n\n      if (attributes[attr].indexOf('url(') === 0) {\n        continue;\n      }\n\n      var color = new fabric.Color(attributes[attr]);\n      attributes[attr] = color.setAlpha(toFixed(color.getAlpha() * attributes[colorAttributes[attr]], 2)).toRgba();\n    }\n    return attributes;\n  }\n\n  /**\n   * @private\n   */\n  function _getMultipleNodes(doc, nodeNames) {\n    var nodeName, nodeArray = [], nodeList, i, len;\n    for (i = 0, len = nodeNames.length; i < len; i++) {\n      nodeName = nodeNames[i];\n      nodeList = doc.getElementsByTagName(nodeName);\n      nodeArray = nodeArray.concat(Array.prototype.slice.call(nodeList));\n    }\n    return nodeArray;\n  }\n\n  /**\n   * Parses \"transform\" attribute, returning an array of values\n   * @static\n   * @function\n   * @memberOf fabric\n   * @param {String} attributeValue String containing attribute value\n   * @return {Array} Array of 6 elements representing transformation matrix\n   */\n  fabric.parseTransformAttribute = (function() {\n    function rotateMatrix(matrix, args) {\n      var cos = fabric.util.cos(args[0]), sin = fabric.util.sin(args[0]),\n          x = 0, y = 0;\n      if (args.length === 3) {\n        x = args[1];\n        y = args[2];\n      }\n\n      matrix[0] = cos;\n      matrix[1] = sin;\n      matrix[2] = -sin;\n      matrix[3] = cos;\n      matrix[4] = x - (cos * x - sin * y);\n      matrix[5] = y - (sin * x + cos * y);\n    }\n\n    function scaleMatrix(matrix, args) {\n      var multiplierX = args[0],\n          multiplierY = (args.length === 2) ? args[1] : args[0];\n\n      matrix[0] = multiplierX;\n      matrix[3] = multiplierY;\n    }\n\n    function skewMatrix(matrix, args, pos) {\n      matrix[pos] = Math.tan(fabric.util.degreesToRadians(args[0]));\n    }\n\n    function translateMatrix(matrix, args) {\n      matrix[4] = args[0];\n      if (args.length === 2) {\n        matrix[5] = args[1];\n      }\n    }\n\n    // identity matrix\n    var iMatrix = fabric.iMatrix,\n\n        // == begin transform regexp\n        number = fabric.reNum,\n\n        commaWsp = fabric.commaWsp,\n\n        skewX = '(?:(skewX)\\\\s*\\\\(\\\\s*(' + number + ')\\\\s*\\\\))',\n\n        skewY = '(?:(skewY)\\\\s*\\\\(\\\\s*(' + number + ')\\\\s*\\\\))',\n\n        rotate = '(?:(rotate)\\\\s*\\\\(\\\\s*(' + number + ')(?:' +\n                    commaWsp + '(' + number + ')' +\n                    commaWsp + '(' + number + '))?\\\\s*\\\\))',\n\n        scale = '(?:(scale)\\\\s*\\\\(\\\\s*(' + number + ')(?:' +\n                    commaWsp + '(' + number + '))?\\\\s*\\\\))',\n\n        translate = '(?:(translate)\\\\s*\\\\(\\\\s*(' + number + ')(?:' +\n                    commaWsp + '(' + number + '))?\\\\s*\\\\))',\n\n        matrix = '(?:(matrix)\\\\s*\\\\(\\\\s*' +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' + commaWsp +\n                  '(' + number + ')' +\n                  '\\\\s*\\\\))',\n\n        transform = '(?:' +\n                    matrix + '|' +\n                    translate + '|' +\n                    scale + '|' +\n                    rotate + '|' +\n                    skewX + '|' +\n                    skewY +\n                    ')',\n\n        transforms = '(?:' + transform + '(?:' + commaWsp + '*' + transform + ')*' + ')',\n\n        transformList = '^\\\\s*(?:' + transforms + '?)\\\\s*$',\n\n        // http://www.w3.org/TR/SVG/coords.html#TransformAttribute\n        reTransformList = new RegExp(transformList),\n        // == end transform regexp\n\n        reTransform = new RegExp(transform, 'g');\n\n    return function(attributeValue) {\n\n      // start with identity matrix\n      var matrix = iMatrix.concat(),\n          matrices = [];\n\n      // return if no argument was given or\n      // an argument does not match transform attribute regexp\n      if (!attributeValue || (attributeValue && !reTransformList.test(attributeValue))) {\n        return matrix;\n      }\n\n      attributeValue.replace(reTransform, function(match) {\n\n        var m = new RegExp(transform).exec(match).filter(function (match) {\n              // match !== '' && match != null\n              return (!!match);\n            }),\n            operation = m[1],\n            args = m.slice(2).map(parseFloat);\n\n        switch (operation) {\n          case 'translate':\n            translateMatrix(matrix, args);\n            break;\n          case 'rotate':\n            args[0] = fabric.util.degreesToRadians(args[0]);\n            rotateMatrix(matrix, args);\n            break;\n          case 'scale':\n            scaleMatrix(matrix, args);\n            break;\n          case 'skewX':\n            skewMatrix(matrix, args, 2);\n            break;\n          case 'skewY':\n            skewMatrix(matrix, args, 1);\n            break;\n          case 'matrix':\n            matrix = args;\n            break;\n        }\n\n        // snapshot current matrix into matrices array\n        matrices.push(matrix.concat());\n        // reset\n        matrix = iMatrix.concat();\n      });\n\n      var combinedMatrix = matrices[0];\n      while (matrices.length > 1) {\n        matrices.shift();\n        combinedMatrix = fabric.util.multiplyTransformMatrices(combinedMatrix, matrices[0]);\n      }\n      return combinedMatrix;\n    };\n  })();\n\n  /**\n   * @private\n   */\n  function parseStyleString(style, oStyle) {\n    var attr, value;\n    style.replace(/;\\s*$/, '').split(';').forEach(function (chunk) {\n      var pair = chunk.split(':');\n\n      attr = pair[0].trim().toLowerCase();\n      value =  pair[1].trim();\n\n      oStyle[attr] = value;\n    });\n  }\n\n  /**\n   * @private\n   */\n  function parseStyleObject(style, oStyle) {\n    var attr, value;\n    for (var prop in style) {\n      if (typeof style[prop] === 'undefined') {\n        continue;\n      }\n\n      attr = prop.toLowerCase();\n      value = style[prop];\n\n      oStyle[attr] = value;\n    }\n  }\n\n  /**\n   * @private\n   */\n  function getGlobalStylesForElement(element, svgUid) {\n    var styles = { };\n    for (var rule in fabric.cssRules[svgUid]) {\n      if (elementMatchesRule(element, rule.split(' '))) {\n        for (var property in fabric.cssRules[svgUid][rule]) {\n          styles[property] = fabric.cssRules[svgUid][rule][property];\n        }\n      }\n    }\n    return styles;\n  }\n\n  /**\n   * @private\n   */\n  function elementMatchesRule(element, selectors) {\n    var firstMatching, parentMatching = true;\n    //start from rightmost selector.\n    firstMatching = selectorMatches(element, selectors.pop());\n    if (firstMatching && selectors.length) {\n      parentMatching = doesSomeParentMatch(element, selectors);\n    }\n    return firstMatching && parentMatching && (selectors.length === 0);\n  }\n\n  function doesSomeParentMatch(element, selectors) {\n    var selector, parentMatching = true;\n    while (element.parentNode && element.parentNode.nodeType === 1 && selectors.length) {\n      if (parentMatching) {\n        selector = selectors.pop();\n      }\n      element = element.parentNode;\n      parentMatching = selectorMatches(element, selector);\n    }\n    return selectors.length === 0;\n  }\n\n  /**\n   * @private\n   */\n  function selectorMatches(element, selector) {\n    var nodeName = element.nodeName,\n        classNames = element.getAttribute('class'),\n        id = element.getAttribute('id'), matcher, i;\n    // i check if a selector matches slicing away part from it.\n    // if i get empty string i should match\n    matcher = new RegExp('^' + nodeName, 'i');\n    selector = selector.replace(matcher, '');\n    if (id && selector.length) {\n      matcher = new RegExp('#' + id + '(?![a-zA-Z\\\\-]+)', 'i');\n      selector = selector.replace(matcher, '');\n    }\n    if (classNames && selector.length) {\n      classNames = classNames.split(' ');\n      for (i = classNames.length; i--;) {\n        matcher = new RegExp('\\\\.' + classNames[i] + '(?![a-zA-Z\\\\-]+)', 'i');\n        selector = selector.replace(matcher, '');\n      }\n    }\n    return selector.length === 0;\n  }\n\n  /**\n   * @private\n   * to support IE8 missing getElementById on SVGdocument and on node xmlDOM\n   */\n  function elementById(doc, id) {\n    var el;\n    doc.getElementById && (el = doc.getElementById(id));\n    if (el) {\n      return el;\n    }\n    var node, i, len, nodelist = doc.getElementsByTagName('*');\n    for (i = 0, len = nodelist.length; i < len; i++) {\n      node = nodelist[i];\n      if (id === node.getAttribute('id')) {\n        return node;\n      }\n    }\n  }\n\n  /**\n   * @private\n   */\n  function parseUseDirectives(doc) {\n    var nodelist = _getMultipleNodes(doc, ['use', 'svg:use']), i = 0;\n    while (nodelist.length && i < nodelist.length) {\n      var el = nodelist[i],\n          xlink = (el.getAttribute('xlink:href') || el.getAttribute('href')).substr(1),\n          x = el.getAttribute('x') || 0,\n          y = el.getAttribute('y') || 0,\n          el2 = elementById(doc, xlink).cloneNode(true),\n          currentTrans = (el2.getAttribute('transform') || '') + ' translate(' + x + ', ' + y + ')',\n          parentNode, oldLength = nodelist.length, attr, j, attrs, len, namespace = fabric.svgNS;\n\n      applyViewboxTransform(el2);\n      if (/^svg$/i.test(el2.nodeName)) {\n        var el3 = el2.ownerDocument.createElementNS(namespace, 'g');\n        for (j = 0, attrs = el2.attributes, len = attrs.length; j < len; j++) {\n          attr = attrs.item(j);\n          el3.setAttributeNS(namespace, attr.nodeName, attr.nodeValue);\n        }\n        // el2.firstChild != null\n        while (el2.firstChild) {\n          el3.appendChild(el2.firstChild);\n        }\n        el2 = el3;\n      }\n\n      for (j = 0, attrs = el.attributes, len = attrs.length; j < len; j++) {\n        attr = attrs.item(j);\n        if (attr.nodeName === 'x' || attr.nodeName === 'y' ||\n          attr.nodeName === 'xlink:href' || attr.nodeName === 'href') {\n          continue;\n        }\n\n        if (attr.nodeName === 'transform') {\n          currentTrans = attr.nodeValue + ' ' + currentTrans;\n        }\n        else {\n          el2.setAttribute(attr.nodeName, attr.nodeValue);\n        }\n      }\n\n      el2.setAttribute('transform', currentTrans);\n      el2.setAttribute('instantiated_by_use', '1');\n      el2.removeAttribute('id');\n      parentNode = el.parentNode;\n      parentNode.replaceChild(el2, el);\n      // some browsers do not shorten nodelist after replaceChild (IE8)\n      if (nodelist.length === oldLength) {\n        i++;\n      }\n    }\n  }\n\n  // http://www.w3.org/TR/SVG/coords.html#ViewBoxAttribute\n  // matches, e.g.: +14.56e-12, etc.\n  var reViewBoxAttrValue = new RegExp(\n    '^' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*,?' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*,?' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*,?' +\n    '\\\\s*(' + fabric.reNum + '+)\\\\s*' +\n    '$'\n  );\n\n  /**\n   * Add a <g> element that envelop all child elements and makes the viewbox transformMatrix descend on all elements\n   */\n  function applyViewboxTransform(element) {\n    if (!fabric.svgViewBoxElementsRegEx.test(element.nodeName)) {\n      return;\n    }\n    var viewBoxAttr = element.getAttribute('viewBox'),\n        scaleX = 1,\n        scaleY = 1,\n        minX = 0,\n        minY = 0,\n        viewBoxWidth, viewBoxHeight, matrix, el,\n        widthAttr = element.getAttribute('width'),\n        heightAttr = element.getAttribute('height'),\n        x = element.getAttribute('x') || 0,\n        y = element.getAttribute('y') || 0,\n        preserveAspectRatio = element.getAttribute('preserveAspectRatio') || '',\n        missingViewBox = (!viewBoxAttr || !(viewBoxAttr = viewBoxAttr.match(reViewBoxAttrValue))),\n        missingDimAttr = (!widthAttr || !heightAttr || widthAttr === '100%' || heightAttr === '100%'),\n        toBeParsed = missingViewBox && missingDimAttr,\n        parsedDim = { }, translateMatrix = '', widthDiff = 0, heightDiff = 0;\n\n    parsedDim.width = 0;\n    parsedDim.height = 0;\n    parsedDim.toBeParsed = toBeParsed;\n\n    if (missingViewBox) {\n      if (((x || y) && element.parentNode.nodeName !== '#document')) {\n        translateMatrix = ' translate(' + parseUnit(x) + ' ' + parseUnit(y) + ') ';\n        matrix = (element.getAttribute('transform') || '') + translateMatrix;\n        element.setAttribute('transform', matrix);\n        element.removeAttribute('x');\n        element.removeAttribute('y');\n      }\n    }\n\n    if (toBeParsed) {\n      return parsedDim;\n    }\n\n    if (missingViewBox) {\n      parsedDim.width = parseUnit(widthAttr);\n      parsedDim.height = parseUnit(heightAttr);\n      // set a transform for elements that have x y and are inner(only) SVGs\n      return parsedDim;\n    }\n    minX = -parseFloat(viewBoxAttr[1]);\n    minY = -parseFloat(viewBoxAttr[2]);\n    viewBoxWidth = parseFloat(viewBoxAttr[3]);\n    viewBoxHeight = parseFloat(viewBoxAttr[4]);\n    parsedDim.minX = minX;\n    parsedDim.minY = minY;\n    parsedDim.viewBoxWidth = viewBoxWidth;\n    parsedDim.viewBoxHeight = viewBoxHeight;\n    if (!missingDimAttr) {\n      parsedDim.width = parseUnit(widthAttr);\n      parsedDim.height = parseUnit(heightAttr);\n      scaleX = parsedDim.width / viewBoxWidth;\n      scaleY = parsedDim.height / viewBoxHeight;\n    }\n    else {\n      parsedDim.width = viewBoxWidth;\n      parsedDim.height = viewBoxHeight;\n    }\n\n    // default is to preserve aspect ratio\n    preserveAspectRatio = fabric.util.parsePreserveAspectRatioAttribute(preserveAspectRatio);\n    if (preserveAspectRatio.alignX !== 'none') {\n      //translate all container for the effect of Mid, Min, Max\n      if (preserveAspectRatio.meetOrSlice === 'meet') {\n        scaleY = scaleX = (scaleX > scaleY ? scaleY : scaleX);\n        // calculate additional translation to move the viewbox\n      }\n      if (preserveAspectRatio.meetOrSlice === 'slice') {\n        scaleY = scaleX = (scaleX > scaleY ? scaleX : scaleY);\n        // calculate additional translation to move the viewbox\n      }\n      widthDiff = parsedDim.width - viewBoxWidth * scaleX;\n      heightDiff = parsedDim.height - viewBoxHeight * scaleX;\n      if (preserveAspectRatio.alignX === 'Mid') {\n        widthDiff /= 2;\n      }\n      if (preserveAspectRatio.alignY === 'Mid') {\n        heightDiff /= 2;\n      }\n      if (preserveAspectRatio.alignX === 'Min') {\n        widthDiff = 0;\n      }\n      if (preserveAspectRatio.alignY === 'Min') {\n        heightDiff = 0;\n      }\n    }\n\n    if (scaleX === 1 && scaleY === 1 && minX === 0 && minY === 0 && x === 0 && y === 0) {\n      return parsedDim;\n    }\n    if ((x || y) && element.parentNode.nodeName !== '#document') {\n      translateMatrix = ' translate(' + parseUnit(x) + ' ' + parseUnit(y) + ') ';\n    }\n\n    matrix = translateMatrix + ' matrix(' + scaleX +\n                  ' 0' +\n                  ' 0 ' +\n                  scaleY + ' ' +\n                  (minX * scaleX + widthDiff) + ' ' +\n                  (minY * scaleY + heightDiff) + ') ';\n    // seems unused.\n    // parsedDim.viewboxTransform = fabric.parseTransformAttribute(matrix);\n    if (element.nodeName === 'svg') {\n      el = element.ownerDocument.createElementNS(fabric.svgNS, 'g');\n      // element.firstChild != null\n      while (element.firstChild) {\n        el.appendChild(element.firstChild);\n      }\n      element.appendChild(el);\n    }\n    else {\n      el = element;\n      el.removeAttribute('x');\n      el.removeAttribute('y');\n      matrix = el.getAttribute('transform') + matrix;\n    }\n    el.setAttribute('transform', matrix);\n    return parsedDim;\n  }\n\n  function hasAncestorWithNodeName(element, nodeName) {\n    while (element && (element = element.parentNode)) {\n      if (element.nodeName && nodeName.test(element.nodeName.replace('svg:', ''))\n        && !element.getAttribute('instantiated_by_use')) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  /**\n   * Parses an SVG document, converts it to an array of corresponding fabric.* instances and passes them to a callback\n   * @static\n   * @function\n   * @memberOf fabric\n   * @param {SVGDocument} doc SVG document to parse\n   * @param {Function} callback Callback to call when parsing is finished;\n   * It's being passed an array of elements (parsed from a document).\n   * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n   * @param {Object} [parsingOptions] options for parsing document\n   * @param {String} [parsingOptions.crossOrigin] crossOrigin settings\n   */\n  fabric.parseSVGDocument = function(doc, callback, reviver, parsingOptions) {\n    if (!doc) {\n      return;\n    }\n\n    parseUseDirectives(doc);\n\n    var svgUid =  fabric.Object.__uid++, i, len,\n        options = applyViewboxTransform(doc),\n        descendants = fabric.util.toArray(doc.getElementsByTagName('*'));\n    options.crossOrigin = parsingOptions && parsingOptions.crossOrigin;\n    options.svgUid = svgUid;\n\n    if (descendants.length === 0 && fabric.isLikelyNode) {\n      // we're likely in node, where \"o3-xml\" library fails to gEBTN(\"*\")\n      // https://github.com/ajaxorg/node-o3-xml/issues/21\n      descendants = doc.selectNodes('//*[name(.)!=\"svg\"]');\n      var arr = [];\n      for (i = 0, len = descendants.length; i < len; i++) {\n        arr[i] = descendants[i];\n      }\n      descendants = arr;\n    }\n\n    var elements = descendants.filter(function(el) {\n      applyViewboxTransform(el);\n      return fabric.svgValidTagNamesRegEx.test(el.nodeName.replace('svg:', '')) &&\n            !hasAncestorWithNodeName(el, fabric.svgInvalidAncestorsRegEx); // http://www.w3.org/TR/SVG/struct.html#DefsElement\n    });\n    if (!elements || (elements && !elements.length)) {\n      callback && callback([], {});\n      return;\n    }\n    var clipPaths = { };\n    descendants.filter(function(el) {\n      return el.nodeName.replace('svg:', '') === 'clipPath';\n    }).forEach(function(el) {\n      var id = el.getAttribute('id');\n      clipPaths[id] = fabric.util.toArray(el.getElementsByTagName('*')).filter(function(el) {\n        return fabric.svgValidTagNamesRegEx.test(el.nodeName.replace('svg:', ''));\n      });\n    });\n    fabric.gradientDefs[svgUid] = fabric.getGradientDefs(doc);\n    fabric.cssRules[svgUid] = fabric.getCSSRules(doc);\n    fabric.clipPaths[svgUid] = clipPaths;\n    // Precedence of rules:   style > class > attribute\n    fabric.parseElements(elements, function(instances, elements) {\n      if (callback) {\n        callback(instances, options, elements, descendants);\n        delete fabric.gradientDefs[svgUid];\n        delete fabric.cssRules[svgUid];\n        delete fabric.clipPaths[svgUid];\n      }\n    }, clone(options), reviver, parsingOptions);\n  };\n\n  function recursivelyParseGradientsXlink(doc, gradient) {\n    var gradientsAttrs = ['gradientTransform', 'x1', 'x2', 'y1', 'y2', 'gradientUnits', 'cx', 'cy', 'r', 'fx', 'fy'],\n        xlinkAttr = 'xlink:href',\n        xLink = gradient.getAttribute(xlinkAttr).substr(1),\n        referencedGradient = elementById(doc, xLink);\n    if (referencedGradient && referencedGradient.getAttribute(xlinkAttr)) {\n      recursivelyParseGradientsXlink(doc, referencedGradient);\n    }\n    gradientsAttrs.forEach(function(attr) {\n      if (referencedGradient && !gradient.hasAttribute(attr) && referencedGradient.hasAttribute(attr)) {\n        gradient.setAttribute(attr, referencedGradient.getAttribute(attr));\n      }\n    });\n    if (!gradient.children.length) {\n      var referenceClone = referencedGradient.cloneNode(true);\n      while (referenceClone.firstChild) {\n        gradient.appendChild(referenceClone.firstChild);\n      }\n    }\n    gradient.removeAttribute(xlinkAttr);\n  }\n\n  var reFontDeclaration = new RegExp(\n    '(normal|italic)?\\\\s*(normal|small-caps)?\\\\s*' +\n    '(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\\\s*(' +\n      fabric.reNum +\n    '(?:px|cm|mm|em|pt|pc|in)*)(?:\\\\/(normal|' + fabric.reNum + '))?\\\\s+(.*)');\n\n  extend(fabric, {\n    /**\n     * Parses a short font declaration, building adding its properties to a style object\n     * @static\n     * @function\n     * @memberOf fabric\n     * @param {String} value font declaration\n     * @param {Object} oStyle definition\n     */\n    parseFontDeclaration: function(value, oStyle) {\n      var match = value.match(reFontDeclaration);\n\n      if (!match) {\n        return;\n      }\n      var fontStyle = match[1],\n          // font variant is not used\n          // fontVariant = match[2],\n          fontWeight = match[3],\n          fontSize = match[4],\n          lineHeight = match[5],\n          fontFamily = match[6];\n\n      if (fontStyle) {\n        oStyle.fontStyle = fontStyle;\n      }\n      if (fontWeight) {\n        oStyle.fontWeight = isNaN(parseFloat(fontWeight)) ? fontWeight : parseFloat(fontWeight);\n      }\n      if (fontSize) {\n        oStyle.fontSize = parseUnit(fontSize);\n      }\n      if (fontFamily) {\n        oStyle.fontFamily = fontFamily;\n      }\n      if (lineHeight) {\n        oStyle.lineHeight = lineHeight === 'normal' ? 1 : lineHeight;\n      }\n    },\n\n    /**\n     * Parses an SVG document, returning all of the gradient declarations found in it\n     * @static\n     * @function\n     * @memberOf fabric\n     * @param {SVGDocument} doc SVG document to parse\n     * @return {Object} Gradient definitions; key corresponds to element id, value -- to gradient definition element\n     */\n    getGradientDefs: function(doc) {\n      var tagArray = [\n            'linearGradient',\n            'radialGradient',\n            'svg:linearGradient',\n            'svg:radialGradient'],\n          elList = _getMultipleNodes(doc, tagArray),\n          el, j = 0, gradientDefs = { };\n      j = elList.length;\n      while (j--) {\n        el = elList[j];\n        if (el.getAttribute('xlink:href')) {\n          recursivelyParseGradientsXlink(doc, el);\n        }\n        gradientDefs[el.getAttribute('id')] = el;\n      }\n      return gradientDefs;\n    },\n\n    /**\n     * Returns an object of attributes' name/value, given element and an array of attribute names;\n     * Parses parent \"g\" nodes recursively upwards.\n     * @static\n     * @memberOf fabric\n     * @param {DOMElement} element Element to parse\n     * @param {Array} attributes Array of attributes to parse\n     * @return {Object} object containing parsed attributes' names/values\n     */\n    parseAttributes: function(element, attributes, svgUid) {\n\n      if (!element) {\n        return;\n      }\n\n      var value,\n          parentAttributes = { },\n          fontSize, parentFontSize;\n\n      if (typeof svgUid === 'undefined') {\n        svgUid = element.getAttribute('svgUid');\n      }\n      // if there's a parent container (`g` or `a` or `symbol` node), parse its attributes recursively upwards\n      if (element.parentNode && fabric.svgValidParentsRegEx.test(element.parentNode.nodeName)) {\n        parentAttributes = fabric.parseAttributes(element.parentNode, attributes, svgUid);\n      }\n\n      var ownAttributes = attributes.reduce(function(memo, attr) {\n        value = element.getAttribute(attr);\n        if (value) { // eslint-disable-line\n          memo[attr] = value;\n        }\n        return memo;\n      }, { });\n      // add values parsed from style, which take precedence over attributes\n      // (see: http://www.w3.org/TR/SVG/styling.html#UsingPresentationAttributes)\n      var cssAttrs = extend(\n        getGlobalStylesForElement(element, svgUid),\n        fabric.parseStyleAttribute(element)\n      );\n      ownAttributes = extend(\n        ownAttributes,\n        cssAttrs\n      );\n      if (cssAttrs[cPath]) {\n        element.setAttribute(cPath, cssAttrs[cPath]);\n      }\n      fontSize = parentFontSize = parentAttributes.fontSize || fabric.Text.DEFAULT_SVG_FONT_SIZE;\n      if (ownAttributes[fSize]) {\n        // looks like the minimum should be 9px when dealing with ems. this is what looks like in browsers.\n        ownAttributes[fSize] = fontSize = parseUnit(ownAttributes[fSize], parentFontSize);\n      }\n\n      var normalizedAttr, normalizedValue, normalizedStyle = {};\n      for (var attr in ownAttributes) {\n        normalizedAttr = normalizeAttr(attr);\n        normalizedValue = normalizeValue(normalizedAttr, ownAttributes[attr], parentAttributes, fontSize);\n        normalizedStyle[normalizedAttr] = normalizedValue;\n      }\n      if (normalizedStyle && normalizedStyle.font) {\n        fabric.parseFontDeclaration(normalizedStyle.font, normalizedStyle);\n      }\n      var mergedAttrs = extend(parentAttributes, normalizedStyle);\n      return fabric.svgValidParentsRegEx.test(element.nodeName) ? mergedAttrs : _setStrokeFillOpacity(mergedAttrs);\n    },\n\n    /**\n     * Transforms an array of svg elements to corresponding fabric.* instances\n     * @static\n     * @memberOf fabric\n     * @param {Array} elements Array of elements to parse\n     * @param {Function} callback Being passed an array of fabric instances (transformed from SVG elements)\n     * @param {Object} [options] Options object\n     * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n     */\n    parseElements: function(elements, callback, options, reviver, parsingOptions) {\n      new fabric.ElementsParser(elements, callback, options, reviver, parsingOptions).parse();\n    },\n\n    /**\n     * Parses \"style\" attribute, retuning an object with values\n     * @static\n     * @memberOf fabric\n     * @param {SVGElement} element Element to parse\n     * @return {Object} Objects with values parsed from style attribute of an element\n     */\n    parseStyleAttribute: function(element) {\n      var oStyle = { },\n          style = element.getAttribute('style');\n\n      if (!style) {\n        return oStyle;\n      }\n\n      if (typeof style === 'string') {\n        parseStyleString(style, oStyle);\n      }\n      else {\n        parseStyleObject(style, oStyle);\n      }\n\n      return oStyle;\n    },\n\n    /**\n     * Parses \"points\" attribute, returning an array of values\n     * @static\n     * @memberOf fabric\n     * @param {String} points points attribute string\n     * @return {Array} array of points\n     */\n    parsePointsAttribute: function(points) {\n\n      // points attribute is required and must not be empty\n      if (!points) {\n        return null;\n      }\n\n      // replace commas with whitespace and remove bookending whitespace\n      points = points.replace(/,/g, ' ').trim();\n\n      points = points.split(/\\s+/);\n      var parsedPoints = [], i, len;\n\n      for (i = 0, len = points.length; i < len; i += 2) {\n        parsedPoints.push({\n          x: parseFloat(points[i]),\n          y: parseFloat(points[i + 1])\n        });\n      }\n\n      // odd number of points is an error\n      // if (parsedPoints.length % 2 !== 0) {\n      //   return null;\n      // }\n\n      return parsedPoints;\n    },\n\n    /**\n     * Returns CSS rules for a given SVG document\n     * @static\n     * @function\n     * @memberOf fabric\n     * @param {SVGDocument} doc SVG document to parse\n     * @return {Object} CSS rules of this document\n     */\n    getCSSRules: function(doc) {\n      var styles = doc.getElementsByTagName('style'), i, len,\n          allRules = { }, rules;\n\n      // very crude parsing of style contents\n      for (i = 0, len = styles.length; i < len; i++) {\n        var styleContents = styles[i].textContent;\n\n        // remove comments\n        styleContents = styleContents.replace(/\\/\\*[\\s\\S]*?\\*\\//g, '');\n        if (styleContents.trim() === '') {\n          continue;\n        }\n        rules = styleContents.match(/[^{]*\\{[\\s\\S]*?\\}/g);\n        rules = rules.map(function(rule) { return rule.trim(); });\n        // eslint-disable-next-line no-loop-func\n        rules.forEach(function(rule) {\n\n          var match = rule.match(/([\\s\\S]*?)\\s*\\{([^}]*)\\}/),\n              ruleObj = { }, declaration = match[2].trim(),\n              propertyValuePairs = declaration.replace(/;$/, '').split(/\\s*;\\s*/);\n\n          for (i = 0, len = propertyValuePairs.length; i < len; i++) {\n            var pair = propertyValuePairs[i].split(/\\s*:\\s*/),\n                property = pair[0],\n                value = pair[1];\n            ruleObj[property] = value;\n          }\n          rule = match[1];\n          rule.split(',').forEach(function(_rule) {\n            _rule = _rule.replace(/^svg/i, '').trim();\n            if (_rule === '') {\n              return;\n            }\n            if (allRules[_rule]) {\n              fabric.util.object.extend(allRules[_rule], ruleObj);\n            }\n            else {\n              allRules[_rule] = fabric.util.object.clone(ruleObj);\n            }\n          });\n        });\n      }\n      return allRules;\n    },\n\n    /**\n     * Takes url corresponding to an SVG document, and parses it into a set of fabric objects.\n     * Note that SVG is fetched via XMLHttpRequest, so it needs to conform to SOP (Same Origin Policy)\n     * @memberOf fabric\n     * @param {String} url\n     * @param {Function} callback\n     * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n     * @param {Object} [options] Object containing options for parsing\n     * @param {String} [options.crossOrigin] crossOrigin crossOrigin setting to use for external resources\n     */\n    loadSVGFromURL: function(url, callback, reviver, options) {\n\n      url = url.replace(/^\\n\\s*/, '').trim();\n      new fabric.util.request(url, {\n        method: 'get',\n        onComplete: onComplete\n      });\n\n      function onComplete(r) {\n\n        var xml = r.responseXML;\n        if (!xml || !xml.documentElement) {\n          callback && callback(null);\n          return false;\n        }\n\n        fabric.parseSVGDocument(xml.documentElement, function (results, _options, elements, allElements) {\n          callback && callback(results, _options, elements, allElements);\n        }, reviver, options);\n      }\n    },\n\n    /**\n     * Takes string corresponding to an SVG document, and parses it into a set of fabric objects\n     * @memberOf fabric\n     * @param {String} string\n     * @param {Function} callback\n     * @param {Function} [reviver] Method for further parsing of SVG elements, called after each fabric object created.\n     * @param {Object} [options] Object containing options for parsing\n     * @param {String} [options.crossOrigin] crossOrigin crossOrigin setting to use for external resources\n     */\n    loadSVGFromString: function(string, callback, reviver, options) {\n      var parser = new fabric.window.DOMParser(),\n          doc = parser.parseFromString(string.trim(), 'text/xml');\n      fabric.parseSVGDocument(doc.documentElement, function (results, _options, elements, allElements) {\n        callback(results, _options, elements, allElements);\n      }, reviver, options);\n    }\n  });\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\nfabric.ElementsParser = function(elements, callback, options, reviver, parsingOptions, doc) {\n  this.elements = elements;\n  this.callback = callback;\n  this.options = options;\n  this.reviver = reviver;\n  this.svgUid = (options && options.svgUid) || 0;\n  this.parsingOptions = parsingOptions;\n  this.regexUrl = /^url\\(['\"]?#([^'\"]+)['\"]?\\)/g;\n  this.doc = doc;\n};\n\n(function(proto) {\n  proto.parse = function() {\n    this.instances = new Array(this.elements.length);\n    this.numElements = this.elements.length;\n    this.createObjects();\n  };\n\n  proto.createObjects = function() {\n    var _this = this;\n    this.elements.forEach(function(element, i) {\n      element.setAttribute('svgUid', _this.svgUid);\n      _this.createObject(element, i);\n    });\n  };\n\n  proto.findTag = function(el) {\n    return fabric[fabric.util.string.capitalize(el.tagName.replace('svg:', ''))];\n  };\n\n  proto.createObject = function(el, index) {\n    var klass = this.findTag(el);\n    if (klass && klass.fromElement) {\n      try {\n        klass.fromElement(el, this.createCallback(index, el), this.options);\n      }\n      catch (err) {\n        fabric.log(err);\n      }\n    }\n    else {\n      this.checkIfDone();\n    }\n  };\n\n  proto.createCallback = function(index, el) {\n    var _this = this;\n    return function(obj) {\n      var _options;\n      _this.resolveGradient(obj, el, 'fill');\n      _this.resolveGradient(obj, el, 'stroke');\n      if (obj instanceof fabric.Image && obj._originalElement) {\n        _options = obj.parsePreserveAspectRatioAttribute(el);\n      }\n      obj._removeTransformMatrix(_options);\n      _this.resolveClipPath(obj, el);\n      _this.reviver && _this.reviver(el, obj);\n      _this.instances[index] = obj;\n      _this.checkIfDone();\n    };\n  };\n\n  proto.extractPropertyDefinition = function(obj, property, storage) {\n    var value = obj[property], regex = this.regexUrl;\n    if (!regex.test(value)) {\n      return;\n    }\n    regex.lastIndex = 0;\n    var id = regex.exec(value)[1];\n    regex.lastIndex = 0;\n    return fabric[storage][this.svgUid][id];\n  };\n\n  proto.resolveGradient = function(obj, el, property) {\n    var gradientDef = this.extractPropertyDefinition(obj, property, 'gradientDefs');\n    if (gradientDef) {\n      var opacityAttr = el.getAttribute(property + '-opacity');\n      var gradient = fabric.Gradient.fromElement(gradientDef, obj, opacityAttr, this.options);\n      obj.set(property, gradient);\n    }\n  };\n\n  proto.createClipPathCallback = function(obj, container) {\n    return function(_newObj) {\n      _newObj._removeTransformMatrix();\n      _newObj.fillRule = _newObj.clipRule;\n      container.push(_newObj);\n    };\n  };\n\n  proto.resolveClipPath = function(obj, usingElement) {\n    var clipPath = this.extractPropertyDefinition(obj, 'clipPath', 'clipPaths'),\n        element, klass, objTransformInv, container, gTransform, options;\n    if (clipPath) {\n      container = [];\n      objTransformInv = fabric.util.invertTransform(obj.calcTransformMatrix());\n      // move the clipPath tag as sibling to the real element that is using it\n      var clipPathTag = clipPath[0].parentNode;\n      var clipPathOwner = usingElement;\n      while (clipPathOwner.parentNode && clipPathOwner.getAttribute('clip-path') !== obj.clipPath) {\n        clipPathOwner = clipPathOwner.parentNode;\n      }\n      clipPathOwner.parentNode.appendChild(clipPathTag);\n      for (var i = 0; i < clipPath.length; i++) {\n        element = clipPath[i];\n        klass = this.findTag(element);\n        klass.fromElement(\n          element,\n          this.createClipPathCallback(obj, container),\n          this.options\n        );\n      }\n      if (container.length === 1) {\n        clipPath = container[0];\n      }\n      else {\n        clipPath = new fabric.Group(container);\n      }\n      gTransform = fabric.util.multiplyTransformMatrices(\n        objTransformInv,\n        clipPath.calcTransformMatrix()\n      );\n      if (clipPath.clipPath) {\n        this.resolveClipPath(clipPath, clipPathOwner);\n      }\n      var options = fabric.util.qrDecompose(gTransform);\n      clipPath.flipX = false;\n      clipPath.flipY = false;\n      clipPath.set('scaleX', options.scaleX);\n      clipPath.set('scaleY', options.scaleY);\n      clipPath.angle = options.angle;\n      clipPath.skewX = options.skewX;\n      clipPath.skewY = 0;\n      clipPath.setPositionByOrigin({ x: options.translateX, y: options.translateY }, 'center', 'center');\n      obj.clipPath = clipPath;\n    }\n    else {\n      // if clip-path does not resolve to any element, delete the property.\n      delete obj.clipPath;\n    }\n  };\n\n  proto.checkIfDone = function() {\n    if (--this.numElements === 0) {\n      this.instances = this.instances.filter(function(el) {\n        // eslint-disable-next-line no-eq-null, eqeqeq\n        return el != null;\n      });\n      this.callback(this.instances, this.elements);\n    }\n  };\n})(fabric.ElementsParser.prototype);\n\n\n(function(global) {\n\n  'use strict';\n\n  /* Adaptation of work of Kevin Lindsey (kevin@kevlindev.com) */\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Point) {\n    fabric.warn('fabric.Point is already defined');\n    return;\n  }\n\n  fabric.Point = Point;\n\n  /**\n   * Point class\n   * @class fabric.Point\n   * @memberOf fabric\n   * @constructor\n   * @param {Number} x\n   * @param {Number} y\n   * @return {fabric.Point} thisArg\n   */\n  function Point(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  Point.prototype = /** @lends fabric.Point.prototype */ {\n\n    type: 'point',\n\n    constructor: Point,\n\n    /**\n     * Adds another point to this one and returns another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point} new Point instance with added values\n     */\n    add: function (that) {\n      return new Point(this.x + that.x, this.y + that.y);\n    },\n\n    /**\n     * Adds another point to this one\n     * @param {fabric.Point} that\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    addEquals: function (that) {\n      this.x += that.x;\n      this.y += that.y;\n      return this;\n    },\n\n    /**\n     * Adds value to this point and returns a new one\n     * @param {Number} scalar\n     * @return {fabric.Point} new Point with added value\n     */\n    scalarAdd: function (scalar) {\n      return new Point(this.x + scalar, this.y + scalar);\n    },\n\n    /**\n     * Adds value to this point\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    scalarAddEquals: function (scalar) {\n      this.x += scalar;\n      this.y += scalar;\n      return this;\n    },\n\n    /**\n     * Subtracts another point from this point and returns a new one\n     * @param {fabric.Point} that\n     * @return {fabric.Point} new Point object with subtracted values\n     */\n    subtract: function (that) {\n      return new Point(this.x - that.x, this.y - that.y);\n    },\n\n    /**\n     * Subtracts another point from this point\n     * @param {fabric.Point} that\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    subtractEquals: function (that) {\n      this.x -= that.x;\n      this.y -= that.y;\n      return this;\n    },\n\n    /**\n     * Subtracts value from this point and returns a new one\n     * @param {Number} scalar\n     * @return {fabric.Point}\n     */\n    scalarSubtract: function (scalar) {\n      return new Point(this.x - scalar, this.y - scalar);\n    },\n\n    /**\n     * Subtracts value from this point\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    scalarSubtractEquals: function (scalar) {\n      this.x -= scalar;\n      this.y -= scalar;\n      return this;\n    },\n\n    /**\n     * Multiplies this point by a value and returns a new one\n     * TODO: rename in scalarMultiply in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point}\n     */\n    multiply: function (scalar) {\n      return new Point(this.x * scalar, this.y * scalar);\n    },\n\n    /**\n     * Multiplies this point by a value\n     * TODO: rename in scalarMultiplyEquals in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    multiplyEquals: function (scalar) {\n      this.x *= scalar;\n      this.y *= scalar;\n      return this;\n    },\n\n    /**\n     * Divides this point by a value and returns a new one\n     * TODO: rename in scalarDivide in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point}\n     */\n    divide: function (scalar) {\n      return new Point(this.x / scalar, this.y / scalar);\n    },\n\n    /**\n     * Divides this point by a value\n     * TODO: rename in scalarDivideEquals in 2.0\n     * @param {Number} scalar\n     * @return {fabric.Point} thisArg\n     * @chainable\n     */\n    divideEquals: function (scalar) {\n      this.x /= scalar;\n      this.y /= scalar;\n      return this;\n    },\n\n    /**\n     * Returns true if this point is equal to another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    eq: function (that) {\n      return (this.x === that.x && this.y === that.y);\n    },\n\n    /**\n     * Returns true if this point is less than another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    lt: function (that) {\n      return (this.x < that.x && this.y < that.y);\n    },\n\n    /**\n     * Returns true if this point is less than or equal to another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    lte: function (that) {\n      return (this.x <= that.x && this.y <= that.y);\n    },\n\n    /**\n\n     * Returns true if this point is greater another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    gt: function (that) {\n      return (this.x > that.x && this.y > that.y);\n    },\n\n    /**\n     * Returns true if this point is greater than or equal to another one\n     * @param {fabric.Point} that\n     * @return {Boolean}\n     */\n    gte: function (that) {\n      return (this.x >= that.x && this.y >= that.y);\n    },\n\n    /**\n     * Returns new point which is the result of linear interpolation with this one and another one\n     * @param {fabric.Point} that\n     * @param {Number} t , position of interpolation, between 0 and 1 default 0.5\n     * @return {fabric.Point}\n     */\n    lerp: function (that, t) {\n      if (typeof t === 'undefined') {\n        t = 0.5;\n      }\n      t = Math.max(Math.min(1, t), 0);\n      return new Point(this.x + (that.x - this.x) * t, this.y + (that.y - this.y) * t);\n    },\n\n    /**\n     * Returns distance from this point and another one\n     * @param {fabric.Point} that\n     * @return {Number}\n     */\n    distanceFrom: function (that) {\n      var dx = this.x - that.x,\n          dy = this.y - that.y;\n      return Math.sqrt(dx * dx + dy * dy);\n    },\n\n    /**\n     * Returns the point between this point and another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point}\n     */\n    midPointFrom: function (that) {\n      return this.lerp(that);\n    },\n\n    /**\n     * Returns a new point which is the min of this and another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point}\n     */\n    min: function (that) {\n      return new Point(Math.min(this.x, that.x), Math.min(this.y, that.y));\n    },\n\n    /**\n     * Returns a new point which is the max of this and another one\n     * @param {fabric.Point} that\n     * @return {fabric.Point}\n     */\n    max: function (that) {\n      return new Point(Math.max(this.x, that.x), Math.max(this.y, that.y));\n    },\n\n    /**\n     * Returns string representation of this point\n     * @return {String}\n     */\n    toString: function () {\n      return this.x + ',' + this.y;\n    },\n\n    /**\n     * Sets x/y of this point\n     * @param {Number} x\n     * @param {Number} y\n     * @chainable\n     */\n    setXY: function (x, y) {\n      this.x = x;\n      this.y = y;\n      return this;\n    },\n\n    /**\n     * Sets x of this point\n     * @param {Number} x\n     * @chainable\n     */\n    setX: function (x) {\n      this.x = x;\n      return this;\n    },\n\n    /**\n     * Sets y of this point\n     * @param {Number} y\n     * @chainable\n     */\n    setY: function (y) {\n      this.y = y;\n      return this;\n    },\n\n    /**\n     * Sets x/y of this point from another point\n     * @param {fabric.Point} that\n     * @chainable\n     */\n    setFromPoint: function (that) {\n      this.x = that.x;\n      this.y = that.y;\n      return this;\n    },\n\n    /**\n     * Swaps x/y of this point and another point\n     * @param {fabric.Point} that\n     */\n    swap: function (that) {\n      var x = this.x,\n          y = this.y;\n      this.x = that.x;\n      this.y = that.y;\n      that.x = x;\n      that.y = y;\n    },\n\n    /**\n     * return a cloned instance of the point\n     * @return {fabric.Point}\n     */\n    clone: function () {\n      return new Point(this.x, this.y);\n    }\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  /* Adaptation of work of Kevin Lindsey (kevin@kevlindev.com) */\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Intersection) {\n    fabric.warn('fabric.Intersection is already defined');\n    return;\n  }\n\n  /**\n   * Intersection class\n   * @class fabric.Intersection\n   * @memberOf fabric\n   * @constructor\n   */\n  function Intersection(status) {\n    this.status = status;\n    this.points = [];\n  }\n\n  fabric.Intersection = Intersection;\n\n  fabric.Intersection.prototype = /** @lends fabric.Intersection.prototype */ {\n\n    constructor: Intersection,\n\n    /**\n     * Appends a point to intersection\n     * @param {fabric.Point} point\n     * @return {fabric.Intersection} thisArg\n     * @chainable\n     */\n    appendPoint: function (point) {\n      this.points.push(point);\n      return this;\n    },\n\n    /**\n     * Appends points to intersection\n     * @param {Array} points\n     * @return {fabric.Intersection} thisArg\n     * @chainable\n     */\n    appendPoints: function (points) {\n      this.points = this.points.concat(points);\n      return this;\n    }\n  };\n\n  /**\n   * Checks if one line intersects another\n   * TODO: rename in intersectSegmentSegment\n   * @static\n   * @param {fabric.Point} a1\n   * @param {fabric.Point} a2\n   * @param {fabric.Point} b1\n   * @param {fabric.Point} b2\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectLineLine = function (a1, a2, b1, b2) {\n    var result,\n        uaT = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x),\n        ubT = (a2.x - a1.x) * (a1.y - b1.y) - (a2.y - a1.y) * (a1.x - b1.x),\n        uB = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\n    if (uB !== 0) {\n      var ua = uaT / uB,\n          ub = ubT / uB;\n      if (0 <= ua && ua <= 1 && 0 <= ub && ub <= 1) {\n        result = new Intersection('Intersection');\n        result.appendPoint(new fabric.Point(a1.x + ua * (a2.x - a1.x), a1.y + ua * (a2.y - a1.y)));\n      }\n      else {\n        result = new Intersection();\n      }\n    }\n    else {\n      if (uaT === 0 || ubT === 0) {\n        result = new Intersection('Coincident');\n      }\n      else {\n        result = new Intersection('Parallel');\n      }\n    }\n    return result;\n  };\n\n  /**\n   * Checks if line intersects polygon\n   * TODO: rename in intersectSegmentPolygon\n   * fix detection of coincident\n   * @static\n   * @param {fabric.Point} a1\n   * @param {fabric.Point} a2\n   * @param {Array} points\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectLinePolygon = function(a1, a2, points) {\n    var result = new Intersection(),\n        length = points.length,\n        b1, b2, inter, i;\n\n    for (i = 0; i < length; i++) {\n      b1 = points[i];\n      b2 = points[(i + 1) % length];\n      inter = Intersection.intersectLineLine(a1, a2, b1, b2);\n\n      result.appendPoints(inter.points);\n    }\n    if (result.points.length > 0) {\n      result.status = 'Intersection';\n    }\n    return result;\n  };\n\n  /**\n   * Checks if polygon intersects another polygon\n   * @static\n   * @param {Array} points1\n   * @param {Array} points2\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectPolygonPolygon = function (points1, points2) {\n    var result = new Intersection(),\n        length = points1.length, i;\n\n    for (i = 0; i < length; i++) {\n      var a1 = points1[i],\n          a2 = points1[(i + 1) % length],\n          inter = Intersection.intersectLinePolygon(a1, a2, points2);\n\n      result.appendPoints(inter.points);\n    }\n    if (result.points.length > 0) {\n      result.status = 'Intersection';\n    }\n    return result;\n  };\n\n  /**\n   * Checks if polygon intersects rectangle\n   * @static\n   * @param {Array} points\n   * @param {fabric.Point} r1\n   * @param {fabric.Point} r2\n   * @return {fabric.Intersection}\n   */\n  fabric.Intersection.intersectPolygonRectangle = function (points, r1, r2) {\n    var min = r1.min(r2),\n        max = r1.max(r2),\n        topRight = new fabric.Point(max.x, min.y),\n        bottomLeft = new fabric.Point(min.x, max.y),\n        inter1 = Intersection.intersectLinePolygon(min, topRight, points),\n        inter2 = Intersection.intersectLinePolygon(topRight, max, points),\n        inter3 = Intersection.intersectLinePolygon(max, bottomLeft, points),\n        inter4 = Intersection.intersectLinePolygon(bottomLeft, min, points),\n        result = new Intersection();\n\n    result.appendPoints(inter1.points);\n    result.appendPoints(inter2.points);\n    result.appendPoints(inter3.points);\n    result.appendPoints(inter4.points);\n\n    if (result.points.length > 0) {\n      result.status = 'Intersection';\n    }\n    return result;\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Color) {\n    fabric.warn('fabric.Color is already defined.');\n    return;\n  }\n\n  /**\n   * Color class\n   * The purpose of {@link fabric.Color} is to abstract and encapsulate common color operations;\n   * {@link fabric.Color} is a constructor and creates instances of {@link fabric.Color} objects.\n   *\n   * @class fabric.Color\n   * @param {String} color optional in hex or rgb(a) or hsl format or from known color list\n   * @return {fabric.Color} thisArg\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2/#colors}\n   */\n  function Color(color) {\n    if (!color) {\n      this.setSource([0, 0, 0, 1]);\n    }\n    else {\n      this._tryParsingColor(color);\n    }\n  }\n\n  fabric.Color = Color;\n\n  fabric.Color.prototype = /** @lends fabric.Color.prototype */ {\n\n    /**\n     * @private\n     * @param {String|Array} color Color value to parse\n     */\n    _tryParsingColor: function(color) {\n      var source;\n\n      if (color in Color.colorNameMap) {\n        color = Color.colorNameMap[color];\n      }\n\n      if (color === 'transparent') {\n        source = [255, 255, 255, 0];\n      }\n\n      if (!source) {\n        source = Color.sourceFromHex(color);\n      }\n      if (!source) {\n        source = Color.sourceFromRgb(color);\n      }\n      if (!source) {\n        source = Color.sourceFromHsl(color);\n      }\n      if (!source) {\n        //if color is not recognize let's make black as canvas does\n        source = [0, 0, 0, 1];\n      }\n      if (source) {\n        this.setSource(source);\n      }\n    },\n\n    /**\n     * Adapted from <a href=\"https://rawgithub.com/mjijackson/mjijackson.github.com/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.html\">https://github.com/mjijackson</a>\n     * @private\n     * @param {Number} r Red color value\n     * @param {Number} g Green color value\n     * @param {Number} b Blue color value\n     * @return {Array} Hsl color\n     */\n    _rgbToHsl: function(r, g, b) {\n      r /= 255; g /= 255; b /= 255;\n\n      var h, s, l,\n          max = fabric.util.array.max([r, g, b]),\n          min = fabric.util.array.min([r, g, b]);\n\n      l = (max + min) / 2;\n\n      if (max === min) {\n        h = s = 0; // achromatic\n      }\n      else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n        switch (max) {\n          case r:\n            h = (g - b) / d + (g < b ? 6 : 0);\n            break;\n          case g:\n            h = (b - r) / d + 2;\n            break;\n          case b:\n            h = (r - g) / d + 4;\n            break;\n        }\n        h /= 6;\n      }\n\n      return [\n        Math.round(h * 360),\n        Math.round(s * 100),\n        Math.round(l * 100)\n      ];\n    },\n\n    /**\n     * Returns source of this color (where source is an array representation; ex: [200, 200, 100, 1])\n     * @return {Array}\n     */\n    getSource: function() {\n      return this._source;\n    },\n\n    /**\n     * Sets source of this color (where source is an array representation; ex: [200, 200, 100, 1])\n     * @param {Array} source\n     */\n    setSource: function(source) {\n      this._source = source;\n    },\n\n    /**\n     * Returns color representation in RGB format\n     * @return {String} ex: rgb(0-255,0-255,0-255)\n     */\n    toRgb: function() {\n      var source = this.getSource();\n      return 'rgb(' + source[0] + ',' + source[1] + ',' + source[2] + ')';\n    },\n\n    /**\n     * Returns color representation in RGBA format\n     * @return {String} ex: rgba(0-255,0-255,0-255,0-1)\n     */\n    toRgba: function() {\n      var source = this.getSource();\n      return 'rgba(' + source[0] + ',' + source[1] + ',' + source[2] + ',' + source[3] + ')';\n    },\n\n    /**\n     * Returns color representation in HSL format\n     * @return {String} ex: hsl(0-360,0%-100%,0%-100%)\n     */\n    toHsl: function() {\n      var source = this.getSource(),\n          hsl = this._rgbToHsl(source[0], source[1], source[2]);\n\n      return 'hsl(' + hsl[0] + ',' + hsl[1] + '%,' + hsl[2] + '%)';\n    },\n\n    /**\n     * Returns color representation in HSLA format\n     * @return {String} ex: hsla(0-360,0%-100%,0%-100%,0-1)\n     */\n    toHsla: function() {\n      var source = this.getSource(),\n          hsl = this._rgbToHsl(source[0], source[1], source[2]);\n\n      return 'hsla(' + hsl[0] + ',' + hsl[1] + '%,' + hsl[2] + '%,' + source[3] + ')';\n    },\n\n    /**\n     * Returns color representation in HEX format\n     * @return {String} ex: FF5555\n     */\n    toHex: function() {\n      var source = this.getSource(), r, g, b;\n\n      r = source[0].toString(16);\n      r = (r.length === 1) ? ('0' + r) : r;\n\n      g = source[1].toString(16);\n      g = (g.length === 1) ? ('0' + g) : g;\n\n      b = source[2].toString(16);\n      b = (b.length === 1) ? ('0' + b) : b;\n\n      return r.toUpperCase() + g.toUpperCase() + b.toUpperCase();\n    },\n\n    /**\n     * Returns color representation in HEXA format\n     * @return {String} ex: FF5555CC\n     */\n    toHexa: function() {\n      var source = this.getSource(), a;\n\n      a = Math.round(source[3] * 255);\n      a = a.toString(16);\n      a = (a.length === 1) ? ('0' + a) : a;\n\n      return this.toHex() + a.toUpperCase();\n    },\n\n    /**\n     * Gets value of alpha channel for this color\n     * @return {Number} 0-1\n     */\n    getAlpha: function() {\n      return this.getSource()[3];\n    },\n\n    /**\n     * Sets value of alpha channel for this color\n     * @param {Number} alpha Alpha value 0-1\n     * @return {fabric.Color} thisArg\n     */\n    setAlpha: function(alpha) {\n      var source = this.getSource();\n      source[3] = alpha;\n      this.setSource(source);\n      return this;\n    },\n\n    /**\n     * Transforms color to its grayscale representation\n     * @return {fabric.Color} thisArg\n     */\n    toGrayscale: function() {\n      var source = this.getSource(),\n          average = parseInt((source[0] * 0.3 + source[1] * 0.59 + source[2] * 0.11).toFixed(0), 10),\n          currentAlpha = source[3];\n      this.setSource([average, average, average, currentAlpha]);\n      return this;\n    },\n\n    /**\n     * Transforms color to its black and white representation\n     * @param {Number} threshold\n     * @return {fabric.Color} thisArg\n     */\n    toBlackWhite: function(threshold) {\n      var source = this.getSource(),\n          average = (source[0] * 0.3 + source[1] * 0.59 + source[2] * 0.11).toFixed(0),\n          currentAlpha = source[3];\n\n      threshold = threshold || 127;\n\n      average = (Number(average) < Number(threshold)) ? 0 : 255;\n      this.setSource([average, average, average, currentAlpha]);\n      return this;\n    },\n\n    /**\n     * Overlays color with another color\n     * @param {String|fabric.Color} otherColor\n     * @return {fabric.Color} thisArg\n     */\n    overlayWith: function(otherColor) {\n      if (!(otherColor instanceof Color)) {\n        otherColor = new Color(otherColor);\n      }\n\n      var result = [],\n          alpha = this.getAlpha(),\n          otherAlpha = 0.5,\n          source = this.getSource(),\n          otherSource = otherColor.getSource(), i;\n\n      for (i = 0; i < 3; i++) {\n        result.push(Math.round((source[i] * (1 - otherAlpha)) + (otherSource[i] * otherAlpha)));\n      }\n\n      result[3] = alpha;\n      this.setSource(result);\n      return this;\n    }\n  };\n\n  /**\n   * Regex matching color in RGB or RGBA formats (ex: rgb(0, 0, 0), rgba(255, 100, 10, 0.5), rgba( 255 , 100 , 10 , 0.5 ), rgb(1,1,1), rgba(100%, 60%, 10%, 0.5))\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   */\n  // eslint-disable-next-line max-len\n  fabric.Color.reRGBa = /^rgba?\\(\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*,\\s*(\\d{1,3}(?:\\.\\d+)?\\%?)\\s*(?:\\s*,\\s*((?:\\d*\\.?\\d+)?)\\s*)?\\)$/i;\n\n  /**\n   * Regex matching color in HSL or HSLA formats (ex: hsl(200, 80%, 10%), hsla(300, 50%, 80%, 0.5), hsla( 300 , 50% , 80% , 0.5 ))\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   */\n  fabric.Color.reHSLa = /^hsla?\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3}\\%)\\s*,\\s*(\\d{1,3}\\%)\\s*(?:\\s*,\\s*(\\d+(?:\\.\\d+)?)\\s*)?\\)$/i;\n\n  /**\n   * Regex matching color in HEX format (ex: #FF5544CC, #FF5555, 010155, aff)\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   */\n  fabric.Color.reHex = /^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i;\n\n  /**\n   * Map of the 148 color names with HEX code\n   * @static\n   * @field\n   * @memberOf fabric.Color\n   * @see: https://www.w3.org/TR/css3-color/#svg-color\n   */\n  fabric.Color.colorNameMap = {\n    aliceblue:            '#F0F8FF',\n    antiquewhite:         '#FAEBD7',\n    aqua:                 '#00FFFF',\n    aquamarine:           '#7FFFD4',\n    azure:                '#F0FFFF',\n    beige:                '#F5F5DC',\n    bisque:               '#FFE4C4',\n    black:                '#000000',\n    blanchedalmond:       '#FFEBCD',\n    blue:                 '#0000FF',\n    blueviolet:           '#8A2BE2',\n    brown:                '#A52A2A',\n    burlywood:            '#DEB887',\n    cadetblue:            '#5F9EA0',\n    chartreuse:           '#7FFF00',\n    chocolate:            '#D2691E',\n    coral:                '#FF7F50',\n    cornflowerblue:       '#6495ED',\n    cornsilk:             '#FFF8DC',\n    crimson:              '#DC143C',\n    cyan:                 '#00FFFF',\n    darkblue:             '#00008B',\n    darkcyan:             '#008B8B',\n    darkgoldenrod:        '#B8860B',\n    darkgray:             '#A9A9A9',\n    darkgrey:             '#A9A9A9',\n    darkgreen:            '#006400',\n    darkkhaki:            '#BDB76B',\n    darkmagenta:          '#8B008B',\n    darkolivegreen:       '#556B2F',\n    darkorange:           '#FF8C00',\n    darkorchid:           '#9932CC',\n    darkred:              '#8B0000',\n    darksalmon:           '#E9967A',\n    darkseagreen:         '#8FBC8F',\n    darkslateblue:        '#483D8B',\n    darkslategray:        '#2F4F4F',\n    darkslategrey:        '#2F4F4F',\n    darkturquoise:        '#00CED1',\n    darkviolet:           '#9400D3',\n    deeppink:             '#FF1493',\n    deepskyblue:          '#00BFFF',\n    dimgray:              '#696969',\n    dimgrey:              '#696969',\n    dodgerblue:           '#1E90FF',\n    firebrick:            '#B22222',\n    floralwhite:          '#FFFAF0',\n    forestgreen:          '#228B22',\n    fuchsia:              '#FF00FF',\n    gainsboro:            '#DCDCDC',\n    ghostwhite:           '#F8F8FF',\n    gold:                 '#FFD700',\n    goldenrod:            '#DAA520',\n    gray:                 '#808080',\n    grey:                 '#808080',\n    green:                '#008000',\n    greenyellow:          '#ADFF2F',\n    honeydew:             '#F0FFF0',\n    hotpink:              '#FF69B4',\n    indianred:            '#CD5C5C',\n    indigo:               '#4B0082',\n    ivory:                '#FFFFF0',\n    khaki:                '#F0E68C',\n    lavender:             '#E6E6FA',\n    lavenderblush:        '#FFF0F5',\n    lawngreen:            '#7CFC00',\n    lemonchiffon:         '#FFFACD',\n    lightblue:            '#ADD8E6',\n    lightcoral:           '#F08080',\n    lightcyan:            '#E0FFFF',\n    lightgoldenrodyellow: '#FAFAD2',\n    lightgray:            '#D3D3D3',\n    lightgrey:            '#D3D3D3',\n    lightgreen:           '#90EE90',\n    lightpink:            '#FFB6C1',\n    lightsalmon:          '#FFA07A',\n    lightseagreen:        '#20B2AA',\n    lightskyblue:         '#87CEFA',\n    lightslategray:       '#778899',\n    lightslategrey:       '#778899',\n    lightsteelblue:       '#B0C4DE',\n    lightyellow:          '#FFFFE0',\n    lime:                 '#00FF00',\n    limegreen:            '#32CD32',\n    linen:                '#FAF0E6',\n    magenta:              '#FF00FF',\n    maroon:               '#800000',\n    mediumaquamarine:     '#66CDAA',\n    mediumblue:           '#0000CD',\n    mediumorchid:         '#BA55D3',\n    mediumpurple:         '#9370DB',\n    mediumseagreen:       '#3CB371',\n    mediumslateblue:      '#7B68EE',\n    mediumspringgreen:    '#00FA9A',\n    mediumturquoise:      '#48D1CC',\n    mediumvioletred:      '#C71585',\n    midnightblue:         '#191970',\n    mintcream:            '#F5FFFA',\n    mistyrose:            '#FFE4E1',\n    moccasin:             '#FFE4B5',\n    navajowhite:          '#FFDEAD',\n    navy:                 '#000080',\n    oldlace:              '#FDF5E6',\n    olive:                '#808000',\n    olivedrab:            '#6B8E23',\n    orange:               '#FFA500',\n    orangered:            '#FF4500',\n    orchid:               '#DA70D6',\n    palegoldenrod:        '#EEE8AA',\n    palegreen:            '#98FB98',\n    paleturquoise:        '#AFEEEE',\n    palevioletred:        '#DB7093',\n    papayawhip:           '#FFEFD5',\n    peachpuff:            '#FFDAB9',\n    peru:                 '#CD853F',\n    pink:                 '#FFC0CB',\n    plum:                 '#DDA0DD',\n    powderblue:           '#B0E0E6',\n    purple:               '#800080',\n    rebeccapurple:        '#663399',\n    red:                  '#FF0000',\n    rosybrown:            '#BC8F8F',\n    royalblue:            '#4169E1',\n    saddlebrown:          '#8B4513',\n    salmon:               '#FA8072',\n    sandybrown:           '#F4A460',\n    seagreen:             '#2E8B57',\n    seashell:             '#FFF5EE',\n    sienna:               '#A0522D',\n    silver:               '#C0C0C0',\n    skyblue:              '#87CEEB',\n    slateblue:            '#6A5ACD',\n    slategray:            '#708090',\n    slategrey:            '#708090',\n    snow:                 '#FFFAFA',\n    springgreen:          '#00FF7F',\n    steelblue:            '#4682B4',\n    tan:                  '#D2B48C',\n    teal:                 '#008080',\n    thistle:              '#D8BFD8',\n    tomato:               '#FF6347',\n    turquoise:            '#40E0D0',\n    violet:               '#EE82EE',\n    wheat:                '#F5DEB3',\n    white:                '#FFFFFF',\n    whitesmoke:           '#F5F5F5',\n    yellow:               '#FFFF00',\n    yellowgreen:          '#9ACD32'\n  };\n\n  /**\n   * @private\n   * @param {Number} p\n   * @param {Number} q\n   * @param {Number} t\n   * @return {Number}\n   */\n  function hue2rgb(p, q, t) {\n    if (t < 0) {\n      t += 1;\n    }\n    if (t > 1) {\n      t -= 1;\n    }\n    if (t < 1 / 6) {\n      return p + (q - p) * 6 * t;\n    }\n    if (t < 1 / 2) {\n      return q;\n    }\n    if (t < 2 / 3) {\n      return p + (q - p) * (2 / 3 - t) * 6;\n    }\n    return p;\n  }\n\n  /**\n   * Returns new color object, when given a color in RGB format\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: rgb(0-255,0-255,0-255)\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromRgb = function(color) {\n    return Color.fromSource(Color.sourceFromRgb(color));\n  };\n\n  /**\n   * Returns array representation (ex: [100, 100, 200, 1]) of a color that's in RGB or RGBA format\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: rgb(0-255,0-255,0-255), rgb(0%-100%,0%-100%,0%-100%)\n   * @return {Array} source\n   */\n  fabric.Color.sourceFromRgb = function(color) {\n    var match = color.match(Color.reRGBa);\n    if (match) {\n      var r = parseInt(match[1], 10) / (/%$/.test(match[1]) ? 100 : 1) * (/%$/.test(match[1]) ? 255 : 1),\n          g = parseInt(match[2], 10) / (/%$/.test(match[2]) ? 100 : 1) * (/%$/.test(match[2]) ? 255 : 1),\n          b = parseInt(match[3], 10) / (/%$/.test(match[3]) ? 100 : 1) * (/%$/.test(match[3]) ? 255 : 1);\n\n      return [\n        parseInt(r, 10),\n        parseInt(g, 10),\n        parseInt(b, 10),\n        match[4] ? parseFloat(match[4]) : 1\n      ];\n    }\n  };\n\n  /**\n   * Returns new color object, when given a color in RGBA format\n   * @static\n   * @function\n   * @memberOf fabric.Color\n   * @param {String} color\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromRgba = Color.fromRgb;\n\n  /**\n   * Returns new color object, when given a color in HSL format\n   * @param {String} color Color value ex: hsl(0-260,0%-100%,0%-100%)\n   * @memberOf fabric.Color\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromHsl = function(color) {\n    return Color.fromSource(Color.sourceFromHsl(color));\n  };\n\n  /**\n   * Returns array representation (ex: [100, 100, 200, 1]) of a color that's in HSL or HSLA format.\n   * Adapted from <a href=\"https://rawgithub.com/mjijackson/mjijackson.github.com/master/2008/02/rgb-to-hsl-and-rgb-to-hsv-color-model-conversion-algorithms-in-javascript.html\">https://github.com/mjijackson</a>\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: hsl(0-360,0%-100%,0%-100%) or hsla(0-360,0%-100%,0%-100%, 0-1)\n   * @return {Array} source\n   * @see http://http://www.w3.org/TR/css3-color/#hsl-color\n   */\n  fabric.Color.sourceFromHsl = function(color) {\n    var match = color.match(Color.reHSLa);\n    if (!match) {\n      return;\n    }\n\n    var h = (((parseFloat(match[1]) % 360) + 360) % 360) / 360,\n        s = parseFloat(match[2]) / (/%$/.test(match[2]) ? 100 : 1),\n        l = parseFloat(match[3]) / (/%$/.test(match[3]) ? 100 : 1),\n        r, g, b;\n\n    if (s === 0) {\n      r = g = b = l;\n    }\n    else {\n      var q = l <= 0.5 ? l * (s + 1) : l + s - l * s,\n          p = l * 2 - q;\n\n      r = hue2rgb(p, q, h + 1 / 3);\n      g = hue2rgb(p, q, h);\n      b = hue2rgb(p, q, h - 1 / 3);\n    }\n\n    return [\n      Math.round(r * 255),\n      Math.round(g * 255),\n      Math.round(b * 255),\n      match[4] ? parseFloat(match[4]) : 1\n    ];\n  };\n\n  /**\n   * Returns new color object, when given a color in HSLA format\n   * @static\n   * @function\n   * @memberOf fabric.Color\n   * @param {String} color\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromHsla = Color.fromHsl;\n\n  /**\n   * Returns new color object, when given a color in HEX format\n   * @static\n   * @memberOf fabric.Color\n   * @param {String} color Color value ex: FF5555\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromHex = function(color) {\n    return Color.fromSource(Color.sourceFromHex(color));\n  };\n\n  /**\n   * Returns array representation (ex: [100, 100, 200, 1]) of a color that's in HEX format\n   * @static\n   * @memberOf fabric.Color\n   * @param {String} color ex: FF5555 or FF5544CC (RGBa)\n   * @return {Array} source\n   */\n  fabric.Color.sourceFromHex = function(color) {\n    if (color.match(Color.reHex)) {\n      var value = color.slice(color.indexOf('#') + 1),\n          isShortNotation = (value.length === 3 || value.length === 4),\n          isRGBa = (value.length === 8 || value.length === 4),\n          r = isShortNotation ? (value.charAt(0) + value.charAt(0)) : value.substring(0, 2),\n          g = isShortNotation ? (value.charAt(1) + value.charAt(1)) : value.substring(2, 4),\n          b = isShortNotation ? (value.charAt(2) + value.charAt(2)) : value.substring(4, 6),\n          a = isRGBa ? (isShortNotation ? (value.charAt(3) + value.charAt(3)) : value.substring(6, 8)) : 'FF';\n\n      return [\n        parseInt(r, 16),\n        parseInt(g, 16),\n        parseInt(b, 16),\n        parseFloat((parseInt(a, 16) / 255).toFixed(2))\n      ];\n    }\n  };\n\n  /**\n   * Returns new color object, when given color in array representation (ex: [200, 100, 100, 0.5])\n   * @static\n   * @memberOf fabric.Color\n   * @param {Array} source\n   * @return {fabric.Color}\n   */\n  fabric.Color.fromSource = function(source) {\n    var oColor = new Color();\n    oColor.setSource(source);\n    return oColor;\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      scaleMap = ['e', 'se', 's', 'sw', 'w', 'nw', 'n', 'ne', 'e'],\n      skewMap = ['ns', 'nesw', 'ew', 'nwse'],\n      controls = {},\n      LEFT = 'left', TOP = 'top', RIGHT = 'right', BOTTOM = 'bottom', CENTER = 'center',\n      opposite = {\n        top: BOTTOM,\n        bottom: TOP,\n        left: RIGHT,\n        right: LEFT,\n        center: CENTER,\n      }, radiansToDegrees = fabric.util.radiansToDegrees,\n      sign = (Math.sign || function(x) { return ((x > 0) - (x < 0)) || +x; });\n\n  /**\n   * Combine control position and object angle to find the control direction compared\n   * to the object center.\n   * @param {fabric.Object} fabricObject the fabric object for which we are rendering controls\n   * @param {fabric.Control} control the control class\n   * @return {Number} 0 - 7 a quadrant number\n   */\n  function findCornerQuadrant(fabricObject, control) {\n    var cornerAngle = fabricObject.angle + radiansToDegrees(Math.atan2(control.y, control.x)) + 360;\n    return Math.round((cornerAngle % 360) / 45);\n  }\n\n  function fireEvent(eventName, options) {\n    var target = options.transform.target,\n        canvas = target.canvas,\n        canvasOptions = fabric.util.object.clone(options);\n    canvasOptions.target = target;\n    canvas && canvas.fire('object:' + eventName, canvasOptions);\n    target.fire(eventName, options);\n  }\n\n  /**\n   * Inspect event and fabricObject properties to understand if the scaling action\n   * @param {Event} eventData from the user action\n   * @param {fabric.Object} fabricObject the fabric object about to scale\n   * @return {Boolean} true if scale is proportional\n   */\n  function scaleIsProportional(eventData, fabricObject) {\n    var canvas = fabricObject.canvas, uniScaleKey = canvas.uniScaleKey,\n        uniformIsToggled = eventData[uniScaleKey];\n    return (canvas.uniformScaling && !uniformIsToggled) ||\n    (!canvas.uniformScaling && uniformIsToggled);\n  }\n\n  /**\n   * Checks if transform is centered\n   * @param {Object} transform transform data\n   * @return {Boolean} true if transform is centered\n   */\n  function isTransformCentered(transform) {\n    return transform.originX === CENTER && transform.originY === CENTER;\n  }\n\n  /**\n   * Inspect fabricObject to understand if the current scaling action is allowed\n   * @param {fabric.Object} fabricObject the fabric object about to scale\n   * @param {String} by 'x' or 'y' or ''\n   * @param {Boolean} scaleProportionally true if we are trying to scale proportionally\n   * @return {Boolean} true if scaling is not allowed at current conditions\n   */\n  function scalingIsForbidden(fabricObject, by, scaleProportionally) {\n    var lockX = fabricObject.lockScalingX, lockY = fabricObject.lockScalingY;\n    if (lockX && lockY) {\n      return true;\n    }\n    if (!by && (lockX || lockY) && scaleProportionally) {\n      return true;\n    }\n    if (lockX && by === 'x') {\n      return true;\n    }\n    if (lockY && by === 'y') {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * return the correct cursor style for the scale action\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} a valid css string for the cursor\n   */\n  function scaleCursorStyleHandler(eventData, control, fabricObject) {\n    var notAllowed = 'not-allowed',\n        scaleProportionally = scaleIsProportional(eventData, fabricObject),\n        by = '';\n    if (control.x !== 0 && control.y === 0) {\n      by = 'x';\n    }\n    else if (control.x === 0 && control.y !== 0) {\n      by = 'y';\n    }\n    if (scalingIsForbidden(fabricObject, by, scaleProportionally)) {\n      return notAllowed;\n    }\n    var n = findCornerQuadrant(fabricObject, control);\n    return scaleMap[n] + '-resize';\n  }\n\n  /**\n   * return the correct cursor style for the skew action\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} a valid css string for the cursor\n   */\n  function skewCursorStyleHandler(eventData, control, fabricObject) {\n    var notAllowed = 'not-allowed';\n    if (control.x !== 0 && fabricObject.lockSkewingY) {\n      return notAllowed;\n    }\n    if (control.y !== 0 && fabricObject.lockSkewingX) {\n      return notAllowed;\n    }\n    var n = findCornerQuadrant(fabricObject, control) % 4;\n    return skewMap[n] + '-resize';\n  }\n\n  /**\n   * Combine skew and scale style handlers to cover fabric standard use case\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} a valid css string for the cursor\n   */\n  function scaleSkewCursorStyleHandler(eventData, control, fabricObject) {\n    if (eventData[fabricObject.canvas.altActionKey]) {\n      return controls.skewCursorStyleHandler(eventData, control, fabricObject);\n    }\n    return controls.scaleCursorStyleHandler(eventData, control, fabricObject);\n  }\n\n  /**\n   * Inspect event, control and fabricObject to return the correct action name\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} an action name\n   */\n  function scaleOrSkewActionName(eventData, control, fabricObject) {\n    var isAlternative = eventData[fabricObject.canvas.altActionKey];\n    if (control.x === 0) {\n      // then is scaleY or skewX\n      return isAlternative ? 'skewX' : 'scaleY';\n    }\n    if (control.y === 0) {\n      // then is scaleY or skewX\n      return isAlternative ? 'skewY' : 'scaleX';\n    }\n  }\n\n  /**\n   * Find the correct style for the control that is used for rotation.\n   * this function is very simple and it just take care of not-allowed or standard cursor\n   * @param {Event} eventData the javascript event that is causing the scale\n   * @param {fabric.Control} control the control that is interested in the action\n   * @param {fabric.Object} fabricObject the fabric object that is interested in the action\n   * @return {String} a valid css string for the cursor\n   */\n  function rotationStyleHandler(eventData, control, fabricObject) {\n    if (fabricObject.lockRotation) {\n      return 'not-allowed';\n    }\n    return control.cursorStyle;\n  }\n\n  function commonEventInfo(eventData, transform, x, y) {\n    return {\n      e: eventData,\n      transform: transform,\n      pointer: {\n        x: x,\n        y: y,\n      }\n    };\n  }\n\n  /**\n   * Wrap an action handler with saving/restoring object position on the transform.\n   * this is the code that permits to objects to keep their position while transforming.\n   * @param {Function} actionHandler the function to wrap\n   * @return {Function} a function with an action handler signature\n   */\n  function wrapWithFixedAnchor(actionHandler) {\n    return function(eventData, transform, x, y) {\n      var target = transform.target, centerPoint = target.getCenterPoint(),\n          constraint = target.translateToOriginPoint(centerPoint, transform.originX, transform.originY),\n          actionPerformed = actionHandler(eventData, transform, x, y);\n      target.setPositionByOrigin(constraint, transform.originX, transform.originY);\n      return actionPerformed;\n    };\n  }\n\n  /**\n   * Transforms a point described by x and y in a distance from the top left corner of the object\n   * bounding box.\n   * @param {Object} transform\n   * @param {String} originX\n   * @param {String} originY\n   * @param {number} x\n   * @param {number} y\n   * @return {Fabric.Point} the normalized point\n   */\n  function getLocalPoint(transform, originX, originY, x, y) {\n    var target = transform.target,\n        control = target.controls[transform.corner],\n        zoom = target.canvas.getZoom(),\n        padding = target.padding / zoom,\n        localPoint = target.toLocalPoint(new fabric.Point(x, y), originX, originY);\n    if (localPoint.x >= padding) {\n      localPoint.x -= padding;\n    }\n    if (localPoint.x <= -padding) {\n      localPoint.x += padding;\n    }\n    if (localPoint.y >= padding) {\n      localPoint.y -= padding;\n    }\n    if (localPoint.y <= padding) {\n      localPoint.y += padding;\n    }\n    localPoint.x -= control.offsetX;\n    localPoint.y -= control.offsetY;\n    return localPoint;\n  }\n\n  /**\n   * Detect if the fabric object is flipped on one side.\n   * @param {fabric.Object} target\n   * @return {Boolean} true if one flip, but not two.\n   */\n  function targetHasOneFlip(target) {\n    return target.flipX !== target.flipY;\n  }\n\n  /**\n   * Utility function to compensate the scale factor when skew is applied on both axes\n   * @private\n   */\n  function compensateScaleForSkew(target, oppositeSkew, scaleToCompensate, axis, reference) {\n    if (target[oppositeSkew] !== 0) {\n      var newDim = target._getTransformedDimensions()[axis];\n      var newValue = reference / newDim * target[scaleToCompensate];\n      target.set(scaleToCompensate, newValue);\n    }\n  }\n\n  /**\n   * Action handler for skewing on the X axis\n   * @private\n   */\n  function skewObjectX(eventData, transform, x, y) {\n    var target = transform.target,\n        // find how big the object would be, if there was no skewX. takes in account scaling\n        dimNoSkew = target._getTransformedDimensions(0, target.skewY),\n        localPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y),\n        // the mouse is in the center of the object, and we want it to stay there.\n        // so the object will grow twice as much as the mouse.\n        // this makes the skew growth to localPoint * 2 - dimNoSkew.\n        totalSkewSize = Math.abs(localPoint.x * 2) - dimNoSkew.x,\n        currentSkew = target.skewX, newSkew;\n    if (totalSkewSize < 2) {\n      // let's make it easy to go back to position 0.\n      newSkew = 0;\n    }\n    else {\n      newSkew = radiansToDegrees(\n        Math.atan2((totalSkewSize / target.scaleX), (dimNoSkew.y / target.scaleY))\n      );\n      // now we have to find the sign of the skew.\n      // it mostly depend on the origin of transformation.\n      if (transform.originX === LEFT && transform.originY === BOTTOM) {\n        newSkew = -newSkew;\n      }\n      if (transform.originX === RIGHT && transform.originY === TOP) {\n        newSkew = -newSkew;\n      }\n      if (targetHasOneFlip(target)) {\n        newSkew = -newSkew;\n      }\n    }\n    var hasSkewed = currentSkew !== newSkew;\n    if (hasSkewed) {\n      var dimBeforeSkewing = target._getTransformedDimensions().y;\n      target.set('skewX', newSkew);\n      compensateScaleForSkew(target, 'skewY', 'scaleY', 'y', dimBeforeSkewing);\n      fireEvent('skewing', commonEventInfo(eventData, transform, x, y));\n    }\n    return hasSkewed;\n  }\n\n  /**\n   * Action handler for skewing on the Y axis\n   * @private\n   */\n  function skewObjectY(eventData, transform, x, y) {\n    var target = transform.target,\n        // find how big the object would be, if there was no skewX. takes in account scaling\n        dimNoSkew = target._getTransformedDimensions(target.skewX, 0),\n        localPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y),\n        // the mouse is in the center of the object, and we want it to stay there.\n        // so the object will grow twice as much as the mouse.\n        // this makes the skew growth to localPoint * 2 - dimNoSkew.\n        totalSkewSize = Math.abs(localPoint.y * 2) - dimNoSkew.y,\n        currentSkew = target.skewY, newSkew;\n    if (totalSkewSize < 2) {\n      // let's make it easy to go back to position 0.\n      newSkew = 0;\n    }\n    else {\n      newSkew = radiansToDegrees(\n        Math.atan2((totalSkewSize / target.scaleY), (dimNoSkew.x / target.scaleX))\n      );\n      // now we have to find the sign of the skew.\n      // it mostly depend on the origin of transformation.\n      if (transform.originX === LEFT && transform.originY === BOTTOM) {\n        newSkew = -newSkew;\n      }\n      if (transform.originX === RIGHT && transform.originY === TOP) {\n        newSkew = -newSkew;\n      }\n      if (targetHasOneFlip(target)) {\n        newSkew = -newSkew;\n      }\n    }\n    var hasSkewed = currentSkew !== newSkew;\n    if (hasSkewed) {\n      var dimBeforeSkewing = target._getTransformedDimensions().x;\n      target.set('skewY', newSkew);\n      compensateScaleForSkew(target, 'skewX', 'scaleX', 'x', dimBeforeSkewing);\n      fireEvent('skewing', commonEventInfo(eventData, transform, x, y));\n    }\n    return hasSkewed;\n  }\n\n  /**\n   * Wrapped Action handler for skewing on the Y axis, takes care of the\n   * skew direction and determine the correct transform origin for the anchor point\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function skewHandlerX(eventData, transform, x, y) {\n    // step1 figure out and change transform origin.\n    // if skewX > 0 and originY bottom we anchor on right\n    // if skewX > 0 and originY top we anchor on left\n    // if skewX < 0 and originY bottom we anchor on left\n    // if skewX < 0 and originY top we anchor on right\n    // if skewX is 0, we look for mouse position to understand where are we going.\n    var target = transform.target, currentSkew = target.skewX, originX, originY = transform.originY;\n    if (target.lockSkewingX) {\n      return false;\n    }\n    if (currentSkew === 0) {\n      var localPointFromCenter = getLocalPoint(transform, CENTER, CENTER, x, y);\n      if (localPointFromCenter.x > 0) {\n        // we are pulling right, anchor left;\n        originX = LEFT;\n      }\n      else {\n        // we are pulling right, anchor right\n        originX = RIGHT;\n      }\n    }\n    else {\n      if (currentSkew > 0) {\n        originX = originY === TOP ? LEFT : RIGHT;\n      }\n      if (currentSkew < 0) {\n        originX = originY === TOP ? RIGHT : LEFT;\n      }\n      // is the object flipped on one side only? swap the origin.\n      if (targetHasOneFlip(target)) {\n        originX = originX === LEFT ? RIGHT : LEFT;\n      }\n    }\n\n    // once we have the origin, we find the anchor point\n    transform.originX = originX;\n    var finalHandler = wrapWithFixedAnchor(skewObjectX);\n    return finalHandler(eventData, transform, x, y);\n  }\n\n  /**\n   * Wrapped Action handler for skewing on the Y axis, takes care of the\n   * skew direction and determine the correct transform origin for the anchor point\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function skewHandlerY(eventData, transform, x, y) {\n    // step1 figure out and change transform origin.\n    // if skewY > 0 and originX left we anchor on top\n    // if skewY > 0 and originX right we anchor on bottom\n    // if skewY < 0 and originX left we anchor on bottom\n    // if skewY < 0 and originX right we anchor on top\n    // if skewY is 0, we look for mouse position to understand where are we going.\n    var target = transform.target, currentSkew = target.skewY, originY, originX = transform.originX;\n    if (target.lockSkewingY) {\n      return false;\n    }\n    if (currentSkew === 0) {\n      var localPointFromCenter = getLocalPoint(transform, CENTER, CENTER, x, y);\n      if (localPointFromCenter.y > 0) {\n        // we are pulling down, anchor up;\n        originY = TOP;\n      }\n      else {\n        // we are pulling up, anchor down\n        originY = BOTTOM;\n      }\n    }\n    else {\n      if (currentSkew > 0) {\n        originY = originX === LEFT ? TOP : BOTTOM;\n      }\n      if (currentSkew < 0) {\n        originY = originX === LEFT ? BOTTOM : TOP;\n      }\n      // is the object flipped on one side only? swap the origin.\n      if (targetHasOneFlip(target)) {\n        originY = originY === TOP ? BOTTOM : TOP;\n      }\n    }\n\n    // once we have the origin, we find the anchor point\n    transform.originY = originY;\n    var finalHandler = wrapWithFixedAnchor(skewObjectY);\n    return finalHandler(eventData, transform, x, y);\n  }\n\n  /**\n   * Action handler for rotation and snapping, without anchor point.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   * @private\n   */\n  function rotationWithSnapping(eventData, transform, x, y) {\n    var t = transform,\n        target = t.target,\n        pivotPoint = target.translateToOriginPoint(target.getCenterPoint(), t.originX, t.originY);\n\n    if (target.lockRotation) {\n      return false;\n    }\n\n    var lastAngle = Math.atan2(t.ey - pivotPoint.y, t.ex - pivotPoint.x),\n        curAngle = Math.atan2(y - pivotPoint.y, x - pivotPoint.x),\n        angle = radiansToDegrees(curAngle - lastAngle + t.theta),\n        hasRotated = true;\n\n    if (target.snapAngle > 0) {\n      var snapAngle  = target.snapAngle,\n          snapThreshold  = target.snapThreshold || snapAngle,\n          rightAngleLocked = Math.ceil(angle / snapAngle) * snapAngle,\n          leftAngleLocked = Math.floor(angle / snapAngle) * snapAngle;\n\n      if (Math.abs(angle - leftAngleLocked) < snapThreshold) {\n        angle = leftAngleLocked;\n      }\n      else if (Math.abs(angle - rightAngleLocked) < snapThreshold) {\n        angle = rightAngleLocked;\n      }\n    }\n\n    // normalize angle to positive value\n    if (angle < 0) {\n      angle = 360 + angle;\n    }\n    angle %= 360;\n\n    hasRotated = target.angle !== angle;\n    target.angle = angle;\n    if (hasRotated) {\n      fireEvent('rotating', commonEventInfo(eventData, transform, x, y));\n    }\n    return hasRotated;\n  }\n\n  /**\n   * Basic scaling logic, reused with different constrain for scaling X,Y, freely or equally.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @param {Object} options additional information for scaling\n   * @param {String} options.by 'x', 'y', 'equally' or '' to indicate type of scaling\n   * @return {Boolean} true if some change happened\n   * @private\n   */\n  function scaleObject(eventData, transform, x, y, options) {\n    options = options || {};\n    var target = transform.target,\n        lockScalingX = target.lockScalingX, lockScalingY = target.lockScalingY,\n        by = options.by, newPoint, scaleX, scaleY, dim,\n        scaleProportionally = scaleIsProportional(eventData, target),\n        forbidScaling = scalingIsForbidden(target, by, scaleProportionally),\n        signX, signY, gestureScale = transform.gestureScale;\n\n    if (forbidScaling) {\n      return false;\n    }\n    if (gestureScale) {\n      scaleX = transform.scaleX * gestureScale;\n      scaleY = transform.scaleY * gestureScale;\n    }\n    else {\n      newPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y);\n      // use of sign: We use sign to detect change of direction of an action. sign usually change when\n      // we cross the origin point with the mouse. So a scale flip for example. There is an issue when scaling\n      // by center and scaling using one middle control ( default: mr, mt, ml, mb), the mouse movement can easily\n      // cross many time the origin point and flip the object. so we need a way to filter out the noise.\n      // This ternary here should be ok to filter out X scaling when we want Y only and vice versa.\n      signX = by !== 'y' ? sign(newPoint.x) : 1;\n      signY = by !== 'x' ? sign(newPoint.y) : 1;\n      if (!transform.signX) {\n        transform.signX = signX;\n      }\n      if (!transform.signY) {\n        transform.signY = signY;\n      }\n\n      if (target.lockScalingFlip &&\n        (transform.signX !== signX || transform.signY !== signY)\n      ) {\n        return false;\n      }\n\n      dim = target._getTransformedDimensions();\n      // missing detection of flip and logic to switch the origin\n      if (scaleProportionally && !by) {\n        // uniform scaling\n        var distance = Math.abs(newPoint.x) + Math.abs(newPoint.y),\n            original = transform.original,\n            originalDistance = Math.abs(dim.x * original.scaleX / target.scaleX) +\n              Math.abs(dim.y * original.scaleY / target.scaleY),\n            scale = distance / originalDistance, hasScaled;\n        scaleX = original.scaleX * scale;\n        scaleY = original.scaleY * scale;\n      }\n      else {\n        scaleX = Math.abs(newPoint.x * target.scaleX / dim.x);\n        scaleY = Math.abs(newPoint.y * target.scaleY / dim.y);\n      }\n      // if we are scaling by center, we need to double the scale\n      if (isTransformCentered(transform)) {\n        scaleX *= 2;\n        scaleY *= 2;\n      }\n      if (transform.signX !== signX && by !== 'y') {\n        transform.originX = opposite[transform.originX];\n        scaleX *= -1;\n        transform.signX = signX;\n      }\n      if (transform.signY !== signY && by !== 'x') {\n        transform.originY = opposite[transform.originY];\n        scaleY *= -1;\n        transform.signY = signY;\n      }\n    }\n    // minScale is taken are in the setter.\n    var oldScaleX = target.scaleX, oldScaleY = target.scaleY;\n    if (!by) {\n      !lockScalingX && target.set('scaleX', scaleX);\n      !lockScalingY && target.set('scaleY', scaleY);\n    }\n    else {\n      // forbidden cases already handled on top here.\n      by === 'x' && target.set('scaleX', scaleX);\n      by === 'y' && target.set('scaleY', scaleY);\n    }\n    hasScaled = oldScaleX !== target.scaleX || oldScaleY !== target.scaleY;\n    if (hasScaled) {\n      fireEvent('scaling', commonEventInfo(eventData, transform, x, y));\n    }\n    return hasScaled;\n  }\n\n  /**\n   * Generic scaling logic, to scale from corners either equally or freely.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scaleObjectFromCorner(eventData, transform, x, y) {\n    return scaleObject(eventData, transform, x, y);\n  }\n\n  /**\n   * Scaling logic for the X axis.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scaleObjectX(eventData, transform, x, y) {\n    return scaleObject(eventData, transform, x, y , { by: 'x' });\n  }\n\n  /**\n   * Scaling logic for the Y axis.\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scaleObjectY(eventData, transform, x, y) {\n    return scaleObject(eventData, transform, x, y , { by: 'y' });\n  }\n\n  /**\n   * Composed action handler to either scale Y or skew X\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scalingYOrSkewingX(eventData, transform, x, y) {\n    // ok some safety needed here.\n    if (eventData[transform.target.canvas.altActionKey]) {\n      return controls.skewHandlerX(eventData, transform, x, y);\n    }\n    return controls.scalingY(eventData, transform, x, y);\n  }\n\n  /**\n   * Composed action handler to either scale X or skew Y\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function scalingXOrSkewingY(eventData, transform, x, y) {\n    // ok some safety needed here.\n    if (eventData[transform.target.canvas.altActionKey]) {\n      return controls.skewHandlerY(eventData, transform, x, y);\n    }\n    return controls.scalingX(eventData, transform, x, y);\n  }\n\n  /**\n   * Action handler to change textbox width\n   * Needs to be wrapped with `wrapWithFixedAnchor` to be effective\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if some change happened\n   */\n  function changeWidth(eventData, transform, x, y) {\n    var target = transform.target, localPoint = getLocalPoint(transform, transform.originX, transform.originY, x, y),\n        strokePadding = target.strokeWidth / (target.strokeUniform ? target.scaleX : 1),\n        multiplier = isTransformCentered(transform) ? 2 : 1,\n        oldWidth = target.width, hasResized,\n        newWidth = Math.abs(localPoint.x * multiplier / target.scaleX) - strokePadding;\n    target.set('width', Math.max(newWidth, 0));\n    hasResized = oldWidth !== newWidth;\n    if (hasResized) {\n      fireEvent('resizing', commonEventInfo(eventData, transform, x, y));\n    }\n    return hasResized;\n  }\n\n  /**\n   * Action handler\n   * @private\n   * @param {Event} eventData javascript event that is doing the transform\n   * @param {Object} transform javascript object containing a series of information around the current transform\n   * @param {number} x current mouse x position, canvas normalized\n   * @param {number} y current mouse y position, canvas normalized\n   * @return {Boolean} true if the translation occurred\n   */\n  function dragHandler(eventData, transform, x, y) {\n    var target = transform.target,\n        newLeft = x - transform.offsetX,\n        newTop = y - transform.offsetY,\n        moveX = !target.get('lockMovementX') && target.left !== newLeft,\n        moveY = !target.get('lockMovementY') && target.top !== newTop;\n    moveX && target.set('left', newLeft);\n    moveY && target.set('top', newTop);\n    if (moveX || moveY) {\n      fireEvent('moving', commonEventInfo(eventData, transform, x, y));\n    }\n    return moveX || moveY;\n  }\n\n  controls.scaleCursorStyleHandler = scaleCursorStyleHandler;\n  controls.skewCursorStyleHandler = skewCursorStyleHandler;\n  controls.scaleSkewCursorStyleHandler = scaleSkewCursorStyleHandler;\n  controls.rotationWithSnapping = wrapWithFixedAnchor(rotationWithSnapping);\n  controls.scalingEqually = wrapWithFixedAnchor(scaleObjectFromCorner);\n  controls.scalingX = wrapWithFixedAnchor(scaleObjectX);\n  controls.scalingY = wrapWithFixedAnchor(scaleObjectY);\n  controls.scalingYOrSkewingX = scalingYOrSkewingX;\n  controls.scalingXOrSkewingY = scalingXOrSkewingY;\n  controls.changeWidth = wrapWithFixedAnchor(changeWidth);\n  controls.skewHandlerX = skewHandlerX;\n  controls.skewHandlerY = skewHandlerY;\n  controls.dragHandler = dragHandler;\n  controls.scaleOrSkewActionName = scaleOrSkewActionName;\n  controls.rotationStyleHandler = rotationStyleHandler;\n  controls.fireEvent = fireEvent;\n  controls.wrapWithFixedAnchor = wrapWithFixedAnchor;\n  controls.getLocalPoint = getLocalPoint;\n  fabric.controlsUtils = controls;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      degreesToRadians = fabric.util.degreesToRadians,\n      controls = fabric.controlsUtils;\n\n  /**\n   * Render a round control, as per fabric features.\n   * This function is written to respect object properties like transparentCorners, cornerSize\n   * cornerColor, cornerStrokeColor\n   * plus the addition of offsetY and offsetX.\n   * @param {CanvasRenderingContext2D} ctx context to render on\n   * @param {Number} left x coordinate where the control center should be\n   * @param {Number} top y coordinate where the control center should be\n   * @param {Object} styleOverride override for fabric.Object controls style\n   * @param {fabric.Object} fabricObject the fabric object for which we are rendering controls\n   */\n  function renderCircleControl (ctx, left, top, styleOverride, fabricObject) {\n    styleOverride = styleOverride || {};\n    var xSize = this.sizeX || styleOverride.cornerSize || fabricObject.cornerSize,\n        ySize = this.sizeY || styleOverride.cornerSize || fabricObject.cornerSize,\n        transparentCorners = typeof styleOverride.transparentCorners !== 'undefined' ?\n          styleOverride.transparentCorners : this.transparentCorners,\n        methodName = transparentCorners ? 'stroke' : 'fill',\n        stroke = !transparentCorners && (styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor),\n        myLeft = left,\n        myTop = top, size;\n    ctx.save();\n    ctx.fillStyle = styleOverride.cornerColor || fabricObject.cornerColor;\n    ctx.strokeStyle = styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor;\n    // as soon as fabric react v5, remove ie11, use proper ellipse code.\n    if (xSize > ySize) {\n      size = xSize;\n      ctx.scale(1.0, ySize / xSize);\n      myTop = top * xSize / ySize;\n    }\n    else if (ySize > xSize) {\n      size = ySize;\n      ctx.scale(xSize / ySize, 1.0);\n      myLeft = left * ySize / xSize;\n    }\n    else {\n      size = xSize;\n    }\n    // this is still wrong\n    ctx.lineWidth = 1;\n    ctx.beginPath();\n    ctx.arc(myLeft, myTop, size / 2, 0, 2 * Math.PI, false);\n    ctx[methodName]();\n    if (stroke) {\n      ctx.stroke();\n    }\n    ctx.restore();\n  }\n\n  /**\n   * Render a square control, as per fabric features.\n   * This function is written to respect object properties like transparentCorners, cornerSize\n   * cornerColor, cornerStrokeColor\n   * plus the addition of offsetY and offsetX.\n   * @param {CanvasRenderingContext2D} ctx context to render on\n   * @param {Number} left x coordinate where the control center should be\n   * @param {Number} top y coordinate where the control center should be\n   * @param {Object} styleOverride override for fabric.Object controls style\n   * @param {fabric.Object} fabricObject the fabric object for which we are rendering controls\n   */\n  function renderSquareControl(ctx, left, top, styleOverride, fabricObject) {\n    styleOverride = styleOverride || {};\n    var xSize = this.sizeX || styleOverride.cornerSize || fabricObject.cornerSize,\n        ySize = this.sizeY || styleOverride.cornerSize || fabricObject.cornerSize,\n        transparentCorners = typeof styleOverride.transparentCorners !== 'undefined' ?\n          styleOverride.transparentCorners : fabricObject.transparentCorners,\n        methodName = transparentCorners ? 'stroke' : 'fill',\n        stroke = !transparentCorners && (\n          styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor\n        ), xSizeBy2 = xSize / 2, ySizeBy2 = ySize / 2;\n    ctx.save();\n    ctx.fillStyle = styleOverride.cornerColor || fabricObject.cornerColor;\n    ctx.strokeStyle = styleOverride.cornerStrokeColor || fabricObject.cornerStrokeColor;\n    // this is still wrong\n    ctx.lineWidth = 1;\n    ctx.translate(left, top);\n    ctx.rotate(degreesToRadians(fabricObject.angle));\n    // this does not work, and fixed with ( && ) does not make sense.\n    // to have real transparent corners we need the controls on upperCanvas\n    // transparentCorners || ctx.clearRect(-xSizeBy2, -ySizeBy2, xSize, ySize);\n    ctx[methodName + 'Rect'](-xSizeBy2, -ySizeBy2, xSize, ySize);\n    if (stroke) {\n      ctx.strokeRect(-xSizeBy2, -ySizeBy2, xSize, ySize);\n    }\n    ctx.restore();\n  }\n\n  controls.renderCircleControl = renderCircleControl;\n  controls.renderSquareControl = renderSquareControl;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  function Control(options) {\n    for (var i in options) {\n      this[i] = options[i];\n    }\n  }\n\n  fabric.Control = Control;\n\n  fabric.Control.prototype = /** @lends fabric.Control.prototype */ {\n\n    /**\n     * keep track of control visibility.\n     * mainly for backward compatibility.\n     * if you do not want to see a control, you can remove it\n     * from the controlset.\n     * @type {Boolean}\n     * @default true\n     */\n    visible: true,\n\n    /**\n     * Name of the action that the control will likely execute.\n     * This is optional. FabricJS uses to identify what the user is doing for some\n     * extra optimizations. If you are writing a custom control and you want to know\n     * somewhere else in the code what is going on, you can use this string here.\n     * you can also provide a custom getActionName if your control run multiple actions\n     * depending on some external state.\n     * default to scale since is the most common, used on 4 corners by default\n     * @type {String}\n     * @default 'scale'\n     */\n    actionName: 'scale',\n\n    /**\n     * Drawing angle of the control.\n     * NOT used for now, but name marked as needed for internal logic\n     * example: to reuse the same drawing function for different rotated controls\n     * @type {Number}\n     * @default 0\n     */\n    angle: 0,\n\n    /**\n     * Relative position of the control. X\n     * 0,0 is the center of the Object, while -0.5 (left) or 0.5 (right) are the extremities\n     * of the bounding box.\n     * @type {Number}\n     * @default 0\n     */\n    x: 0,\n\n    /**\n     * Relative position of the control. Y\n     * 0,0 is the center of the Object, while -0.5 (top) or 0.5 (bottom) are the extremities\n     * of the bounding box.\n     * @type {Number}\n     * @default 0\n     */\n    y: 0,\n\n    /**\n     * Horizontal offset of the control from the defined position. In pixels\n     * Positive offset moves the control to the right, negative to the left.\n     * It used when you want to have position of control that does not scale with\n     * the bounding box. Example: rotation control is placed at x:0, y: 0.5 on\n     * the boundindbox, with an offset of 30 pixels vertically. Those 30 pixels will\n     * stay 30 pixels no matter how the object is big. Another example is having 2\n     * controls in the corner, that stay in the same position when the object scale.\n     * of the bounding box.\n     * @type {Number}\n     * @default 0\n     */\n    offsetX: 0,\n\n    /**\n     * Vertical offset of the control from the defined position. In pixels\n     * Positive offset moves the control to the bottom, negative to the top.\n     * @type {Number}\n     * @default 0\n     */\n    offsetY: 0,\n\n    /**\n     * Sets the length of the control. If null, defaults to object's cornerSize.\n     * Expects both sizeX and sizeY to be set when set.\n     * @type {?Number}\n     * @default null\n     */\n    sizeX: null,\n\n    /**\n     * Sets the height of the control. If null, defaults to object's cornerSize.\n     * Expects both sizeX and sizeY to be set when set.\n     * @type {?Number}\n     * @default null\n     */\n    sizeY: null,\n\n    /**\n     * Sets the length of the touch area of the control. If null, defaults to object's touchCornerSize.\n     * Expects both touchSizeX and touchSizeY to be set when set.\n     * @type {?Number}\n     * @default null\n     */\n    touchSizeX: null,\n\n    /**\n     * Sets the height of the touch area of the control. If null, defaults to object's touchCornerSize.\n     * Expects both touchSizeX and touchSizeY to be set when set.\n     * @type {?Number}\n     * @default null\n     */\n    touchSizeY: null,\n\n    /**\n     * Css cursor style to display when the control is hovered.\n     * if the method `cursorStyleHandler` is provided, this property is ignored.\n     * @type {String}\n     * @default 'crosshair'\n     */\n    cursorStyle: 'crosshair',\n\n    /**\n     * If controls has an offsetY or offsetX, draw a line that connects\n     * the control to the bounding box\n     * @type {Boolean}\n     * @default false\n     */\n    withConnection: false,\n\n    /**\n     * The control actionHandler, provide one to handle action ( control being moved )\n     * @param {Event} eventData the native mouse event\n     * @param {Object} transformData properties of the current transform\n     * @param {Number} x x position of the cursor\n     * @param {Number} y y position of the cursor\n     * @return {Boolean} true if the action/event modified the object\n     */\n    actionHandler: function(/* eventData, transformData, x, y */) { },\n\n    /**\n     * The control handler for mouse down, provide one to handle mouse down on control\n     * @param {Event} eventData the native mouse event\n     * @param {Object} transformData properties of the current transform\n     * @param {Number} x x position of the cursor\n     * @param {Number} y y position of the cursor\n     * @return {Boolean} true if the action/event modified the object\n     */\n    mouseDownHandler: function(/* eventData, transformData, x, y */) { },\n\n    /**\n     * The control mouseUpHandler, provide one to handle an effect on mouse up.\n     * @param {Event} eventData the native mouse event\n     * @param {Object} transformData properties of the current transform\n     * @param {Number} x x position of the cursor\n     * @param {Number} y y position of the cursor\n     * @return {Boolean} true if the action/event modified the object\n     */\n    mouseUpHandler: function(/* eventData, transformData, x, y */) { },\n\n    /**\n     * Returns control actionHandler\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Object} fabricObject on which the control is displayed\n     * @param {fabric.Control} control control for which the action handler is being asked\n     * @return {Function} the action handler\n     */\n    getActionHandler: function(/* eventData, fabricObject, control */) {\n      return this.actionHandler;\n    },\n\n    /**\n     * Returns control mouseDown handler\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Object} fabricObject on which the control is displayed\n     * @param {fabric.Control} control control for which the action handler is being asked\n     * @return {Function} the action handler\n     */\n    getMouseDownHandler: function(/* eventData, fabricObject, control */) {\n      return this.mouseDownHandler;\n    },\n\n    /**\n     * Returns control mouseUp handler\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Object} fabricObject on which the control is displayed\n     * @param {fabric.Control} control control for which the action handler is being asked\n     * @return {Function} the action handler\n     */\n    getMouseUpHandler: function(/* eventData, fabricObject, control */) {\n      return this.mouseUpHandler;\n    },\n\n    /**\n     * Returns control cursorStyle for css using cursorStyle. If you need a more elaborate\n     * function you can pass one in the constructor\n     * the cursorStyle property\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Control} control the current control ( likely this)\n     * @param {fabric.Object} object on which the control is displayed\n     * @return {String}\n     */\n    cursorStyleHandler: function(eventData, control /* fabricObject */) {\n      return control.cursorStyle;\n    },\n\n    /**\n     * Returns the action name. The basic implementation just return the actionName property.\n     * @param {Event} eventData the native mouse event\n     * @param {fabric.Control} control the current control ( likely this)\n     * @param {fabric.Object} object on which the control is displayed\n     * @return {String}\n     */\n    getActionName: function(eventData, control /* fabricObject */) {\n      return control.actionName;\n    },\n\n    /**\n     * Returns controls visibility\n     * @param {fabric.Object} object on which the control is displayed\n     * @param {String} controlKey key where the control is memorized on the\n     * @return {Boolean}\n     */\n    getVisibility: function(fabricObject, controlKey) {\n      var objectVisibility = fabricObject._controlsVisibility;\n      if (objectVisibility && typeof objectVisibility[controlKey] !== 'undefined') {\n        return objectVisibility[controlKey];\n      }\n      return this.visible;\n    },\n\n    /**\n     * Sets controls visibility\n     * @param {Boolean} visibility for the object\n     * @return {Void}\n     */\n    setVisibility: function(visibility /* name, fabricObject */) {\n      this.visible = visibility;\n    },\n\n\n    positionHandler: function(dim, finalMatrix /*, fabricObject, currentControl */) {\n      var point = fabric.util.transformPoint({\n        x: this.x * dim.x + this.offsetX,\n        y: this.y * dim.y + this.offsetY }, finalMatrix);\n      return point;\n    },\n\n    /**\n     * Returns the coords for this control based on object values.\n     * @param {Number} objectAngle angle from the fabric object holding the control\n     * @param {Number} objectCornerSize cornerSize from the fabric object holding the control (or touchCornerSize if\n     *   isTouch is true)\n     * @param {Number} centerX x coordinate where the control center should be\n     * @param {Number} centerY y coordinate where the control center should be\n     * @param {boolean} isTouch true if touch corner, false if normal corner\n     */\n    calcCornerCoords: function(objectAngle, objectCornerSize, centerX, centerY, isTouch) {\n      var cosHalfOffset,\n          sinHalfOffset,\n          cosHalfOffsetComp,\n          sinHalfOffsetComp,\n          xSize = (isTouch) ? this.touchSizeX : this.sizeX,\n          ySize = (isTouch) ? this.touchSizeY : this.sizeY;\n      if (xSize && ySize && xSize !== ySize) {\n        // handle rectangular corners\n        var controlTriangleAngle = Math.atan2(ySize, xSize);\n        var cornerHypotenuse = Math.sqrt(xSize * xSize + ySize * ySize) / 2;\n        var newTheta = controlTriangleAngle - fabric.util.degreesToRadians(objectAngle);\n        var newThetaComp = Math.PI / 2 - controlTriangleAngle - fabric.util.degreesToRadians(objectAngle);\n        cosHalfOffset = cornerHypotenuse * fabric.util.cos(newTheta);\n        sinHalfOffset = cornerHypotenuse * fabric.util.sin(newTheta);\n        // use complementary angle for two corners\n        cosHalfOffsetComp = cornerHypotenuse * fabric.util.cos(newThetaComp);\n        sinHalfOffsetComp = cornerHypotenuse * fabric.util.sin(newThetaComp);\n      }\n      else {\n        // handle square corners\n        // use default object corner size unless size is defined\n        var cornerSize = (xSize && ySize) ? xSize : objectCornerSize;\n        /* 0.7071067812 stands for sqrt(2)/2 */\n        cornerHypotenuse = cornerSize * 0.7071067812;\n        // complementary angles are equal since they're both 45 degrees\n        var newTheta = fabric.util.degreesToRadians(45 - objectAngle);\n        cosHalfOffset = cosHalfOffsetComp = cornerHypotenuse * fabric.util.cos(newTheta);\n        sinHalfOffset = sinHalfOffsetComp = cornerHypotenuse * fabric.util.sin(newTheta);\n      }\n\n      return {\n        tl: {\n          x: centerX - sinHalfOffsetComp,\n          y: centerY - cosHalfOffsetComp,\n        },\n        tr: {\n          x: centerX + cosHalfOffset,\n          y: centerY - sinHalfOffset,\n        },\n        bl: {\n          x: centerX - cosHalfOffset,\n          y: centerY + sinHalfOffset,\n        },\n        br: {\n          x: centerX + sinHalfOffsetComp,\n          y: centerY + cosHalfOffsetComp,\n        },\n      };\n    },\n\n    /**\n    * Render function for the control.\n    * When this function runs the context is unscaled. unrotate. Just retina scaled.\n    * all the functions will have to translate to the point left,top before starting Drawing\n    * if they want to draw a control where the position is detected.\n    * left and top are the result of the positionHandler function\n    * @param {RenderingContext2D} ctx the context where the control will be drawn\n    * @param {Number} left position of the canvas where we are about to render the control.\n    * @param {Number} top position of the canvas where we are about to render the control.\n    * @param {Object} styleOverride\n    * @param {fabric.Object} fabricObject the object where the control is about to be rendered\n    */\n    render: function(ctx, left, top, styleOverride, fabricObject) {\n      styleOverride = styleOverride || {};\n      switch (styleOverride.cornerStyle || fabricObject.cornerStyle) {\n        case 'circle':\n          fabric.controlsUtils.renderCircleControl.call(this, ctx, left, top, styleOverride, fabricObject);\n          break;\n        default:\n          fabric.controlsUtils.renderSquareControl.call(this, ctx, left, top, styleOverride, fabricObject);\n      }\n    },\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n\n  /* _FROM_SVG_START_ */\n  function getColorStop(el, multiplier) {\n    var style = el.getAttribute('style'),\n        offset = el.getAttribute('offset') || 0,\n        color, colorAlpha, opacity, i;\n\n    // convert percents to absolute values\n    offset = parseFloat(offset) / (/%$/.test(offset) ? 100 : 1);\n    offset = offset < 0 ? 0 : offset > 1 ? 1 : offset;\n    if (style) {\n      var keyValuePairs = style.split(/\\s*;\\s*/);\n\n      if (keyValuePairs[keyValuePairs.length - 1] === '') {\n        keyValuePairs.pop();\n      }\n\n      for (i = keyValuePairs.length; i--; ) {\n\n        var split = keyValuePairs[i].split(/\\s*:\\s*/),\n            key = split[0].trim(),\n            value = split[1].trim();\n\n        if (key === 'stop-color') {\n          color = value;\n        }\n        else if (key === 'stop-opacity') {\n          opacity = value;\n        }\n      }\n    }\n\n    if (!color) {\n      color = el.getAttribute('stop-color') || 'rgb(0,0,0)';\n    }\n    if (!opacity) {\n      opacity = el.getAttribute('stop-opacity');\n    }\n\n    color = new fabric.Color(color);\n    colorAlpha = color.getAlpha();\n    opacity = isNaN(parseFloat(opacity)) ? 1 : parseFloat(opacity);\n    opacity *= colorAlpha * multiplier;\n\n    return {\n      offset: offset,\n      color: color.toRgb(),\n      opacity: opacity\n    };\n  }\n\n  function getLinearCoords(el) {\n    return {\n      x1: el.getAttribute('x1') || 0,\n      y1: el.getAttribute('y1') || 0,\n      x2: el.getAttribute('x2') || '100%',\n      y2: el.getAttribute('y2') || 0\n    };\n  }\n\n  function getRadialCoords(el) {\n    return {\n      x1: el.getAttribute('fx') || el.getAttribute('cx') || '50%',\n      y1: el.getAttribute('fy') || el.getAttribute('cy') || '50%',\n      r1: 0,\n      x2: el.getAttribute('cx') || '50%',\n      y2: el.getAttribute('cy') || '50%',\n      r2: el.getAttribute('r') || '50%'\n    };\n  }\n  /* _FROM_SVG_END_ */\n\n  var clone = fabric.util.object.clone;\n\n  /**\n   * Gradient class\n   * @class fabric.Gradient\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#gradients}\n   * @see {@link fabric.Gradient#initialize} for constructor definition\n   */\n  fabric.Gradient = fabric.util.createClass(/** @lends fabric.Gradient.prototype */ {\n\n    /**\n     * Horizontal offset for aligning gradients coming from SVG when outside pathgroups\n     * @type Number\n     * @default 0\n     */\n    offsetX: 0,\n\n    /**\n     * Vertical offset for aligning gradients coming from SVG when outside pathgroups\n     * @type Number\n     * @default 0\n     */\n    offsetY: 0,\n\n    /**\n     * A transform matrix to apply to the gradient before painting.\n     * Imported from svg gradients, is not applied with the current transform in the center.\n     * Before this transform is applied, the origin point is at the top left corner of the object\n     * plus the addition of offsetY and offsetX.\n     * @type Number[]\n     * @default null\n     */\n    gradientTransform: null,\n\n    /**\n     * coordinates units for coords.\n     * If `pixels`, the number of coords are in the same unit of width / height.\n     * If set as `percentage` the coords are still a number, but 1 means 100% of width\n     * for the X and 100% of the height for the y. It can be bigger than 1 and negative.\n     * allowed values pixels or percentage.\n     * @type String\n     * @default 'pixels'\n     */\n    gradientUnits: 'pixels',\n\n    /**\n     * Gradient type linear or radial\n     * @type String\n     * @default 'pixels'\n     */\n    type: 'linear',\n\n    /**\n     * Constructor\n     * @param {Object} options Options object with type, coords, gradientUnits and colorStops\n     * @param {Object} [options.type] gradient type linear or radial\n     * @param {Object} [options.gradientUnits] gradient units\n     * @param {Object} [options.offsetX] SVG import compatibility\n     * @param {Object} [options.offsetY] SVG import compatibility\n     * @param {Object[]} options.colorStops contains the colorstops.\n     * @param {Object} options.coords contains the coords of the gradient\n     * @param {Number} [options.coords.x1] X coordiante of the first point for linear or of the focal point for radial\n     * @param {Number} [options.coords.y1] Y coordiante of the first point for linear or of the focal point for radial\n     * @param {Number} [options.coords.x2] X coordiante of the second point for linear or of the center point for radial\n     * @param {Number} [options.coords.y2] Y coordiante of the second point for linear or of the center point for radial\n     * @param {Number} [options.coords.r1] only for radial gradient, radius of the inner circle\n     * @param {Number} [options.coords.r2] only for radial gradient, radius of the external circle\n     * @return {fabric.Gradient} thisArg\n     */\n    initialize: function(options) {\n      options || (options = { });\n      options.coords || (options.coords = { });\n\n      var coords, _this = this;\n\n      // sets everything, then coords and colorstops get sets again\n      Object.keys(options).forEach(function(option) {\n        _this[option] = options[option];\n      });\n\n      if (this.id) {\n        this.id += '_' + fabric.Object.__uid++;\n      }\n      else {\n        this.id = fabric.Object.__uid++;\n      }\n\n      coords = {\n        x1: options.coords.x1 || 0,\n        y1: options.coords.y1 || 0,\n        x2: options.coords.x2 || 0,\n        y2: options.coords.y2 || 0\n      };\n\n      if (this.type === 'radial') {\n        coords.r1 = options.coords.r1 || 0;\n        coords.r2 = options.coords.r2 || 0;\n      }\n\n      this.coords = coords;\n      this.colorStops = options.colorStops.slice();\n    },\n\n    /**\n     * Adds another colorStop\n     * @param {Object} colorStop Object with offset and color\n     * @return {fabric.Gradient} thisArg\n     */\n    addColorStop: function(colorStops) {\n      for (var position in colorStops) {\n        var color = new fabric.Color(colorStops[position]);\n        this.colorStops.push({\n          offset: parseFloat(position),\n          color: color.toRgb(),\n          opacity: color.getAlpha()\n        });\n      }\n      return this;\n    },\n\n    /**\n     * Returns object representation of a gradient\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object}\n     */\n    toObject: function(propertiesToInclude) {\n      var object = {\n        type: this.type,\n        coords: this.coords,\n        colorStops: this.colorStops,\n        offsetX: this.offsetX,\n        offsetY: this.offsetY,\n        gradientUnits: this.gradientUnits,\n        gradientTransform: this.gradientTransform ? this.gradientTransform.concat() : this.gradientTransform\n      };\n      fabric.util.populateWithProperties(this, object, propertiesToInclude);\n\n      return object;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of an gradient\n     * @param {Object} object Object to create a gradient for\n     * @return {String} SVG representation of an gradient (linear/radial)\n     */\n    toSVG: function(object, options) {\n      var coords = clone(this.coords, true), i, len, options = options || {},\n          markup, commonAttributes, colorStops = clone(this.colorStops, true),\n          needsSwap = coords.r1 > coords.r2,\n          transform = this.gradientTransform ? this.gradientTransform.concat() : fabric.iMatrix.concat(),\n          offsetX = -this.offsetX, offsetY = -this.offsetY,\n          withViewport = !!options.additionalTransform,\n          gradientUnits = this.gradientUnits === 'pixels' ? 'userSpaceOnUse' : 'objectBoundingBox';\n      // colorStops must be sorted ascending\n      colorStops.sort(function(a, b) {\n        return a.offset - b.offset;\n      });\n\n      if (gradientUnits === 'objectBoundingBox') {\n        offsetX /= object.width;\n        offsetY /= object.height;\n      }\n      else {\n        offsetX += object.width / 2;\n        offsetY += object.height / 2;\n      }\n      if (object.type === 'path' && this.gradientUnits !== 'percentage') {\n        offsetX -= object.pathOffset.x;\n        offsetY -= object.pathOffset.y;\n      }\n\n\n      transform[4] -= offsetX;\n      transform[5] -= offsetY;\n\n      commonAttributes = 'id=\"SVGID_' + this.id +\n                     '\" gradientUnits=\"' + gradientUnits + '\"';\n      commonAttributes += ' gradientTransform=\"' + (withViewport ?\n        options.additionalTransform + ' ' : '') + fabric.util.matrixToSVG(transform) + '\" ';\n\n      if (this.type === 'linear') {\n        markup = [\n          '<linearGradient ',\n          commonAttributes,\n          ' x1=\"', coords.x1,\n          '\" y1=\"', coords.y1,\n          '\" x2=\"', coords.x2,\n          '\" y2=\"', coords.y2,\n          '\">\\n'\n        ];\n      }\n      else if (this.type === 'radial') {\n        // svg radial gradient has just 1 radius. the biggest.\n        markup = [\n          '<radialGradient ',\n          commonAttributes,\n          ' cx=\"', needsSwap ? coords.x1 : coords.x2,\n          '\" cy=\"', needsSwap ? coords.y1 : coords.y2,\n          '\" r=\"', needsSwap ? coords.r1 : coords.r2,\n          '\" fx=\"', needsSwap ? coords.x2 : coords.x1,\n          '\" fy=\"', needsSwap ? coords.y2 : coords.y1,\n          '\">\\n'\n        ];\n      }\n\n      if (this.type === 'radial') {\n        if (needsSwap) {\n          // svg goes from internal to external radius. if radius are inverted, swap color stops.\n          colorStops = colorStops.concat();\n          colorStops.reverse();\n          for (i = 0, len = colorStops.length; i < len; i++) {\n            colorStops[i].offset = 1 - colorStops[i].offset;\n          }\n        }\n        var minRadius = Math.min(coords.r1, coords.r2);\n        if (minRadius > 0) {\n          // i have to shift all colorStops and add new one in 0.\n          var maxRadius = Math.max(coords.r1, coords.r2),\n              percentageShift = minRadius / maxRadius;\n          for (i = 0, len = colorStops.length; i < len; i++) {\n            colorStops[i].offset += percentageShift * (1 - colorStops[i].offset);\n          }\n        }\n      }\n\n      for (i = 0, len = colorStops.length; i < len; i++) {\n        var colorStop = colorStops[i];\n        markup.push(\n          '<stop ',\n          'offset=\"', (colorStop.offset * 100) + '%',\n          '\" style=\"stop-color:', colorStop.color,\n          (typeof colorStop.opacity !== 'undefined' ? ';stop-opacity: ' + colorStop.opacity : ';'),\n          '\"/>\\n'\n        );\n      }\n\n      markup.push((this.type === 'linear' ? '</linearGradient>\\n' : '</radialGradient>\\n'));\n\n      return markup.join('');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns an instance of CanvasGradient\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @return {CanvasGradient}\n     */\n    toLive: function(ctx) {\n      var gradient, coords = fabric.util.object.clone(this.coords), i, len;\n\n      if (!this.type) {\n        return;\n      }\n\n      if (this.type === 'linear') {\n        gradient = ctx.createLinearGradient(\n          coords.x1, coords.y1, coords.x2, coords.y2);\n      }\n      else if (this.type === 'radial') {\n        gradient = ctx.createRadialGradient(\n          coords.x1, coords.y1, coords.r1, coords.x2, coords.y2, coords.r2);\n      }\n\n      for (i = 0, len = this.colorStops.length; i < len; i++) {\n        var color = this.colorStops[i].color,\n            opacity = this.colorStops[i].opacity,\n            offset = this.colorStops[i].offset;\n\n        if (typeof opacity !== 'undefined') {\n          color = new fabric.Color(color).setAlpha(opacity).toRgba();\n        }\n        gradient.addColorStop(offset, color);\n      }\n\n      return gradient;\n    }\n  });\n\n  fabric.util.object.extend(fabric.Gradient, {\n\n    /* _FROM_SVG_START_ */\n    /**\n     * Returns {@link fabric.Gradient} instance from an SVG element\n     * @static\n     * @memberOf fabric.Gradient\n     * @param {SVGGradientElement} el SVG gradient element\n     * @param {fabric.Object} instance\n     * @param {String} opacityAttr A fill-opacity or stroke-opacity attribute to multiply to each stop's opacity.\n     * @param {Object} svgOptions an object containing the size of the SVG in order to parse correctly gradients\n     * that uses gradientUnits as 'userSpaceOnUse' and percentages.\n     * @param {Object.number} viewBoxWidth width part of the viewBox attribute on svg\n     * @param {Object.number} viewBoxHeight height part of the viewBox attribute on svg\n     * @param {Object.number} width width part of the svg tag if viewBox is not specified\n     * @param {Object.number} height height part of the svg tag if viewBox is not specified\n     * @return {fabric.Gradient} Gradient instance\n     * @see http://www.w3.org/TR/SVG/pservers.html#LinearGradientElement\n     * @see http://www.w3.org/TR/SVG/pservers.html#RadialGradientElement\n     */\n    fromElement: function(el, instance, opacityAttr, svgOptions) {\n      /**\n       *  @example:\n       *\n       *  <linearGradient id=\"linearGrad1\">\n       *    <stop offset=\"0%\" stop-color=\"white\"/>\n       *    <stop offset=\"100%\" stop-color=\"black\"/>\n       *  </linearGradient>\n       *\n       *  OR\n       *\n       *  <linearGradient id=\"linearGrad2\">\n       *    <stop offset=\"0\" style=\"stop-color:rgb(255,255,255)\"/>\n       *    <stop offset=\"1\" style=\"stop-color:rgb(0,0,0)\"/>\n       *  </linearGradient>\n       *\n       *  OR\n       *\n       *  <radialGradient id=\"radialGrad1\">\n       *    <stop offset=\"0%\" stop-color=\"white\" stop-opacity=\"1\" />\n       *    <stop offset=\"50%\" stop-color=\"black\" stop-opacity=\"0.5\" />\n       *    <stop offset=\"100%\" stop-color=\"white\" stop-opacity=\"1\" />\n       *  </radialGradient>\n       *\n       *  OR\n       *\n       *  <radialGradient id=\"radialGrad2\">\n       *    <stop offset=\"0\" stop-color=\"rgb(255,255,255)\" />\n       *    <stop offset=\"0.5\" stop-color=\"rgb(0,0,0)\" />\n       *    <stop offset=\"1\" stop-color=\"rgb(255,255,255)\" />\n       *  </radialGradient>\n       *\n       */\n\n      var multiplier = parseFloat(opacityAttr) / (/%$/.test(opacityAttr) ? 100 : 1);\n      multiplier = multiplier < 0 ? 0 : multiplier > 1 ? 1 : multiplier;\n      if (isNaN(multiplier)) {\n        multiplier = 1;\n      }\n\n      var colorStopEls = el.getElementsByTagName('stop'),\n          type,\n          gradientUnits = el.getAttribute('gradientUnits') === 'userSpaceOnUse' ?\n            'pixels' : 'percentage',\n          gradientTransform = el.getAttribute('gradientTransform') || '',\n          colorStops = [],\n          coords, i, offsetX = 0, offsetY = 0,\n          transformMatrix;\n      if (el.nodeName === 'linearGradient' || el.nodeName === 'LINEARGRADIENT') {\n        type = 'linear';\n        coords = getLinearCoords(el);\n      }\n      else {\n        type = 'radial';\n        coords = getRadialCoords(el);\n      }\n\n      for (i = colorStopEls.length; i--; ) {\n        colorStops.push(getColorStop(colorStopEls[i], multiplier));\n      }\n\n      transformMatrix = fabric.parseTransformAttribute(gradientTransform);\n\n      __convertPercentUnitsToValues(instance, coords, svgOptions, gradientUnits);\n\n      if (gradientUnits === 'pixels') {\n        offsetX = -instance.left;\n        offsetY = -instance.top;\n      }\n\n      var gradient = new fabric.Gradient({\n        id: el.getAttribute('id'),\n        type: type,\n        coords: coords,\n        colorStops: colorStops,\n        gradientUnits: gradientUnits,\n        gradientTransform: transformMatrix,\n        offsetX: offsetX,\n        offsetY: offsetY,\n      });\n\n      return gradient;\n    }\n    /* _FROM_SVG_END_ */\n  });\n\n  /**\n   * @private\n   */\n  function __convertPercentUnitsToValues(instance, options, svgOptions, gradientUnits) {\n    var propValue, finalValue;\n    Object.keys(options).forEach(function(prop) {\n      propValue = options[prop];\n      if (propValue === 'Infinity') {\n        finalValue = 1;\n      }\n      else if (propValue === '-Infinity') {\n        finalValue = 0;\n      }\n      else {\n        finalValue = parseFloat(options[prop], 10);\n        if (typeof propValue === 'string' && /^(\\d+\\.\\d+)%|(\\d+)%$/.test(propValue)) {\n          finalValue *= 0.01;\n          if (gradientUnits === 'pixels') {\n            // then we need to fix those percentages here in svg parsing\n            if (prop === 'x1' || prop === 'x2' || prop === 'r2') {\n              finalValue *= svgOptions.viewBoxWidth || svgOptions.width;\n            }\n            if (prop === 'y1' || prop === 'y2') {\n              finalValue *= svgOptions.viewBoxHeight || svgOptions.height;\n            }\n          }\n        }\n      }\n      options[prop] = finalValue;\n    });\n  }\n})();\n\n\n(function() {\n\n  'use strict';\n\n  var toFixed = fabric.util.toFixed;\n\n  /**\n   * Pattern class\n   * @class fabric.Pattern\n   * @see {@link http://fabricjs.com/patterns|Pattern demo}\n   * @see {@link http://fabricjs.com/dynamic-patterns|DynamicPattern demo}\n   * @see {@link fabric.Pattern#initialize} for constructor definition\n   */\n\n\n  fabric.Pattern = fabric.util.createClass(/** @lends fabric.Pattern.prototype */ {\n\n    /**\n     * Repeat property of a pattern (one of repeat, repeat-x, repeat-y or no-repeat)\n     * @type String\n     * @default\n     */\n    repeat: 'repeat',\n\n    /**\n     * Pattern horizontal offset from object's left/top corner\n     * @type Number\n     * @default\n     */\n    offsetX: 0,\n\n    /**\n     * Pattern vertical offset from object's left/top corner\n     * @type Number\n     * @default\n     */\n    offsetY: 0,\n\n    /**\n     * crossOrigin value (one of \"\", \"anonymous\", \"use-credentials\")\n     * @see https://developer.mozilla.org/en-US/docs/HTML/CORS_settings_attributes\n     * @type String\n     * @default\n     */\n    crossOrigin: '',\n\n    /**\n     * transform matrix to change the pattern, imported from svgs.\n     * @type Array\n     * @default\n     */\n    patternTransform: null,\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     * @param {Function} [callback] function to invoke after callback init.\n     * @return {fabric.Pattern} thisArg\n     */\n    initialize: function(options, callback) {\n      options || (options = { });\n\n      this.id = fabric.Object.__uid++;\n      this.setOptions(options);\n      if (!options.source || (options.source && typeof options.source !== 'string')) {\n        callback && callback(this);\n        return;\n      }\n      else {\n        // img src string\n        var _this = this;\n        this.source = fabric.util.createImage();\n        fabric.util.loadImage(options.source, function(img, isError) {\n          _this.source = img;\n          callback && callback(_this, isError);\n        }, null, this.crossOrigin);\n      }\n    },\n\n    /**\n     * Returns object representation of a pattern\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of a pattern instance\n     */\n    toObject: function(propertiesToInclude) {\n      var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS,\n          source, object;\n\n      // <img> element\n      if (typeof this.source.src === 'string') {\n        source = this.source.src;\n      }\n      // <canvas> element\n      else if (typeof this.source === 'object' && this.source.toDataURL) {\n        source = this.source.toDataURL();\n      }\n\n      object = {\n        type: 'pattern',\n        source: source,\n        repeat: this.repeat,\n        crossOrigin: this.crossOrigin,\n        offsetX: toFixed(this.offsetX, NUM_FRACTION_DIGITS),\n        offsetY: toFixed(this.offsetY, NUM_FRACTION_DIGITS),\n        patternTransform: this.patternTransform ? this.patternTransform.concat() : null\n      };\n      fabric.util.populateWithProperties(this, object, propertiesToInclude);\n\n      return object;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of a pattern\n     * @param {fabric.Object} object\n     * @return {String} SVG representation of a pattern\n     */\n    toSVG: function(object) {\n      var patternSource = typeof this.source === 'function' ? this.source() : this.source,\n          patternWidth = patternSource.width / object.width,\n          patternHeight = patternSource.height / object.height,\n          patternOffsetX = this.offsetX / object.width,\n          patternOffsetY = this.offsetY / object.height,\n          patternImgSrc = '';\n      if (this.repeat === 'repeat-x' || this.repeat === 'no-repeat') {\n        patternHeight = 1;\n        if (patternOffsetY) {\n          patternHeight += Math.abs(patternOffsetY);\n        }\n      }\n      if (this.repeat === 'repeat-y' || this.repeat === 'no-repeat') {\n        patternWidth = 1;\n        if (patternOffsetX) {\n          patternWidth += Math.abs(patternOffsetX);\n        }\n\n      }\n      if (patternSource.src) {\n        patternImgSrc = patternSource.src;\n      }\n      else if (patternSource.toDataURL) {\n        patternImgSrc = patternSource.toDataURL();\n      }\n\n      return '<pattern id=\"SVGID_' + this.id +\n                    '\" x=\"' + patternOffsetX +\n                    '\" y=\"' + patternOffsetY +\n                    '\" width=\"' + patternWidth +\n                    '\" height=\"' + patternHeight + '\">\\n' +\n               '<image x=\"0\" y=\"0\"' +\n                      ' width=\"' + patternSource.width +\n                      '\" height=\"' + patternSource.height +\n                      '\" xlink:href=\"' + patternImgSrc +\n               '\"></image>\\n' +\n             '</pattern>\\n';\n    },\n    /* _TO_SVG_END_ */\n\n    setOptions: function(options) {\n      for (var prop in options) {\n        this[prop] = options[prop];\n      }\n    },\n\n    /**\n     * Returns an instance of CanvasPattern\n     * @param {CanvasRenderingContext2D} ctx Context to create pattern\n     * @return {CanvasPattern}\n     */\n    toLive: function(ctx) {\n      var source = this.source;\n      // if the image failed to load, return, and allow rest to continue loading\n      if (!source) {\n        return '';\n      }\n\n      // if an image\n      if (typeof source.src !== 'undefined') {\n        if (!source.complete) {\n          return '';\n        }\n        if (source.naturalWidth === 0 || source.naturalHeight === 0) {\n          return '';\n        }\n      }\n      return ctx.createPattern(source, this.repeat);\n    }\n  });\n})();\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      toFixed = fabric.util.toFixed;\n\n  if (fabric.Shadow) {\n    fabric.warn('fabric.Shadow is already defined.');\n    return;\n  }\n\n  /**\n   * Shadow class\n   * @class fabric.Shadow\n   * @see {@link http://fabricjs.com/shadows|Shadow demo}\n   * @see {@link fabric.Shadow#initialize} for constructor definition\n   */\n  fabric.Shadow = fabric.util.createClass(/** @lends fabric.Shadow.prototype */ {\n\n    /**\n     * Shadow color\n     * @type String\n     * @default\n     */\n    color: 'rgb(0,0,0)',\n\n    /**\n     * Shadow blur\n     * @type Number\n     */\n    blur: 0,\n\n    /**\n     * Shadow horizontal offset\n     * @type Number\n     * @default\n     */\n    offsetX: 0,\n\n    /**\n     * Shadow vertical offset\n     * @type Number\n     * @default\n     */\n    offsetY: 0,\n\n    /**\n     * Whether the shadow should affect stroke operations\n     * @type Boolean\n     * @default\n     */\n    affectStroke: false,\n\n    /**\n     * Indicates whether toObject should include default values\n     * @type Boolean\n     * @default\n     */\n    includeDefaultValues: true,\n\n    /**\n     * When `false`, the shadow will scale with the object.\n     * When `true`, the shadow's offsetX, offsetY, and blur will not be affected by the object's scale.\n     * default to false\n     * @type Boolean\n     * @default\n     */\n    nonScaling: false,\n\n    /**\n     * Constructor\n     * @param {Object|String} [options] Options object with any of color, blur, offsetX, offsetY properties or string (e.g. \"rgba(0,0,0,0.2) 2px 2px 10px\")\n     * @return {fabric.Shadow} thisArg\n     */\n    initialize: function(options) {\n\n      if (typeof options === 'string') {\n        options = this._parseShadow(options);\n      }\n\n      for (var prop in options) {\n        this[prop] = options[prop];\n      }\n\n      this.id = fabric.Object.__uid++;\n    },\n\n    /**\n     * @private\n     * @param {String} shadow Shadow value to parse\n     * @return {Object} Shadow object with color, offsetX, offsetY and blur\n     */\n    _parseShadow: function(shadow) {\n      var shadowStr = shadow.trim(),\n          offsetsAndBlur = fabric.Shadow.reOffsetsAndBlur.exec(shadowStr) || [],\n          color = shadowStr.replace(fabric.Shadow.reOffsetsAndBlur, '') || 'rgb(0,0,0)';\n\n      return {\n        color: color.trim(),\n        offsetX: parseInt(offsetsAndBlur[1], 10) || 0,\n        offsetY: parseInt(offsetsAndBlur[2], 10) || 0,\n        blur: parseInt(offsetsAndBlur[3], 10) || 0\n      };\n    },\n\n    /**\n     * Returns a string representation of an instance\n     * @see http://www.w3.org/TR/css-text-decor-3/#text-shadow\n     * @return {String} Returns CSS3 text-shadow declaration\n     */\n    toString: function() {\n      return [this.offsetX, this.offsetY, this.blur, this.color].join('px ');\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns SVG representation of a shadow\n     * @param {fabric.Object} object\n     * @return {String} SVG representation of a shadow\n     */\n    toSVG: function(object) {\n      var fBoxX = 40, fBoxY = 40, NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS,\n          offset = fabric.util.rotateVector(\n            { x: this.offsetX, y: this.offsetY },\n            fabric.util.degreesToRadians(-object.angle)),\n          BLUR_BOX = 20, color = new fabric.Color(this.color);\n\n      if (object.width && object.height) {\n        //http://www.w3.org/TR/SVG/filters.html#FilterEffectsRegion\n        // we add some extra space to filter box to contain the blur ( 20 )\n        fBoxX = toFixed((Math.abs(offset.x) + this.blur) / object.width, NUM_FRACTION_DIGITS) * 100 + BLUR_BOX;\n        fBoxY = toFixed((Math.abs(offset.y) + this.blur) / object.height, NUM_FRACTION_DIGITS) * 100 + BLUR_BOX;\n      }\n      if (object.flipX) {\n        offset.x *= -1;\n      }\n      if (object.flipY) {\n        offset.y *= -1;\n      }\n\n      return (\n        '<filter id=\"SVGID_' + this.id + '\" y=\"-' + fBoxY + '%\" height=\"' + (100 + 2 * fBoxY) + '%\" ' +\n          'x=\"-' + fBoxX + '%\" width=\"' + (100 + 2 * fBoxX) + '%\" ' + '>\\n' +\n          '\\t<feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"' +\n            toFixed(this.blur ? this.blur / 2 : 0, NUM_FRACTION_DIGITS) + '\"></feGaussianBlur>\\n' +\n          '\\t<feOffset dx=\"' + toFixed(offset.x, NUM_FRACTION_DIGITS) +\n          '\" dy=\"' + toFixed(offset.y, NUM_FRACTION_DIGITS) + '\" result=\"oBlur\" ></feOffset>\\n' +\n          '\\t<feFlood flood-color=\"' + color.toRgb() + '\" flood-opacity=\"' + color.getAlpha() + '\"/>\\n' +\n          '\\t<feComposite in2=\"oBlur\" operator=\"in\" />\\n' +\n          '\\t<feMerge>\\n' +\n            '\\t\\t<feMergeNode></feMergeNode>\\n' +\n            '\\t\\t<feMergeNode in=\"SourceGraphic\"></feMergeNode>\\n' +\n          '\\t</feMerge>\\n' +\n        '</filter>\\n');\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns object representation of a shadow\n     * @return {Object} Object representation of a shadow instance\n     */\n    toObject: function() {\n      if (this.includeDefaultValues) {\n        return {\n          color: this.color,\n          blur: this.blur,\n          offsetX: this.offsetX,\n          offsetY: this.offsetY,\n          affectStroke: this.affectStroke,\n          nonScaling: this.nonScaling\n        };\n      }\n      var obj = { }, proto = fabric.Shadow.prototype;\n\n      ['color', 'blur', 'offsetX', 'offsetY', 'affectStroke', 'nonScaling'].forEach(function(prop) {\n        if (this[prop] !== proto[prop]) {\n          obj[prop] = this[prop];\n        }\n      }, this);\n\n      return obj;\n    }\n  });\n\n  /**\n   * Regex matching shadow offsetX, offsetY and blur (ex: \"2px 2px 10px rgba(0,0,0,0.2)\", \"rgb(0,255,0) 2px 2px\")\n   * @static\n   * @field\n   * @memberOf fabric.Shadow\n   */\n  // eslint-disable-next-line max-len\n  fabric.Shadow.reOffsetsAndBlur = /(?:\\s|^)(-?\\d+(?:px)?(?:\\s?|$))?(-?\\d+(?:px)?(?:\\s?|$))?(\\d+(?:px)?)?(?:\\s?|$)(?:$|\\s)/;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function () {\n\n  'use strict';\n\n  if (fabric.StaticCanvas) {\n    fabric.warn('fabric.StaticCanvas is already defined.');\n    return;\n  }\n\n  // aliases for faster resolution\n  var extend = fabric.util.object.extend,\n      getElementOffset = fabric.util.getElementOffset,\n      removeFromArray = fabric.util.removeFromArray,\n      toFixed = fabric.util.toFixed,\n      transformPoint = fabric.util.transformPoint,\n      invertTransform = fabric.util.invertTransform,\n      getNodeCanvas = fabric.util.getNodeCanvas,\n      createCanvasElement = fabric.util.createCanvasElement,\n\n      CANVAS_INIT_ERROR = new Error('Could not initialize `canvas` element');\n\n  /**\n   * Static canvas class\n   * @class fabric.StaticCanvas\n   * @mixes fabric.Collection\n   * @mixes fabric.Observable\n   * @see {@link http://fabricjs.com/static_canvas|StaticCanvas demo}\n   * @see {@link fabric.StaticCanvas#initialize} for constructor definition\n   * @fires before:render\n   * @fires after:render\n   * @fires canvas:cleared\n   * @fires object:added\n   * @fires object:removed\n   */\n  fabric.StaticCanvas = fabric.util.createClass(fabric.CommonMethods, /** @lends fabric.StaticCanvas.prototype */ {\n\n    /**\n     * Constructor\n     * @param {HTMLElement | String} el &lt;canvas> element to initialize instance on\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(el, options) {\n      options || (options = { });\n      this.renderAndResetBound = this.renderAndReset.bind(this);\n      this.requestRenderAllBound = this.requestRenderAll.bind(this);\n      this._initStatic(el, options);\n    },\n\n    /**\n     * Background color of canvas instance.\n     * Should be set via {@link fabric.StaticCanvas#setBackgroundColor}.\n     * @type {(String|fabric.Pattern)}\n     * @default\n     */\n    backgroundColor: '',\n\n    /**\n     * Background image of canvas instance.\n     * since 2.4.0 image caching is active, please when putting an image as background, add to the\n     * canvas property a reference to the canvas it is on. Otherwise the image cannot detect the zoom\n     * vale. As an alternative you can disable image objectCaching\n     * @type fabric.Image\n     * @default\n     */\n    backgroundImage: null,\n\n    /**\n     * Overlay color of canvas instance.\n     * Should be set via {@link fabric.StaticCanvas#setOverlayColor}\n     * @since 1.3.9\n     * @type {(String|fabric.Pattern)}\n     * @default\n     */\n    overlayColor: '',\n\n    /**\n     * Overlay image of canvas instance.\n     * since 2.4.0 image caching is active, please when putting an image as overlay, add to the\n     * canvas property a reference to the canvas it is on. Otherwise the image cannot detect the zoom\n     * vale. As an alternative you can disable image objectCaching\n     * @type fabric.Image\n     * @default\n     */\n    overlayImage: null,\n\n    /**\n     * Indicates whether toObject/toDatalessObject should include default values\n     * if set to false, takes precedence over the object value.\n     * @type Boolean\n     * @default\n     */\n    includeDefaultValues: true,\n\n    /**\n     * Indicates whether objects' state should be saved\n     * @type Boolean\n     * @default\n     */\n    stateful: false,\n\n    /**\n     * Indicates whether {@link fabric.Collection.add}, {@link fabric.Collection.insertAt} and {@link fabric.Collection.remove},\n     * {@link fabric.StaticCanvas.moveTo}, {@link fabric.StaticCanvas.clear} and many more, should also re-render canvas.\n     * Disabling this option will not give a performance boost when adding/removing a lot of objects to/from canvas at once\n     * since the renders are quequed and executed one per frame.\n     * Disabling is suggested anyway and managing the renders of the app manually is not a big effort ( canvas.requestRenderAll() )\n     * Left default to true to do not break documentation and old app, fiddles.\n     * @type Boolean\n     * @default\n     */\n    renderOnAddRemove: true,\n\n    /**\n     * Indicates whether object controls (borders/controls) are rendered above overlay image\n     * @type Boolean\n     * @default\n     */\n    controlsAboveOverlay: false,\n\n    /**\n     * Indicates whether the browser can be scrolled when using a touchscreen and dragging on the canvas\n     * @type Boolean\n     * @default\n     */\n    allowTouchScrolling: false,\n\n    /**\n     * Indicates whether this canvas will use image smoothing, this is on by default in browsers\n     * @type Boolean\n     * @default\n     */\n    imageSmoothingEnabled: true,\n\n    /**\n     * The transformation (in the format of Canvas transform) which focuses the viewport\n     * @type Array\n     * @default\n     */\n    viewportTransform: fabric.iMatrix.concat(),\n\n    /**\n     * if set to false background image is not affected by viewport transform\n     * @since 1.6.3\n     * @type Boolean\n     * @default\n     */\n    backgroundVpt: true,\n\n    /**\n     * if set to false overlya image is not affected by viewport transform\n     * @since 1.6.3\n     * @type Boolean\n     * @default\n     */\n    overlayVpt: true,\n\n    /**\n     * When true, canvas is scaled by devicePixelRatio for better rendering on retina screens\n     * @type Boolean\n     * @default\n     */\n    enableRetinaScaling: true,\n\n    /**\n     * Describe canvas element extension over design\n     * properties are tl,tr,bl,br.\n     * if canvas is not zoomed/panned those points are the four corner of canvas\n     * if canvas is viewportTransformed you those points indicate the extension\n     * of canvas element in plain untrasformed coordinates\n     * The coordinates get updated with @method calcViewportBoundaries.\n     * @memberOf fabric.StaticCanvas.prototype\n     */\n    vptCoords: { },\n\n    /**\n     * Based on vptCoords and object.aCoords, skip rendering of objects that\n     * are not included in current viewport.\n     * May greatly help in applications with crowded canvas and use of zoom/pan\n     * If One of the corner of the bounding box of the object is on the canvas\n     * the objects get rendered.\n     * @memberOf fabric.StaticCanvas.prototype\n     * @type Boolean\n     * @default\n     */\n    skipOffscreen: true,\n\n    /**\n     * a fabricObject that, without stroke define a clipping area with their shape. filled in black\n     * the clipPath object gets used when the canvas has rendered, and the context is placed in the\n     * top left corner of the canvas.\n     * clipPath will clip away controls, if you do not want this to happen use controlsAboveOverlay = true\n     * @type fabric.Object\n     */\n    clipPath: undefined,\n\n    /**\n     * @private\n     * @param {HTMLElement | String} el &lt;canvas> element to initialize instance on\n     * @param {Object} [options] Options object\n     */\n    _initStatic: function(el, options) {\n      var cb = this.requestRenderAllBound;\n      this._objects = [];\n      this._createLowerCanvas(el);\n      this._initOptions(options);\n      // only initialize retina scaling once\n      if (!this.interactive) {\n        this._initRetinaScaling();\n      }\n\n      if (options.overlayImage) {\n        this.setOverlayImage(options.overlayImage, cb);\n      }\n      if (options.backgroundImage) {\n        this.setBackgroundImage(options.backgroundImage, cb);\n      }\n      if (options.backgroundColor) {\n        this.setBackgroundColor(options.backgroundColor, cb);\n      }\n      if (options.overlayColor) {\n        this.setOverlayColor(options.overlayColor, cb);\n      }\n      this.calcOffset();\n    },\n\n    /**\n     * @private\n     */\n    _isRetinaScaling: function() {\n      return (fabric.devicePixelRatio !== 1 && this.enableRetinaScaling);\n    },\n\n    /**\n     * @private\n     * @return {Number} retinaScaling if applied, otherwise 1;\n     */\n    getRetinaScaling: function() {\n      return this._isRetinaScaling() ? fabric.devicePixelRatio : 1;\n    },\n\n    /**\n     * @private\n     */\n    _initRetinaScaling: function() {\n      if (!this._isRetinaScaling()) {\n        return;\n      }\n      var scaleRatio = fabric.devicePixelRatio;\n      this.__initRetinaScaling(scaleRatio, this.lowerCanvasEl, this.contextContainer);\n      if (this.upperCanvasEl) {\n        this.__initRetinaScaling(scaleRatio, this.upperCanvasEl, this.contextTop);\n      }\n    },\n\n    __initRetinaScaling: function(scaleRatio, canvas, context) {\n      canvas.setAttribute('width', this.width * scaleRatio);\n      canvas.setAttribute('height', this.height * scaleRatio);\n      context.scale(scaleRatio, scaleRatio);\n    },\n\n\n    /**\n     * Calculates canvas element offset relative to the document\n     * This method is also attached as \"resize\" event handler of window\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    calcOffset: function () {\n      this._offset = getElementOffset(this.lowerCanvasEl);\n      return this;\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#overlayImage|overlay image} for this canvas\n     * @param {(fabric.Image|String)} image fabric.Image instance or URL of an image to set overlay to\n     * @param {Function} callback callback to invoke when image is loaded and set as an overlay\n     * @param {Object} [options] Optional options to set for the {@link fabric.Image|overlay image}.\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/MnzHT/|jsFiddle demo}\n     * @example <caption>Normal overlayImage with left/top = 0</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   // Needed to position overlayImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>overlayImage with different properties</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>Stretched overlayImage #1 - width/height correspond to canvas width/height</caption>\n     * fabric.Image.fromURL('http://fabricjs.com/assets/jail_cell_bars.png', function(img, isError) {\n     *    img.set({width: canvas.width, height: canvas.height, originX: 'left', originY: 'top'});\n     *    canvas.setOverlayImage(img, canvas.renderAll.bind(canvas));\n     * });\n     * @example <caption>Stretched overlayImage #2 - width/height correspond to canvas width/height</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   width: canvas.width,\n     *   height: canvas.height,\n     *   // Needed to position overlayImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>overlayImage loaded from cross-origin</caption>\n     * canvas.setOverlayImage('http://fabricjs.com/assets/jail_cell_bars.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top',\n     *   crossOrigin: 'anonymous'\n     * });\n     */\n    setOverlayImage: function (image, callback, options) {\n      return this.__setBgOverlayImage('overlayImage', image, callback, options);\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#backgroundImage|background image} for this canvas\n     * @param {(fabric.Image|String)} image fabric.Image instance or URL of an image to set background to\n     * @param {Function} callback Callback to invoke when image is loaded and set as background\n     * @param {Object} [options] Optional options to set for the {@link fabric.Image|background image}.\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/djnr8o7a/28/|jsFiddle demo}\n     * @example <caption>Normal backgroundImage with left/top = 0</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   // Needed to position backgroundImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>backgroundImage with different properties</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>Stretched backgroundImage #1 - width/height correspond to canvas width/height</caption>\n     * fabric.Image.fromURL('http://fabricjs.com/assets/honey_im_subtle.png', function(img, isError) {\n     *    img.set({width: canvas.width, height: canvas.height, originX: 'left', originY: 'top'});\n     *    canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas));\n     * });\n     * @example <caption>Stretched backgroundImage #2 - width/height correspond to canvas width/height</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   width: canvas.width,\n     *   height: canvas.height,\n     *   // Needed to position backgroundImage at 0/0\n     *   originX: 'left',\n     *   originY: 'top'\n     * });\n     * @example <caption>backgroundImage loaded from cross-origin</caption>\n     * canvas.setBackgroundImage('http://fabricjs.com/assets/honey_im_subtle.png', canvas.renderAll.bind(canvas), {\n     *   opacity: 0.5,\n     *   angle: 45,\n     *   left: 400,\n     *   top: 400,\n     *   originX: 'left',\n     *   originY: 'top',\n     *   crossOrigin: 'anonymous'\n     * });\n     */\n    // TODO: fix stretched examples\n    setBackgroundImage: function (image, callback, options) {\n      return this.__setBgOverlayImage('backgroundImage', image, callback, options);\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#overlayColor|foreground color} for this canvas\n     * @param {(String|fabric.Pattern)} overlayColor Color or pattern to set foreground color to\n     * @param {Function} callback Callback to invoke when foreground color is set\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/pB55h/|jsFiddle demo}\n     * @example <caption>Normal overlayColor - color value</caption>\n     * canvas.setOverlayColor('rgba(255, 73, 64, 0.6)', canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as overlayColor</caption>\n     * canvas.setOverlayColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png'\n     * }, canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as overlayColor with repeat and offset</caption>\n     * canvas.setOverlayColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png',\n     *   repeat: 'repeat',\n     *   offsetX: 200,\n     *   offsetY: 100\n     * }, canvas.renderAll.bind(canvas));\n     */\n    setOverlayColor: function(overlayColor, callback) {\n      return this.__setBgOverlayColor('overlayColor', overlayColor, callback);\n    },\n\n    /**\n     * Sets {@link fabric.StaticCanvas#backgroundColor|background color} for this canvas\n     * @param {(String|fabric.Pattern)} backgroundColor Color or pattern to set background color to\n     * @param {Function} callback Callback to invoke when background color is set\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     * @see {@link http://jsfiddle.net/fabricjs/hXzvk/|jsFiddle demo}\n     * @example <caption>Normal backgroundColor - color value</caption>\n     * canvas.setBackgroundColor('rgba(255, 73, 64, 0.6)', canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as backgroundColor</caption>\n     * canvas.setBackgroundColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png'\n     * }, canvas.renderAll.bind(canvas));\n     * @example <caption>fabric.Pattern used as backgroundColor with repeat and offset</caption>\n     * canvas.setBackgroundColor({\n     *   source: 'http://fabricjs.com/assets/escheresque_ste.png',\n     *   repeat: 'repeat',\n     *   offsetX: 200,\n     *   offsetY: 100\n     * }, canvas.renderAll.bind(canvas));\n     */\n    setBackgroundColor: function(backgroundColor, callback) {\n      return this.__setBgOverlayColor('backgroundColor', backgroundColor, callback);\n    },\n\n    /**\n     * @private\n     * @param {String} property Property to set ({@link fabric.StaticCanvas#backgroundImage|backgroundImage}\n     * or {@link fabric.StaticCanvas#overlayImage|overlayImage})\n     * @param {(fabric.Image|String|null)} image fabric.Image instance, URL of an image or null to set background or overlay to\n     * @param {Function} callback Callback to invoke when image is loaded and set as background or overlay. The first argument is the created image, the second argument is a flag indicating whether an error occurred or not.\n     * @param {Object} [options] Optional options to set for the {@link fabric.Image|image}.\n     */\n    __setBgOverlayImage: function(property, image, callback, options) {\n      if (typeof image === 'string') {\n        fabric.util.loadImage(image, function(img, isError) {\n          if (img) {\n            var instance = new fabric.Image(img, options);\n            this[property] = instance;\n            instance.canvas = this;\n          }\n          callback && callback(img, isError);\n        }, this, options && options.crossOrigin);\n      }\n      else {\n        options && image.setOptions(options);\n        this[property] = image;\n        image && (image.canvas = this);\n        callback && callback(image, false);\n      }\n\n      return this;\n    },\n\n    /**\n     * @private\n     * @param {String} property Property to set ({@link fabric.StaticCanvas#backgroundColor|backgroundColor}\n     * or {@link fabric.StaticCanvas#overlayColor|overlayColor})\n     * @param {(Object|String|null)} color Object with pattern information, color value or null\n     * @param {Function} [callback] Callback is invoked when color is set\n     */\n    __setBgOverlayColor: function(property, color, callback) {\n      this[property] = color;\n      this._initGradient(color, property);\n      this._initPattern(color, property, callback);\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _createCanvasElement: function() {\n      var element = createCanvasElement();\n      if (!element) {\n        throw CANVAS_INIT_ERROR;\n      }\n      if (!element.style) {\n        element.style = { };\n      }\n      if (typeof element.getContext === 'undefined') {\n        throw CANVAS_INIT_ERROR;\n      }\n      return element;\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options object\n     */\n    _initOptions: function (options) {\n      var lowerCanvasEl = this.lowerCanvasEl;\n      this._setOptions(options);\n\n      this.width = this.width || parseInt(lowerCanvasEl.width, 10) || 0;\n      this.height = this.height || parseInt(lowerCanvasEl.height, 10) || 0;\n\n      if (!this.lowerCanvasEl.style) {\n        return;\n      }\n\n      lowerCanvasEl.width = this.width;\n      lowerCanvasEl.height = this.height;\n\n      lowerCanvasEl.style.width = this.width + 'px';\n      lowerCanvasEl.style.height = this.height + 'px';\n\n      this.viewportTransform = this.viewportTransform.slice();\n    },\n\n    /**\n     * Creates a bottom canvas\n     * @private\n     * @param {HTMLElement} [canvasEl]\n     */\n    _createLowerCanvas: function (canvasEl) {\n      // canvasEl === 'HTMLCanvasElement' does not work on jsdom/node\n      if (canvasEl && canvasEl.getContext) {\n        this.lowerCanvasEl = canvasEl;\n      }\n      else {\n        this.lowerCanvasEl = fabric.util.getById(canvasEl) || this._createCanvasElement();\n      }\n\n      fabric.util.addClass(this.lowerCanvasEl, 'lower-canvas');\n\n      if (this.interactive) {\n        this._applyCanvasStyle(this.lowerCanvasEl);\n      }\n\n      this.contextContainer = this.lowerCanvasEl.getContext('2d');\n    },\n\n    /**\n     * Returns canvas width (in px)\n     * @return {Number}\n     */\n    getWidth: function () {\n      return this.width;\n    },\n\n    /**\n     * Returns canvas height (in px)\n     * @return {Number}\n     */\n    getHeight: function () {\n      return this.height;\n    },\n\n    /**\n     * Sets width of this canvas instance\n     * @param {Number|String} value                         Value to set width to\n     * @param {Object}        [options]                     Options object\n     * @param {Boolean}       [options.backstoreOnly=false] Set the given dimensions only as canvas backstore dimensions\n     * @param {Boolean}       [options.cssOnly=false]       Set the given dimensions only as css dimensions\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setWidth: function (value, options) {\n      return this.setDimensions({ width: value }, options);\n    },\n\n    /**\n     * Sets height of this canvas instance\n     * @param {Number|String} value                         Value to set height to\n     * @param {Object}        [options]                     Options object\n     * @param {Boolean}       [options.backstoreOnly=false] Set the given dimensions only as canvas backstore dimensions\n     * @param {Boolean}       [options.cssOnly=false]       Set the given dimensions only as css dimensions\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setHeight: function (value, options) {\n      return this.setDimensions({ height: value }, options);\n    },\n\n    /**\n     * Sets dimensions (width, height) of this canvas instance. when options.cssOnly flag active you should also supply the unit of measure (px/%/em)\n     * @param {Object}        dimensions                    Object with width/height properties\n     * @param {Number|String} [dimensions.width]            Width of canvas element\n     * @param {Number|String} [dimensions.height]           Height of canvas element\n     * @param {Object}        [options]                     Options object\n     * @param {Boolean}       [options.backstoreOnly=false] Set the given dimensions only as canvas backstore dimensions\n     * @param {Boolean}       [options.cssOnly=false]       Set the given dimensions only as css dimensions\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    setDimensions: function (dimensions, options) {\n      var cssValue;\n\n      options = options || {};\n\n      for (var prop in dimensions) {\n        cssValue = dimensions[prop];\n\n        if (!options.cssOnly) {\n          this._setBackstoreDimension(prop, dimensions[prop]);\n          cssValue += 'px';\n          this.hasLostContext = true;\n        }\n\n        if (!options.backstoreOnly) {\n          this._setCssDimension(prop, cssValue);\n        }\n      }\n      if (this._isCurrentlyDrawing) {\n        this.freeDrawingBrush && this.freeDrawingBrush._setBrushStyles();\n      }\n      this._initRetinaScaling();\n      this.calcOffset();\n\n      if (!options.cssOnly) {\n        this.requestRenderAll();\n      }\n\n      return this;\n    },\n\n    /**\n     * Helper for setting width/height\n     * @private\n     * @param {String} prop property (width|height)\n     * @param {Number} value value to set property to\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    _setBackstoreDimension: function (prop, value) {\n      this.lowerCanvasEl[prop] = value;\n\n      if (this.upperCanvasEl) {\n        this.upperCanvasEl[prop] = value;\n      }\n\n      if (this.cacheCanvasEl) {\n        this.cacheCanvasEl[prop] = value;\n      }\n\n      this[prop] = value;\n\n      return this;\n    },\n\n    /**\n     * Helper for setting css width/height\n     * @private\n     * @param {String} prop property (width|height)\n     * @param {String} value value to set property to\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    _setCssDimension: function (prop, value) {\n      this.lowerCanvasEl.style[prop] = value;\n\n      if (this.upperCanvasEl) {\n        this.upperCanvasEl.style[prop] = value;\n      }\n\n      if (this.wrapperEl) {\n        this.wrapperEl.style[prop] = value;\n      }\n\n      return this;\n    },\n\n    /**\n     * Returns canvas zoom level\n     * @return {Number}\n     */\n    getZoom: function () {\n      return this.viewportTransform[0];\n    },\n\n    /**\n     * Sets viewport transform of this canvas instance\n     * @param {Array} vpt the transform in the form of context.transform\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setViewportTransform: function (vpt) {\n      var activeObject = this._activeObject,\n          backgroundObject = this.backgroundImage,\n          overlayObject = this.overlayImage,\n          object, i, len;\n      this.viewportTransform = vpt;\n      for (i = 0, len = this._objects.length; i < len; i++) {\n        object = this._objects[i];\n        object.group || object.setCoords(true);\n      }\n      if (activeObject) {\n        activeObject.setCoords();\n      }\n      if (backgroundObject) {\n        backgroundObject.setCoords(true);\n      }\n      if (overlayObject) {\n        overlayObject.setCoords(true);\n      }\n      this.calcViewportBoundaries();\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Sets zoom level of this canvas instance, the zoom centered around point\n     * meaning that following zoom to point with the same point will have the visual\n     * effect of the zoom originating from that point. The point won't move.\n     * It has nothing to do with canvas center or visual center of the viewport.\n     * @param {fabric.Point} point to zoom with respect to\n     * @param {Number} value to set zoom to, less than 1 zooms out\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    zoomToPoint: function (point, value) {\n      // TODO: just change the scale, preserve other transformations\n      var before = point, vpt = this.viewportTransform.slice(0);\n      point = transformPoint(point, invertTransform(this.viewportTransform));\n      vpt[0] = value;\n      vpt[3] = value;\n      var after = transformPoint(point, vpt);\n      vpt[4] += before.x - after.x;\n      vpt[5] += before.y - after.y;\n      return this.setViewportTransform(vpt);\n    },\n\n    /**\n     * Sets zoom level of this canvas instance\n     * @param {Number} value to set zoom to, less than 1 zooms out\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    setZoom: function (value) {\n      this.zoomToPoint(new fabric.Point(0, 0), value);\n      return this;\n    },\n\n    /**\n     * Pan viewport so as to place point at top left corner of canvas\n     * @param {fabric.Point} point to move to\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    absolutePan: function (point) {\n      var vpt = this.viewportTransform.slice(0);\n      vpt[4] = -point.x;\n      vpt[5] = -point.y;\n      return this.setViewportTransform(vpt);\n    },\n\n    /**\n     * Pans viewpoint relatively\n     * @param {fabric.Point} point (position vector) to move by\n     * @return {fabric.Canvas} instance\n     * @chainable true\n     */\n    relativePan: function (point) {\n      return this.absolutePan(new fabric.Point(\n        -point.x - this.viewportTransform[4],\n        -point.y - this.viewportTransform[5]\n      ));\n    },\n\n    /**\n     * Returns &lt;canvas> element corresponding to this instance\n     * @return {HTMLCanvasElement}\n     */\n    getElement: function () {\n      return this.lowerCanvasEl;\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} obj Object that was added\n     */\n    _onObjectAdded: function(obj) {\n      this.stateful && obj.setupState();\n      obj._set('canvas', this);\n      obj.setCoords();\n      this.fire('object:added', { target: obj });\n      obj.fire('added');\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} obj Object that was removed\n     */\n    _onObjectRemoved: function(obj) {\n      this.fire('object:removed', { target: obj });\n      obj.fire('removed');\n      delete obj.canvas;\n    },\n\n    /**\n     * Clears specified context of canvas element\n     * @param {CanvasRenderingContext2D} ctx Context to clear\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    clearContext: function(ctx) {\n      ctx.clearRect(0, 0, this.width, this.height);\n      return this;\n    },\n\n    /**\n     * Returns context of canvas where objects are drawn\n     * @return {CanvasRenderingContext2D}\n     */\n    getContext: function () {\n      return this.contextContainer;\n    },\n\n    /**\n     * Clears all contexts (background, main, top) of an instance\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    clear: function () {\n      this._objects.length = 0;\n      this.backgroundImage = null;\n      this.overlayImage = null;\n      this.backgroundColor = '';\n      this.overlayColor = '';\n      if (this._hasITextHandlers) {\n        this.off('mouse:up', this._mouseUpITextHandler);\n        this._iTextInstances = null;\n        this._hasITextHandlers = false;\n      }\n      this.clearContext(this.contextContainer);\n      this.fire('canvas:cleared');\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Renders the canvas\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderAll: function () {\n      var canvasToDrawOn = this.contextContainer;\n      this.renderCanvas(canvasToDrawOn, this._objects);\n      return this;\n    },\n\n    /**\n     * Function created to be instance bound at initialization\n     * used in requestAnimationFrame rendering\n     * Let the fabricJS call it. If you call it manually you could have more\n     * animationFrame stacking on to of each other\n     * for an imperative rendering, use canvas.renderAll\n     * @private\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderAndReset: function() {\n      this.isRendering = 0;\n      this.renderAll();\n    },\n\n    /**\n     * Append a renderAll request to next animation frame.\n     * unless one is already in progress, in that case nothing is done\n     * a boolean flag will avoid appending more.\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    requestRenderAll: function () {\n      if (!this.isRendering) {\n        this.isRendering = fabric.util.requestAnimFrame(this.renderAndResetBound);\n      }\n      return this;\n    },\n\n    /**\n     * Calculate the position of the 4 corner of canvas with current viewportTransform.\n     * helps to determinate when an object is in the current rendering viewport using\n     * object absolute coordinates ( aCoords )\n     * @return {Object} points.tl\n     * @chainable\n     */\n    calcViewportBoundaries: function() {\n      var points = { }, width = this.width, height = this.height,\n          iVpt = invertTransform(this.viewportTransform);\n      points.tl = transformPoint({ x: 0, y: 0 }, iVpt);\n      points.br = transformPoint({ x: width, y: height }, iVpt);\n      points.tr = new fabric.Point(points.br.x, points.tl.y);\n      points.bl = new fabric.Point(points.tl.x, points.br.y);\n      this.vptCoords = points;\n      return points;\n    },\n\n    cancelRequestedRender: function() {\n      if (this.isRendering) {\n        fabric.util.cancelAnimFrame(this.isRendering);\n        this.isRendering = 0;\n      }\n    },\n\n    /**\n     * Renders background, objects, overlay and controls.\n     * @param {CanvasRenderingContext2D} ctx\n     * @param {Array} objects to render\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderCanvas: function(ctx, objects) {\n      var v = this.viewportTransform, path = this.clipPath;\n      this.cancelRequestedRender();\n      this.calcViewportBoundaries();\n      this.clearContext(ctx);\n      fabric.util.setImageSmoothing(ctx, this.imageSmoothingEnabled);\n      this.fire('before:render', { ctx: ctx, });\n      this._renderBackground(ctx);\n\n      ctx.save();\n      //apply viewport transform once for all rendering process\n      ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n      this._renderObjects(ctx, objects);\n      ctx.restore();\n      if (!this.controlsAboveOverlay && this.interactive) {\n        this.drawControls(ctx);\n      }\n      if (path) {\n        path.canvas = this;\n        // needed to setup a couple of variables\n        path.shouldCache();\n        path._transformDone = true;\n        path.renderCache({ forClipping: true });\n        this.drawClipPathOnCanvas(ctx);\n      }\n      this._renderOverlay(ctx);\n      if (this.controlsAboveOverlay && this.interactive) {\n        this.drawControls(ctx);\n      }\n      this.fire('after:render', { ctx: ctx, });\n    },\n\n    /**\n     * Paint the cached clipPath on the lowerCanvasEl\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawClipPathOnCanvas: function(ctx) {\n      var v = this.viewportTransform, path = this.clipPath;\n      ctx.save();\n      ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n      // DEBUG: uncomment this line, comment the following\n      // ctx.globalAlpha = 0.4;\n      ctx.globalCompositeOperation = 'destination-in';\n      path.transform(ctx);\n      ctx.scale(1 / path.zoomX, 1 / path.zoomY);\n      ctx.drawImage(path._cacheCanvas, -path.cacheTranslationX, -path.cacheTranslationY);\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Array} objects to render\n     */\n    _renderObjects: function(ctx, objects) {\n      var i, len;\n      for (i = 0, len = objects.length; i < len; ++i) {\n        objects[i] && objects[i].render(ctx);\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {string} property 'background' or 'overlay'\n     */\n    _renderBackgroundOrOverlay: function(ctx, property) {\n      var fill = this[property + 'Color'], object = this[property + 'Image'],\n          v = this.viewportTransform, needsVpt = this[property + 'Vpt'];\n      if (!fill && !object) {\n        return;\n      }\n      if (fill) {\n        ctx.save();\n        ctx.beginPath();\n        ctx.moveTo(0, 0);\n        ctx.lineTo(this.width, 0);\n        ctx.lineTo(this.width, this.height);\n        ctx.lineTo(0, this.height);\n        ctx.closePath();\n        ctx.fillStyle = fill.toLive\n          ? fill.toLive(ctx, this)\n          : fill;\n        if (needsVpt) {\n          ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n        }\n        ctx.transform(1, 0, 0, 1, fill.offsetX || 0, fill.offsetY || 0);\n        var m = fill.gradientTransform || fill.patternTransform;\n        m && ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        ctx.fill();\n        ctx.restore();\n      }\n      if (object) {\n        ctx.save();\n        if (needsVpt) {\n          ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n        }\n        object.render(ctx);\n        ctx.restore();\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderBackground: function(ctx) {\n      this._renderBackgroundOrOverlay(ctx, 'background');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderOverlay: function(ctx) {\n      this._renderBackgroundOrOverlay(ctx, 'overlay');\n    },\n\n    /**\n     * Returns coordinates of a center of canvas.\n     * Returned value is an object with top and left properties\n     * @return {Object} object with \"top\" and \"left\" number values\n     */\n    getCenter: function () {\n      return {\n        top: this.height / 2,\n        left: this.width / 2\n      };\n    },\n\n    /**\n     * Centers object horizontally in the canvas\n     * @param {fabric.Object} object Object to center horizontally\n     * @return {fabric.Canvas} thisArg\n     */\n    centerObjectH: function (object) {\n      return this._centerObject(object, new fabric.Point(this.getCenter().left, object.getCenterPoint().y));\n    },\n\n    /**\n     * Centers object vertically in the canvas\n     * @param {fabric.Object} object Object to center vertically\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    centerObjectV: function (object) {\n      return this._centerObject(object, new fabric.Point(object.getCenterPoint().x, this.getCenter().top));\n    },\n\n    /**\n     * Centers object vertically and horizontally in the canvas\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    centerObject: function(object) {\n      var center = this.getCenter();\n\n      return this._centerObject(object, new fabric.Point(center.left, center.top));\n    },\n\n    /**\n     * Centers object vertically and horizontally in the viewport\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    viewportCenterObject: function(object) {\n      var vpCenter = this.getVpCenter();\n\n      return this._centerObject(object, vpCenter);\n    },\n\n    /**\n     * Centers object horizontally in the viewport, object.top is unchanged\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    viewportCenterObjectH: function(object) {\n      var vpCenter = this.getVpCenter();\n      this._centerObject(object, new fabric.Point(vpCenter.x, object.getCenterPoint().y));\n      return this;\n    },\n\n    /**\n     * Centers object Vertically in the viewport, object.top is unchanged\n     * @param {fabric.Object} object Object to center vertically and horizontally\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    viewportCenterObjectV: function(object) {\n      var vpCenter = this.getVpCenter();\n\n      return this._centerObject(object, new fabric.Point(object.getCenterPoint().x, vpCenter.y));\n    },\n\n    /**\n     * Calculate the point in canvas that correspond to the center of actual viewport.\n     * @return {fabric.Point} vpCenter, viewport center\n     * @chainable\n     */\n    getVpCenter: function() {\n      var center = this.getCenter(),\n          iVpt = invertTransform(this.viewportTransform);\n      return transformPoint({ x: center.left, y: center.top }, iVpt);\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} object Object to center\n     * @param {fabric.Point} center Center point\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    _centerObject: function(object, center) {\n      object.setPositionByOrigin(center, 'center', 'center');\n      object.setCoords();\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Returns dataless JSON representation of canvas\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {String} json string\n     */\n    toDatalessJSON: function (propertiesToInclude) {\n      return this.toDatalessObject(propertiesToInclude);\n    },\n\n    /**\n     * Returns object representation of canvas\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function (propertiesToInclude) {\n      return this._toObjectMethod('toObject', propertiesToInclude);\n    },\n\n    /**\n     * Returns dataless object representation of canvas\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toDatalessObject: function (propertiesToInclude) {\n      return this._toObjectMethod('toDatalessObject', propertiesToInclude);\n    },\n\n    /**\n     * @private\n     */\n    _toObjectMethod: function (methodName, propertiesToInclude) {\n\n      var clipPath = this.clipPath, data = {\n        version: fabric.version,\n        objects: this._toObjects(methodName, propertiesToInclude),\n      };\n      if (clipPath) {\n        data.clipPath = this._toObject(this.clipPath, methodName, propertiesToInclude);\n      }\n      extend(data, this.__serializeBgOverlay(methodName, propertiesToInclude));\n\n      fabric.util.populateWithProperties(this, data, propertiesToInclude);\n\n      return data;\n    },\n\n    /**\n     * @private\n     */\n    _toObjects: function(methodName, propertiesToInclude) {\n      return this._objects.filter(function(object) {\n        return !object.excludeFromExport;\n      }).map(function(instance) {\n        return this._toObject(instance, methodName, propertiesToInclude);\n      }, this);\n    },\n\n    /**\n     * @private\n     */\n    _toObject: function(instance, methodName, propertiesToInclude) {\n      var originalValue;\n\n      if (!this.includeDefaultValues) {\n        originalValue = instance.includeDefaultValues;\n        instance.includeDefaultValues = false;\n      }\n\n      var object = instance[methodName](propertiesToInclude);\n      if (!this.includeDefaultValues) {\n        instance.includeDefaultValues = originalValue;\n      }\n      return object;\n    },\n\n    /**\n     * @private\n     */\n    __serializeBgOverlay: function(methodName, propertiesToInclude) {\n      var data = { }, bgImage = this.backgroundImage, overlay = this.overlayImage;\n\n      if (this.backgroundColor) {\n        data.background = this.backgroundColor.toObject\n          ? this.backgroundColor.toObject(propertiesToInclude)\n          : this.backgroundColor;\n      }\n\n      if (this.overlayColor) {\n        data.overlay = this.overlayColor.toObject\n          ? this.overlayColor.toObject(propertiesToInclude)\n          : this.overlayColor;\n      }\n      if (bgImage && !bgImage.excludeFromExport) {\n        data.backgroundImage = this._toObject(bgImage, methodName, propertiesToInclude);\n      }\n      if (overlay && !overlay.excludeFromExport) {\n        data.overlayImage = this._toObject(overlay, methodName, propertiesToInclude);\n      }\n\n      return data;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * When true, getSvgTransform() will apply the StaticCanvas.viewportTransform to the SVG transformation. When true,\n     * a zoomed canvas will then produce zoomed SVG output.\n     * @type Boolean\n     * @default\n     */\n    svgViewportTransformation: true,\n\n    /**\n     * Returns SVG representation of canvas\n     * @function\n     * @param {Object} [options] Options object for SVG output\n     * @param {Boolean} [options.suppressPreamble=false] If true xml tag is not included\n     * @param {Object} [options.viewBox] SVG viewbox object\n     * @param {Number} [options.viewBox.x] x-coordinate of viewbox\n     * @param {Number} [options.viewBox.y] y-coordinate of viewbox\n     * @param {Number} [options.viewBox.width] Width of viewbox\n     * @param {Number} [options.viewBox.height] Height of viewbox\n     * @param {String} [options.encoding=UTF-8] Encoding of SVG output\n     * @param {String} [options.width] desired width of svg with or without units\n     * @param {String} [options.height] desired height of svg with or without units\n     * @param {Function} [reviver] Method for further parsing of svg elements, called after each fabric object converted into svg representation.\n     * @return {String} SVG string\n     * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#serialization}\n     * @see {@link http://jsfiddle.net/fabricjs/jQ3ZZ/|jsFiddle demo}\n     * @example <caption>Normal SVG output</caption>\n     * var svg = canvas.toSVG();\n     * @example <caption>SVG output without preamble (without &lt;?xml ../>)</caption>\n     * var svg = canvas.toSVG({suppressPreamble: true});\n     * @example <caption>SVG output with viewBox attribute</caption>\n     * var svg = canvas.toSVG({\n     *   viewBox: {\n     *     x: 100,\n     *     y: 100,\n     *     width: 200,\n     *     height: 300\n     *   }\n     * });\n     * @example <caption>SVG output with different encoding (default: UTF-8)</caption>\n     * var svg = canvas.toSVG({encoding: 'ISO-8859-1'});\n     * @example <caption>Modify SVG output with reviver function</caption>\n     * var svg = canvas.toSVG(null, function(svg) {\n     *   return svg.replace('stroke-dasharray: ; stroke-linecap: butt; stroke-linejoin: miter; stroke-miterlimit: 10; ', '');\n     * });\n     */\n    toSVG: function(options, reviver) {\n      options || (options = { });\n      options.reviver = reviver;\n      var markup = [];\n\n      this._setSVGPreamble(markup, options);\n      this._setSVGHeader(markup, options);\n      if (this.clipPath) {\n        markup.push('<g clip-path=\"url(#' + this.clipPath.clipPathId + ')\" >\\n');\n      }\n      this._setSVGBgOverlayColor(markup, 'background');\n      this._setSVGBgOverlayImage(markup, 'backgroundImage', reviver);\n      this._setSVGObjects(markup, reviver);\n      if (this.clipPath) {\n        markup.push('</g>\\n');\n      }\n      this._setSVGBgOverlayColor(markup, 'overlay');\n      this._setSVGBgOverlayImage(markup, 'overlayImage', reviver);\n\n      markup.push('</svg>');\n\n      return markup.join('');\n    },\n\n    /**\n     * @private\n     */\n    _setSVGPreamble: function(markup, options) {\n      if (options.suppressPreamble) {\n        return;\n      }\n      markup.push(\n        '<?xml version=\"1.0\" encoding=\"', (options.encoding || 'UTF-8'), '\" standalone=\"no\" ?>\\n',\n        '<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" ',\n        '\"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">\\n'\n      );\n    },\n\n    /**\n     * @private\n     */\n    _setSVGHeader: function(markup, options) {\n      var width = options.width || this.width,\n          height = options.height || this.height,\n          vpt, viewBox = 'viewBox=\"0 0 ' + this.width + ' ' + this.height + '\" ',\n          NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n\n      if (options.viewBox) {\n        viewBox = 'viewBox=\"' +\n                options.viewBox.x + ' ' +\n                options.viewBox.y + ' ' +\n                options.viewBox.width + ' ' +\n                options.viewBox.height + '\" ';\n      }\n      else {\n        if (this.svgViewportTransformation) {\n          vpt = this.viewportTransform;\n          viewBox = 'viewBox=\"' +\n                  toFixed(-vpt[4] / vpt[0], NUM_FRACTION_DIGITS) + ' ' +\n                  toFixed(-vpt[5] / vpt[3], NUM_FRACTION_DIGITS) + ' ' +\n                  toFixed(this.width / vpt[0], NUM_FRACTION_DIGITS) + ' ' +\n                  toFixed(this.height / vpt[3], NUM_FRACTION_DIGITS) + '\" ';\n        }\n      }\n\n      markup.push(\n        '<svg ',\n        'xmlns=\"http://www.w3.org/2000/svg\" ',\n        'xmlns:xlink=\"http://www.w3.org/1999/xlink\" ',\n        'version=\"1.1\" ',\n        'width=\"', width, '\" ',\n        'height=\"', height, '\" ',\n        viewBox,\n        'xml:space=\"preserve\">\\n',\n        '<desc>Created with Fabric.js ', fabric.version, '</desc>\\n',\n        '<defs>\\n',\n        this.createSVGFontFacesMarkup(),\n        this.createSVGRefElementsMarkup(),\n        this.createSVGClipPathMarkup(options),\n        '</defs>\\n'\n      );\n    },\n\n    createSVGClipPathMarkup: function(options) {\n      var clipPath = this.clipPath;\n      if (clipPath) {\n        clipPath.clipPathId = 'CLIPPATH_' + fabric.Object.__uid++;\n        return  '<clipPath id=\"' + clipPath.clipPathId + '\" >\\n' +\n          this.clipPath.toClipPathSVG(options.reviver) +\n          '</clipPath>\\n';\n      }\n      return '';\n    },\n\n    /**\n     * Creates markup containing SVG referenced elements like patterns, gradients etc.\n     * @return {String}\n     */\n    createSVGRefElementsMarkup: function() {\n      var _this = this,\n          markup = ['background', 'overlay'].map(function(prop) {\n            var fill = _this[prop + 'Color'];\n            if (fill && fill.toLive) {\n              var shouldTransform = _this[prop + 'Vpt'], vpt = _this.viewportTransform,\n                  object = {\n                    width: _this.width / (shouldTransform ? vpt[0] : 1),\n                    height: _this.height / (shouldTransform ? vpt[3] : 1)\n                  };\n              return fill.toSVG(\n                object,\n                { additionalTransform: shouldTransform ? fabric.util.matrixToSVG(vpt) : '' }\n              );\n            }\n          });\n      return markup.join('');\n    },\n\n    /**\n     * Creates markup containing SVG font faces,\n     * font URLs for font faces must be collected by developers\n     * and are not extracted from the DOM by fabricjs\n     * @param {Array} objects Array of fabric objects\n     * @return {String}\n     */\n    createSVGFontFacesMarkup: function() {\n      var markup = '', fontList = { }, obj, fontFamily,\n          style, row, rowIndex, _char, charIndex, i, len,\n          fontPaths = fabric.fontPaths, objects = [];\n\n      this._objects.forEach(function add(object) {\n        objects.push(object);\n        if (object._objects) {\n          object._objects.forEach(add);\n        }\n      });\n\n      for (i = 0, len = objects.length; i < len; i++) {\n        obj = objects[i];\n        fontFamily = obj.fontFamily;\n        if (obj.type.indexOf('text') === -1 || fontList[fontFamily] || !fontPaths[fontFamily]) {\n          continue;\n        }\n        fontList[fontFamily] = true;\n        if (!obj.styles) {\n          continue;\n        }\n        style = obj.styles;\n        for (rowIndex in style) {\n          row = style[rowIndex];\n          for (charIndex in row) {\n            _char = row[charIndex];\n            fontFamily = _char.fontFamily;\n            if (!fontList[fontFamily] && fontPaths[fontFamily]) {\n              fontList[fontFamily] = true;\n            }\n          }\n        }\n      }\n\n      for (var j in fontList) {\n        markup += [\n          '\\t\\t@font-face {\\n',\n          '\\t\\t\\tfont-family: \\'', j, '\\';\\n',\n          '\\t\\t\\tsrc: url(\\'', fontPaths[j], '\\');\\n',\n          '\\t\\t}\\n'\n        ].join('');\n      }\n\n      if (markup) {\n        markup = [\n          '\\t<style type=\"text/css\">',\n          '<![CDATA[\\n',\n          markup,\n          ']]>',\n          '</style>\\n'\n        ].join('');\n      }\n\n      return markup;\n    },\n\n    /**\n     * @private\n     */\n    _setSVGObjects: function(markup, reviver) {\n      var instance, i, len, objects = this._objects;\n      for (i = 0, len = objects.length; i < len; i++) {\n        instance = objects[i];\n        if (instance.excludeFromExport) {\n          continue;\n        }\n        this._setSVGObject(markup, instance, reviver);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setSVGObject: function(markup, instance, reviver) {\n      markup.push(instance.toSVG(reviver));\n    },\n\n    /**\n     * @private\n     */\n    _setSVGBgOverlayImage: function(markup, property, reviver) {\n      if (this[property] && !this[property].excludeFromExport && this[property].toSVG) {\n        markup.push(this[property].toSVG(reviver));\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setSVGBgOverlayColor: function(markup, property) {\n      var filler = this[property + 'Color'], vpt = this.viewportTransform, finalWidth = this.width,\n          finalHeight = this.height;\n      if (!filler) {\n        return;\n      }\n      if (filler.toLive) {\n        var repeat = filler.repeat, iVpt = fabric.util.invertTransform(vpt), shouldInvert = this[property + 'Vpt'],\n            additionalTransform = shouldInvert ? fabric.util.matrixToSVG(iVpt) : '';\n        markup.push(\n          '<rect transform=\"' + additionalTransform + ' translate(', finalWidth / 2, ',', finalHeight / 2, ')\"',\n          ' x=\"', filler.offsetX - finalWidth / 2,\n          '\" y=\"', filler.offsetY - finalHeight / 2, '\" ',\n          'width=\"',\n          (repeat === 'repeat-y' || repeat === 'no-repeat'\n            ? filler.source.width\n            : finalWidth ),\n          '\" height=\"',\n          (repeat === 'repeat-x' || repeat === 'no-repeat'\n            ? filler.source.height\n            : finalHeight),\n          '\" fill=\"url(#SVGID_' + filler.id + ')\"',\n          '></rect>\\n'\n        );\n      }\n      else {\n        markup.push(\n          '<rect x=\"0\" y=\"0\" width=\"100%\" height=\"100%\" ',\n          'fill=\"', filler, '\"',\n          '></rect>\\n'\n        );\n      }\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Moves an object or the objects of a multiple selection\n     * to the bottom of the stack of drawn objects\n     * @param {fabric.Object} object Object to send to back\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    sendToBack: function (object) {\n      if (!object) {\n        return this;\n      }\n      var activeSelection = this._activeObject,\n          i, obj, objs;\n      if (object === activeSelection && object.type === 'activeSelection') {\n        objs = activeSelection._objects;\n        for (i = objs.length; i--;) {\n          obj = objs[i];\n          removeFromArray(this._objects, obj);\n          this._objects.unshift(obj);\n        }\n      }\n      else {\n        removeFromArray(this._objects, object);\n        this._objects.unshift(object);\n      }\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Moves an object or the objects of a multiple selection\n     * to the top of the stack of drawn objects\n     * @param {fabric.Object} object Object to send\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    bringToFront: function (object) {\n      if (!object) {\n        return this;\n      }\n      var activeSelection = this._activeObject,\n          i, obj, objs;\n      if (object === activeSelection && object.type === 'activeSelection') {\n        objs = activeSelection._objects;\n        for (i = 0; i < objs.length; i++) {\n          obj = objs[i];\n          removeFromArray(this._objects, obj);\n          this._objects.push(obj);\n        }\n      }\n      else {\n        removeFromArray(this._objects, object);\n        this._objects.push(object);\n      }\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * Moves an object or a selection down in stack of drawn objects\n     * An optional parameter, intersecting allows to move the object in behind\n     * the first intersecting object. Where intersection is calculated with\n     * bounding box. If no intersection is found, there will not be change in the\n     * stack.\n     * @param {fabric.Object} object Object to send\n     * @param {Boolean} [intersecting] If `true`, send object behind next lower intersecting object\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    sendBackwards: function (object, intersecting) {\n      if (!object) {\n        return this;\n      }\n      var activeSelection = this._activeObject,\n          i, obj, idx, newIdx, objs, objsMoved = 0;\n\n      if (object === activeSelection && object.type === 'activeSelection') {\n        objs = activeSelection._objects;\n        for (i = 0; i < objs.length; i++) {\n          obj = objs[i];\n          idx = this._objects.indexOf(obj);\n          if (idx > 0 + objsMoved) {\n            newIdx = idx - 1;\n            removeFromArray(this._objects, obj);\n            this._objects.splice(newIdx, 0, obj);\n          }\n          objsMoved++;\n        }\n      }\n      else {\n        idx = this._objects.indexOf(object);\n        if (idx !== 0) {\n          // if object is not on the bottom of stack\n          newIdx = this._findNewLowerIndex(object, idx, intersecting);\n          removeFromArray(this._objects, object);\n          this._objects.splice(newIdx, 0, object);\n        }\n      }\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _findNewLowerIndex: function(object, idx, intersecting) {\n      var newIdx, i;\n\n      if (intersecting) {\n        newIdx = idx;\n\n        // traverse down the stack looking for the nearest intersecting object\n        for (i = idx - 1; i >= 0; --i) {\n\n          var isIntersecting = object.intersectsWithObject(this._objects[i]) ||\n                               object.isContainedWithinObject(this._objects[i]) ||\n                               this._objects[i].isContainedWithinObject(object);\n\n          if (isIntersecting) {\n            newIdx = i;\n            break;\n          }\n        }\n      }\n      else {\n        newIdx = idx - 1;\n      }\n\n      return newIdx;\n    },\n\n    /**\n     * Moves an object or a selection up in stack of drawn objects\n     * An optional parameter, intersecting allows to move the object in front\n     * of the first intersecting object. Where intersection is calculated with\n     * bounding box. If no intersection is found, there will not be change in the\n     * stack.\n     * @param {fabric.Object} object Object to send\n     * @param {Boolean} [intersecting] If `true`, send object in front of next upper intersecting object\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    bringForward: function (object, intersecting) {\n      if (!object) {\n        return this;\n      }\n      var activeSelection = this._activeObject,\n          i, obj, idx, newIdx, objs, objsMoved = 0;\n\n      if (object === activeSelection && object.type === 'activeSelection') {\n        objs = activeSelection._objects;\n        for (i = objs.length; i--;) {\n          obj = objs[i];\n          idx = this._objects.indexOf(obj);\n          if (idx < this._objects.length - 1 - objsMoved) {\n            newIdx = idx + 1;\n            removeFromArray(this._objects, obj);\n            this._objects.splice(newIdx, 0, obj);\n          }\n          objsMoved++;\n        }\n      }\n      else {\n        idx = this._objects.indexOf(object);\n        if (idx !== this._objects.length - 1) {\n          // if object is not on top of stack (last item in an array)\n          newIdx = this._findNewUpperIndex(object, idx, intersecting);\n          removeFromArray(this._objects, object);\n          this._objects.splice(newIdx, 0, object);\n        }\n      }\n      this.renderOnAddRemove && this.requestRenderAll();\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _findNewUpperIndex: function(object, idx, intersecting) {\n      var newIdx, i, len;\n\n      if (intersecting) {\n        newIdx = idx;\n\n        // traverse up the stack looking for the nearest intersecting object\n        for (i = idx + 1, len = this._objects.length; i < len; ++i) {\n\n          var isIntersecting = object.intersectsWithObject(this._objects[i]) ||\n                               object.isContainedWithinObject(this._objects[i]) ||\n                               this._objects[i].isContainedWithinObject(object);\n\n          if (isIntersecting) {\n            newIdx = i;\n            break;\n          }\n        }\n      }\n      else {\n        newIdx = idx + 1;\n      }\n\n      return newIdx;\n    },\n\n    /**\n     * Moves an object to specified level in stack of drawn objects\n     * @param {fabric.Object} object Object to send\n     * @param {Number} index Position to move to\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    moveTo: function (object, index) {\n      removeFromArray(this._objects, object);\n      this._objects.splice(index, 0, object);\n      return this.renderOnAddRemove && this.requestRenderAll();\n    },\n\n    /**\n     * Clears a canvas element and dispose objects\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    dispose: function () {\n      // cancel eventually ongoing renders\n      if (this.isRendering) {\n        fabric.util.cancelAnimFrame(this.isRendering);\n        this.isRendering = 0;\n      }\n      this.forEachObject(function(object) {\n        object.dispose && object.dispose();\n      });\n      this._objects = [];\n      if (this.backgroundImage && this.backgroundImage.dispose) {\n        this.backgroundImage.dispose();\n      }\n      this.backgroundImage = null;\n      if (this.overlayImage && this.overlayImage.dispose) {\n        this.overlayImage.dispose();\n      }\n      this.overlayImage = null;\n      this._iTextInstances = null;\n      this.contextContainer = null;\n      fabric.util.cleanUpJsdomNode(this.lowerCanvasEl);\n      this.lowerCanvasEl = undefined;\n      return this;\n    },\n\n    /**\n     * Returns a string representation of an instance\n     * @return {String} string representation of an instance\n     */\n    toString: function () {\n      return '#<fabric.Canvas (' + this.complexity() + '): ' +\n               '{ objects: ' + this._objects.length + ' }>';\n    }\n  });\n\n  extend(fabric.StaticCanvas.prototype, fabric.Observable);\n  extend(fabric.StaticCanvas.prototype, fabric.Collection);\n  extend(fabric.StaticCanvas.prototype, fabric.DataURLExporter);\n\n  extend(fabric.StaticCanvas, /** @lends fabric.StaticCanvas */ {\n\n    /**\n     * @static\n     * @type String\n     * @default\n     */\n    EMPTY_JSON: '{\"objects\": [], \"background\": \"white\"}',\n\n    /**\n     * Provides a way to check support of some of the canvas methods\n     * (either those of HTMLCanvasElement itself, or rendering context)\n     *\n     * @param {String} methodName Method to check support for;\n     *                            Could be one of \"setLineDash\"\n     * @return {Boolean | null} `true` if method is supported (or at least exists),\n     *                          `null` if canvas element or context can not be initialized\n     */\n    supports: function (methodName) {\n      var el = createCanvasElement();\n\n      if (!el || !el.getContext) {\n        return null;\n      }\n\n      var ctx = el.getContext('2d');\n      if (!ctx) {\n        return null;\n      }\n\n      switch (methodName) {\n\n        case 'setLineDash':\n          return typeof ctx.setLineDash !== 'undefined';\n\n        default:\n          return null;\n      }\n    }\n  });\n\n  /**\n   * Returns Object representation of canvas\n   * this alias is provided because if you call JSON.stringify on an instance,\n   * the toJSON object will be invoked if it exists.\n   * Having a toJSON method means you can do JSON.stringify(myCanvas)\n   * @function\n   * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n   * @return {Object} JSON compatible object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#serialization}\n   * @see {@link http://jsfiddle.net/fabricjs/pec86/|jsFiddle demo}\n   * @example <caption>JSON without additional properties</caption>\n   * var json = canvas.toJSON();\n   * @example <caption>JSON with additional properties included</caption>\n   * var json = canvas.toJSON(['lockMovementX', 'lockMovementY', 'lockRotation', 'lockScalingX', 'lockScalingY']);\n   * @example <caption>JSON without default values</caption>\n   * canvas.includeDefaultValues = false;\n   * var json = canvas.toJSON();\n   */\n  fabric.StaticCanvas.prototype.toJSON = fabric.StaticCanvas.prototype.toObject;\n\n  if (fabric.isLikelyNode) {\n    fabric.StaticCanvas.prototype.createPNGStream = function() {\n      var impl = getNodeCanvas(this.lowerCanvasEl);\n      return impl && impl.createPNGStream();\n    };\n    fabric.StaticCanvas.prototype.createJPEGStream = function(opts) {\n      var impl = getNodeCanvas(this.lowerCanvasEl);\n      return impl && impl.createJPEGStream(opts);\n    };\n  }\n})();\n\n\n/**\n * BaseBrush class\n * @class fabric.BaseBrush\n * @see {@link http://fabricjs.com/freedrawing|Freedrawing demo}\n */\nfabric.BaseBrush = fabric.util.createClass(/** @lends fabric.BaseBrush.prototype */ {\n\n  /**\n   * Color of a brush\n   * @type String\n   * @default\n   */\n  color: 'rgb(0, 0, 0)',\n\n  /**\n   * Width of a brush, has to be a Number, no string literals\n   * @type Number\n   * @default\n   */\n  width: 1,\n\n  /**\n   * Shadow object representing shadow of this shape.\n   * <b>Backwards incompatibility note:</b> This property replaces \"shadowColor\" (String), \"shadowOffsetX\" (Number),\n   * \"shadowOffsetY\" (Number) and \"shadowBlur\" (Number) since v1.2.12\n   * @type fabric.Shadow\n   * @default\n   */\n  shadow: null,\n\n  /**\n   * Line endings style of a brush (one of \"butt\", \"round\", \"square\")\n   * @type String\n   * @default\n   */\n  strokeLineCap: 'round',\n\n  /**\n   * Corner style of a brush (one of \"bevel\", \"round\", \"miter\")\n   * @type String\n   * @default\n   */\n  strokeLineJoin: 'round',\n\n  /**\n   * Maximum miter length (used for strokeLineJoin = \"miter\") of a brush's\n   * @type Number\n   * @default\n   */\n  strokeMiterLimit:         10,\n\n  /**\n   * Stroke Dash Array.\n   * @type Array\n   * @default\n   */\n  strokeDashArray: null,\n\n  /**\n   * When `true`, the free drawing is limited to the whiteboard size. Default to false.\n   * @type Boolean\n   * @default false\n  */\n\n  limitedToCanvasSize: false,\n\n\n  /**\n   * Sets brush styles\n   * @private\n   */\n  _setBrushStyles: function() {\n    var ctx = this.canvas.contextTop;\n    ctx.strokeStyle = this.color;\n    ctx.lineWidth = this.width;\n    ctx.lineCap = this.strokeLineCap;\n    ctx.miterLimit = this.strokeMiterLimit;\n    ctx.lineJoin = this.strokeLineJoin;\n    if (fabric.StaticCanvas.supports('setLineDash')) {\n      ctx.setLineDash(this.strokeDashArray || []);\n    }\n  },\n\n  /**\n   * Sets the transformation on given context\n   * @param {RenderingContext2d} ctx context to render on\n   * @private\n   */\n  _saveAndTransform: function(ctx) {\n    var v = this.canvas.viewportTransform;\n    ctx.save();\n    ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n  },\n\n  /**\n   * Sets brush shadow styles\n   * @private\n   */\n  _setShadow: function() {\n    if (!this.shadow) {\n      return;\n    }\n\n    var canvas = this.canvas,\n        shadow = this.shadow,\n        ctx = canvas.contextTop,\n        zoom = canvas.getZoom();\n    if (canvas && canvas._isRetinaScaling()) {\n      zoom *= fabric.devicePixelRatio;\n    }\n\n    ctx.shadowColor = shadow.color;\n    ctx.shadowBlur = shadow.blur * zoom;\n    ctx.shadowOffsetX = shadow.offsetX * zoom;\n    ctx.shadowOffsetY = shadow.offsetY * zoom;\n  },\n\n  needsFullRender: function() {\n    var color = new fabric.Color(this.color);\n    return color.getAlpha() < 1 || !!this.shadow;\n  },\n\n  /**\n   * Removes brush shadow styles\n   * @private\n   */\n  _resetShadow: function() {\n    var ctx = this.canvas.contextTop;\n\n    ctx.shadowColor = '';\n    ctx.shadowBlur = ctx.shadowOffsetX = ctx.shadowOffsetY = 0;\n  },\n\n  /**\n   * Check is pointer is outside canvas boundaries\n   * @param {Object} pointer\n   * @private\n  */\n  _isOutSideCanvas: function(pointer) {\n    return pointer.x < 0 || pointer.x > this.canvas.getWidth() || pointer.y < 0 || pointer.y > this.canvas.getHeight();\n  }\n});\n\n\n(function() {\n  /**\n   * PencilBrush class\n   * @class fabric.PencilBrush\n   * @extends fabric.BaseBrush\n   */\n  fabric.PencilBrush = fabric.util.createClass(fabric.BaseBrush, /** @lends fabric.PencilBrush.prototype */ {\n\n    /**\n     * Discard points that are less than `decimate` pixel distant from each other\n     * @type Number\n     * @default 0.4\n     */\n    decimate: 0.4,\n\n    /**\n     * Constructor\n     * @param {fabric.Canvas} canvas\n     * @return {fabric.PencilBrush} Instance of a pencil brush\n     */\n    initialize: function(canvas) {\n      this.canvas = canvas;\n      this._points = [];\n    },\n\n    /**\n     * Invoked inside on mouse down and mouse move\n     * @param {Object} pointer\n     */\n    _drawSegment: function (ctx, p1, p2) {\n      var midPoint = p1.midPointFrom(p2);\n      ctx.quadraticCurveTo(p1.x, p1.y, midPoint.x, midPoint.y);\n      return midPoint;\n    },\n\n    /**\n     * Invoked on mouse down\n     * @param {Object} pointer\n     */\n    onMouseDown: function(pointer, options) {\n      if (!this.canvas._isMainEvent(options.e)) {\n        return;\n      }\n      this._prepareForDrawing(pointer);\n      // capture coordinates immediately\n      // this allows to draw dots (when movement never occurs)\n      this._captureDrawingPath(pointer);\n      this._render();\n    },\n\n    /**\n     * Invoked on mouse move\n     * @param {Object} pointer\n     */\n    onMouseMove: function(pointer, options) {\n      if (!this.canvas._isMainEvent(options.e)) {\n        return;\n      }\n      if (this.limitedToCanvasSize === true && this._isOutSideCanvas(pointer)) {\n        return;\n      }\n      if (this._captureDrawingPath(pointer) && this._points.length > 1) {\n        if (this.needsFullRender()) {\n          // redraw curve\n          // clear top canvas\n          this.canvas.clearContext(this.canvas.contextTop);\n          this._render();\n        }\n        else {\n          var points = this._points, length = points.length, ctx = this.canvas.contextTop;\n          // draw the curve update\n          this._saveAndTransform(ctx);\n          if (this.oldEnd) {\n            ctx.beginPath();\n            ctx.moveTo(this.oldEnd.x, this.oldEnd.y);\n          }\n          this.oldEnd = this._drawSegment(ctx, points[length - 2], points[length - 1], true);\n          ctx.stroke();\n          ctx.restore();\n        }\n      }\n    },\n\n    /**\n     * Invoked on mouse up\n     */\n    onMouseUp: function(options) {\n      if (!this.canvas._isMainEvent(options.e)) {\n        return true;\n      }\n      this.oldEnd = undefined;\n      this._finalizeAndAddPath();\n      return false;\n    },\n\n    /**\n     * @private\n     * @param {Object} pointer Actual mouse position related to the canvas.\n     */\n    _prepareForDrawing: function(pointer) {\n\n      var p = new fabric.Point(pointer.x, pointer.y);\n\n      this._reset();\n      this._addPoint(p);\n      this.canvas.contextTop.moveTo(p.x, p.y);\n    },\n\n    /**\n     * @private\n     * @param {fabric.Point} point Point to be added to points array\n     */\n    _addPoint: function(point) {\n      if (this._points.length > 1 && point.eq(this._points[this._points.length - 1])) {\n        return false;\n      }\n      this._points.push(point);\n      return true;\n    },\n\n    /**\n     * Clear points array and set contextTop canvas style.\n     * @private\n     */\n    _reset: function() {\n      this._points = [];\n      this._setBrushStyles();\n      this._setShadow();\n    },\n\n    /**\n     * @private\n     * @param {Object} pointer Actual mouse position related to the canvas.\n     */\n    _captureDrawingPath: function(pointer) {\n      var pointerPoint = new fabric.Point(pointer.x, pointer.y);\n      return this._addPoint(pointerPoint);\n    },\n\n    /**\n     * Draw a smooth path on the topCanvas using quadraticCurveTo\n     * @private\n     */\n    _render: function() {\n      var ctx  = this.canvas.contextTop, i, len,\n          p1 = this._points[0],\n          p2 = this._points[1];\n\n      this._saveAndTransform(ctx);\n      ctx.beginPath();\n      //if we only have 2 points in the path and they are the same\n      //it means that the user only clicked the canvas without moving the mouse\n      //then we should be drawing a dot. A path isn't drawn between two identical dots\n      //that's why we set them apart a bit\n      if (this._points.length === 2 && p1.x === p2.x && p1.y === p2.y) {\n        var width = this.width / 1000;\n        p1 = new fabric.Point(p1.x, p1.y);\n        p2 = new fabric.Point(p2.x, p2.y);\n        p1.x -= width;\n        p2.x += width;\n      }\n      ctx.moveTo(p1.x, p1.y);\n\n      for (i = 1, len = this._points.length; i < len; i++) {\n        // we pick the point between pi + 1 & pi + 2 as the\n        // end point and p1 as our control point.\n        this._drawSegment(ctx, p1, p2);\n        p1 = this._points[i];\n        p2 = this._points[i + 1];\n      }\n      // Draw last line as a straight line while\n      // we wait for the next point to be able to calculate\n      // the bezier control point\n      ctx.lineTo(p1.x, p1.y);\n      ctx.stroke();\n      ctx.restore();\n    },\n\n    /**\n     * Converts points to SVG path\n     * @param {Array} points Array of points\n     * @return {String} SVG path\n     */\n    convertPointsToSVGPath: function(points) {\n      var path = [], i, width = this.width / 1000,\n          p1 = new fabric.Point(points[0].x, points[0].y),\n          p2 = new fabric.Point(points[1].x, points[1].y),\n          len = points.length, multSignX = 1, multSignY = 0, manyPoints = len > 2;\n\n      if (manyPoints) {\n        multSignX = points[2].x < p2.x ? -1 : points[2].x === p2.x ? 0 : 1;\n        multSignY = points[2].y < p2.y ? -1 : points[2].y === p2.y ? 0 : 1;\n      }\n      path.push('M ', p1.x - multSignX * width, ' ', p1.y - multSignY * width, ' ');\n      for (i = 1; i < len; i++) {\n        if (!p1.eq(p2)) {\n          var midPoint = p1.midPointFrom(p2);\n          // p1 is our bezier control point\n          // midpoint is our endpoint\n          // start point is p(i-1) value.\n          path.push('Q ', p1.x, ' ', p1.y, ' ', midPoint.x, ' ', midPoint.y, ' ');\n        }\n        p1 = points[i];\n        if ((i + 1) < points.length) {\n          p2 = points[i + 1];\n        }\n      }\n      if (manyPoints) {\n        multSignX = p1.x > points[i - 2].x ? 1 : p1.x === points[i - 2].x ? 0 : -1;\n        multSignY = p1.y > points[i - 2].y ? 1 : p1.y === points[i - 2].y ? 0 : -1;\n      }\n      path.push('L ', p1.x + multSignX * width, ' ', p1.y + multSignY * width);\n      return path;\n    },\n\n    /**\n     * Creates fabric.Path object to add on canvas\n     * @param {String} pathData Path data\n     * @return {fabric.Path} Path to add on canvas\n     */\n    createPath: function(pathData) {\n      var path = new fabric.Path(pathData, {\n        fill: null,\n        stroke: this.color,\n        strokeWidth: this.width,\n        strokeLineCap: this.strokeLineCap,\n        strokeMiterLimit: this.strokeMiterLimit,\n        strokeLineJoin: this.strokeLineJoin,\n        strokeDashArray: this.strokeDashArray,\n      });\n      if (this.shadow) {\n        this.shadow.affectStroke = true;\n        path.shadow = new fabric.Shadow(this.shadow);\n      }\n\n      return path;\n    },\n\n    /**\n     * Decimate points array with the decimate value\n     */\n    decimatePoints: function(points, distance) {\n      if (points.length <= 2) {\n        return points;\n      }\n      var zoom = this.canvas.getZoom(), adjustedDistance = Math.pow(distance / zoom, 2),\n          i, l = points.length - 1, lastPoint = points[0], newPoints = [lastPoint],\n          cDistance;\n      for (i = 1; i < l; i++) {\n        cDistance = Math.pow(lastPoint.x - points[i].x, 2) + Math.pow(lastPoint.y - points[i].y, 2);\n        if (cDistance >= adjustedDistance) {\n          lastPoint = points[i];\n          newPoints.push(lastPoint);\n        }\n      }\n      if (newPoints.length === 1) {\n        newPoints.push(new fabric.Point(newPoints[0].x, newPoints[0].y));\n      }\n      return newPoints;\n    },\n\n    /**\n     * On mouseup after drawing the path on contextTop canvas\n     * we use the points captured to create an new fabric path object\n     * and add it to the fabric canvas.\n     */\n    _finalizeAndAddPath: function() {\n      var ctx = this.canvas.contextTop;\n      ctx.closePath();\n      if (this.decimate) {\n        this._points = this.decimatePoints(this._points, this.decimate);\n      }\n      var pathData = this.convertPointsToSVGPath(this._points).join('');\n      if (pathData === 'M 0 0 Q 0 0 0 0 L 0 0') {\n        // do not create 0 width/height paths, as they are\n        // rendered inconsistently across browsers\n        // Firefox 4, for example, renders a dot,\n        // whereas Chrome 10 renders nothing\n        this.canvas.requestRenderAll();\n        return;\n      }\n\n      var path = this.createPath(pathData);\n      this.canvas.clearContext(this.canvas.contextTop);\n      this.canvas.fire('before:path:created', { path: path });\n      this.canvas.add(path);\n      this.canvas.requestRenderAll();\n      path.setCoords();\n      this._resetShadow();\n\n\n      // fire event 'path' created\n      this.canvas.fire('path:created', { path: path });\n    }\n  });\n})();\n\n\n/**\n * CircleBrush class\n * @class fabric.CircleBrush\n */\nfabric.CircleBrush = fabric.util.createClass(fabric.BaseBrush, /** @lends fabric.CircleBrush.prototype */ {\n\n  /**\n   * Width of a brush\n   * @type Number\n   * @default\n   */\n  width: 10,\n\n  /**\n   * Constructor\n   * @param {fabric.Canvas} canvas\n   * @return {fabric.CircleBrush} Instance of a circle brush\n   */\n  initialize: function(canvas) {\n    this.canvas = canvas;\n    this.points = [];\n  },\n\n  /**\n   * Invoked inside on mouse down and mouse move\n   * @param {Object} pointer\n   */\n  drawDot: function(pointer) {\n    var point = this.addPoint(pointer),\n        ctx = this.canvas.contextTop;\n    this._saveAndTransform(ctx);\n    this.dot(ctx, point);\n    ctx.restore();\n  },\n\n  dot: function(ctx, point) {\n    ctx.fillStyle = point.fill;\n    ctx.beginPath();\n    ctx.arc(point.x, point.y, point.radius, 0, Math.PI * 2, false);\n    ctx.closePath();\n    ctx.fill();\n  },\n\n  /**\n   * Invoked on mouse down\n   */\n  onMouseDown: function(pointer) {\n    this.points.length = 0;\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._setShadow();\n    this.drawDot(pointer);\n  },\n\n  /**\n   * Render the full state of the brush\n   * @private\n   */\n  _render: function() {\n    var ctx  = this.canvas.contextTop, i, len,\n        points = this.points;\n    this._saveAndTransform(ctx);\n    for (i = 0, len = points.length; i < len; i++) {\n      this.dot(ctx, points[i]);\n    }\n    ctx.restore();\n  },\n\n  /**\n   * Invoked on mouse move\n   * @param {Object} pointer\n   */\n  onMouseMove: function(pointer) {\n    if (this.limitedToCanvasSize === true && this._isOutSideCanvas(pointer)) {\n      return;\n    }\n    if (this.needsFullRender()) {\n      this.canvas.clearContext(this.canvas.contextTop);\n      this.addPoint(pointer);\n      this._render();\n    }\n    else {\n      this.drawDot(pointer);\n    }\n  },\n\n  /**\n   * Invoked on mouse up\n   */\n  onMouseUp: function() {\n    var originalRenderOnAddRemove = this.canvas.renderOnAddRemove, i, len;\n    this.canvas.renderOnAddRemove = false;\n\n    var circles = [];\n\n    for (i = 0, len = this.points.length; i < len; i++) {\n      var point = this.points[i],\n          circle = new fabric.Circle({\n            radius: point.radius,\n            left: point.x,\n            top: point.y,\n            originX: 'center',\n            originY: 'center',\n            fill: point.fill\n          });\n\n      this.shadow && (circle.shadow = new fabric.Shadow(this.shadow));\n\n      circles.push(circle);\n    }\n    var group = new fabric.Group(circles);\n    group.canvas = this.canvas;\n\n    this.canvas.fire('before:path:created', { path: group });\n    this.canvas.add(group);\n    this.canvas.fire('path:created', { path: group });\n\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._resetShadow();\n    this.canvas.renderOnAddRemove = originalRenderOnAddRemove;\n    this.canvas.requestRenderAll();\n  },\n\n  /**\n   * @param {Object} pointer\n   * @return {fabric.Point} Just added pointer point\n   */\n  addPoint: function(pointer) {\n    var pointerPoint = new fabric.Point(pointer.x, pointer.y),\n\n        circleRadius = fabric.util.getRandomInt(\n          Math.max(0, this.width - 20), this.width + 20) / 2,\n\n        circleColor = new fabric.Color(this.color)\n          .setAlpha(fabric.util.getRandomInt(0, 100) / 100)\n          .toRgba();\n\n    pointerPoint.radius = circleRadius;\n    pointerPoint.fill = circleColor;\n\n    this.points.push(pointerPoint);\n\n    return pointerPoint;\n  }\n});\n\n\n/**\n * SprayBrush class\n * @class fabric.SprayBrush\n */\nfabric.SprayBrush = fabric.util.createClass( fabric.BaseBrush, /** @lends fabric.SprayBrush.prototype */ {\n\n  /**\n   * Width of a spray\n   * @type Number\n   * @default\n   */\n  width:              10,\n\n  /**\n   * Density of a spray (number of dots per chunk)\n   * @type Number\n   * @default\n   */\n  density:            20,\n\n  /**\n   * Width of spray dots\n   * @type Number\n   * @default\n   */\n  dotWidth:           1,\n\n  /**\n   * Width variance of spray dots\n   * @type Number\n   * @default\n   */\n  dotWidthVariance:   1,\n\n  /**\n   * Whether opacity of a dot should be random\n   * @type Boolean\n   * @default\n   */\n  randomOpacity:        false,\n\n  /**\n   * Whether overlapping dots (rectangles) should be removed (for performance reasons)\n   * @type Boolean\n   * @default\n   */\n  optimizeOverlapping:  true,\n\n  /**\n   * Constructor\n   * @param {fabric.Canvas} canvas\n   * @return {fabric.SprayBrush} Instance of a spray brush\n   */\n  initialize: function(canvas) {\n    this.canvas = canvas;\n    this.sprayChunks = [];\n  },\n\n  /**\n   * Invoked on mouse down\n   * @param {Object} pointer\n   */\n  onMouseDown: function(pointer) {\n    this.sprayChunks.length = 0;\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._setShadow();\n\n    this.addSprayChunk(pointer);\n    this.render(this.sprayChunkPoints);\n  },\n\n  /**\n   * Invoked on mouse move\n   * @param {Object} pointer\n   */\n  onMouseMove: function(pointer) {\n    if (this.limitedToCanvasSize === true && this._isOutSideCanvas(pointer)) {\n      return;\n    }\n    this.addSprayChunk(pointer);\n    this.render(this.sprayChunkPoints);\n  },\n\n  /**\n   * Invoked on mouse up\n   */\n  onMouseUp: function() {\n    var originalRenderOnAddRemove = this.canvas.renderOnAddRemove;\n    this.canvas.renderOnAddRemove = false;\n\n    var rects = [];\n\n    for (var i = 0, ilen = this.sprayChunks.length; i < ilen; i++) {\n      var sprayChunk = this.sprayChunks[i];\n\n      for (var j = 0, jlen = sprayChunk.length; j < jlen; j++) {\n\n        var rect = new fabric.Rect({\n          width: sprayChunk[j].width,\n          height: sprayChunk[j].width,\n          left: sprayChunk[j].x + 1,\n          top: sprayChunk[j].y + 1,\n          originX: 'center',\n          originY: 'center',\n          fill: this.color\n        });\n        rects.push(rect);\n      }\n    }\n\n    if (this.optimizeOverlapping) {\n      rects = this._getOptimizedRects(rects);\n    }\n\n    var group = new fabric.Group(rects);\n    this.shadow && group.set('shadow', new fabric.Shadow(this.shadow));\n    this.canvas.fire('before:path:created', { path: group });\n    this.canvas.add(group);\n    this.canvas.fire('path:created', { path: group });\n\n    this.canvas.clearContext(this.canvas.contextTop);\n    this._resetShadow();\n    this.canvas.renderOnAddRemove = originalRenderOnAddRemove;\n    this.canvas.requestRenderAll();\n  },\n\n  /**\n   * @private\n   * @param {Array} rects\n   */\n  _getOptimizedRects: function(rects) {\n\n    // avoid creating duplicate rects at the same coordinates\n    var uniqueRects = { }, key, i, len;\n\n    for (i = 0, len = rects.length; i < len; i++) {\n      key = rects[i].left + '' + rects[i].top;\n      if (!uniqueRects[key]) {\n        uniqueRects[key] = rects[i];\n      }\n    }\n    var uniqueRectsArray = [];\n    for (key in uniqueRects) {\n      uniqueRectsArray.push(uniqueRects[key]);\n    }\n\n    return uniqueRectsArray;\n  },\n\n  /**\n   * Render new chunk of spray brush\n   */\n  render: function(sprayChunk) {\n    var ctx = this.canvas.contextTop, i, len;\n    ctx.fillStyle = this.color;\n\n    this._saveAndTransform(ctx);\n\n    for (i = 0, len = sprayChunk.length; i < len; i++) {\n      var point = sprayChunk[i];\n      if (typeof point.opacity !== 'undefined') {\n        ctx.globalAlpha = point.opacity;\n      }\n      ctx.fillRect(point.x, point.y, point.width, point.width);\n    }\n    ctx.restore();\n  },\n\n  /**\n   * Render all spray chunks\n   */\n  _render: function() {\n    var ctx = this.canvas.contextTop, i, ilen;\n    ctx.fillStyle = this.color;\n\n    this._saveAndTransform(ctx);\n\n    for (i = 0, ilen = this.sprayChunks.length; i < ilen; i++) {\n      this.render(this.sprayChunks[i]);\n    }\n    ctx.restore();\n  },\n\n  /**\n   * @param {Object} pointer\n   */\n  addSprayChunk: function(pointer) {\n    this.sprayChunkPoints = [];\n\n    var x, y, width, radius = this.width / 2, i;\n\n    for (i = 0; i < this.density; i++) {\n\n      x = fabric.util.getRandomInt(pointer.x - radius, pointer.x + radius);\n      y = fabric.util.getRandomInt(pointer.y - radius, pointer.y + radius);\n\n      if (this.dotWidthVariance) {\n        width = fabric.util.getRandomInt(\n          // bottom clamp width to 1\n          Math.max(1, this.dotWidth - this.dotWidthVariance),\n          this.dotWidth + this.dotWidthVariance);\n      }\n      else {\n        width = this.dotWidth;\n      }\n\n      var point = new fabric.Point(x, y);\n      point.width = width;\n\n      if (this.randomOpacity) {\n        point.opacity = fabric.util.getRandomInt(0, 100) / 100;\n      }\n\n      this.sprayChunkPoints.push(point);\n    }\n\n    this.sprayChunks.push(this.sprayChunkPoints);\n  }\n});\n\n\n/**\n * PatternBrush class\n * @class fabric.PatternBrush\n * @extends fabric.BaseBrush\n */\nfabric.PatternBrush = fabric.util.createClass(fabric.PencilBrush, /** @lends fabric.PatternBrush.prototype */ {\n\n  getPatternSrc: function() {\n\n    var dotWidth = 20,\n        dotDistance = 5,\n        patternCanvas = fabric.util.createCanvasElement(),\n        patternCtx = patternCanvas.getContext('2d');\n\n    patternCanvas.width = patternCanvas.height = dotWidth + dotDistance;\n\n    patternCtx.fillStyle = this.color;\n    patternCtx.beginPath();\n    patternCtx.arc(dotWidth / 2, dotWidth / 2, dotWidth / 2, 0, Math.PI * 2, false);\n    patternCtx.closePath();\n    patternCtx.fill();\n\n    return patternCanvas;\n  },\n\n  getPatternSrcFunction: function() {\n    return String(this.getPatternSrc).replace('this.color', '\"' + this.color + '\"');\n  },\n\n  /**\n   * Creates \"pattern\" instance property\n   */\n  getPattern: function() {\n    return this.canvas.contextTop.createPattern(this.source || this.getPatternSrc(), 'repeat');\n  },\n\n  /**\n   * Sets brush styles\n   */\n  _setBrushStyles: function() {\n    this.callSuper('_setBrushStyles');\n    this.canvas.contextTop.strokeStyle = this.getPattern();\n  },\n\n  /**\n   * Creates path\n   */\n  createPath: function(pathData) {\n    var path = this.callSuper('createPath', pathData),\n        topLeft = path._getLeftTopCoords().scalarAdd(path.strokeWidth / 2);\n\n    path.stroke = new fabric.Pattern({\n      source: this.source || this.getPatternSrcFunction(),\n      offsetX: -topLeft.x,\n      offsetY: -topLeft.y\n    });\n    return path;\n  }\n});\n\n\n(function() {\n\n  var getPointer = fabric.util.getPointer,\n      degreesToRadians = fabric.util.degreesToRadians,\n      abs = Math.abs,\n      supportLineDash = fabric.StaticCanvas.supports('setLineDash'),\n      isTouchEvent = fabric.util.isTouchEvent,\n      STROKE_OFFSET = 0.5;\n\n  /**\n   * Canvas class\n   * @class fabric.Canvas\n   * @extends fabric.StaticCanvas\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#canvas}\n   * @see {@link fabric.Canvas#initialize} for constructor definition\n   *\n   * @fires object:modified at the end of a transform or any change when statefull is true\n   * @fires object:rotating while an object is being rotated from the control\n   * @fires object:scaling while an object is being scaled by controls\n   * @fires object:moving while an object is being dragged\n   * @fires object:skewing while an object is being skewed from the controls\n   *\n   * @fires before:transform before a transform is is started\n   * @fires before:selection:cleared\n   * @fires selection:cleared\n   * @fires selection:updated\n   * @fires selection:created\n   *\n   * @fires path:created after a drawing operation ends and the path is added\n   * @fires mouse:down\n   * @fires mouse:move\n   * @fires mouse:up\n   * @fires mouse:down:before  on mouse down, before the inner fabric logic runs\n   * @fires mouse:move:before on mouse move, before the inner fabric logic runs\n   * @fires mouse:up:before on mouse up, before the inner fabric logic runs\n   * @fires mouse:over\n   * @fires mouse:out\n   * @fires mouse:dblclick whenever a native dbl click event fires on the canvas.\n   *\n   * @fires dragover\n   * @fires dragenter\n   * @fires dragleave\n   * @fires drop\n   * @fires after:render at the end of the render process, receives the context in the callback\n   * @fires before:render at start the render process, receives the context in the callback\n   *\n   * the following events are deprecated:\n   * @fires object:rotated at the end of a rotation transform\n   * @fires object:scaled at the end of a scale transform\n   * @fires object:moved at the end of translation transform\n   * @fires object:skewed at the end of a skew transform\n   */\n  fabric.Canvas = fabric.util.createClass(fabric.StaticCanvas, /** @lends fabric.Canvas.prototype */ {\n\n    /**\n     * Constructor\n     * @param {HTMLElement | String} el &lt;canvas> element to initialize instance on\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(el, options) {\n      options || (options = { });\n      this.renderAndResetBound = this.renderAndReset.bind(this);\n      this.requestRenderAllBound = this.requestRenderAll.bind(this);\n      this._initStatic(el, options);\n      this._initInteractive();\n      this._createCacheCanvas();\n    },\n\n    /**\n     * When true, objects can be transformed by one side (unproportionally)\n     * when dragged on the corners that normally would not do that.\n     * @type Boolean\n     * @default\n     * @since fabric 4.0 // changed name and default value\n     */\n    uniformScaling:      true,\n\n    /**\n     * Indicates which key switches uniform scaling.\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled.\n     * totally wrong named. this sounds like `uniform scaling`\n     * if Canvas.uniformScaling is true, pressing this will set it to false\n     * and viceversa.\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    uniScaleKey:           'shiftKey',\n\n    /**\n     * When true, objects use center point as the origin of scale transformation.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredScaling:        false,\n\n    /**\n     * When true, objects use center point as the origin of rotate transformation.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredRotation:       false,\n\n    /**\n     * Indicates which key enable centered Transform\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled feature disabled.\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    centeredKey:           'altKey',\n\n    /**\n     * Indicates which key enable alternate action on corner\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled feature disabled.\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    altActionKey:           'shiftKey',\n\n    /**\n     * Indicates that canvas is interactive. This property should not be changed.\n     * @type Boolean\n     * @default\n     */\n    interactive:            true,\n\n    /**\n     * Indicates whether group selection should be enabled\n     * @type Boolean\n     * @default\n     */\n    selection:              true,\n\n    /**\n     * Indicates which key or keys enable multiple click selection\n     * Pass value as a string or array of strings\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * If `null` or empty or containing any other string that is not a modifier key\n     * feature is disabled.\n     * @since 1.6.2\n     * @type String|Array\n     * @default\n     */\n    selectionKey:           'shiftKey',\n\n    /**\n     * Indicates which key enable alternative selection\n     * in case of target overlapping with active object\n     * values: 'altKey', 'shiftKey', 'ctrlKey'.\n     * For a series of reason that come from the general expectations on how\n     * things should work, this feature works only for preserveObjectStacking true.\n     * If `null` or 'none' or any other string that is not a modifier key\n     * feature is disabled.\n     * @since 1.6.5\n     * @type null|String\n     * @default\n     */\n    altSelectionKey:           null,\n\n    /**\n     * Color of selection\n     * @type String\n     * @default\n     */\n    selectionColor:         'rgba(100, 100, 255, 0.3)', // blue\n\n    /**\n     * Default dash array pattern\n     * If not empty the selection border is dashed\n     * @type Array\n     */\n    selectionDashArray:     [],\n\n    /**\n     * Color of the border of selection (usually slightly darker than color of selection itself)\n     * @type String\n     * @default\n     */\n    selectionBorderColor:   'rgba(255, 255, 255, 0.3)',\n\n    /**\n     * Width of a line used in object/group selection\n     * @type Number\n     * @default\n     */\n    selectionLineWidth:     1,\n\n    /**\n     * Select only shapes that are fully contained in the dragged selection rectangle.\n     * @type Boolean\n     * @default\n     */\n    selectionFullyContained: false,\n\n    /**\n     * Default cursor value used when hovering over an object on canvas\n     * @type String\n     * @default\n     */\n    hoverCursor:            'move',\n\n    /**\n     * Default cursor value used when moving an object on canvas\n     * @type String\n     * @default\n     */\n    moveCursor:             'move',\n\n    /**\n     * Default cursor value used for the entire canvas\n     * @type String\n     * @default\n     */\n    defaultCursor:          'default',\n\n    /**\n     * Cursor value used during free drawing\n     * @type String\n     * @default\n     */\n    freeDrawingCursor:      'crosshair',\n\n    /**\n     * Cursor value used for rotation point\n     * @type String\n     * @default\n     */\n    rotationCursor:         'crosshair',\n\n    /**\n     * Cursor value used for disabled elements ( corners with disabled action )\n     * @type String\n     * @since 2.0.0\n     * @default\n     */\n    notAllowedCursor:         'not-allowed',\n\n    /**\n     * Default element class that's given to wrapper (div) element of canvas\n     * @type String\n     * @default\n     */\n    containerClass:         'canvas-container',\n\n    /**\n     * When true, object detection happens on per-pixel basis rather than on per-bounding-box\n     * @type Boolean\n     * @default\n     */\n    perPixelTargetFind:     false,\n\n    /**\n     * Number of pixels around target pixel to tolerate (consider active) during object detection\n     * @type Number\n     * @default\n     */\n    targetFindTolerance:    0,\n\n    /**\n     * When true, target detection is skipped. Target detection will return always undefined.\n     * click selection won't work anymore, events will fire with no targets.\n     * if something is selected before setting it to true, it will be deselected at the first click.\n     * area selection will still work. check the `selection` property too.\n     * if you deactivate both, you should look into staticCanvas.\n     * @type Boolean\n     * @default\n     */\n    skipTargetFind:         false,\n\n    /**\n     * When true, mouse events on canvas (mousedown/mousemove/mouseup) result in free drawing.\n     * After mousedown, mousemove creates a shape,\n     * and then mouseup finalizes it and adds an instance of `fabric.Path` onto canvas.\n     * @tutorial {@link http://fabricjs.com/fabric-intro-part-4#free_drawing}\n     * @type Boolean\n     * @default\n     */\n    isDrawingMode:          false,\n\n    /**\n     * Indicates whether objects should remain in current stack position when selected.\n     * When false objects are brought to top and rendered as part of the selection group\n     * @type Boolean\n     * @default\n     */\n    preserveObjectStacking: false,\n\n    /**\n     * Indicates the angle that an object will lock to while rotating.\n     * @type Number\n     * @since 1.6.7\n     * @default\n     */\n    snapAngle: 0,\n\n    /**\n     * Indicates the distance from the snapAngle the rotation will lock to the snapAngle.\n     * When `null`, the snapThreshold will default to the snapAngle.\n     * @type null|Number\n     * @since 1.6.7\n     * @default\n     */\n    snapThreshold: null,\n\n    /**\n     * Indicates if the right click on canvas can output the context menu or not\n     * @type Boolean\n     * @since 1.6.5\n     * @default\n     */\n    stopContextMenu: false,\n\n    /**\n     * Indicates if the canvas can fire right click events\n     * @type Boolean\n     * @since 1.6.5\n     * @default\n     */\n    fireRightClick: false,\n\n    /**\n     * Indicates if the canvas can fire middle click events\n     * @type Boolean\n     * @since 1.7.8\n     * @default\n     */\n    fireMiddleClick: false,\n\n    /**\n     * Keep track of the subTargets for Mouse Events\n     * @type fabric.Object[]\n     */\n    targets: [],\n\n    /**\n     * Keep track of the hovered target\n     * @type fabric.Object\n     * @private\n     */\n    _hoveredTarget: null,\n\n    /**\n     * hold the list of nested targets hovered\n     * @type fabric.Object[]\n     * @private\n     */\n    _hoveredTargets: [],\n\n    /**\n     * @private\n     */\n    _initInteractive: function() {\n      this._currentTransform = null;\n      this._groupSelector = null;\n      this._initWrapperElement();\n      this._createUpperCanvas();\n      this._initEventListeners();\n\n      this._initRetinaScaling();\n\n      this.freeDrawingBrush = fabric.PencilBrush && new fabric.PencilBrush(this);\n\n      this.calcOffset();\n    },\n\n    /**\n     * Divides objects in two groups, one to render immediately\n     * and one to render as activeGroup.\n     * @return {Array} objects to render immediately and pushes the other in the activeGroup.\n     */\n    _chooseObjectsToRender: function() {\n      var activeObjects = this.getActiveObjects(),\n          object, objsToRender, activeGroupObjects;\n\n      if (activeObjects.length > 0 && !this.preserveObjectStacking) {\n        objsToRender = [];\n        activeGroupObjects = [];\n        for (var i = 0, length = this._objects.length; i < length; i++) {\n          object = this._objects[i];\n          if (activeObjects.indexOf(object) === -1 ) {\n            objsToRender.push(object);\n          }\n          else {\n            activeGroupObjects.push(object);\n          }\n        }\n        if (activeObjects.length > 1) {\n          this._activeObject._objects = activeGroupObjects;\n        }\n        objsToRender.push.apply(objsToRender, activeGroupObjects);\n      }\n      else {\n        objsToRender = this._objects;\n      }\n      return objsToRender;\n    },\n\n    /**\n     * Renders both the top canvas and the secondary container canvas.\n     * @return {fabric.Canvas} instance\n     * @chainable\n     */\n    renderAll: function () {\n      if (this.contextTopDirty && !this._groupSelector && !this.isDrawingMode) {\n        this.clearContext(this.contextTop);\n        this.contextTopDirty = false;\n      }\n      if (this.hasLostContext) {\n        this.renderTopLayer(this.contextTop);\n      }\n      var canvasToDrawOn = this.contextContainer;\n      this.renderCanvas(canvasToDrawOn, this._chooseObjectsToRender());\n      return this;\n    },\n\n    renderTopLayer: function(ctx) {\n      ctx.save();\n      if (this.isDrawingMode && this._isCurrentlyDrawing) {\n        this.freeDrawingBrush && this.freeDrawingBrush._render();\n        this.contextTopDirty = true;\n      }\n      // we render the top context - last object\n      if (this.selection && this._groupSelector) {\n        this._drawSelection(ctx);\n        this.contextTopDirty = true;\n      }\n      ctx.restore();\n    },\n\n    /**\n     * Method to render only the top canvas.\n     * Also used to render the group selection box.\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    renderTop: function () {\n      var ctx = this.contextTop;\n      this.clearContext(ctx);\n      this.renderTopLayer(ctx);\n      this.fire('after:render');\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _normalizePointer: function (object, pointer) {\n      var m = object.calcTransformMatrix(),\n          invertedM = fabric.util.invertTransform(m),\n          vptPointer = this.restorePointerVpt(pointer);\n      return fabric.util.transformPoint(vptPointer, invertedM);\n    },\n\n    /**\n     * Returns true if object is transparent at a certain location\n     * @param {fabric.Object} target Object to check\n     * @param {Number} x Left coordinate\n     * @param {Number} y Top coordinate\n     * @return {Boolean}\n     */\n    isTargetTransparent: function (target, x, y) {\n      // in case the target is the activeObject, we cannot execute this optimization\n      // because we need to draw controls too.\n      if (target.shouldCache() && target._cacheCanvas && target !== this._activeObject) {\n        var normalizedPointer = this._normalizePointer(target, {x: x, y: y}),\n            targetRelativeX = Math.max(target.cacheTranslationX + (normalizedPointer.x * target.zoomX), 0),\n            targetRelativeY = Math.max(target.cacheTranslationY + (normalizedPointer.y * target.zoomY), 0);\n\n        var isTransparent = fabric.util.isTransparent(\n          target._cacheContext, Math.round(targetRelativeX), Math.round(targetRelativeY), this.targetFindTolerance);\n\n        return isTransparent;\n      }\n\n      var ctx = this.contextCache,\n          originalColor = target.selectionBackgroundColor, v = this.viewportTransform;\n\n      target.selectionBackgroundColor = '';\n\n      this.clearContext(ctx);\n\n      ctx.save();\n      ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n      target.render(ctx);\n      ctx.restore();\n\n      target.selectionBackgroundColor = originalColor;\n\n      var isTransparent = fabric.util.isTransparent(\n        ctx, x, y, this.targetFindTolerance);\n\n      return isTransparent;\n    },\n\n    /**\n     * takes an event and determines if selection key has been pressed\n     * @private\n     * @param {Event} e Event object\n     */\n    _isSelectionKeyPressed: function(e) {\n      var selectionKeyPressed = false;\n\n      if (Object.prototype.toString.call(this.selectionKey) === '[object Array]') {\n        selectionKeyPressed = !!this.selectionKey.find(function(key) { return e[key] === true; });\n      }\n      else {\n        selectionKeyPressed = e[this.selectionKey];\n      }\n\n      return selectionKeyPressed;\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     */\n    _shouldClearSelection: function (e, target) {\n      var activeObjects = this.getActiveObjects(),\n          activeObject = this._activeObject;\n\n      return (\n        !target\n        ||\n        (target &&\n          activeObject &&\n          activeObjects.length > 1 &&\n          activeObjects.indexOf(target) === -1 &&\n          activeObject !== target &&\n          !this._isSelectionKeyPressed(e))\n        ||\n        (target && !target.evented)\n        ||\n        (target &&\n          !target.selectable &&\n          activeObject &&\n          activeObject !== target)\n      );\n    },\n\n    /**\n     * centeredScaling from object can't override centeredScaling from canvas.\n     * this should be fixed, since object setting should take precedence over canvas.\n     * also this should be something that will be migrated in the control properties.\n     * as ability to define the origin of the transformation that the control provide.\n     * @private\n     * @param {fabric.Object} target\n     * @param {String} action\n     * @param {Boolean} altKey\n     */\n    _shouldCenterTransform: function (target, action, altKey) {\n      if (!target) {\n        return;\n      }\n\n      var centerTransform;\n\n      if (action === 'scale' || action === 'scaleX' || action === 'scaleY' || action === 'resizing') {\n        centerTransform = this.centeredScaling || target.centeredScaling;\n      }\n      else if (action === 'rotate') {\n        centerTransform = this.centeredRotation || target.centeredRotation;\n      }\n\n      return centerTransform ? !altKey : altKey;\n    },\n\n    /**\n     * should disappear before release 4.0\n     * @private\n     */\n    _getOriginFromCorner: function(target, corner) {\n      var origin = {\n        x: target.originX,\n        y: target.originY\n      };\n\n      if (corner === 'ml' || corner === 'tl' || corner === 'bl') {\n        origin.x = 'right';\n      }\n      else if (corner === 'mr' || corner === 'tr' || corner === 'br') {\n        origin.x = 'left';\n      }\n\n      if (corner === 'tl' || corner === 'mt' || corner === 'tr') {\n        origin.y = 'bottom';\n      }\n      else if (corner === 'bl' || corner === 'mb' || corner === 'br') {\n        origin.y = 'top';\n      }\n      return origin;\n    },\n\n    /**\n     * @private\n     * @param {Boolean} alreadySelected true if target is already selected\n     * @param {String} corner a string representing the corner ml, mr, tl ...\n     * @param {Event} e Event object\n     * @param {fabric.Object} [target] inserted back to help overriding. Unused\n     */\n    _getActionFromCorner: function(alreadySelected, corner, e, target) {\n      if (!corner || !alreadySelected) {\n        return 'drag';\n      }\n      var control = target.controls[corner];\n      return control.getActionName(e, control, target);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     */\n    _setupCurrentTransform: function (e, target, alreadySelected) {\n      if (!target) {\n        return;\n      }\n\n      var pointer = this.getPointer(e), corner = target.__corner,\n          control = target.controls[corner],\n          actionHandler = (alreadySelected && corner) ?\n            control.getActionHandler(e, target, control) : fabric.controlsUtils.dragHandler,\n          action = this._getActionFromCorner(alreadySelected, corner, e, target),\n          origin = this._getOriginFromCorner(target, corner),\n          altKey = e[this.centeredKey],\n          transform = {\n            target: target,\n            action: action,\n            actionHandler: actionHandler,\n            corner: corner,\n            scaleX: target.scaleX,\n            scaleY: target.scaleY,\n            skewX: target.skewX,\n            skewY: target.skewY,\n            // used by transation\n            offsetX: pointer.x - target.left,\n            offsetY: pointer.y - target.top,\n            originX: origin.x,\n            originY: origin.y,\n            ex: pointer.x,\n            ey: pointer.y,\n            lastX: pointer.x,\n            lastY: pointer.y,\n            // unsure they are useful anymore.\n            // left: target.left,\n            // top: target.top,\n            theta: degreesToRadians(target.angle),\n            // end of unsure\n            width: target.width * target.scaleX,\n            shiftKey: e.shiftKey,\n            altKey: altKey,\n            original: fabric.util.saveObjectTransform(target),\n          };\n\n      if (this._shouldCenterTransform(target, action, altKey)) {\n        transform.originX = 'center';\n        transform.originY = 'center';\n      }\n      transform.original.originX = origin.x;\n      transform.original.originY = origin.y;\n      this._currentTransform = transform;\n      this._beforeTransform(e);\n    },\n\n    /**\n     * Set the cursor type of the canvas element\n     * @param {String} value Cursor type of the canvas element.\n     * @see http://www.w3.org/TR/css3-ui/#cursor\n     */\n    setCursor: function (value) {\n      this.upperCanvasEl.style.cursor = value;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx to draw the selection on\n     */\n    _drawSelection: function (ctx) {\n      var groupSelector = this._groupSelector,\n          left = groupSelector.left,\n          top = groupSelector.top,\n          aleft = abs(left),\n          atop = abs(top);\n\n      if (this.selectionColor) {\n        ctx.fillStyle = this.selectionColor;\n\n        ctx.fillRect(\n          groupSelector.ex - ((left > 0) ? 0 : -left),\n          groupSelector.ey - ((top > 0) ? 0 : -top),\n          aleft,\n          atop\n        );\n      }\n\n      if (!this.selectionLineWidth || !this.selectionBorderColor) {\n        return;\n      }\n      ctx.lineWidth = this.selectionLineWidth;\n      ctx.strokeStyle = this.selectionBorderColor;\n\n      // selection border\n      if (this.selectionDashArray.length > 1 && !supportLineDash) {\n\n        var px = groupSelector.ex + STROKE_OFFSET - ((left > 0) ? 0 : aleft),\n            py = groupSelector.ey + STROKE_OFFSET - ((top > 0) ? 0 : atop);\n\n        ctx.beginPath();\n\n        fabric.util.drawDashedLine(ctx, px, py, px + aleft, py, this.selectionDashArray);\n        fabric.util.drawDashedLine(ctx, px, py + atop - 1, px + aleft, py + atop - 1, this.selectionDashArray);\n        fabric.util.drawDashedLine(ctx, px, py, px, py + atop, this.selectionDashArray);\n        fabric.util.drawDashedLine(ctx, px + aleft - 1, py, px + aleft - 1, py + atop, this.selectionDashArray);\n\n        ctx.closePath();\n        ctx.stroke();\n      }\n      else {\n        fabric.Object.prototype._setLineDash.call(this, ctx, this.selectionDashArray);\n        ctx.strokeRect(\n          groupSelector.ex + STROKE_OFFSET - ((left > 0) ? 0 : aleft),\n          groupSelector.ey + STROKE_OFFSET - ((top > 0) ? 0 : atop),\n          aleft,\n          atop\n        );\n      }\n    },\n\n    /**\n     * Method that determines what object we are clicking on\n     * the skipGroup parameter is for internal use, is needed for shift+click action\n     * 11/09/2018 TODO: would be cool if findTarget could discern between being a full target\n     * or the outside part of the corner.\n     * @param {Event} e mouse event\n     * @param {Boolean} skipGroup when true, activeGroup is skipped and only objects are traversed through\n     * @return {fabric.Object} the target found\n     */\n    findTarget: function (e, skipGroup) {\n      if (this.skipTargetFind) {\n        return;\n      }\n\n      var ignoreZoom = true,\n          pointer = this.getPointer(e, ignoreZoom),\n          activeObject = this._activeObject,\n          aObjects = this.getActiveObjects(),\n          activeTarget, activeTargetSubs,\n          isTouch = isTouchEvent(e),\n          shouldLookForActive = (aObjects.length > 1 && !skipGroup) || aObjects.length === 1;\n\n      // first check current group (if one exists)\n      // active group does not check sub targets like normal groups.\n      // if active group just exits.\n      this.targets = [];\n\n      // if we hit the corner of an activeObject, let's return that.\n      if (shouldLookForActive && activeObject._findTargetCorner(pointer, isTouch)) {\n        return activeObject;\n      }\n      if (aObjects.length > 1 && !skipGroup && activeObject === this._searchPossibleTargets([activeObject], pointer)) {\n        return activeObject;\n      }\n      if (aObjects.length === 1 &&\n        activeObject === this._searchPossibleTargets([activeObject], pointer)) {\n        if (!this.preserveObjectStacking) {\n          return activeObject;\n        }\n        else {\n          activeTarget = activeObject;\n          activeTargetSubs = this.targets;\n          this.targets = [];\n        }\n      }\n      var target = this._searchPossibleTargets(this._objects, pointer);\n      if (e[this.altSelectionKey] && target && activeTarget && target !== activeTarget) {\n        target = activeTarget;\n        this.targets = activeTargetSubs;\n      }\n      return target;\n    },\n\n    /**\n     * Checks point is inside the object.\n     * @param {Object} [pointer] x,y object of point coordinates we want to check.\n     * @param {fabric.Object} obj Object to test against\n     * @param {Object} [globalPointer] x,y object of point coordinates relative to canvas used to search per pixel target.\n     * @return {Boolean} true if point is contained within an area of given object\n     * @private\n     */\n    _checkTarget: function(pointer, obj, globalPointer) {\n      if (obj &&\n          obj.visible &&\n          obj.evented &&\n          // http://www.geog.ubc.ca/courses/klink/gis.notes/ncgia/u32.html\n          // http://idav.ucdavis.edu/~okreylos/TAship/Spring2000/PointInPolygon.html\n          obj.containsPoint(pointer)\n      ) {\n        if ((this.perPixelTargetFind || obj.perPixelTargetFind) && !obj.isEditing) {\n          var isTransparent = this.isTargetTransparent(obj, globalPointer.x, globalPointer.y);\n          if (!isTransparent) {\n            return true;\n          }\n        }\n        else {\n          return true;\n        }\n      }\n    },\n\n    /**\n     * Function used to search inside objects an object that contains pointer in bounding box or that contains pointerOnCanvas when painted\n     * @param {Array} [objects] objects array to look into\n     * @param {Object} [pointer] x,y object of point coordinates we want to check.\n     * @return {fabric.Object} object that contains pointer\n     * @private\n     */\n    _searchPossibleTargets: function(objects, pointer) {\n      // Cache all targets where their bounding box contains point.\n      var target, i = objects.length, subTarget;\n      // Do not check for currently grouped objects, since we check the parent group itself.\n      // until we call this function specifically to search inside the activeGroup\n      while (i--) {\n        var objToCheck = objects[i];\n        var pointerToUse = objToCheck.group ?\n          this._normalizePointer(objToCheck.group, pointer) : pointer;\n        if (this._checkTarget(pointerToUse, objToCheck, pointer)) {\n          target = objects[i];\n          if (target.subTargetCheck && target instanceof fabric.Group) {\n            subTarget = this._searchPossibleTargets(target._objects, pointer);\n            subTarget && this.targets.push(subTarget);\n          }\n          break;\n        }\n      }\n      return target;\n    },\n\n    /**\n     * Returns pointer coordinates without the effect of the viewport\n     * @param {Object} pointer with \"x\" and \"y\" number values\n     * @return {Object} object with \"x\" and \"y\" number values\n     */\n    restorePointerVpt: function(pointer) {\n      return fabric.util.transformPoint(\n        pointer,\n        fabric.util.invertTransform(this.viewportTransform)\n      );\n    },\n\n    /**\n     * Returns pointer coordinates relative to canvas.\n     * Can return coordinates with or without viewportTransform.\n     * ignoreZoom false gives back coordinates that represent\n     * the point clicked on canvas element.\n     * ignoreZoom true gives back coordinates after being processed\n     * by the viewportTransform ( sort of coordinates of what is displayed\n     * on the canvas where you are clicking.\n     * ignoreZoom true = HTMLElement coordinates relative to top,left\n     * ignoreZoom false, default = fabric space coordinates, the same used for shape position\n     * To interact with your shapes top and left you want to use ignoreZoom true\n     * most of the time, while ignoreZoom false will give you coordinates\n     * compatible with the object.oCoords system.\n     * of the time.\n     * @param {Event} e\n     * @param {Boolean} ignoreZoom\n     * @return {Object} object with \"x\" and \"y\" number values\n     */\n    getPointer: function (e, ignoreZoom) {\n      // return cached values if we are in the event processing chain\n      if (this._absolutePointer && !ignoreZoom) {\n        return this._absolutePointer;\n      }\n      if (this._pointer && ignoreZoom) {\n        return this._pointer;\n      }\n\n      var pointer = getPointer(e),\n          upperCanvasEl = this.upperCanvasEl,\n          bounds = upperCanvasEl.getBoundingClientRect(),\n          boundsWidth = bounds.width || 0,\n          boundsHeight = bounds.height || 0,\n          cssScale;\n\n      if (!boundsWidth || !boundsHeight ) {\n        if ('top' in bounds && 'bottom' in bounds) {\n          boundsHeight = Math.abs( bounds.top - bounds.bottom );\n        }\n        if ('right' in bounds && 'left' in bounds) {\n          boundsWidth = Math.abs( bounds.right - bounds.left );\n        }\n      }\n\n      this.calcOffset();\n      pointer.x = pointer.x - this._offset.left;\n      pointer.y = pointer.y - this._offset.top;\n      if (!ignoreZoom) {\n        pointer = this.restorePointerVpt(pointer);\n      }\n\n      var retinaScaling = this.getRetinaScaling();\n      if (retinaScaling !== 1) {\n        pointer.x /= retinaScaling;\n        pointer.y /= retinaScaling;\n      }\n\n      if (boundsWidth === 0 || boundsHeight === 0) {\n        // If bounds are not available (i.e. not visible), do not apply scale.\n        cssScale = { width: 1, height: 1 };\n      }\n      else {\n        cssScale = {\n          width: upperCanvasEl.width / boundsWidth,\n          height: upperCanvasEl.height / boundsHeight\n        };\n      }\n\n      return {\n        x: pointer.x * cssScale.width,\n        y: pointer.y * cssScale.height\n      };\n    },\n\n    /**\n     * @private\n     * @throws {CANVAS_INIT_ERROR} If canvas can not be initialized\n     */\n    _createUpperCanvas: function () {\n      var lowerCanvasClass = this.lowerCanvasEl.className.replace(/\\s*lower-canvas\\s*/, ''),\n          lowerCanvasEl = this.lowerCanvasEl, upperCanvasEl = this.upperCanvasEl;\n\n      // there is no need to create a new upperCanvas element if we have already one.\n      if (upperCanvasEl) {\n        upperCanvasEl.className = '';\n      }\n      else {\n        upperCanvasEl = this._createCanvasElement();\n        this.upperCanvasEl = upperCanvasEl;\n      }\n      fabric.util.addClass(upperCanvasEl, 'upper-canvas ' + lowerCanvasClass);\n\n      this.wrapperEl.appendChild(upperCanvasEl);\n\n      this._copyCanvasStyle(lowerCanvasEl, upperCanvasEl);\n      this._applyCanvasStyle(upperCanvasEl);\n      this.contextTop = upperCanvasEl.getContext('2d');\n    },\n\n    /**\n     * @private\n     */\n    _createCacheCanvas: function () {\n      this.cacheCanvasEl = this._createCanvasElement();\n      this.cacheCanvasEl.setAttribute('width', this.width);\n      this.cacheCanvasEl.setAttribute('height', this.height);\n      this.contextCache = this.cacheCanvasEl.getContext('2d');\n    },\n\n    /**\n     * @private\n     */\n    _initWrapperElement: function () {\n      this.wrapperEl = fabric.util.wrapElement(this.lowerCanvasEl, 'div', {\n        'class': this.containerClass\n      });\n      fabric.util.setStyle(this.wrapperEl, {\n        width: this.width + 'px',\n        height: this.height + 'px',\n        position: 'relative'\n      });\n      fabric.util.makeElementUnselectable(this.wrapperEl);\n    },\n\n    /**\n     * @private\n     * @param {HTMLElement} element canvas element to apply styles on\n     */\n    _applyCanvasStyle: function (element) {\n      var width = this.width || element.width,\n          height = this.height || element.height;\n\n      fabric.util.setStyle(element, {\n        position: 'absolute',\n        width: width + 'px',\n        height: height + 'px',\n        left: 0,\n        top: 0,\n        'touch-action': this.allowTouchScrolling ? 'manipulation' : 'none',\n        '-ms-touch-action': this.allowTouchScrolling ? 'manipulation' : 'none'\n      });\n      element.width = width;\n      element.height = height;\n      fabric.util.makeElementUnselectable(element);\n    },\n\n    /**\n     * Copy the entire inline style from one element (fromEl) to another (toEl)\n     * @private\n     * @param {Element} fromEl Element style is copied from\n     * @param {Element} toEl Element copied style is applied to\n     */\n    _copyCanvasStyle: function (fromEl, toEl) {\n      toEl.style.cssText = fromEl.style.cssText;\n    },\n\n    /**\n     * Returns context of canvas where object selection is drawn\n     * @return {CanvasRenderingContext2D}\n     */\n    getSelectionContext: function() {\n      return this.contextTop;\n    },\n\n    /**\n     * Returns &lt;canvas> element on which object selection is drawn\n     * @return {HTMLCanvasElement}\n     */\n    getSelectionElement: function () {\n      return this.upperCanvasEl;\n    },\n\n    /**\n     * Returns currently active object\n     * @return {fabric.Object} active object\n     */\n    getActiveObject: function () {\n      return this._activeObject;\n    },\n\n    /**\n     * Returns an array with the current selected objects\n     * @return {fabric.Object} active object\n     */\n    getActiveObjects: function () {\n      var active = this._activeObject;\n      if (active) {\n        if (active.type === 'activeSelection' && active._objects) {\n          return active._objects.slice(0);\n        }\n        else {\n          return [active];\n        }\n      }\n      return [];\n    },\n\n    /**\n     * @private\n     * @param {fabric.Object} obj Object that was removed\n     */\n    _onObjectRemoved: function(obj) {\n      // removing active object should fire \"selection:cleared\" events\n      if (obj === this._activeObject) {\n        this.fire('before:selection:cleared', { target: obj });\n        this._discardActiveObject();\n        this.fire('selection:cleared', { target: obj });\n        obj.fire('deselected');\n      }\n      if (obj === this._hoveredTarget){\n        this._hoveredTarget = null;\n        this._hoveredTargets = [];\n      }\n      this.callSuper('_onObjectRemoved', obj);\n    },\n\n    /**\n     * @private\n     * Compares the old activeObject with the current one and fires correct events\n     * @param {fabric.Object} obj old activeObject\n     */\n    _fireSelectionEvents: function(oldObjects, e) {\n      var somethingChanged = false, objects = this.getActiveObjects(),\n          added = [], removed = [];\n      oldObjects.forEach(function(oldObject) {\n        if (objects.indexOf(oldObject) === -1) {\n          somethingChanged = true;\n          oldObject.fire('deselected', {\n            e: e,\n            target: oldObject\n          });\n          removed.push(oldObject);\n        }\n      });\n      objects.forEach(function(object) {\n        if (oldObjects.indexOf(object) === -1) {\n          somethingChanged = true;\n          object.fire('selected', {\n            e: e,\n            target: object\n          });\n          added.push(object);\n        }\n      });\n      if (oldObjects.length > 0 && objects.length > 0) {\n        somethingChanged && this.fire('selection:updated', {\n          e: e,\n          selected: added,\n          deselected: removed,\n          // added for backward compatibility\n          // deprecated\n          updated: added[0] || removed[0],\n          target: this._activeObject,\n        });\n      }\n      else if (objects.length > 0) {\n        this.fire('selection:created', {\n          e: e,\n          selected: added,\n          target: this._activeObject,\n        });\n      }\n      else if (oldObjects.length > 0) {\n        this.fire('selection:cleared', {\n          e: e,\n          deselected: removed,\n        });\n      }\n    },\n\n    /**\n     * Sets given object as the only active object on canvas\n     * @param {fabric.Object} object Object to set as an active one\n     * @param {Event} [e] Event (passed along when firing \"object:selected\")\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    setActiveObject: function (object, e) {\n      var currentActives = this.getActiveObjects();\n      this._setActiveObject(object, e);\n      this._fireSelectionEvents(currentActives, e);\n      return this;\n    },\n\n    /**\n     * This is a private method for now.\n     * This is supposed to be equivalent to setActiveObject but without firing\n     * any event. There is commitment to have this stay this way.\n     * This is the functional part of setActiveObject.\n     * @private\n     * @param {Object} object to set as active\n     * @param {Event} [e] Event (passed along when firing \"object:selected\")\n     * @return {Boolean} true if the selection happened\n     */\n    _setActiveObject: function(object, e) {\n      if (this._activeObject === object) {\n        return false;\n      }\n      if (!this._discardActiveObject(e, object)) {\n        return false;\n      }\n      if (object.onSelect({ e: e })) {\n        return false;\n      }\n      this._activeObject = object;\n      return true;\n    },\n\n    /**\n     * This is a private method for now.\n     * This is supposed to be equivalent to discardActiveObject but without firing\n     * any events. There is commitment to have this stay this way.\n     * This is the functional part of discardActiveObject.\n     * @param {Event} [e] Event (passed along when firing \"object:deselected\")\n     * @param {Object} object to set as active\n     * @return {Boolean} true if the selection happened\n     * @private\n     */\n    _discardActiveObject: function(e, object) {\n      var obj = this._activeObject;\n      if (obj) {\n        // onDeselect return TRUE to cancel selection;\n        if (obj.onDeselect({ e: e, object: object })) {\n          return false;\n        }\n        this._activeObject = null;\n      }\n      return true;\n    },\n\n    /**\n     * Discards currently active object and fire events. If the function is called by fabric\n     * as a consequence of a mouse event, the event is passed as a parameter and\n     * sent to the fire function for the custom events. When used as a method the\n     * e param does not have any application.\n     * @param {event} e\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    discardActiveObject: function (e) {\n      var currentActives = this.getActiveObjects(), activeObject = this.getActiveObject();\n      if (currentActives.length) {\n        this.fire('before:selection:cleared', { target: activeObject, e: e });\n      }\n      this._discardActiveObject(e);\n      this._fireSelectionEvents(currentActives, e);\n      return this;\n    },\n\n    /**\n     * Clears a canvas element and removes all event listeners\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    dispose: function () {\n      var wrapper = this.wrapperEl;\n      this.removeListeners();\n      wrapper.removeChild(this.upperCanvasEl);\n      wrapper.removeChild(this.lowerCanvasEl);\n      this.contextCache = null;\n      this.contextTop = null;\n      ['upperCanvasEl', 'cacheCanvasEl'].forEach((function(element) {\n        fabric.util.cleanUpJsdomNode(this[element]);\n        this[element] = undefined;\n      }).bind(this));\n      if (wrapper.parentNode) {\n        wrapper.parentNode.replaceChild(this.lowerCanvasEl, this.wrapperEl);\n      }\n      delete this.wrapperEl;\n      fabric.StaticCanvas.prototype.dispose.call(this);\n      return this;\n    },\n\n    /**\n     * Clears all contexts (background, main, top) of an instance\n     * @return {fabric.Canvas} thisArg\n     * @chainable\n     */\n    clear: function () {\n      // this.discardActiveGroup();\n      this.discardActiveObject();\n      this.clearContext(this.contextTop);\n      return this.callSuper('clear');\n    },\n\n    /**\n     * Draws objects' controls (borders/controls)\n     * @param {CanvasRenderingContext2D} ctx Context to render controls on\n     */\n    drawControls: function(ctx) {\n      var activeObject = this._activeObject;\n\n      if (activeObject) {\n        activeObject._renderControls(ctx);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _toObject: function(instance, methodName, propertiesToInclude) {\n      //If the object is part of the current selection group, it should\n      //be transformed appropriately\n      //i.e. it should be serialised as it would appear if the selection group\n      //were to be destroyed.\n      var originalProperties = this._realizeGroupTransformOnObject(instance),\n          object = this.callSuper('_toObject', instance, methodName, propertiesToInclude);\n      //Undo the damage we did by changing all of its properties\n      this._unwindGroupTransformOnObject(instance, originalProperties);\n      return object;\n    },\n\n    /**\n     * Realises an object's group transformation on it\n     * @private\n     * @param {fabric.Object} [instance] the object to transform (gets mutated)\n     * @returns the original values of instance which were changed\n     */\n    _realizeGroupTransformOnObject: function(instance) {\n      if (instance.group && instance.group.type === 'activeSelection' && this._activeObject === instance.group) {\n        var layoutProps = ['angle', 'flipX', 'flipY', 'left', 'scaleX', 'scaleY', 'skewX', 'skewY', 'top'];\n        //Copy all the positionally relevant properties across now\n        var originalValues = {};\n        layoutProps.forEach(function(prop) {\n          originalValues[prop] = instance[prop];\n        });\n        fabric.util.addTransformToObject(instance, this._activeObject.calcOwnMatrix());\n        return originalValues;\n      }\n      else {\n        return null;\n      }\n    },\n\n    /**\n     * Restores the changed properties of instance\n     * @private\n     * @param {fabric.Object} [instance] the object to un-transform (gets mutated)\n     * @param {Object} [originalValues] the original values of instance, as returned by _realizeGroupTransformOnObject\n     */\n    _unwindGroupTransformOnObject: function(instance, originalValues) {\n      if (originalValues) {\n        instance.set(originalValues);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setSVGObject: function(markup, instance, reviver) {\n      //If the object is in a selection group, simulate what would happen to that\n      //object when the group is deselected\n      var originalProperties = this._realizeGroupTransformOnObject(instance);\n      this.callSuper('_setSVGObject', markup, instance, reviver);\n      this._unwindGroupTransformOnObject(instance, originalProperties);\n    },\n\n    setViewportTransform: function (vpt) {\n      if (this.renderOnAddRemove && this._activeObject && this._activeObject.isEditing) {\n        this._activeObject.clearContextTop();\n      }\n      fabric.StaticCanvas.prototype.setViewportTransform.call(this, vpt);\n    }\n  });\n\n  // copying static properties manually to work around Opera's bug,\n  // where \"prototype\" property is enumerable and overrides existing prototype\n  for (var prop in fabric.StaticCanvas) {\n    if (prop !== 'prototype') {\n      fabric.Canvas[prop] = fabric.StaticCanvas[prop];\n    }\n  }\n})();\n\n\n(function() {\n\n  var addListener = fabric.util.addListener,\n      removeListener = fabric.util.removeListener,\n      RIGHT_CLICK = 3, MIDDLE_CLICK = 2, LEFT_CLICK = 1,\n      addEventOptions = { passive: false };\n\n  function checkClick(e, value) {\n    return e.button && (e.button === value - 1);\n  }\n\n  fabric.util.object.extend(fabric.Canvas.prototype, /** @lends fabric.Canvas.prototype */ {\n\n    /**\n     * Contains the id of the touch event that owns the fabric transform\n     * @type Number\n     * @private\n     */\n    mainTouchId: null,\n\n    /**\n     * Adds mouse listeners to canvas\n     * @private\n     */\n    _initEventListeners: function () {\n      // in case we initialized the class twice. This should not happen normally\n      // but in some kind of applications where the canvas element may be changed\n      // this is a workaround to having double listeners.\n      this.removeListeners();\n      this._bindEvents();\n      this.addOrRemove(addListener, 'add');\n    },\n\n    /**\n     * return an event prefix pointer or mouse.\n     * @private\n     */\n    _getEventPrefix: function () {\n      return this.enablePointerEvents ? 'pointer' : 'mouse';\n    },\n\n    addOrRemove: function(functor, eventjsFunctor) {\n      var canvasElement = this.upperCanvasEl,\n          eventTypePrefix = this._getEventPrefix();\n      functor(fabric.window, 'resize', this._onResize);\n      functor(canvasElement, eventTypePrefix + 'down', this._onMouseDown);\n      functor(canvasElement, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n      functor(canvasElement, eventTypePrefix + 'out', this._onMouseOut);\n      functor(canvasElement, eventTypePrefix + 'enter', this._onMouseEnter);\n      functor(canvasElement, 'wheel', this._onMouseWheel);\n      functor(canvasElement, 'contextmenu', this._onContextMenu);\n      functor(canvasElement, 'dblclick', this._onDoubleClick);\n      functor(canvasElement, 'dragover', this._onDragOver);\n      functor(canvasElement, 'dragenter', this._onDragEnter);\n      functor(canvasElement, 'dragleave', this._onDragLeave);\n      functor(canvasElement, 'drop', this._onDrop);\n      if (!this.enablePointerEvents) {\n        functor(canvasElement, 'touchstart', this._onTouchStart, addEventOptions);\n      }\n      if (typeof eventjs !== 'undefined' && eventjsFunctor in eventjs) {\n        eventjs[eventjsFunctor](canvasElement, 'gesture', this._onGesture);\n        eventjs[eventjsFunctor](canvasElement, 'drag', this._onDrag);\n        eventjs[eventjsFunctor](canvasElement, 'orientation', this._onOrientationChange);\n        eventjs[eventjsFunctor](canvasElement, 'shake', this._onShake);\n        eventjs[eventjsFunctor](canvasElement, 'longpress', this._onLongPress);\n      }\n    },\n\n    /**\n     * Removes all event listeners\n     */\n    removeListeners: function() {\n      this.addOrRemove(removeListener, 'remove');\n      // if you dispose on a mouseDown, before mouse up, you need to clean document to...\n      var eventTypePrefix = this._getEventPrefix();\n      removeListener(fabric.document, eventTypePrefix + 'up', this._onMouseUp);\n      removeListener(fabric.document, 'touchend', this._onTouchEnd, addEventOptions);\n      removeListener(fabric.document, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n      removeListener(fabric.document, 'touchmove', this._onMouseMove, addEventOptions);\n    },\n\n    /**\n     * @private\n     */\n    _bindEvents: function() {\n      if (this.eventsBound) {\n        // for any reason we pass here twice we do not want to bind events twice.\n        return;\n      }\n      this._onMouseDown = this._onMouseDown.bind(this);\n      this._onTouchStart = this._onTouchStart.bind(this);\n      this._onMouseMove = this._onMouseMove.bind(this);\n      this._onMouseUp = this._onMouseUp.bind(this);\n      this._onTouchEnd = this._onTouchEnd.bind(this);\n      this._onResize = this._onResize.bind(this);\n      this._onGesture = this._onGesture.bind(this);\n      this._onDrag = this._onDrag.bind(this);\n      this._onShake = this._onShake.bind(this);\n      this._onLongPress = this._onLongPress.bind(this);\n      this._onOrientationChange = this._onOrientationChange.bind(this);\n      this._onMouseWheel = this._onMouseWheel.bind(this);\n      this._onMouseOut = this._onMouseOut.bind(this);\n      this._onMouseEnter = this._onMouseEnter.bind(this);\n      this._onContextMenu = this._onContextMenu.bind(this);\n      this._onDoubleClick = this._onDoubleClick.bind(this);\n      this._onDragOver = this._onDragOver.bind(this);\n      this._onDragEnter = this._simpleEventHandler.bind(this, 'dragenter');\n      this._onDragLeave = this._simpleEventHandler.bind(this, 'dragleave');\n      this._onDrop = this._simpleEventHandler.bind(this, 'drop');\n      this.eventsBound = true;\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js gesture\n     * @param {Event} [self] Inner Event object\n     */\n    _onGesture: function(e, self) {\n      this.__onTransformGesture && this.__onTransformGesture(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js drag\n     * @param {Event} [self] Inner Event object\n     */\n    _onDrag: function(e, self) {\n      this.__onDrag && this.__onDrag(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on wheel event\n     */\n    _onMouseWheel: function(e) {\n      this.__onMouseWheel(e);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onMouseOut: function(e) {\n      var target = this._hoveredTarget;\n      this.fire('mouse:out', { target: target, e: e });\n      this._hoveredTarget = null;\n      target && target.fire('mouseout', { e: e });\n\n      var _this = this;\n      this._hoveredTargets.forEach(function(_target){\n        _this.fire('mouse:out', { target: target, e: e });\n        _target && target.fire('mouseout', { e: e });\n      });\n      this._hoveredTargets = [];\n\n      if (this._iTextInstances) {\n        this._iTextInstances.forEach(function(obj) {\n          if (obj.isEditing) {\n            obj.hiddenTextarea.focus();\n          }\n        });\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mouseenter\n     */\n    _onMouseEnter: function(e) {\n      // This find target and consequent 'mouse:over' is used to\n      // clear old instances on hovered target.\n      // calling findTarget has the side effect of killing target.__corner.\n      // as a short term fix we are not firing this if we are currently transforming.\n      // as a long term fix we need to separate the action of finding a target with the\n      // side effects we added to it.\n      if (!this._currentTransform && !this.findTarget(e)) {\n        this.fire('mouse:over', { target: null, e: e });\n        this._hoveredTarget = null;\n        this._hoveredTargets = [];\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js orientation change\n     * @param {Event} [self] Inner Event object\n     */\n    _onOrientationChange: function(e, self) {\n      this.__onOrientationChange && this.__onOrientationChange(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js shake\n     * @param {Event} [self] Inner Event object\n     */\n    _onShake: function(e, self) {\n      this.__onShake && this.__onShake(e, self);\n    },\n\n    /**\n     * @private\n     * @param {Event} [e] Event object fired on Event.js shake\n     * @param {Event} [self] Inner Event object\n     */\n    _onLongPress: function(e, self) {\n      this.__onLongPress && this.__onLongPress(e, self);\n    },\n\n    /**\n     * prevent default to allow drop event to be fired\n     * @private\n     * @param {Event} [e] Event object fired on Event.js shake\n     */\n    _onDragOver: function(e) {\n      e.preventDefault();\n      var target = this._simpleEventHandler('dragover', e);\n      this._fireEnterLeaveEvents(target, e);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onContextMenu: function (e) {\n      if (this.stopContextMenu) {\n        e.stopPropagation();\n        e.preventDefault();\n      }\n      return false;\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onDoubleClick: function (e) {\n      this._cacheTransformEventData(e);\n      this._handleEvent(e, 'dblclick');\n      this._resetTransformEventData(e);\n    },\n\n    /**\n     * Return a the id of an event.\n     * returns either the pointerId or the identifier or 0 for the mouse event\n     * @private\n     * @param {Event} evt Event object\n     */\n    getPointerId: function(evt) {\n      var changedTouches = evt.changedTouches;\n\n      if (changedTouches) {\n        return changedTouches[0] && changedTouches[0].identifier;\n      }\n\n      if (this.enablePointerEvents) {\n        return evt.pointerId;\n      }\n\n      return -1;\n    },\n\n    /**\n     * Determines if an event has the id of the event that is considered main\n     * @private\n     * @param {evt} event Event object\n     */\n    _isMainEvent: function(evt) {\n      if (evt.isPrimary === true) {\n        return true;\n      }\n      if (evt.isPrimary === false) {\n        return false;\n      }\n      if (evt.type === 'touchend' && evt.touches.length === 0) {\n        return true;\n      }\n      if (evt.changedTouches) {\n        return evt.changedTouches[0].identifier === this.mainTouchId;\n      }\n      return true;\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onTouchStart: function(e) {\n      e.preventDefault();\n      if (this.mainTouchId === null) {\n        this.mainTouchId = this.getPointerId(e);\n      }\n      this.__onMouseDown(e);\n      this._resetTransformEventData();\n      var canvasElement = this.upperCanvasEl,\n          eventTypePrefix = this._getEventPrefix();\n      addListener(fabric.document, 'touchend', this._onTouchEnd, addEventOptions);\n      addListener(fabric.document, 'touchmove', this._onMouseMove, addEventOptions);\n      // Unbind mousedown to prevent double triggers from touch devices\n      removeListener(canvasElement, eventTypePrefix + 'down', this._onMouseDown);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onMouseDown: function (e) {\n      this.__onMouseDown(e);\n      this._resetTransformEventData();\n      var canvasElement = this.upperCanvasEl,\n          eventTypePrefix = this._getEventPrefix();\n      removeListener(canvasElement, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n      addListener(fabric.document, eventTypePrefix + 'up', this._onMouseUp);\n      addListener(fabric.document, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onTouchEnd: function(e) {\n      if (e.touches.length > 0) {\n        // if there are still touches stop here\n        return;\n      }\n      this.__onMouseUp(e);\n      this._resetTransformEventData();\n      this.mainTouchId = null;\n      var eventTypePrefix = this._getEventPrefix();\n      removeListener(fabric.document, 'touchend', this._onTouchEnd, addEventOptions);\n      removeListener(fabric.document, 'touchmove', this._onMouseMove, addEventOptions);\n      var _this = this;\n      if (this._willAddMouseDown) {\n        clearTimeout(this._willAddMouseDown);\n      }\n      this._willAddMouseDown = setTimeout(function() {\n        // Wait 400ms before rebinding mousedown to prevent double triggers\n        // from touch devices\n        addListener(_this.upperCanvasEl, eventTypePrefix + 'down', _this._onMouseDown);\n        _this._willAddMouseDown = 0;\n      }, 400);\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mouseup\n     */\n    _onMouseUp: function (e) {\n      this.__onMouseUp(e);\n      this._resetTransformEventData();\n      var canvasElement = this.upperCanvasEl,\n          eventTypePrefix = this._getEventPrefix();\n      if (this._isMainEvent(e)) {\n        removeListener(fabric.document, eventTypePrefix + 'up', this._onMouseUp);\n        removeListener(fabric.document, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n        addListener(canvasElement, eventTypePrefix + 'move', this._onMouseMove, addEventOptions);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousemove\n     */\n    _onMouseMove: function (e) {\n      !this.allowTouchScrolling && e.preventDefault && e.preventDefault();\n      this.__onMouseMove(e);\n    },\n\n    /**\n     * @private\n     */\n    _onResize: function () {\n      this.calcOffset();\n    },\n\n    /**\n     * Decides whether the canvas should be redrawn in mouseup and mousedown events.\n     * @private\n     * @param {Object} target\n     */\n    _shouldRender: function(target) {\n      var activeObject = this._activeObject;\n\n      if (\n        !!activeObject !== !!target ||\n        (activeObject && target && (activeObject !== target))\n      ) {\n        // this covers: switch of target, from target to no target, selection of target\n        // multiSelection with key and mouse\n        return true;\n      }\n      else if (activeObject && activeObject.isEditing) {\n        // if we mouse up/down over a editing textbox a cursor change,\n        // there is no need to re render\n        return false;\n      }\n      return false;\n    },\n\n    /**\n     * Method that defines the actions when mouse is released on canvas.\n     * The method resets the currentTransform parameters, store the image corner\n     * position in the image object and render the canvas on top.\n     * @private\n     * @param {Event} e Event object fired on mouseup\n     */\n    __onMouseUp: function (e) {\n      var target, transform = this._currentTransform,\n          groupSelector = this._groupSelector, shouldRender = false,\n          isClick = (!groupSelector || (groupSelector.left === 0 && groupSelector.top === 0));\n      this._cacheTransformEventData(e);\n      target = this._target;\n      this._handleEvent(e, 'up:before');\n      // if right/middle click just fire events and return\n      // target undefined will make the _handleEvent search the target\n      if (checkClick(e, RIGHT_CLICK)) {\n        if (this.fireRightClick) {\n          this._handleEvent(e, 'up', RIGHT_CLICK, isClick);\n        }\n        return;\n      }\n\n      if (checkClick(e, MIDDLE_CLICK)) {\n        if (this.fireMiddleClick) {\n          this._handleEvent(e, 'up', MIDDLE_CLICK, isClick);\n        }\n        this._resetTransformEventData();\n        return;\n      }\n\n      if (this.isDrawingMode && this._isCurrentlyDrawing) {\n        this._onMouseUpInDrawingMode(e);\n        return;\n      }\n\n      if (!this._isMainEvent(e)) {\n        return;\n      }\n      if (transform) {\n        this._finalizeCurrentTransform(e);\n        shouldRender = transform.actionPerformed;\n      }\n      if (!isClick) {\n        var targetWasActive = target === this._activeObject;\n        this._maybeGroupObjects(e);\n        if (!shouldRender) {\n          shouldRender = (\n            this._shouldRender(target) ||\n            (!targetWasActive && target === this._activeObject)\n          );\n        }\n      }\n      if (target) {\n        if (target.selectable && target !== this._activeObject && target.activeOn === 'up') {\n          this.setActiveObject(target, e);\n          shouldRender = true;\n        }\n        else {\n          var corner = target._findTargetCorner(\n            this.getPointer(e, true),\n            fabric.util.isTouchEvent(e)\n          );\n          var control = target.controls[corner],\n              mouseUpHandler = control && control.getMouseUpHandler(e, target, control);\n          if (mouseUpHandler) {\n            var pointer = this.getPointer(e);\n            mouseUpHandler(e, transform, pointer.x, pointer.y);\n          }\n        }\n        target.isMoving = false;\n      }\n      this._setCursorFromEvent(e, target);\n      this._handleEvent(e, 'up', LEFT_CLICK, isClick);\n      this._groupSelector = null;\n      this._currentTransform = null;\n      // reset the target information about which corner is selected\n      target && (target.__corner = 0);\n      if (shouldRender) {\n        this.requestRenderAll();\n      }\n      else if (!isClick) {\n        this.renderTop();\n      }\n    },\n\n    /**\n     * @private\n     * Handle event firing for target and subtargets\n     * @param {Event} e event from mouse\n     * @param {String} eventType event to fire (up, down or move)\n     * @return {Fabric.Object} target return the the target found, for internal reasons.\n     */\n    _simpleEventHandler: function(eventType, e) {\n      var target = this.findTarget(e),\n          targets = this.targets,\n          options = {\n            e: e,\n            target: target,\n            subTargets: targets,\n          };\n      this.fire(eventType, options);\n      target && target.fire(eventType, options);\n      if (!targets) {\n        return target;\n      }\n      for (var i = 0; i < targets.length; i++) {\n        targets[i].fire(eventType, options);\n      }\n      return target;\n    },\n\n    /**\n     * @private\n     * Handle event firing for target and subtargets\n     * @param {Event} e event from mouse\n     * @param {String} eventType event to fire (up, down or move)\n     * @param {fabric.Object} targetObj receiving event\n     * @param {Number} [button] button used in the event 1 = left, 2 = middle, 3 = right\n     * @param {Boolean} isClick for left button only, indicates that the mouse up happened without move.\n     */\n    _handleEvent: function(e, eventType, button, isClick) {\n      var target = this._target,\n          targets = this.targets || [],\n          options = {\n            e: e,\n            target: target,\n            subTargets: targets,\n            button: button || LEFT_CLICK,\n            isClick: isClick || false,\n            pointer: this._pointer,\n            absolutePointer: this._absolutePointer,\n            transform: this._currentTransform\n          };\n      if (eventType === 'up') {\n        options.currentTarget = this.findTarget(e);\n        options.currentSubTargets = this.targets;\n      }\n      this.fire('mouse:' + eventType, options);\n      target && target.fire('mouse' + eventType, options);\n      for (var i = 0; i < targets.length; i++) {\n        targets[i].fire('mouse' + eventType, options);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Event} e send the mouse event that generate the finalize down, so it can be used in the event\n     */\n    _finalizeCurrentTransform: function(e) {\n\n      var transform = this._currentTransform,\n          target = transform.target,\n          eventName,\n          options = {\n            e: e,\n            target: target,\n            transform: transform,\n            action: transform.action,\n          };\n\n      if (target._scaling) {\n        target._scaling = false;\n      }\n\n      target.setCoords();\n\n      if (transform.actionPerformed || (this.stateful && target.hasStateChanged())) {\n        if (transform.actionPerformed) {\n          // this is not friendly to the new control api.\n          // is deprecated.\n          eventName = this._addEventOptions(options, transform);\n          this._fire(eventName, options);\n        }\n        this._fire('modified', options);\n      }\n    },\n\n    /**\n     * Mutate option object in order to add by property and give back the event name.\n     * @private\n     * @deprecated since 4.2.0\n     * @param {Object} options to mutate\n     * @param {Object} transform to inspect action from\n     */\n    _addEventOptions: function(options, transform) {\n      // we can probably add more details at low cost\n      // scale change, rotation changes, translation changes\n      var eventName, by;\n      switch (transform.action) {\n        case 'scaleX':\n          eventName = 'scaled';\n          by = 'x';\n          break;\n        case 'scaleY':\n          eventName = 'scaled';\n          by = 'y';\n          break;\n        case 'skewX':\n          eventName = 'skewed';\n          by = 'x';\n          break;\n        case 'skewY':\n          eventName = 'skewed';\n          by = 'y';\n          break;\n        case 'scale':\n          eventName = 'scaled';\n          by = 'equally';\n          break;\n        case 'rotate':\n          eventName = 'rotated';\n          break;\n        case 'drag':\n          eventName = 'moved';\n          break;\n      }\n      options.by = by;\n      return eventName;\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    _onMouseDownInDrawingMode: function(e) {\n      this._isCurrentlyDrawing = true;\n      if (this.getActiveObject()) {\n        this.discardActiveObject(e).requestRenderAll();\n      }\n      var pointer = this.getPointer(e);\n      this.freeDrawingBrush.onMouseDown(pointer, { e: e, pointer: pointer });\n      this._handleEvent(e, 'down');\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mousemove\n     */\n    _onMouseMoveInDrawingMode: function(e) {\n      if (this._isCurrentlyDrawing) {\n        var pointer = this.getPointer(e);\n        this.freeDrawingBrush.onMouseMove(pointer, { e: e, pointer: pointer });\n      }\n      this.setCursor(this.freeDrawingCursor);\n      this._handleEvent(e, 'move');\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object fired on mouseup\n     */\n    _onMouseUpInDrawingMode: function(e) {\n      var pointer = this.getPointer(e);\n      this._isCurrentlyDrawing = this.freeDrawingBrush.onMouseUp({ e: e, pointer: pointer });\n      this._handleEvent(e, 'up');\n    },\n\n    /**\n     * Method that defines the actions when mouse is clicked on canvas.\n     * The method inits the currentTransform parameters and renders all the\n     * canvas so the current image can be placed on the top canvas and the rest\n     * in on the container one.\n     * @private\n     * @param {Event} e Event object fired on mousedown\n     */\n    __onMouseDown: function (e) {\n      this._cacheTransformEventData(e);\n      this._handleEvent(e, 'down:before');\n      var target = this._target;\n      // if right click just fire events\n      if (checkClick(e, RIGHT_CLICK)) {\n        if (this.fireRightClick) {\n          this._handleEvent(e, 'down', RIGHT_CLICK);\n        }\n        return;\n      }\n\n      if (checkClick(e, MIDDLE_CLICK)) {\n        if (this.fireMiddleClick) {\n          this._handleEvent(e, 'down', MIDDLE_CLICK);\n        }\n        return;\n      }\n\n      if (this.isDrawingMode) {\n        this._onMouseDownInDrawingMode(e);\n        return;\n      }\n\n      if (!this._isMainEvent(e)) {\n        return;\n      }\n\n      // ignore if some object is being transformed at this moment\n      if (this._currentTransform) {\n        return;\n      }\n\n      var pointer = this._pointer;\n      // save pointer for check in __onMouseUp event\n      this._previousPointer = pointer;\n      var shouldRender = this._shouldRender(target),\n          shouldGroup = this._shouldGroup(e, target);\n      if (this._shouldClearSelection(e, target)) {\n        this.discardActiveObject(e);\n      }\n      else if (shouldGroup) {\n        this._handleGrouping(e, target);\n        target = this._activeObject;\n      }\n\n      if (this.selection && (!target ||\n        (!target.selectable && !target.isEditing && target !== this._activeObject))) {\n        this._groupSelector = {\n          ex: pointer.x,\n          ey: pointer.y,\n          top: 0,\n          left: 0\n        };\n      }\n\n      if (target) {\n        var alreadySelected = target === this._activeObject;\n        if (target.selectable && target.activeOn === 'down') {\n          this.setActiveObject(target, e);\n        }\n        var corner = target._findTargetCorner(\n          this.getPointer(e, true),\n          fabric.util.isTouchEvent(e)\n        );\n        target.__corner = corner;\n        if (target === this._activeObject && (corner || !shouldGroup)) {\n          this._setupCurrentTransform(e, target, alreadySelected);\n          var control = target.controls[corner],\n              pointer = this.getPointer(e),\n              mouseDownHandler = control && control.getMouseDownHandler(e, target, control);\n          if (mouseDownHandler) {\n            mouseDownHandler(e, this._currentTransform, pointer.x, pointer.y);\n          }\n        }\n      }\n      this._handleEvent(e, 'down');\n      // we must renderAll so that we update the visuals\n      (shouldRender || shouldGroup) && this.requestRenderAll();\n    },\n\n    /**\n     * reset cache form common information needed during event processing\n     * @private\n     */\n    _resetTransformEventData: function() {\n      this._target = null;\n      this._pointer = null;\n      this._absolutePointer = null;\n    },\n\n    /**\n     * Cache common information needed during event processing\n     * @private\n     * @param {Event} e Event object fired on event\n     */\n    _cacheTransformEventData: function(e) {\n      // reset in order to avoid stale caching\n      this._resetTransformEventData();\n      this._pointer = this.getPointer(e, true);\n      this._absolutePointer = this.restorePointerVpt(this._pointer);\n      this._target = this._currentTransform ? this._currentTransform.target : this.findTarget(e) || null;\n    },\n\n    /**\n     * @private\n     */\n    _beforeTransform: function(e) {\n      var t = this._currentTransform;\n      this.stateful && t.target.saveState();\n      this.fire('before:transform', {\n        e: e,\n        transform: t,\n      });\n    },\n\n    /**\n     * Method that defines the actions when mouse is hovering the canvas.\n     * The currentTransform parameter will define whether the user is rotating/scaling/translating\n     * an image or neither of them (only hovering). A group selection is also possible and would cancel\n     * all any other type of action.\n     * In case of an image transformation only the top canvas will be rendered.\n     * @private\n     * @param {Event} e Event object fired on mousemove\n     */\n    __onMouseMove: function (e) {\n      this._handleEvent(e, 'move:before');\n      this._cacheTransformEventData(e);\n      var target, pointer;\n\n      if (this.isDrawingMode) {\n        this._onMouseMoveInDrawingMode(e);\n        return;\n      }\n\n      if (!this._isMainEvent(e)) {\n        return;\n      }\n\n      var groupSelector = this._groupSelector;\n\n      // We initially clicked in an empty area, so we draw a box for multiple selection\n      if (groupSelector) {\n        pointer = this._pointer;\n\n        groupSelector.left = pointer.x - groupSelector.ex;\n        groupSelector.top = pointer.y - groupSelector.ey;\n\n        this.renderTop();\n      }\n      else if (!this._currentTransform) {\n        target = this.findTarget(e) || null;\n        this._setCursorFromEvent(e, target);\n        this._fireOverOutEvents(target, e);\n      }\n      else {\n        this._transformObject(e);\n      }\n      this._handleEvent(e, 'move');\n      this._resetTransformEventData();\n    },\n\n    /**\n     * Manage the mouseout, mouseover events for the fabric object on the canvas\n     * @param {Fabric.Object} target the target where the target from the mousemove event\n     * @param {Event} e Event object fired on mousemove\n     * @private\n     */\n    _fireOverOutEvents: function(target, e) {\n      var _hoveredTarget = this._hoveredTarget,\n          _hoveredTargets = this._hoveredTargets, targets = this.targets,\n          length = Math.max(_hoveredTargets.length, targets.length);\n\n      this.fireSyntheticInOutEvents(target, e, {\n        oldTarget: _hoveredTarget,\n        evtOut: 'mouseout',\n        canvasEvtOut: 'mouse:out',\n        evtIn: 'mouseover',\n        canvasEvtIn: 'mouse:over',\n      });\n      for (var i = 0; i < length; i++){\n        this.fireSyntheticInOutEvents(targets[i], e, {\n          oldTarget: _hoveredTargets[i],\n          evtOut: 'mouseout',\n          evtIn: 'mouseover',\n        });\n      }\n      this._hoveredTarget = target;\n      this._hoveredTargets = this.targets.concat();\n    },\n\n    /**\n     * Manage the dragEnter, dragLeave events for the fabric objects on the canvas\n     * @param {Fabric.Object} target the target where the target from the onDrag event\n     * @param {Event} e Event object fired on ondrag\n     * @private\n     */\n    _fireEnterLeaveEvents: function(target, e) {\n      var _draggedoverTarget = this._draggedoverTarget,\n          _hoveredTargets = this._hoveredTargets, targets = this.targets,\n          length = Math.max(_hoveredTargets.length, targets.length);\n\n      this.fireSyntheticInOutEvents(target, e, {\n        oldTarget: _draggedoverTarget,\n        evtOut: 'dragleave',\n        evtIn: 'dragenter',\n      });\n      for (var i = 0; i < length; i++) {\n        this.fireSyntheticInOutEvents(targets[i], e, {\n          oldTarget: _hoveredTargets[i],\n          evtOut: 'dragleave',\n          evtIn: 'dragenter',\n        });\n      }\n      this._draggedoverTarget = target;\n    },\n\n    /**\n     * Manage the synthetic in/out events for the fabric objects on the canvas\n     * @param {Fabric.Object} target the target where the target from the supported events\n     * @param {Event} e Event object fired\n     * @param {Object} config configuration for the function to work\n     * @param {String} config.targetName property on the canvas where the old target is stored\n     * @param {String} [config.canvasEvtOut] name of the event to fire at canvas level for out\n     * @param {String} config.evtOut name of the event to fire for out\n     * @param {String} [config.canvasEvtIn] name of the event to fire at canvas level for in\n     * @param {String} config.evtIn name of the event to fire for in\n     * @private\n     */\n    fireSyntheticInOutEvents: function(target, e, config) {\n      var inOpt, outOpt, oldTarget = config.oldTarget, outFires, inFires,\n          targetChanged = oldTarget !== target, canvasEvtIn = config.canvasEvtIn, canvasEvtOut = config.canvasEvtOut;\n      if (targetChanged) {\n        inOpt = { e: e, target: target, previousTarget: oldTarget };\n        outOpt = { e: e, target: oldTarget, nextTarget: target };\n      }\n      inFires = target && targetChanged;\n      outFires = oldTarget && targetChanged;\n      if (outFires) {\n        canvasEvtOut && this.fire(canvasEvtOut, outOpt);\n        oldTarget.fire(config.evtOut, outOpt);\n      }\n      if (inFires) {\n        canvasEvtIn && this.fire(canvasEvtIn, inOpt);\n        target.fire(config.evtIn, inOpt);\n      }\n    },\n\n    /**\n     * Method that defines actions when an Event Mouse Wheel\n     * @param {Event} e Event object fired on mouseup\n     */\n    __onMouseWheel: function(e) {\n      this._cacheTransformEventData(e);\n      this._handleEvent(e, 'wheel');\n      this._resetTransformEventData();\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event fired on mousemove\n     */\n    _transformObject: function(e) {\n      var pointer = this.getPointer(e),\n          transform = this._currentTransform;\n\n      transform.reset = false;\n      transform.shiftKey = e.shiftKey;\n      transform.altKey = e[this.centeredKey];\n\n      this._performTransformAction(e, transform, pointer);\n      transform.actionPerformed && this.requestRenderAll();\n    },\n\n    /**\n     * @private\n     */\n    _performTransformAction: function(e, transform, pointer) {\n      var x = pointer.x,\n          y = pointer.y,\n          action = transform.action,\n          actionPerformed = false,\n          actionHandler = transform.actionHandler;\n          // this object could be created from the function in the control handlers\n\n\n      if (actionHandler) {\n        actionPerformed = actionHandler(e, transform, x, y);\n      }\n      if (action === 'drag' && actionPerformed) {\n        transform.target.isMoving = true;\n        this.setCursor(transform.target.moveCursor || this.moveCursor);\n      }\n      transform.actionPerformed = transform.actionPerformed || actionPerformed;\n    },\n\n    /**\n     * @private\n     */\n    _fire: fabric.controlsUtils.fireEvent,\n\n    /**\n     * Sets the cursor depending on where the canvas is being hovered.\n     * Note: very buggy in Opera\n     * @param {Event} e Event object\n     * @param {Object} target Object that the mouse is hovering, if so.\n     */\n    _setCursorFromEvent: function (e, target) {\n      if (!target) {\n        this.setCursor(this.defaultCursor);\n        return false;\n      }\n      var hoverCursor = target.hoverCursor || this.hoverCursor,\n          activeSelection = this._activeObject && this._activeObject.type === 'activeSelection' ?\n            this._activeObject : null,\n          // only show proper corner when group selection is not active\n          corner = (!activeSelection || !activeSelection.contains(target))\n          // here we call findTargetCorner always with undefined for the touch parameter.\n          // we assume that if you are using a cursor you do not need to interact with\n          // the bigger touch area.\n                    && target._findTargetCorner(this.getPointer(e, true));\n\n      if (!corner) {\n        if (target.subTargetCheck){\n          // hoverCursor should come from top-most subTarget,\n          // so we walk the array backwards\n          this.targets.concat().reverse().map(function(_target){\n            hoverCursor = _target.hoverCursor || hoverCursor;\n          });\n        }\n        this.setCursor(hoverCursor);\n      }\n      else {\n        this.setCursor(this.getCornerCursor(corner, target, e));\n      }\n    },\n\n    /**\n     * @private\n     */\n    getCornerCursor: function(corner, target, e) {\n      var control = target.controls[corner];\n      return control.cursorStyleHandler(e, control, target);\n    }\n  });\n})();\n\n\n(function() {\n\n  var min = Math.min,\n      max = Math.max;\n\n  fabric.util.object.extend(fabric.Canvas.prototype, /** @lends fabric.Canvas.prototype */ {\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     * @return {Boolean}\n     */\n    _shouldGroup: function(e, target) {\n      var activeObject = this._activeObject;\n      return activeObject && this._isSelectionKeyPressed(e) && target && target.selectable && this.selection &&\n            (activeObject !== target || activeObject.type === 'activeSelection') && !target.onSelect({ e: e });\n    },\n\n    /**\n     * @private\n     * @param {Event} e Event object\n     * @param {fabric.Object} target\n     */\n    _handleGrouping: function (e, target) {\n      var activeObject = this._activeObject;\n      // avoid multi select when shift click on a corner\n      if (activeObject.__corner) {\n        return;\n      }\n      if (target === activeObject) {\n        // if it's a group, find target again, using activeGroup objects\n        target = this.findTarget(e, true);\n        // if even object is not found or we are on activeObjectCorner, bail out\n        if (!target || !target.selectable) {\n          return;\n        }\n      }\n      if (activeObject && activeObject.type === 'activeSelection') {\n        this._updateActiveSelection(target, e);\n      }\n      else {\n        this._createActiveSelection(target, e);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _updateActiveSelection: function(target, e) {\n      var activeSelection = this._activeObject,\n          currentActiveObjects = activeSelection._objects.slice(0);\n      if (activeSelection.contains(target)) {\n        activeSelection.removeWithUpdate(target);\n        this._hoveredTarget = target;\n        this._hoveredTargets = this.targets.concat();\n        if (activeSelection.size() === 1) {\n          // activate last remaining object\n          this._setActiveObject(activeSelection.item(0), e);\n        }\n      }\n      else {\n        activeSelection.addWithUpdate(target);\n        this._hoveredTarget = activeSelection;\n        this._hoveredTargets = this.targets.concat();\n      }\n      this._fireSelectionEvents(currentActiveObjects, e);\n    },\n\n    /**\n     * @private\n     */\n    _createActiveSelection: function(target, e) {\n      var currentActives = this.getActiveObjects(), group = this._createGroup(target);\n      this._hoveredTarget = group;\n      // ISSUE 4115: should we consider subTargets here?\n      // this._hoveredTargets = [];\n      // this._hoveredTargets = this.targets.concat();\n      this._setActiveObject(group, e);\n      this._fireSelectionEvents(currentActives, e);\n    },\n\n    /**\n     * @private\n     * @param {Object} target\n     */\n    _createGroup: function(target) {\n      var objects = this._objects,\n          isActiveLower = objects.indexOf(this._activeObject) < objects.indexOf(target),\n          groupObjects = isActiveLower\n            ? [this._activeObject, target]\n            : [target, this._activeObject];\n      this._activeObject.isEditing && this._activeObject.exitEditing();\n      return new fabric.ActiveSelection(groupObjects, {\n        canvas: this\n      });\n    },\n\n    /**\n     * @private\n     * @param {Event} e mouse event\n     */\n    _groupSelectedObjects: function (e) {\n\n      var group = this._collectObjects(e),\n          aGroup;\n\n      // do not create group for 1 element only\n      if (group.length === 1) {\n        this.setActiveObject(group[0], e);\n      }\n      else if (group.length > 1) {\n        aGroup = new fabric.ActiveSelection(group.reverse(), {\n          canvas: this\n        });\n        this.setActiveObject(aGroup, e);\n      }\n    },\n\n    /**\n     * @private\n     */\n    _collectObjects: function(e) {\n      var group = [],\n          currentObject,\n          x1 = this._groupSelector.ex,\n          y1 = this._groupSelector.ey,\n          x2 = x1 + this._groupSelector.left,\n          y2 = y1 + this._groupSelector.top,\n          selectionX1Y1 = new fabric.Point(min(x1, x2), min(y1, y2)),\n          selectionX2Y2 = new fabric.Point(max(x1, x2), max(y1, y2)),\n          allowIntersect = !this.selectionFullyContained,\n          isClick = x1 === x2 && y1 === y2;\n      // we iterate reverse order to collect top first in case of click.\n      for (var i = this._objects.length; i--; ) {\n        currentObject = this._objects[i];\n\n        if (!currentObject || !currentObject.selectable || !currentObject.visible) {\n          continue;\n        }\n\n        if ((allowIntersect && currentObject.intersectsWithRect(selectionX1Y1, selectionX2Y2)) ||\n            currentObject.isContainedWithinRect(selectionX1Y1, selectionX2Y2) ||\n            (allowIntersect && currentObject.containsPoint(selectionX1Y1)) ||\n            (allowIntersect && currentObject.containsPoint(selectionX2Y2))\n        ) {\n          group.push(currentObject);\n          // only add one object if it's a click\n          if (isClick) {\n            break;\n          }\n        }\n      }\n\n      if (group.length > 1) {\n        group = group.filter(function(object) {\n          return !object.onSelect({ e: e });\n        });\n      }\n\n      return group;\n    },\n\n    /**\n     * @private\n     */\n    _maybeGroupObjects: function(e) {\n      if (this.selection && this._groupSelector) {\n        this._groupSelectedObjects(e);\n      }\n      this.setCursor(this.defaultCursor);\n      // clear selection and current transformation\n      this._groupSelector = null;\n    }\n  });\n\n})();\n\n\n(function () {\n  fabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n\n    /**\n     * Exports canvas element to a dataurl image. Note that when multiplier is used, cropping is scaled appropriately\n     * @param {Object} [options] Options object\n     * @param {String} [options.format=png] The format of the output image. Either \"jpeg\" or \"png\"\n     * @param {Number} [options.quality=1] Quality level (0..1). Only used for jpeg.\n     * @param {Number} [options.multiplier=1] Multiplier to scale by, to have consistent\n     * @param {Number} [options.left] Cropping left offset. Introduced in v1.2.14\n     * @param {Number} [options.top] Cropping top offset. Introduced in v1.2.14\n     * @param {Number} [options.width] Cropping width. Introduced in v1.2.14\n     * @param {Number} [options.height] Cropping height. Introduced in v1.2.14\n     * @param {Boolean} [options.enableRetinaScaling] Enable retina scaling for clone image. Introduce in 2.0.0\n     * @return {String} Returns a data: URL containing a representation of the object in the format specified by options.format\n     * @see {@link http://jsfiddle.net/fabricjs/NfZVb/|jsFiddle demo}\n     * @example <caption>Generate jpeg dataURL with lower quality</caption>\n     * var dataURL = canvas.toDataURL({\n     *   format: 'jpeg',\n     *   quality: 0.8\n     * });\n     * @example <caption>Generate cropped png dataURL (clipping of canvas)</caption>\n     * var dataURL = canvas.toDataURL({\n     *   format: 'png',\n     *   left: 100,\n     *   top: 100,\n     *   width: 200,\n     *   height: 200\n     * });\n     * @example <caption>Generate double scaled png dataURL</caption>\n     * var dataURL = canvas.toDataURL({\n     *   format: 'png',\n     *   multiplier: 2\n     * });\n     */\n    toDataURL: function (options) {\n      options || (options = { });\n\n      var format = options.format || 'png',\n          quality = options.quality || 1,\n          multiplier = (options.multiplier || 1) * (options.enableRetinaScaling ? this.getRetinaScaling() : 1),\n          canvasEl = this.toCanvasElement(multiplier, options);\n      return fabric.util.toDataURL(canvasEl, format, quality);\n    },\n\n    /**\n     * Create a new HTMLCanvas element painted with the current canvas content.\n     * No need to resize the actual one or repaint it.\n     * Will transfer object ownership to a new canvas, paint it, and set everything back.\n     * This is an intermediary step used to get to a dataUrl but also it is useful to\n     * create quick image copies of a canvas without passing for the dataUrl string\n     * @param {Number} [multiplier] a zoom factor.\n     * @param {Object} [cropping] Cropping informations\n     * @param {Number} [cropping.left] Cropping left offset.\n     * @param {Number} [cropping.top] Cropping top offset.\n     * @param {Number} [cropping.width] Cropping width.\n     * @param {Number} [cropping.height] Cropping height.\n     */\n    toCanvasElement: function(multiplier, cropping) {\n      multiplier = multiplier || 1;\n      cropping = cropping || { };\n      var scaledWidth = (cropping.width || this.width) * multiplier,\n          scaledHeight = (cropping.height || this.height) * multiplier,\n          zoom = this.getZoom(),\n          originalWidth = this.width,\n          originalHeight = this.height,\n          newZoom = zoom * multiplier,\n          vp = this.viewportTransform,\n          translateX = (vp[4] - (cropping.left || 0)) * multiplier,\n          translateY = (vp[5] - (cropping.top || 0)) * multiplier,\n          originalInteractive = this.interactive,\n          newVp = [newZoom, 0, 0, newZoom, translateX, translateY],\n          originalRetina = this.enableRetinaScaling,\n          canvasEl = fabric.util.createCanvasElement(),\n          originalContextTop = this.contextTop;\n      canvasEl.width = scaledWidth;\n      canvasEl.height = scaledHeight;\n      this.contextTop = null;\n      this.enableRetinaScaling = false;\n      this.interactive = false;\n      this.viewportTransform = newVp;\n      this.width = scaledWidth;\n      this.height = scaledHeight;\n      this.calcViewportBoundaries();\n      this.renderCanvas(canvasEl.getContext('2d'), this._objects);\n      this.viewportTransform = vp;\n      this.width = originalWidth;\n      this.height = originalHeight;\n      this.calcViewportBoundaries();\n      this.interactive = originalInteractive;\n      this.enableRetinaScaling = originalRetina;\n      this.contextTop = originalContextTop;\n      return canvasEl;\n    },\n  });\n\n})();\n\n\nfabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n  /**\n   * Populates canvas with data from the specified JSON.\n   * JSON format must conform to the one of {@link fabric.Canvas#toJSON}\n   * @param {String|Object} json JSON string or object\n   * @param {Function} callback Callback, invoked when json is parsed\n   *                            and corresponding objects (e.g: {@link fabric.Image})\n   *                            are initialized\n   * @param {Function} [reviver] Method for further parsing of JSON elements, called after each fabric object created.\n   * @return {fabric.Canvas} instance\n   * @chainable\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#deserialization}\n   * @see {@link http://jsfiddle.net/fabricjs/fmgXt/|jsFiddle demo}\n   * @example <caption>loadFromJSON</caption>\n   * canvas.loadFromJSON(json, canvas.renderAll.bind(canvas));\n   * @example <caption>loadFromJSON with reviver</caption>\n   * canvas.loadFromJSON(json, canvas.renderAll.bind(canvas), function(o, object) {\n   *   // `o` = json object\n   *   // `object` = fabric.Object instance\n   *   // ... do some stuff ...\n   * });\n   */\n  loadFromJSON: function (json, callback, reviver) {\n    if (!json) {\n      return;\n    }\n\n    // serialize if it wasn't already\n    var serialized = (typeof json === 'string')\n      ? JSON.parse(json)\n      : fabric.util.object.clone(json);\n\n    var _this = this,\n        clipPath = serialized.clipPath,\n        renderOnAddRemove = this.renderOnAddRemove;\n\n    this.renderOnAddRemove = false;\n\n    delete serialized.clipPath;\n\n    this._enlivenObjects(serialized.objects, function (enlivenedObjects) {\n      _this.clear();\n      _this._setBgOverlay(serialized, function () {\n        if (clipPath) {\n          _this._enlivenObjects([clipPath], function (enlivenedCanvasClip) {\n            _this.clipPath = enlivenedCanvasClip[0];\n            _this.__setupCanvas.call(_this, serialized, enlivenedObjects, renderOnAddRemove, callback);\n          });\n        }\n        else {\n          _this.__setupCanvas.call(_this, serialized, enlivenedObjects, renderOnAddRemove, callback);\n        }\n      });\n    }, reviver);\n    return this;\n  },\n\n  /**\n   * @private\n   * @param {Object} serialized Object with background and overlay information\n   * @param {Array} restored canvas objects\n   * @param {Function} cached renderOnAddRemove callback\n   * @param {Function} callback Invoked after all background and overlay images/patterns loaded\n   */\n  __setupCanvas: function(serialized, enlivenedObjects, renderOnAddRemove, callback) {\n    var _this = this;\n    enlivenedObjects.forEach(function(obj, index) {\n      // we splice the array just in case some custom classes restored from JSON\n      // will add more object to canvas at canvas init.\n      _this.insertAt(obj, index);\n    });\n    this.renderOnAddRemove = renderOnAddRemove;\n    // remove parts i cannot set as options\n    delete serialized.objects;\n    delete serialized.backgroundImage;\n    delete serialized.overlayImage;\n    delete serialized.background;\n    delete serialized.overlay;\n    // this._initOptions does too many things to just\n    // call it. Normally loading an Object from JSON\n    // create the Object instance. Here the Canvas is\n    // already an instance and we are just loading things over it\n    this._setOptions(serialized);\n    this.renderAll();\n    callback && callback();\n  },\n\n  /**\n   * @private\n   * @param {Object} serialized Object with background and overlay information\n   * @param {Function} callback Invoked after all background and overlay images/patterns loaded\n   */\n  _setBgOverlay: function(serialized, callback) {\n    var loaded = {\n      backgroundColor: false,\n      overlayColor: false,\n      backgroundImage: false,\n      overlayImage: false\n    };\n\n    if (!serialized.backgroundImage && !serialized.overlayImage && !serialized.background && !serialized.overlay) {\n      callback && callback();\n      return;\n    }\n\n    var cbIfLoaded = function () {\n      if (loaded.backgroundImage && loaded.overlayImage && loaded.backgroundColor && loaded.overlayColor) {\n        callback && callback();\n      }\n    };\n\n    this.__setBgOverlay('backgroundImage', serialized.backgroundImage, loaded, cbIfLoaded);\n    this.__setBgOverlay('overlayImage', serialized.overlayImage, loaded, cbIfLoaded);\n    this.__setBgOverlay('backgroundColor', serialized.background, loaded, cbIfLoaded);\n    this.__setBgOverlay('overlayColor', serialized.overlay, loaded, cbIfLoaded);\n  },\n\n  /**\n   * @private\n   * @param {String} property Property to set (backgroundImage, overlayImage, backgroundColor, overlayColor)\n   * @param {(Object|String)} value Value to set\n   * @param {Object} loaded Set loaded property to true if property is set\n   * @param {Object} callback Callback function to invoke after property is set\n   */\n  __setBgOverlay: function(property, value, loaded, callback) {\n    var _this = this;\n\n    if (!value) {\n      loaded[property] = true;\n      callback && callback();\n      return;\n    }\n\n    if (property === 'backgroundImage' || property === 'overlayImage') {\n      fabric.util.enlivenObjects([value], function(enlivedObject){\n        _this[property] = enlivedObject[0];\n        loaded[property] = true;\n        callback && callback();\n      });\n    }\n    else {\n      this['set' + fabric.util.string.capitalize(property, true)](value, function() {\n        loaded[property] = true;\n        callback && callback();\n      });\n    }\n  },\n\n  /**\n   * @private\n   * @param {Array} objects\n   * @param {Function} callback\n   * @param {Function} [reviver]\n   */\n  _enlivenObjects: function (objects, callback, reviver) {\n    if (!objects || objects.length === 0) {\n      callback && callback([]);\n      return;\n    }\n\n    fabric.util.enlivenObjects(objects, function(enlivenedObjects) {\n      callback && callback(enlivenedObjects);\n    }, null, reviver);\n  },\n\n  /**\n   * @private\n   * @param {String} format\n   * @param {Function} callback\n   */\n  _toDataURL: function (format, callback) {\n    this.clone(function (clone) {\n      callback(clone.toDataURL(format));\n    });\n  },\n\n  /**\n   * @private\n   * @param {String} format\n   * @param {Number} multiplier\n   * @param {Function} callback\n   */\n  _toDataURLWithMultiplier: function (format, multiplier, callback) {\n    this.clone(function (clone) {\n      callback(clone.toDataURLWithMultiplier(format, multiplier));\n    });\n  },\n\n  /**\n   * Clones canvas instance\n   * @param {Object} [callback] Receives cloned instance as a first argument\n   * @param {Array} [properties] Array of properties to include in the cloned canvas and children\n   */\n  clone: function (callback, properties) {\n    var data = JSON.stringify(this.toJSON(properties));\n    this.cloneWithoutData(function(clone) {\n      clone.loadFromJSON(data, function() {\n        callback && callback(clone);\n      });\n    });\n  },\n\n  /**\n   * Clones canvas instance without cloning existing data.\n   * This essentially copies canvas dimensions, clipping properties, etc.\n   * but leaves data empty (so that you can populate it with your own)\n   * @param {Object} [callback] Receives cloned instance as a first argument\n   */\n  cloneWithoutData: function(callback) {\n    var el = fabric.util.createCanvasElement();\n\n    el.width = this.width;\n    el.height = this.height;\n\n    var clone = new fabric.Canvas(el);\n    if (this.backgroundImage) {\n      clone.setBackgroundImage(this.backgroundImage.src, function() {\n        clone.renderAll();\n        callback && callback(clone);\n      });\n      clone.backgroundImageOpacity = this.backgroundImageOpacity;\n      clone.backgroundImageStretch = this.backgroundImageStretch;\n    }\n    else {\n      callback && callback(clone);\n    }\n  }\n});\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      clone = fabric.util.object.clone,\n      toFixed = fabric.util.toFixed,\n      capitalize = fabric.util.string.capitalize,\n      degreesToRadians = fabric.util.degreesToRadians,\n      supportsLineDash = fabric.StaticCanvas.supports('setLineDash'),\n      objectCaching = !fabric.isLikelyNode,\n      ALIASING_LIMIT = 2;\n\n  if (fabric.Object) {\n    return;\n  }\n\n  /**\n   * Root object class from which all 2d shape classes inherit from\n   * @class fabric.Object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#objects}\n   * @see {@link fabric.Object#initialize} for constructor definition\n   *\n   * @fires added\n   * @fires removed\n   *\n   * @fires selected\n   * @fires deselected\n   * @fires modified\n   * @fires modified\n   * @fires moved\n   * @fires scaled\n   * @fires rotated\n   * @fires skewed\n   *\n   * @fires rotating\n   * @fires scaling\n   * @fires moving\n   * @fires skewing\n   *\n   * @fires mousedown\n   * @fires mouseup\n   * @fires mouseover\n   * @fires mouseout\n   * @fires mousewheel\n   * @fires mousedblclick\n   *\n   * @fires dragover\n   * @fires dragenter\n   * @fires dragleave\n   * @fires drop\n   */\n  fabric.Object = fabric.util.createClass(fabric.CommonMethods, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Type of an object (rect, circle, path, etc.).\n     * Note that this property is meant to be read-only and not meant to be modified.\n     * If you modify, certain parts of Fabric (such as JSON loading) won't work correctly.\n     * @type String\n     * @default\n     */\n    type:                     'object',\n\n    /**\n     * Horizontal origin of transformation of an object (one of \"left\", \"right\", \"center\")\n     * See http://jsfiddle.net/1ow02gea/244/ on how originX/originY affect objects in groups\n     * @type String\n     * @default\n     */\n    originX:                  'left',\n\n    /**\n     * Vertical origin of transformation of an object (one of \"top\", \"bottom\", \"center\")\n     * See http://jsfiddle.net/1ow02gea/244/ on how originX/originY affect objects in groups\n     * @type String\n     * @default\n     */\n    originY:                  'top',\n\n    /**\n     * Top position of an object. Note that by default it's relative to object top. You can change this by setting originY={top/center/bottom}\n     * @type Number\n     * @default\n     */\n    top:                      0,\n\n    /**\n     * Left position of an object. Note that by default it's relative to object left. You can change this by setting originX={left/center/right}\n     * @type Number\n     * @default\n     */\n    left:                     0,\n\n    /**\n     * Object width\n     * @type Number\n     * @default\n     */\n    width:                    0,\n\n    /**\n     * Object height\n     * @type Number\n     * @default\n     */\n    height:                   0,\n\n    /**\n     * Object scale factor (horizontal)\n     * @type Number\n     * @default\n     */\n    scaleX:                   1,\n\n    /**\n     * Object scale factor (vertical)\n     * @type Number\n     * @default\n     */\n    scaleY:                   1,\n\n    /**\n     * When true, an object is rendered as flipped horizontally\n     * @type Boolean\n     * @default\n     */\n    flipX:                    false,\n\n    /**\n     * When true, an object is rendered as flipped vertically\n     * @type Boolean\n     * @default\n     */\n    flipY:                    false,\n\n    /**\n     * Opacity of an object\n     * @type Number\n     * @default\n     */\n    opacity:                  1,\n\n    /**\n     * Angle of rotation of an object (in degrees)\n     * @type Number\n     * @default\n     */\n    angle:                    0,\n\n    /**\n     * Angle of skew on x axes of an object (in degrees)\n     * @type Number\n     * @default\n     */\n    skewX:                    0,\n\n    /**\n     * Angle of skew on y axes of an object (in degrees)\n     * @type Number\n     * @default\n     */\n    skewY:                    0,\n\n    /**\n     * Size of object's controlling corners (in pixels)\n     * @type Number\n     * @default\n     */\n    cornerSize:               13,\n\n    /**\n     * Size of object's controlling corners when touch interaction is detected\n     * @type Number\n     * @default\n     */\n    touchCornerSize:               24,\n\n    /**\n     * When true, object's controlling corners are rendered as transparent inside (i.e. stroke instead of fill)\n     * @type Boolean\n     * @default\n     */\n    transparentCorners:       true,\n\n    /**\n     * Default cursor value used when hovering over this object on canvas\n     * @type String\n     * @default\n     */\n    hoverCursor:              null,\n\n    /**\n     * Default cursor value used when moving this object on canvas\n     * @type String\n     * @default\n     */\n    moveCursor:               null,\n\n    /**\n     * Padding between object and its controlling borders (in pixels)\n     * @type Number\n     * @default\n     */\n    padding:                  0,\n\n    /**\n     * Color of controlling borders of an object (when it's active)\n     * @type String\n     * @default\n     */\n    borderColor:              'rgb(178,204,255)',\n\n    /**\n     * Array specifying dash pattern of an object's borders (hasBorder must be true)\n     * @since 1.6.2\n     * @type Array\n     */\n    borderDashArray:          null,\n\n    /**\n     * Color of controlling corners of an object (when it's active)\n     * @type String\n     * @default\n     */\n    cornerColor:              'rgb(178,204,255)',\n\n    /**\n     * Color of controlling corners of an object (when it's active and transparentCorners false)\n     * @since 1.6.2\n     * @type String\n     * @default\n     */\n    cornerStrokeColor:        null,\n\n    /**\n     * Specify style of control, 'rect' or 'circle'\n     * @since 1.6.2\n     * @type String\n     */\n    cornerStyle:          'rect',\n\n    /**\n     * Array specifying dash pattern of an object's control (hasBorder must be true)\n     * @since 1.6.2\n     * @type Array\n     */\n    cornerDashArray:          null,\n\n    /**\n     * When true, this object will use center point as the origin of transformation\n     * when being scaled via the controls.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredScaling:          false,\n\n    /**\n     * When true, this object will use center point as the origin of transformation\n     * when being rotated via the controls.\n     * <b>Backwards incompatibility note:</b> This property replaces \"centerTransform\" (Boolean).\n     * @since 1.3.4\n     * @type Boolean\n     * @default\n     */\n    centeredRotation:         true,\n\n    /**\n     * Color of object's fill\n     * takes css colors https://www.w3.org/TR/css-color-3/\n     * @type String\n     * @default\n     */\n    fill:                     'rgb(0,0,0)',\n\n    /**\n     * Fill rule used to fill an object\n     * accepted values are nonzero, evenodd\n     * <b>Backwards incompatibility note:</b> This property was used for setting globalCompositeOperation until v1.4.12 (use `fabric.Object#globalCompositeOperation` instead)\n     * @type String\n     * @default\n     */\n    fillRule:                 'nonzero',\n\n    /**\n     * Composite rule used for canvas globalCompositeOperation\n     * @type String\n     * @default\n     */\n    globalCompositeOperation: 'source-over',\n\n    /**\n     * Background color of an object.\n     * takes css colors https://www.w3.org/TR/css-color-3/\n     * @type String\n     * @default\n     */\n    backgroundColor:          '',\n\n    /**\n     * Selection Background color of an object. colored layer behind the object when it is active.\n     * does not mix good with globalCompositeOperation methods.\n     * @type String\n     * @default\n     */\n    selectionBackgroundColor:          '',\n\n    /**\n     * When defined, an object is rendered via stroke and this property specifies its color\n     * takes css colors https://www.w3.org/TR/css-color-3/\n     * @type String\n     * @default\n     */\n    stroke:                   null,\n\n    /**\n     * Width of a stroke used to render this object\n     * @type Number\n     * @default\n     */\n    strokeWidth:              1,\n\n    /**\n     * Array specifying dash pattern of an object's stroke (stroke must be defined)\n     * @type Array\n     */\n    strokeDashArray:          null,\n\n    /**\n     * Line offset of an object's stroke\n     * @type Number\n     * @default\n     */\n    strokeDashOffset: 0,\n\n    /**\n     * Line endings style of an object's stroke (one of \"butt\", \"round\", \"square\")\n     * @type String\n     * @default\n     */\n    strokeLineCap:            'butt',\n\n    /**\n     * Corner style of an object's stroke (one of \"bevel\", \"round\", \"miter\")\n     * @type String\n     * @default\n     */\n    strokeLineJoin:           'miter',\n\n    /**\n     * Maximum miter length (used for strokeLineJoin = \"miter\") of an object's stroke\n     * @type Number\n     * @default\n     */\n    strokeMiterLimit:         4,\n\n    /**\n     * Shadow object representing shadow of this shape\n     * @type fabric.Shadow\n     * @default\n     */\n    shadow:                   null,\n\n    /**\n     * Opacity of object's controlling borders when object is active and moving\n     * @type Number\n     * @default\n     */\n    borderOpacityWhenMoving:  0.4,\n\n    /**\n     * Scale factor of object's controlling borders\n     * bigger number will make a thicker border\n     * border is 1, so this is basically a border thickness\n     * since there is no way to change the border itself.\n     * @type Number\n     * @default\n     */\n    borderScaleFactor:        1,\n\n    /**\n     * Minimum allowed scale value of an object\n     * @type Number\n     * @default\n     */\n    minScaleLimit:            0,\n\n    /**\n     * When set to `false`, an object can not be selected for modification (using either point-click-based or group-based selection).\n     * But events still fire on it.\n     * @type Boolean\n     * @default\n     */\n    selectable:               true,\n\n    /**\n     * When set to `false`, an object can not be a target of events. All events propagate through it. Introduced in v1.3.4\n     * @type Boolean\n     * @default\n     */\n    evented:                  true,\n\n    /**\n     * When set to `false`, an object is not rendered on canvas\n     * @type Boolean\n     * @default\n     */\n    visible:                  true,\n\n    /**\n     * When set to `false`, object's controls are not displayed and can not be used to manipulate object\n     * @type Boolean\n     * @default\n     */\n    hasControls:              true,\n\n    /**\n     * When set to `false`, object's controlling borders are not rendered\n     * @type Boolean\n     * @default\n     */\n    hasBorders:               true,\n\n    /**\n     * When set to `true`, objects are \"found\" on canvas on per-pixel basis rather than according to bounding box\n     * @type Boolean\n     * @default\n     */\n    perPixelTargetFind:       false,\n\n    /**\n     * When `false`, default object's values are not included in its serialization\n     * @type Boolean\n     * @default\n     */\n    includeDefaultValues:     true,\n\n    /**\n     * When `true`, object horizontal movement is locked\n     * @type Boolean\n     * @default\n     */\n    lockMovementX:            false,\n\n    /**\n     * When `true`, object vertical movement is locked\n     * @type Boolean\n     * @default\n     */\n    lockMovementY:            false,\n\n    /**\n     * When `true`, object rotation is locked\n     * @type Boolean\n     * @default\n     */\n    lockRotation:             false,\n\n    /**\n     * When `true`, object horizontal scaling is locked\n     * @type Boolean\n     * @default\n     */\n    lockScalingX:             false,\n\n    /**\n     * When `true`, object vertical scaling is locked\n     * @type Boolean\n     * @default\n     */\n    lockScalingY:             false,\n\n    /**\n     * When `true`, object horizontal skewing is locked\n     * @type Boolean\n     * @default\n     */\n    lockSkewingX:             false,\n\n    /**\n     * When `true`, object vertical skewing is locked\n     * @type Boolean\n     * @default\n     */\n    lockSkewingY:             false,\n\n    /**\n     * When `true`, object cannot be flipped by scaling into negative values\n     * @type Boolean\n     * @default\n     */\n    lockScalingFlip:          false,\n\n    /**\n     * When `true`, object is not exported in OBJECT/JSON\n     * @since 1.6.3\n     * @type Boolean\n     * @default\n     */\n    excludeFromExport:        false,\n\n    /**\n     * When `true`, object is cached on an additional canvas.\n     * When `false`, object is not cached unless necessary ( clipPath )\n     * default to true\n     * @since 1.7.0\n     * @type Boolean\n     * @default true\n     */\n    objectCaching:            objectCaching,\n\n    /**\n     * When `true`, object properties are checked for cache invalidation. In some particular\n     * situation you may want this to be disabled ( spray brush, very big, groups)\n     * or if your application does not allow you to modify properties for groups child you want\n     * to disable it for groups.\n     * default to false\n     * since 1.7.0\n     * @type Boolean\n     * @default false\n     */\n    statefullCache:            false,\n\n    /**\n     * When `true`, cache does not get updated during scaling. The picture will get blocky if scaled\n     * too much and will be redrawn with correct details at the end of scaling.\n     * this setting is performance and application dependant.\n     * default to true\n     * since 1.7.0\n     * @type Boolean\n     * @default true\n     */\n    noScaleCache:              true,\n\n    /**\n     * When `false`, the stoke width will scale with the object.\n     * When `true`, the stroke will always match the exact pixel size entered for stroke width.\n     * default to false\n     * @since 2.6.0\n     * @type Boolean\n     * @default false\n     * @type Boolean\n     * @default false\n     */\n    strokeUniform:              false,\n\n    /**\n     * When set to `true`, object's cache will be rerendered next render call.\n     * since 1.7.0\n     * @type Boolean\n     * @default true\n     */\n    dirty:                true,\n\n    /**\n     * keeps the value of the last hovered corner during mouse move.\n     * 0 is no corner, or 'mt', 'ml', 'mtr' etc..\n     * It should be private, but there is no harm in using it as\n     * a read-only property.\n     * @type number|string|any\n     * @default 0\n     */\n    __corner: 0,\n\n    /**\n     * Determines if the fill or the stroke is drawn first (one of \"fill\" or \"stroke\")\n     * @type String\n     * @default\n     */\n    paintFirst:           'fill',\n\n    /**\n     * When 'down', object is set to active on mousedown/touchstart\n     * When 'up', object is set to active on mouseup/touchend\n     * Experimental. Let's see if this breaks anything before supporting officially\n     * @private\n     * since 4.4.0\n     * @type String\n     * @default 'down'\n     */\n    activeOn:           'down',\n\n    /**\n     * List of properties to consider when checking if state\n     * of an object is changed (fabric.Object#hasStateChanged)\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: (\n      'top left width height scaleX scaleY flipX flipY originX originY transformMatrix ' +\n      'stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit ' +\n      'angle opacity fill globalCompositeOperation shadow visible backgroundColor ' +\n      'skewX skewY fillRule paintFirst clipPath strokeUniform'\n    ).split(' '),\n\n    /**\n     * List of properties to consider when checking if cache needs refresh\n     * Those properties are checked by statefullCache ON ( or lazy mode if we want ) or from single\n     * calls to Object.set(key, value). If the key is in this list, the object is marked as dirty\n     * and refreshed at the next render\n     * @type Array\n     */\n    cacheProperties: (\n      'fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform' +\n      ' strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath'\n    ).split(' '),\n\n    /**\n     * List of properties to consider for animating colors.\n     * @type Array\n     */\n    colorProperties: (\n      'fill stroke backgroundColor'\n    ).split(' '),\n\n    /**\n     * a fabricObject that, without stroke define a clipping area with their shape. filled in black\n     * the clipPath object gets used when the object has rendered, and the context is placed in the center\n     * of the object cacheCanvas.\n     * If you want 0,0 of a clipPath to align with an object center, use clipPath.originX/Y to 'center'\n     * @type fabric.Object\n     */\n    clipPath: undefined,\n\n    /**\n     * Meaningful ONLY when the object is used as clipPath.\n     * if true, the clipPath will make the object clip to the outside of the clipPath\n     * since 2.4.0\n     * @type boolean\n     * @default false\n     */\n    inverted: false,\n\n    /**\n     * Meaningful ONLY when the object is used as clipPath.\n     * if true, the clipPath will have its top and left relative to canvas, and will\n     * not be influenced by the object transform. This will make the clipPath relative\n     * to the canvas, but clipping just a particular object.\n     * WARNING this is beta, this feature may change or be renamed.\n     * since 2.4.0\n     * @type boolean\n     * @default false\n     */\n    absolutePositioned: false,\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     */\n    initialize: function(options) {\n      if (options) {\n        this.setOptions(options);\n      }\n    },\n\n    /**\n     * Create a the canvas used to keep the cached copy of the object\n     * @private\n     */\n    _createCacheCanvas: function() {\n      this._cacheProperties = {};\n      this._cacheCanvas = fabric.util.createCanvasElement();\n      this._cacheContext = this._cacheCanvas.getContext('2d');\n      this._updateCacheCanvas();\n      // if canvas gets created, is empty, so dirty.\n      this.dirty = true;\n    },\n\n    /**\n     * Limit the cache dimensions so that X * Y do not cross fabric.perfLimitSizeTotal\n     * and each side do not cross fabric.cacheSideLimit\n     * those numbers are configurable so that you can get as much detail as you want\n     * making bargain with performances.\n     * @param {Object} dims\n     * @param {Object} dims.width width of canvas\n     * @param {Object} dims.height height of canvas\n     * @param {Object} dims.zoomX zoomX zoom value to unscale the canvas before drawing cache\n     * @param {Object} dims.zoomY zoomY zoom value to unscale the canvas before drawing cache\n     * @return {Object}.width width of canvas\n     * @return {Object}.height height of canvas\n     * @return {Object}.zoomX zoomX zoom value to unscale the canvas before drawing cache\n     * @return {Object}.zoomY zoomY zoom value to unscale the canvas before drawing cache\n     */\n    _limitCacheSize: function(dims) {\n      var perfLimitSizeTotal = fabric.perfLimitSizeTotal,\n          width = dims.width, height = dims.height,\n          max = fabric.maxCacheSideLimit, min = fabric.minCacheSideLimit;\n      if (width <= max && height <= max && width * height <= perfLimitSizeTotal) {\n        if (width < min) {\n          dims.width = min;\n        }\n        if (height < min) {\n          dims.height = min;\n        }\n        return dims;\n      }\n      var ar = width / height, limitedDims = fabric.util.limitDimsByArea(ar, perfLimitSizeTotal),\n          capValue = fabric.util.capValue,\n          x = capValue(min, limitedDims.x, max),\n          y = capValue(min, limitedDims.y, max);\n      if (width > x) {\n        dims.zoomX /= width / x;\n        dims.width = x;\n        dims.capped = true;\n      }\n      if (height > y) {\n        dims.zoomY /= height / y;\n        dims.height = y;\n        dims.capped = true;\n      }\n      return dims;\n    },\n\n    /**\n     * Return the dimension and the zoom level needed to create a cache canvas\n     * big enough to host the object to be cached.\n     * @private\n     * @return {Object}.x width of object to be cached\n     * @return {Object}.y height of object to be cached\n     * @return {Object}.width width of canvas\n     * @return {Object}.height height of canvas\n     * @return {Object}.zoomX zoomX zoom value to unscale the canvas before drawing cache\n     * @return {Object}.zoomY zoomY zoom value to unscale the canvas before drawing cache\n     */\n    _getCacheCanvasDimensions: function() {\n      var objectScale = this.getTotalObjectScaling(),\n          // caculate dimensions without skewing\n          dim = this._getTransformedDimensions(0, 0),\n          neededX = dim.x * objectScale.scaleX / this.scaleX,\n          neededY = dim.y * objectScale.scaleY / this.scaleY;\n      return {\n        // for sure this ALIASING_LIMIT is slightly creating problem\n        // in situation in which the cache canvas gets an upper limit\n        // also objectScale contains already scaleX and scaleY\n        width: neededX + ALIASING_LIMIT,\n        height: neededY + ALIASING_LIMIT,\n        zoomX: objectScale.scaleX,\n        zoomY: objectScale.scaleY,\n        x: neededX,\n        y: neededY\n      };\n    },\n\n    /**\n     * Update width and height of the canvas for cache\n     * returns true or false if canvas needed resize.\n     * @private\n     * @return {Boolean} true if the canvas has been resized\n     */\n    _updateCacheCanvas: function() {\n      var targetCanvas = this.canvas;\n      if (this.noScaleCache && targetCanvas && targetCanvas._currentTransform) {\n        var target = targetCanvas._currentTransform.target,\n            action = targetCanvas._currentTransform.action;\n        if (this === target && action.slice && action.slice(0, 5) === 'scale') {\n          return false;\n        }\n      }\n      var canvas = this._cacheCanvas,\n          dims = this._limitCacheSize(this._getCacheCanvasDimensions()),\n          minCacheSize = fabric.minCacheSideLimit,\n          width = dims.width, height = dims.height, drawingWidth, drawingHeight,\n          zoomX = dims.zoomX, zoomY = dims.zoomY,\n          dimensionsChanged = width !== this.cacheWidth || height !== this.cacheHeight,\n          zoomChanged = this.zoomX !== zoomX || this.zoomY !== zoomY,\n          shouldRedraw = dimensionsChanged || zoomChanged,\n          additionalWidth = 0, additionalHeight = 0, shouldResizeCanvas = false;\n      if (dimensionsChanged) {\n        var canvasWidth = this._cacheCanvas.width,\n            canvasHeight = this._cacheCanvas.height,\n            sizeGrowing = width > canvasWidth || height > canvasHeight,\n            sizeShrinking = (width < canvasWidth * 0.9 || height < canvasHeight * 0.9) &&\n              canvasWidth > minCacheSize && canvasHeight > minCacheSize;\n        shouldResizeCanvas = sizeGrowing || sizeShrinking;\n        if (sizeGrowing && !dims.capped && (width > minCacheSize || height > minCacheSize)) {\n          additionalWidth = width * 0.1;\n          additionalHeight = height * 0.1;\n        }\n      }\n      if (shouldRedraw) {\n        if (shouldResizeCanvas) {\n          canvas.width = Math.ceil(width + additionalWidth);\n          canvas.height = Math.ceil(height + additionalHeight);\n        }\n        else {\n          this._cacheContext.setTransform(1, 0, 0, 1, 0, 0);\n          this._cacheContext.clearRect(0, 0, canvas.width, canvas.height);\n        }\n        drawingWidth = dims.x / 2;\n        drawingHeight = dims.y / 2;\n        this.cacheTranslationX = Math.round(canvas.width / 2 - drawingWidth) + drawingWidth;\n        this.cacheTranslationY = Math.round(canvas.height / 2 - drawingHeight) + drawingHeight;\n        this.cacheWidth = width;\n        this.cacheHeight = height;\n        this._cacheContext.translate(this.cacheTranslationX, this.cacheTranslationY);\n        this._cacheContext.scale(zoomX, zoomY);\n        this.zoomX = zoomX;\n        this.zoomY = zoomY;\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Sets object's properties from options\n     * @param {Object} [options] Options object\n     */\n    setOptions: function(options) {\n      this._setOptions(options);\n      this._initGradient(options.fill, 'fill');\n      this._initGradient(options.stroke, 'stroke');\n      this._initPattern(options.fill, 'fill');\n      this._initPattern(options.stroke, 'stroke');\n    },\n\n    /**\n     * Transforms context when rendering an object\n     * @param {CanvasRenderingContext2D} ctx Context\n     */\n    transform: function(ctx) {\n      var needFullTransform = (this.group && !this.group._transformDone) ||\n         (this.group && this.canvas && ctx === this.canvas.contextTop);\n      var m = this.calcTransformMatrix(!needFullTransform);\n      ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n    },\n\n    /**\n     * Returns an object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS,\n\n          object = {\n            type:                     this.type,\n            version:                  fabric.version,\n            originX:                  this.originX,\n            originY:                  this.originY,\n            left:                     toFixed(this.left, NUM_FRACTION_DIGITS),\n            top:                      toFixed(this.top, NUM_FRACTION_DIGITS),\n            width:                    toFixed(this.width, NUM_FRACTION_DIGITS),\n            height:                   toFixed(this.height, NUM_FRACTION_DIGITS),\n            fill:                     (this.fill && this.fill.toObject) ? this.fill.toObject() : this.fill,\n            stroke:                   (this.stroke && this.stroke.toObject) ? this.stroke.toObject() : this.stroke,\n            strokeWidth:              toFixed(this.strokeWidth, NUM_FRACTION_DIGITS),\n            strokeDashArray:          this.strokeDashArray ? this.strokeDashArray.concat() : this.strokeDashArray,\n            strokeLineCap:            this.strokeLineCap,\n            strokeDashOffset:         this.strokeDashOffset,\n            strokeLineJoin:           this.strokeLineJoin,\n            strokeUniform:            this.strokeUniform,\n            strokeMiterLimit:         toFixed(this.strokeMiterLimit, NUM_FRACTION_DIGITS),\n            scaleX:                   toFixed(this.scaleX, NUM_FRACTION_DIGITS),\n            scaleY:                   toFixed(this.scaleY, NUM_FRACTION_DIGITS),\n            angle:                    toFixed(this.angle, NUM_FRACTION_DIGITS),\n            flipX:                    this.flipX,\n            flipY:                    this.flipY,\n            opacity:                  toFixed(this.opacity, NUM_FRACTION_DIGITS),\n            shadow:                   (this.shadow && this.shadow.toObject) ? this.shadow.toObject() : this.shadow,\n            visible:                  this.visible,\n            backgroundColor:          this.backgroundColor,\n            fillRule:                 this.fillRule,\n            paintFirst:               this.paintFirst,\n            globalCompositeOperation: this.globalCompositeOperation,\n            skewX:                    toFixed(this.skewX, NUM_FRACTION_DIGITS),\n            skewY:                    toFixed(this.skewY, NUM_FRACTION_DIGITS),\n          };\n\n      if (this.clipPath) {\n        object.clipPath = this.clipPath.toObject(propertiesToInclude);\n        object.clipPath.inverted = this.clipPath.inverted;\n        object.clipPath.absolutePositioned = this.clipPath.absolutePositioned;\n      }\n\n      fabric.util.populateWithProperties(this, object, propertiesToInclude);\n      if (!this.includeDefaultValues) {\n        object = this._removeDefaultValues(object);\n      }\n\n      return object;\n    },\n\n    /**\n     * Returns (dataless) object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toDatalessObject: function(propertiesToInclude) {\n      // will be overwritten by subclasses\n      return this.toObject(propertiesToInclude);\n    },\n\n    /**\n     * @private\n     * @param {Object} object\n     */\n    _removeDefaultValues: function(object) {\n      var prototype = fabric.util.getKlass(object.type).prototype,\n          stateProperties = prototype.stateProperties;\n      stateProperties.forEach(function(prop) {\n        if (prop === 'left' || prop === 'top') {\n          return;\n        }\n        if (object[prop] === prototype[prop]) {\n          delete object[prop];\n        }\n        var isArray = Object.prototype.toString.call(object[prop]) === '[object Array]' &&\n                      Object.prototype.toString.call(prototype[prop]) === '[object Array]';\n\n        // basically a check for [] === []\n        if (isArray && object[prop].length === 0 && prototype[prop].length === 0) {\n          delete object[prop];\n        }\n      });\n\n      return object;\n    },\n\n    /**\n     * Returns a string representation of an instance\n     * @return {String}\n     */\n    toString: function() {\n      return '#<fabric.' + capitalize(this.type) + '>';\n    },\n\n    /**\n     * Return the object scale factor counting also the group scaling\n     * @return {Object} object with scaleX and scaleY properties\n     */\n    getObjectScaling: function() {\n      var options = fabric.util.qrDecompose(this.calcTransformMatrix());\n      return { scaleX: Math.abs(options.scaleX), scaleY: Math.abs(options.scaleY) };\n    },\n\n    /**\n     * Return the object scale factor counting also the group scaling, zoom and retina\n     * @return {Object} object with scaleX and scaleY properties\n     */\n    getTotalObjectScaling: function() {\n      var scale = this.getObjectScaling(), scaleX = scale.scaleX, scaleY = scale.scaleY;\n      if (this.canvas) {\n        var zoom = this.canvas.getZoom();\n        var retina = this.canvas.getRetinaScaling();\n        scaleX *= zoom * retina;\n        scaleY *= zoom * retina;\n      }\n      return { scaleX: scaleX, scaleY: scaleY };\n    },\n\n    /**\n     * Return the object opacity counting also the group property\n     * @return {Number}\n     */\n    getObjectOpacity: function() {\n      var opacity = this.opacity;\n      if (this.group) {\n        opacity *= this.group.getObjectOpacity();\n      }\n      return opacity;\n    },\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     * @return {fabric.Object} thisArg\n     */\n    _set: function(key, value) {\n      var shouldConstrainValue = (key === 'scaleX' || key === 'scaleY'),\n          isChanged = this[key] !== value, groupNeedsUpdate = false;\n\n      if (shouldConstrainValue) {\n        value = this._constrainScale(value);\n      }\n      if (key === 'scaleX' && value < 0) {\n        this.flipX = !this.flipX;\n        value *= -1;\n      }\n      else if (key === 'scaleY' && value < 0) {\n        this.flipY = !this.flipY;\n        value *= -1;\n      }\n      else if (key === 'shadow' && value && !(value instanceof fabric.Shadow)) {\n        value = new fabric.Shadow(value);\n      }\n      else if (key === 'dirty' && this.group) {\n        this.group.set('dirty', value);\n      }\n\n      this[key] = value;\n\n      if (isChanged) {\n        groupNeedsUpdate = this.group && this.group.isOnACache();\n        if (this.cacheProperties.indexOf(key) > -1) {\n          this.dirty = true;\n          groupNeedsUpdate && this.group.set('dirty', true);\n        }\n        else if (groupNeedsUpdate && this.stateProperties.indexOf(key) > -1) {\n          this.group.set('dirty', true);\n        }\n      }\n      return this;\n    },\n\n    /**\n     * This callback function is called by the parent group of an object every\n     * time a non-delegated property changes on the group. It is passed the key\n     * and value as parameters. Not adding in this function's signature to avoid\n     * Travis build error about unused variables.\n     */\n    setOnGroup: function() {\n      // implemented by sub-classes, as needed.\n    },\n\n    /**\n     * Retrieves viewportTransform from Object's canvas if possible\n     * @method getViewportTransform\n     * @memberOf fabric.Object.prototype\n     * @return {Array}\n     */\n    getViewportTransform: function() {\n      if (this.canvas && this.canvas.viewportTransform) {\n        return this.canvas.viewportTransform;\n      }\n      return fabric.iMatrix.concat();\n    },\n\n    /*\n     * @private\n     * return if the object would be visible in rendering\n     * @memberOf fabric.Object.prototype\n     * @return {Boolean}\n     */\n    isNotVisible: function() {\n      return this.opacity === 0 ||\n        (!this.width && !this.height && this.strokeWidth === 0) ||\n        !this.visible;\n    },\n\n    /**\n     * Renders an object on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    render: function(ctx) {\n      // do not render if width/height are zeros or object is not visible\n      if (this.isNotVisible()) {\n        return;\n      }\n      if (this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen()) {\n        return;\n      }\n      ctx.save();\n      this._setupCompositeOperation(ctx);\n      this.drawSelectionBackground(ctx);\n      this.transform(ctx);\n      this._setOpacity(ctx);\n      this._setShadow(ctx, this);\n      if (this.shouldCache()) {\n        this.renderCache();\n        this.drawCacheOnCanvas(ctx);\n      }\n      else {\n        this._removeCacheCanvas();\n        this.dirty = false;\n        this.drawObject(ctx);\n        if (this.objectCaching && this.statefullCache) {\n          this.saveState({ propertySet: 'cacheProperties' });\n        }\n      }\n      ctx.restore();\n    },\n\n    renderCache: function(options) {\n      options = options || {};\n      if (!this._cacheCanvas) {\n        this._createCacheCanvas();\n      }\n      if (this.isCacheDirty()) {\n        this.statefullCache && this.saveState({ propertySet: 'cacheProperties' });\n        this.drawObject(this._cacheContext, options.forClipping);\n        this.dirty = false;\n      }\n    },\n\n    /**\n     * Remove cacheCanvas and its dimensions from the objects\n     */\n    _removeCacheCanvas: function() {\n      this._cacheCanvas = null;\n      this.cacheWidth = 0;\n      this.cacheHeight = 0;\n    },\n\n    /**\n     * return true if the object will draw a stroke\n     * Does not consider text styles. This is just a shortcut used at rendering time\n     * We want it to be an approximation and be fast.\n     * wrote to avoid extra caching, it has to return true when stroke happens,\n     * can guess when it will not happen at 100% chance, does not matter if it misses\n     * some use case where the stroke is invisible.\n     * @since 3.0.0\n     * @returns Boolean\n     */\n    hasStroke: function() {\n      return this.stroke && this.stroke !== 'transparent' && this.strokeWidth !== 0;\n    },\n\n    /**\n     * return true if the object will draw a fill\n     * Does not consider text styles. This is just a shortcut used at rendering time\n     * We want it to be an approximation and be fast.\n     * wrote to avoid extra caching, it has to return true when fill happens,\n     * can guess when it will not happen at 100% chance, does not matter if it misses\n     * some use case where the fill is invisible.\n     * @since 3.0.0\n     * @returns Boolean\n     */\n    hasFill: function() {\n      return this.fill && this.fill !== 'transparent';\n    },\n\n    /**\n     * When set to `true`, force the object to have its own cache, even if it is inside a group\n     * it may be needed when your object behave in a particular way on the cache and always needs\n     * its own isolated canvas to render correctly.\n     * Created to be overridden\n     * since 1.7.12\n     * @returns Boolean\n     */\n    needsItsOwnCache: function() {\n      if (this.paintFirst === 'stroke' &&\n        this.hasFill() && this.hasStroke() && typeof this.shadow === 'object') {\n        return true;\n      }\n      if (this.clipPath) {\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Decide if the object should cache or not. Create its own cache level\n     * objectCaching is a global flag, wins over everything\n     * needsItsOwnCache should be used when the object drawing method requires\n     * a cache step. None of the fabric classes requires it.\n     * Generally you do not cache objects in groups because the group outside is cached.\n     * Read as: cache if is needed, or if the feature is enabled but we are not already caching.\n     * @return {Boolean}\n     */\n    shouldCache: function() {\n      this.ownCaching = this.needsItsOwnCache() || (\n        this.objectCaching &&\n        (!this.group || !this.group.isOnACache())\n      );\n      return this.ownCaching;\n    },\n\n    /**\n     * Check if this object or a child object will cast a shadow\n     * used by Group.shouldCache to know if child has a shadow recursively\n     * @return {Boolean}\n     */\n    willDrawShadow: function() {\n      return !!this.shadow && (this.shadow.offsetX !== 0 || this.shadow.offsetY !== 0);\n    },\n\n    /**\n     * Execute the drawing operation for an object clipPath\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawClipPathOnCache: function(ctx) {\n      var path = this.clipPath;\n      ctx.save();\n      // DEBUG: uncomment this line, comment the following\n      // ctx.globalAlpha = 0.4\n      if (path.inverted) {\n        ctx.globalCompositeOperation = 'destination-out';\n      }\n      else {\n        ctx.globalCompositeOperation = 'destination-in';\n      }\n      //ctx.scale(1 / 2, 1 / 2);\n      if (path.absolutePositioned) {\n        var m = fabric.util.invertTransform(this.calcTransformMatrix());\n        ctx.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n      }\n      path.transform(ctx);\n      ctx.scale(1 / path.zoomX, 1 / path.zoomY);\n      ctx.drawImage(path._cacheCanvas, -path.cacheTranslationX, -path.cacheTranslationY);\n      ctx.restore();\n    },\n\n    /**\n     * Execute the drawing operation for an object on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawObject: function(ctx, forClipping) {\n      var originalFill = this.fill, originalStroke = this.stroke;\n      if (forClipping) {\n        this.fill = 'black';\n        this.stroke = '';\n        this._setClippingProperties(ctx);\n      }\n      else {\n        this._renderBackground(ctx);\n      }\n      this._render(ctx);\n      this._drawClipPath(ctx);\n      this.fill = originalFill;\n      this.stroke = originalStroke;\n    },\n\n    _drawClipPath: function(ctx) {\n      var path = this.clipPath;\n      if (!path) { return; }\n      // needed to setup a couple of variables\n      // path canvas gets overridden with this one.\n      // TODO find a better solution?\n      path.canvas = this.canvas;\n      path.shouldCache();\n      path._transformDone = true;\n      path.renderCache({ forClipping: true });\n      this.drawClipPathOnCache(ctx);\n    },\n\n    /**\n     * Paint the cached copy of the object on the target context.\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawCacheOnCanvas: function(ctx) {\n      ctx.scale(1 / this.zoomX, 1 / this.zoomY);\n      ctx.drawImage(this._cacheCanvas, -this.cacheTranslationX, -this.cacheTranslationY);\n    },\n\n    /**\n     * Check if cache is dirty\n     * @param {Boolean} skipCanvas skip canvas checks because this object is painted\n     * on parent canvas.\n     */\n    isCacheDirty: function(skipCanvas) {\n      if (this.isNotVisible()) {\n        return false;\n      }\n      if (this._cacheCanvas && !skipCanvas && this._updateCacheCanvas()) {\n        // in this case the context is already cleared.\n        return true;\n      }\n      else {\n        if (this.dirty ||\n          (this.clipPath && this.clipPath.absolutePositioned) ||\n          (this.statefullCache && this.hasStateChanged('cacheProperties'))\n        ) {\n          if (this._cacheCanvas && !skipCanvas) {\n            var width = this.cacheWidth / this.zoomX;\n            var height = this.cacheHeight / this.zoomY;\n            this._cacheContext.clearRect(-width / 2, -height / 2, width, height);\n          }\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Draws a background for the object big as its untransformed dimensions\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderBackground: function(ctx) {\n      if (!this.backgroundColor) {\n        return;\n      }\n      var dim = this._getNonTransformedDimensions();\n      ctx.fillStyle = this.backgroundColor;\n\n      ctx.fillRect(\n        -dim.x / 2,\n        -dim.y / 2,\n        dim.x,\n        dim.y\n      );\n      // if there is background color no other shadows\n      // should be casted\n      this._removeShadow(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _setOpacity: function(ctx) {\n      if (this.group && !this.group._transformDone) {\n        ctx.globalAlpha = this.getObjectOpacity();\n      }\n      else {\n        ctx.globalAlpha *= this.opacity;\n      }\n    },\n\n    _setStrokeStyles: function(ctx, decl) {\n      var stroke = decl.stroke;\n      if (stroke) {\n        ctx.lineWidth = decl.strokeWidth;\n        ctx.lineCap = decl.strokeLineCap;\n        ctx.lineDashOffset = decl.strokeDashOffset;\n        ctx.lineJoin = decl.strokeLineJoin;\n        ctx.miterLimit = decl.strokeMiterLimit;\n        if (stroke.toLive) {\n          if (stroke.gradientUnits === 'percentage' || stroke.gradientTrasnform || stroke.patternTransform) {\n            // need to transform gradient in a pattern.\n            // this is a slow process. If you are hitting this codepath, and the object\n            // is not using caching, you should consider switching it on.\n            // we need a canvas as big as the current object caching canvas.\n            this._applyPatternForTransformedGradient(ctx, stroke);\n          }\n          else {\n            // is a simple gradient or pattern\n            ctx.strokeStyle = stroke.toLive(ctx, this);\n            this._applyPatternGradientTransform(ctx, stroke);\n          }\n        }\n        else {\n          // is a color\n          ctx.strokeStyle = decl.stroke;\n        }\n      }\n    },\n\n    _setFillStyles: function(ctx, decl) {\n      var fill = decl.fill;\n      if (fill) {\n        if (fill.toLive) {\n          ctx.fillStyle = fill.toLive(ctx, this);\n          this._applyPatternGradientTransform(ctx, decl.fill);\n        }\n        else {\n          ctx.fillStyle = fill;\n        }\n      }\n    },\n\n    _setClippingProperties: function(ctx) {\n      ctx.globalAlpha = 1;\n      ctx.strokeStyle = 'transparent';\n      ctx.fillStyle = '#000000';\n    },\n\n    /**\n     * @private\n     * Sets line dash\n     * @param {CanvasRenderingContext2D} ctx Context to set the dash line on\n     * @param {Array} dashArray array representing dashes\n     * @param {Function} alternative function to call if browser does not support lineDash\n     */\n    _setLineDash: function(ctx, dashArray, alternative) {\n      if (!dashArray || dashArray.length === 0) {\n        return;\n      }\n      // Spec requires the concatenation of two copies the dash list when the number of elements is odd\n      if (1 & dashArray.length) {\n        dashArray.push.apply(dashArray, dashArray);\n      }\n      if (supportsLineDash) {\n        ctx.setLineDash(dashArray);\n      }\n      else {\n        alternative && alternative(ctx);\n      }\n    },\n\n    /**\n     * Renders controls and borders for the object\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Object} [styleOverride] properties to override the object style\n     */\n    _renderControls: function(ctx, styleOverride) {\n      var vpt = this.getViewportTransform(),\n          matrix = this.calcTransformMatrix(),\n          options, drawBorders, drawControls;\n      styleOverride = styleOverride || { };\n      drawBorders = typeof styleOverride.hasBorders !== 'undefined' ? styleOverride.hasBorders : this.hasBorders;\n      drawControls = typeof styleOverride.hasControls !== 'undefined' ? styleOverride.hasControls : this.hasControls;\n      matrix = fabric.util.multiplyTransformMatrices(vpt, matrix);\n      options = fabric.util.qrDecompose(matrix);\n      ctx.save();\n      ctx.translate(options.translateX, options.translateY);\n      ctx.lineWidth = 1 * this.borderScaleFactor;\n      if (!this.group) {\n        ctx.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1;\n      }\n      if (styleOverride.forActiveSelection) {\n        ctx.rotate(degreesToRadians(options.angle));\n        drawBorders && this.drawBordersInGroup(ctx, options, styleOverride);\n      }\n      else {\n        ctx.rotate(degreesToRadians(this.angle));\n        drawBorders && this.drawBorders(ctx, styleOverride);\n      }\n      drawControls && this.drawControls(ctx, styleOverride);\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _setShadow: function(ctx) {\n      if (!this.shadow) {\n        return;\n      }\n\n      var shadow = this.shadow, canvas = this.canvas, scaling,\n          multX = (canvas && canvas.viewportTransform[0]) || 1,\n          multY = (canvas && canvas.viewportTransform[3]) || 1;\n      if (shadow.nonScaling) {\n        scaling = { scaleX: 1, scaleY: 1 };\n      }\n      else {\n        scaling = this.getObjectScaling();\n      }\n      if (canvas && canvas._isRetinaScaling()) {\n        multX *= fabric.devicePixelRatio;\n        multY *= fabric.devicePixelRatio;\n      }\n      ctx.shadowColor = shadow.color;\n      ctx.shadowBlur = shadow.blur * fabric.browserShadowBlurConstant *\n        (multX + multY) * (scaling.scaleX + scaling.scaleY) / 4;\n      ctx.shadowOffsetX = shadow.offsetX * multX * scaling.scaleX;\n      ctx.shadowOffsetY = shadow.offsetY * multY * scaling.scaleY;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _removeShadow: function(ctx) {\n      if (!this.shadow) {\n        return;\n      }\n\n      ctx.shadowColor = '';\n      ctx.shadowBlur = ctx.shadowOffsetX = ctx.shadowOffsetY = 0;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Object} filler fabric.Pattern or fabric.Gradient\n     * @return {Object} offset.offsetX offset for text rendering\n     * @return {Object} offset.offsetY offset for text rendering\n     */\n    _applyPatternGradientTransform: function(ctx, filler) {\n      if (!filler || !filler.toLive) {\n        return { offsetX: 0, offsetY: 0 };\n      }\n      var t = filler.gradientTransform || filler.patternTransform;\n      var offsetX = -this.width / 2 + filler.offsetX || 0,\n          offsetY = -this.height / 2 + filler.offsetY || 0;\n\n      if (filler.gradientUnits === 'percentage') {\n        ctx.transform(this.width, 0, 0, this.height, offsetX, offsetY);\n      }\n      else {\n        ctx.transform(1, 0, 0, 1, offsetX, offsetY);\n      }\n      if (t) {\n        ctx.transform(t[0], t[1], t[2], t[3], t[4], t[5]);\n      }\n      return { offsetX: offsetX, offsetY: offsetY };\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderPaintInOrder: function(ctx) {\n      if (this.paintFirst === 'stroke') {\n        this._renderStroke(ctx);\n        this._renderFill(ctx);\n      }\n      else {\n        this._renderFill(ctx);\n        this._renderStroke(ctx);\n      }\n    },\n\n    /**\n     * @private\n     * function that actually render something on the context.\n     * empty here to allow Obects to work on tests to benchmark fabric functionalites\n     * not related to rendering\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(/* ctx */) {\n\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderFill: function(ctx) {\n      if (!this.fill) {\n        return;\n      }\n\n      ctx.save();\n      this._setFillStyles(ctx, this);\n      if (this.fillRule === 'evenodd') {\n        ctx.fill('evenodd');\n      }\n      else {\n        ctx.fill();\n      }\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderStroke: function(ctx) {\n      if (!this.stroke || this.strokeWidth === 0) {\n        return;\n      }\n\n      if (this.shadow && !this.shadow.affectStroke) {\n        this._removeShadow(ctx);\n      }\n\n      ctx.save();\n      if (this.strokeUniform && this.group) {\n        var scaling = this.getObjectScaling();\n        ctx.scale(1 / scaling.scaleX, 1 / scaling.scaleY);\n      }\n      else if (this.strokeUniform) {\n        ctx.scale(1 / this.scaleX, 1 / this.scaleY);\n      }\n      this._setLineDash(ctx, this.strokeDashArray, this._renderDashedStroke);\n      this._setStrokeStyles(ctx, this);\n      ctx.stroke();\n      ctx.restore();\n    },\n\n    /**\n     * This function try to patch the missing gradientTransform on canvas gradients.\n     * transforming a context to transform the gradient, is going to transform the stroke too.\n     * we want to transform the gradient but not the stroke operation, so we create\n     * a transformed gradient on a pattern and then we use the pattern instead of the gradient.\n     * this method has drwabacks: is slow, is in low resolution, needs a patch for when the size\n     * is limited.\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {fabric.Gradient} filler a fabric gradient instance\n     */\n    _applyPatternForTransformedGradient: function(ctx, filler) {\n      var dims = this._limitCacheSize(this._getCacheCanvasDimensions()),\n          pCanvas = fabric.util.createCanvasElement(), pCtx, retinaScaling = this.canvas.getRetinaScaling(),\n          width = dims.x / this.scaleX / retinaScaling, height = dims.y / this.scaleY / retinaScaling;\n      pCanvas.width = width;\n      pCanvas.height = height;\n      pCtx = pCanvas.getContext('2d');\n      pCtx.beginPath(); pCtx.moveTo(0, 0); pCtx.lineTo(width, 0); pCtx.lineTo(width, height);\n      pCtx.lineTo(0, height); pCtx.closePath();\n      pCtx.translate(width / 2, height / 2);\n      pCtx.scale(\n        dims.zoomX / this.scaleX / retinaScaling,\n        dims.zoomY / this.scaleY / retinaScaling\n      );\n      this._applyPatternGradientTransform(pCtx, filler);\n      pCtx.fillStyle = filler.toLive(ctx);\n      pCtx.fill();\n      ctx.translate(-this.width / 2 - this.strokeWidth / 2, -this.height / 2 - this.strokeWidth / 2);\n      ctx.scale(\n        retinaScaling * this.scaleX / dims.zoomX,\n        retinaScaling * this.scaleY / dims.zoomY\n      );\n      ctx.strokeStyle = pCtx.createPattern(pCanvas, 'no-repeat');\n    },\n\n    /**\n     * This function is an helper for svg import. it returns the center of the object in the svg\n     * untransformed coordinates\n     * @private\n     * @return {Object} center point from element coordinates\n     */\n    _findCenterFromElement: function() {\n      return { x: this.left + this.width / 2, y: this.top + this.height / 2 };\n    },\n\n    /**\n     * This function is an helper for svg import. it decompose the transformMatrix\n     * and assign properties to object.\n     * untransformed coordinates\n     * @private\n     * @chainable\n     */\n    _assignTransformMatrixProps: function() {\n      if (this.transformMatrix) {\n        var options = fabric.util.qrDecompose(this.transformMatrix);\n        this.flipX = false;\n        this.flipY = false;\n        this.set('scaleX', options.scaleX);\n        this.set('scaleY', options.scaleY);\n        this.angle = options.angle;\n        this.skewX = options.skewX;\n        this.skewY = 0;\n      }\n    },\n\n    /**\n     * This function is an helper for svg import. it removes the transform matrix\n     * and set to object properties that fabricjs can handle\n     * @private\n     * @param {Object} preserveAspectRatioOptions\n     * @return {thisArg}\n     */\n    _removeTransformMatrix: function(preserveAspectRatioOptions) {\n      var center = this._findCenterFromElement();\n      if (this.transformMatrix) {\n        this._assignTransformMatrixProps();\n        center = fabric.util.transformPoint(center, this.transformMatrix);\n      }\n      this.transformMatrix = null;\n      if (preserveAspectRatioOptions) {\n        this.scaleX *= preserveAspectRatioOptions.scaleX;\n        this.scaleY *= preserveAspectRatioOptions.scaleY;\n        this.cropX = preserveAspectRatioOptions.cropX;\n        this.cropY = preserveAspectRatioOptions.cropY;\n        center.x += preserveAspectRatioOptions.offsetLeft;\n        center.y += preserveAspectRatioOptions.offsetTop;\n        this.width = preserveAspectRatioOptions.width;\n        this.height = preserveAspectRatioOptions.height;\n      }\n      this.setPositionByOrigin(center, 'center', 'center');\n    },\n\n    /**\n     * Clones an instance, using a callback method will work for every object.\n     * @param {Function} callback Callback is invoked with a clone as a first argument\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     */\n    clone: function(callback, propertiesToInclude) {\n      var objectForm = this.toObject(propertiesToInclude);\n      if (this.constructor.fromObject) {\n        this.constructor.fromObject(objectForm, callback);\n      }\n      else {\n        fabric.Object._fromObject('Object', objectForm, callback);\n      }\n    },\n\n    /**\n     * Creates an instance of fabric.Image out of an object\n     * makes use of toCanvasElement.\n     * Once this method was based on toDataUrl and loadImage, so it also had a quality\n     * and format option. toCanvasElement is faster and produce no loss of quality.\n     * If you need to get a real Jpeg or Png from an object, using toDataURL is the right way to do it.\n     * toCanvasElement and then toBlob from the obtained canvas is also a good option.\n     * This method is sync now, but still support the callback because we did not want to break.\n     * When fabricJS 5.0 will be planned, this will probably be changed to not have a callback.\n     * @param {Function} callback callback, invoked with an instance as a first argument\n     * @param {Object} [options] for clone as image, passed to toDataURL\n     * @param {Number} [options.multiplier=1] Multiplier to scale by\n     * @param {Number} [options.left] Cropping left offset. Introduced in v1.2.14\n     * @param {Number} [options.top] Cropping top offset. Introduced in v1.2.14\n     * @param {Number} [options.width] Cropping width. Introduced in v1.2.14\n     * @param {Number} [options.height] Cropping height. Introduced in v1.2.14\n     * @param {Boolean} [options.enableRetinaScaling] Enable retina scaling for clone image. Introduce in 1.6.4\n     * @param {Boolean} [options.withoutTransform] Remove current object transform ( no scale , no angle, no flip, no skew ). Introduced in 2.3.4\n     * @param {Boolean} [options.withoutShadow] Remove current object shadow. Introduced in 2.4.2\n     * @return {fabric.Object} thisArg\n     */\n    cloneAsImage: function(callback, options) {\n      var canvasEl = this.toCanvasElement(options);\n      if (callback) {\n        callback(new fabric.Image(canvasEl));\n      }\n      return this;\n    },\n\n    /**\n     * Converts an object into a HTMLCanvas element\n     * @param {Object} options Options object\n     * @param {Number} [options.multiplier=1] Multiplier to scale by\n     * @param {Number} [options.left] Cropping left offset. Introduced in v1.2.14\n     * @param {Number} [options.top] Cropping top offset. Introduced in v1.2.14\n     * @param {Number} [options.width] Cropping width. Introduced in v1.2.14\n     * @param {Number} [options.height] Cropping height. Introduced in v1.2.14\n     * @param {Boolean} [options.enableRetinaScaling] Enable retina scaling for clone image. Introduce in 1.6.4\n     * @param {Boolean} [options.withoutTransform] Remove current object transform ( no scale , no angle, no flip, no skew ). Introduced in 2.3.4\n     * @param {Boolean} [options.withoutShadow] Remove current object shadow. Introduced in 2.4.2\n     * @return {HTMLCanvasElement} Returns DOM element <canvas> with the fabric.Object\n     */\n    toCanvasElement: function(options) {\n      options || (options = { });\n\n      var utils = fabric.util, origParams = utils.saveObjectTransform(this),\n          originalGroup = this.group,\n          originalShadow = this.shadow, abs = Math.abs,\n          multiplier = (options.multiplier || 1) * (options.enableRetinaScaling ? fabric.devicePixelRatio : 1);\n      delete this.group;\n      if (options.withoutTransform) {\n        utils.resetObjectTransform(this);\n      }\n      if (options.withoutShadow) {\n        this.shadow = null;\n      }\n\n      var el = fabric.util.createCanvasElement(),\n          // skip canvas zoom and calculate with setCoords now.\n          boundingRect = this.getBoundingRect(true, true),\n          shadow = this.shadow, scaling,\n          shadowOffset = { x: 0, y: 0 }, shadowBlur,\n          width, height;\n\n      if (shadow) {\n        shadowBlur = shadow.blur;\n        if (shadow.nonScaling) {\n          scaling = { scaleX: 1, scaleY: 1 };\n        }\n        else {\n          scaling = this.getObjectScaling();\n        }\n        // consider non scaling shadow.\n        shadowOffset.x = 2 * Math.round(abs(shadow.offsetX) + shadowBlur) * (abs(scaling.scaleX));\n        shadowOffset.y = 2 * Math.round(abs(shadow.offsetY) + shadowBlur) * (abs(scaling.scaleY));\n      }\n      width = boundingRect.width + shadowOffset.x;\n      height = boundingRect.height + shadowOffset.y;\n      // if the current width/height is not an integer\n      // we need to make it so.\n      el.width = Math.ceil(width);\n      el.height = Math.ceil(height);\n      var canvas = new fabric.StaticCanvas(el, {\n        enableRetinaScaling: false,\n        renderOnAddRemove: false,\n        skipOffscreen: false,\n      });\n      if (options.format === 'jpeg') {\n        canvas.backgroundColor = '#fff';\n      }\n      this.setPositionByOrigin(new fabric.Point(canvas.width / 2, canvas.height / 2), 'center', 'center');\n\n      var originalCanvas = this.canvas;\n      canvas.add(this);\n      var canvasEl = canvas.toCanvasElement(multiplier || 1, options);\n      this.shadow = originalShadow;\n      this.set('canvas', originalCanvas);\n      if (originalGroup) {\n        this.group = originalGroup;\n      }\n      this.set(origParams).setCoords();\n      // canvas.dispose will call image.dispose that will nullify the elements\n      // since this canvas is a simple element for the process, we remove references\n      // to objects in this way in order to avoid object trashing.\n      canvas._objects = [];\n      canvas.dispose();\n      canvas = null;\n\n      return canvasEl;\n    },\n\n    /**\n     * Converts an object into a data-url-like string\n     * @param {Object} options Options object\n     * @param {String} [options.format=png] The format of the output image. Either \"jpeg\" or \"png\"\n     * @param {Number} [options.quality=1] Quality level (0..1). Only used for jpeg.\n     * @param {Number} [options.multiplier=1] Multiplier to scale by\n     * @param {Number} [options.left] Cropping left offset. Introduced in v1.2.14\n     * @param {Number} [options.top] Cropping top offset. Introduced in v1.2.14\n     * @param {Number} [options.width] Cropping width. Introduced in v1.2.14\n     * @param {Number} [options.height] Cropping height. Introduced in v1.2.14\n     * @param {Boolean} [options.enableRetinaScaling] Enable retina scaling for clone image. Introduce in 1.6.4\n     * @param {Boolean} [options.withoutTransform] Remove current object transform ( no scale , no angle, no flip, no skew ). Introduced in 2.3.4\n     * @param {Boolean} [options.withoutShadow] Remove current object shadow. Introduced in 2.4.2\n     * @return {String} Returns a data: URL containing a representation of the object in the format specified by options.format\n     */\n    toDataURL: function(options) {\n      options || (options = { });\n      return fabric.util.toDataURL(this.toCanvasElement(options), options.format || 'png', options.quality || 1);\n    },\n\n    /**\n     * Returns true if specified type is identical to the type of an instance\n     * @param {String} type Type to check against\n     * @return {Boolean}\n     */\n    isType: function(type) {\n      return this.type === type;\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity of this instance (is 1 unless subclassed)\n     */\n    complexity: function() {\n      return 1;\n    },\n\n    /**\n     * Returns a JSON representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} JSON\n     */\n    toJSON: function(propertiesToInclude) {\n      // delegate, not alias\n      return this.toObject(propertiesToInclude);\n    },\n\n    /**\n     * Sets \"angle\" of an instance with centered rotation\n     * @param {Number} angle Angle value (in degrees)\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    rotate: function(angle) {\n      var shouldCenterOrigin = (this.originX !== 'center' || this.originY !== 'center') && this.centeredRotation;\n\n      if (shouldCenterOrigin) {\n        this._setOriginToCenter();\n      }\n\n      this.set('angle', angle);\n\n      if (shouldCenterOrigin) {\n        this._resetOrigin();\n      }\n\n      return this;\n    },\n\n    /**\n     * Centers object horizontally on canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    centerH: function () {\n      this.canvas && this.canvas.centerObjectH(this);\n      return this;\n    },\n\n    /**\n     * Centers object horizontally on current viewport of canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    viewportCenterH: function () {\n      this.canvas && this.canvas.viewportCenterObjectH(this);\n      return this;\n    },\n\n    /**\n     * Centers object vertically on canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    centerV: function () {\n      this.canvas && this.canvas.centerObjectV(this);\n      return this;\n    },\n\n    /**\n     * Centers object vertically on current viewport of canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    viewportCenterV: function () {\n      this.canvas && this.canvas.viewportCenterObjectV(this);\n      return this;\n    },\n\n    /**\n     * Centers object vertically and horizontally on canvas to which is was added last\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    center: function () {\n      this.canvas && this.canvas.centerObject(this);\n      return this;\n    },\n\n    /**\n     * Centers object on current viewport of canvas to which it was added last.\n     * You might need to call `setCoords` on an object after centering, to update controls area.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    viewportCenter: function () {\n      this.canvas && this.canvas.viewportCenterObject(this);\n      return this;\n    },\n\n    /**\n     * Returns coordinates of a pointer relative to an object\n     * @param {Event} e Event to operate upon\n     * @param {Object} [pointer] Pointer to operate upon (instead of event)\n     * @return {Object} Coordinates of a pointer (x, y)\n     */\n    getLocalPointer: function(e, pointer) {\n      pointer = pointer || this.canvas.getPointer(e);\n      var pClicked = new fabric.Point(pointer.x, pointer.y),\n          objectLeftTop = this._getLeftTopCoords();\n      if (this.angle) {\n        pClicked = fabric.util.rotatePoint(\n          pClicked, objectLeftTop, degreesToRadians(-this.angle));\n      }\n      return {\n        x: pClicked.x - objectLeftTop.x,\n        y: pClicked.y - objectLeftTop.y\n      };\n    },\n\n    /**\n     * Sets canvas globalCompositeOperation for specific object\n     * custom composition operation for the particular object can be specified using globalCompositeOperation property\n     * @param {CanvasRenderingContext2D} ctx Rendering canvas context\n     */\n    _setupCompositeOperation: function (ctx) {\n      if (this.globalCompositeOperation) {\n        ctx.globalCompositeOperation = this.globalCompositeOperation;\n      }\n    }\n  });\n\n  fabric.util.createAccessors && fabric.util.createAccessors(fabric.Object);\n\n  extend(fabric.Object.prototype, fabric.Observable);\n\n  /**\n   * Defines the number of fraction digits to use when serializing object values.\n   * You can use it to increase/decrease precision of such values like left, top, scaleX, scaleY, etc.\n   * @static\n   * @memberOf fabric.Object\n   * @constant\n   * @type Number\n   */\n  fabric.Object.NUM_FRACTION_DIGITS = 2;\n\n  fabric.Object._fromObject = function(className, object, callback, extraParam) {\n    var klass = fabric[className];\n    object = clone(object, true);\n    fabric.util.enlivenPatterns([object.fill, object.stroke], function(patterns) {\n      if (typeof patterns[0] !== 'undefined') {\n        object.fill = patterns[0];\n      }\n      if (typeof patterns[1] !== 'undefined') {\n        object.stroke = patterns[1];\n      }\n      fabric.util.enlivenObjects([object.clipPath], function(enlivedProps) {\n        object.clipPath = enlivedProps[0];\n        var instance = extraParam ? new klass(object[extraParam], object) : new klass(object);\n        callback && callback(instance);\n      });\n    });\n  };\n\n  /**\n   * Unique id used internally when creating SVG elements\n   * @static\n   * @memberOf fabric.Object\n   * @type Number\n   */\n  fabric.Object.__uid = 0;\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n\n  var degreesToRadians = fabric.util.degreesToRadians,\n      originXOffset = {\n        left: -0.5,\n        center: 0,\n        right: 0.5\n      },\n      originYOffset = {\n        top: -0.5,\n        center: 0,\n        bottom: 0.5\n      };\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Translates the coordinates from a set of origin to another (based on the object's dimensions)\n     * @param {fabric.Point} point The point which corresponds to the originX and originY params\n     * @param {String} fromOriginX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} fromOriginY Vertical origin: 'top', 'center' or 'bottom'\n     * @param {String} toOriginX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} toOriginY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    translateToGivenOrigin: function(point, fromOriginX, fromOriginY, toOriginX, toOriginY) {\n      var x = point.x,\n          y = point.y,\n          offsetX, offsetY, dim;\n\n      if (typeof fromOriginX === 'string') {\n        fromOriginX = originXOffset[fromOriginX];\n      }\n      else {\n        fromOriginX -= 0.5;\n      }\n\n      if (typeof toOriginX === 'string') {\n        toOriginX = originXOffset[toOriginX];\n      }\n      else {\n        toOriginX -= 0.5;\n      }\n\n      offsetX = toOriginX - fromOriginX;\n\n      if (typeof fromOriginY === 'string') {\n        fromOriginY = originYOffset[fromOriginY];\n      }\n      else {\n        fromOriginY -= 0.5;\n      }\n\n      if (typeof toOriginY === 'string') {\n        toOriginY = originYOffset[toOriginY];\n      }\n      else {\n        toOriginY -= 0.5;\n      }\n\n      offsetY = toOriginY - fromOriginY;\n\n      if (offsetX || offsetY) {\n        dim = this._getTransformedDimensions();\n        x = point.x + offsetX * dim.x;\n        y = point.y + offsetY * dim.y;\n      }\n\n      return new fabric.Point(x, y);\n    },\n\n    /**\n     * Translates the coordinates from origin to center coordinates (based on the object's dimensions)\n     * @param {fabric.Point} point The point which corresponds to the originX and originY params\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    translateToCenterPoint: function(point, originX, originY) {\n      var p = this.translateToGivenOrigin(point, originX, originY, 'center', 'center');\n      if (this.angle) {\n        return fabric.util.rotatePoint(p, point, degreesToRadians(this.angle));\n      }\n      return p;\n    },\n\n    /**\n     * Translates the coordinates from center to origin coordinates (based on the object's dimensions)\n     * @param {fabric.Point} center The point which corresponds to center of the object\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    translateToOriginPoint: function(center, originX, originY) {\n      var p = this.translateToGivenOrigin(center, 'center', 'center', originX, originY);\n      if (this.angle) {\n        return fabric.util.rotatePoint(p, center, degreesToRadians(this.angle));\n      }\n      return p;\n    },\n\n    /**\n     * Returns the real center coordinates of the object\n     * @return {fabric.Point}\n     */\n    getCenterPoint: function() {\n      var leftTop = new fabric.Point(this.left, this.top);\n      return this.translateToCenterPoint(leftTop, this.originX, this.originY);\n    },\n\n    /**\n     * Returns the coordinates of the object based on center coordinates\n     * @param {fabric.Point} point The point which corresponds to the originX and originY params\n     * @return {fabric.Point}\n     */\n    // getOriginPoint: function(center) {\n    //   return this.translateToOriginPoint(center, this.originX, this.originY);\n    // },\n\n    /**\n     * Returns the coordinates of the object as if it has a different origin\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    getPointByOrigin: function(originX, originY) {\n      var center = this.getCenterPoint();\n      return this.translateToOriginPoint(center, originX, originY);\n    },\n\n    /**\n     * Returns the point in local coordinates\n     * @param {fabric.Point} point The point relative to the global coordinate system\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {fabric.Point}\n     */\n    toLocalPoint: function(point, originX, originY) {\n      var center = this.getCenterPoint(),\n          p, p2;\n\n      if (typeof originX !== 'undefined' && typeof originY !== 'undefined' ) {\n        p = this.translateToGivenOrigin(center, 'center', 'center', originX, originY);\n      }\n      else {\n        p = new fabric.Point(this.left, this.top);\n      }\n\n      p2 = new fabric.Point(point.x, point.y);\n      if (this.angle) {\n        p2 = fabric.util.rotatePoint(p2, center, -degreesToRadians(this.angle));\n      }\n      return p2.subtractEquals(p);\n    },\n\n    /**\n     * Returns the point in global coordinates\n     * @param {fabric.Point} The point relative to the local coordinate system\n     * @return {fabric.Point}\n     */\n    // toGlobalPoint: function(point) {\n    //   return fabric.util.rotatePoint(point, this.getCenterPoint(), degreesToRadians(this.angle)).addEquals(new fabric.Point(this.left, this.top));\n    // },\n\n    /**\n     * Sets the position of the object taking into consideration the object's origin\n     * @param {fabric.Point} pos The new position of the object\n     * @param {String} originX Horizontal origin: 'left', 'center' or 'right'\n     * @param {String} originY Vertical origin: 'top', 'center' or 'bottom'\n     * @return {void}\n     */\n    setPositionByOrigin: function(pos, originX, originY) {\n      var center = this.translateToCenterPoint(pos, originX, originY),\n          position = this.translateToOriginPoint(center, this.originX, this.originY);\n      this.set('left', position.x);\n      this.set('top', position.y);\n    },\n\n    /**\n     * @param {String} to One of 'left', 'center', 'right'\n     */\n    adjustPosition: function(to) {\n      var angle = degreesToRadians(this.angle),\n          hypotFull = this.getScaledWidth(),\n          xFull = fabric.util.cos(angle) * hypotFull,\n          yFull = fabric.util.sin(angle) * hypotFull,\n          offsetFrom, offsetTo;\n\n      //TODO: this function does not consider mixed situation like top, center.\n      if (typeof this.originX === 'string') {\n        offsetFrom = originXOffset[this.originX];\n      }\n      else {\n        offsetFrom = this.originX - 0.5;\n      }\n      if (typeof to === 'string') {\n        offsetTo = originXOffset[to];\n      }\n      else {\n        offsetTo = to - 0.5;\n      }\n      this.left += xFull * (offsetTo - offsetFrom);\n      this.top += yFull * (offsetTo - offsetFrom);\n      this.setCoords();\n      this.originX = to;\n    },\n\n    /**\n     * Sets the origin/position of the object to it's center point\n     * @private\n     * @return {void}\n     */\n    _setOriginToCenter: function() {\n      this._originalOriginX = this.originX;\n      this._originalOriginY = this.originY;\n\n      var center = this.getCenterPoint();\n\n      this.originX = 'center';\n      this.originY = 'center';\n\n      this.left = center.x;\n      this.top = center.y;\n    },\n\n    /**\n     * Resets the origin/position of the object to it's original origin\n     * @private\n     * @return {void}\n     */\n    _resetOrigin: function() {\n      var originPoint = this.translateToOriginPoint(\n        this.getCenterPoint(),\n        this._originalOriginX,\n        this._originalOriginY);\n\n      this.originX = this._originalOriginX;\n      this.originY = this._originalOriginY;\n\n      this.left = originPoint.x;\n      this.top = originPoint.y;\n\n      this._originalOriginX = null;\n      this._originalOriginY = null;\n    },\n\n    /**\n     * @private\n     */\n    _getLeftTopCoords: function() {\n      return this.translateToOriginPoint(this.getCenterPoint(), 'left', 'top');\n    },\n  });\n\n})();\n\n\n(function() {\n\n  function arrayFromCoords(coords) {\n    return [\n      new fabric.Point(coords.tl.x, coords.tl.y),\n      new fabric.Point(coords.tr.x, coords.tr.y),\n      new fabric.Point(coords.br.x, coords.br.y),\n      new fabric.Point(coords.bl.x, coords.bl.y)\n    ];\n  }\n\n  var util = fabric.util,\n      degreesToRadians = util.degreesToRadians,\n      multiplyMatrices = util.multiplyTransformMatrices,\n      transformPoint = util.transformPoint;\n\n  util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Describe object's corner position in canvas element coordinates.\n     * properties are depending on control keys and padding the main controls.\n     * each property is an object with x, y and corner.\n     * The `corner` property contains in a similar manner the 4 points of the\n     * interactive area of the corner.\n     * The coordinates depends from the controls positionHandler and are used\n     * to draw and locate controls\n     * @memberOf fabric.Object.prototype\n     */\n    oCoords: null,\n\n    /**\n     * Describe object's corner position in canvas object absolute coordinates\n     * properties are tl,tr,bl,br and describe the four main corner.\n     * each property is an object with x, y, instance of Fabric.Point.\n     * The coordinates depends from this properties: width, height, scaleX, scaleY\n     * skewX, skewY, angle, strokeWidth, top, left.\n     * Those coordinates are useful to understand where an object is. They get updated\n     * with oCoords but they do not need to be updated when zoom or panning change.\n     * The coordinates get updated with @method setCoords.\n     * You can calculate them without updating with @method calcACoords();\n     * @memberOf fabric.Object.prototype\n     */\n    aCoords: null,\n\n    /**\n     * Describe object's corner position in canvas element coordinates.\n     * includes padding. Used of object detection.\n     * set and refreshed with setCoords and calcCoords.\n     * @memberOf fabric.Object.prototype\n     */\n    lineCoords: null,\n\n    /**\n     * storage for object transform matrix\n     */\n    ownMatrixCache: null,\n\n    /**\n     * storage for object full transform matrix\n     */\n    matrixCache: null,\n\n    /**\n     * custom controls interface\n     * controls are added by default_controls.js\n     */\n    controls: { },\n\n    /**\n     * return correct set of coordinates for intersection\n     * this will return either aCoords or lineCoords.\n     * @param {Boolean} absolute will return aCoords if true or lineCoords\n     * @return {Object} {tl, tr, br, bl} points\n     */\n    _getCoords: function(absolute, calculate) {\n      if (calculate) {\n        return (absolute ? this.calcACoords() : this.calcLineCoords());\n      }\n      if (!this.aCoords || !this.lineCoords) {\n        this.setCoords(true);\n      }\n      return (absolute ? this.aCoords : this.lineCoords);\n    },\n\n    /**\n     * return correct set of coordinates for intersection\n     * this will return either aCoords or lineCoords.\n     * The coords are returned in an array.\n     * @return {Array} [tl, tr, br, bl] of points\n     */\n    getCoords: function(absolute, calculate) {\n      return arrayFromCoords(this._getCoords(absolute, calculate));\n    },\n\n    /**\n     * Checks if object intersects with an area formed by 2 points\n     * @param {Object} pointTL top-left point of area\n     * @param {Object} pointBR bottom-right point of area\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object intersects with an area formed by 2 points\n     */\n    intersectsWithRect: function(pointTL, pointBR, absolute, calculate) {\n      var coords = this.getCoords(absolute, calculate),\n          intersection = fabric.Intersection.intersectPolygonRectangle(\n            coords,\n            pointTL,\n            pointBR\n          );\n      return intersection.status === 'Intersection';\n    },\n\n    /**\n     * Checks if object intersects with another object\n     * @param {Object} other Object to test\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object intersects with another object\n     */\n    intersectsWithObject: function(other, absolute, calculate) {\n      var intersection = fabric.Intersection.intersectPolygonPolygon(\n        this.getCoords(absolute, calculate),\n        other.getCoords(absolute, calculate)\n      );\n\n      return intersection.status === 'Intersection'\n        || other.isContainedWithinObject(this, absolute, calculate)\n        || this.isContainedWithinObject(other, absolute, calculate);\n    },\n\n    /**\n     * Checks if object is fully contained within area of another object\n     * @param {Object} other Object to test\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object is fully contained within area of another object\n     */\n    isContainedWithinObject: function(other, absolute, calculate) {\n      var points = this.getCoords(absolute, calculate),\n          otherCoords = absolute ? other.aCoords : other.lineCoords,\n          i = 0, lines = other._getImageLines(otherCoords);\n      for (; i < 4; i++) {\n        if (!other.containsPoint(points[i], lines)) {\n          return false;\n        }\n      }\n      return true;\n    },\n\n    /**\n     * Checks if object is fully contained within area formed by 2 points\n     * @param {Object} pointTL top-left point of area\n     * @param {Object} pointBR bottom-right point of area\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object is fully contained within area formed by 2 points\n     */\n    isContainedWithinRect: function(pointTL, pointBR, absolute, calculate) {\n      var boundingRect = this.getBoundingRect(absolute, calculate);\n\n      return (\n        boundingRect.left >= pointTL.x &&\n        boundingRect.left + boundingRect.width <= pointBR.x &&\n        boundingRect.top >= pointTL.y &&\n        boundingRect.top + boundingRect.height <= pointBR.y\n      );\n    },\n\n    /**\n     * Checks if point is inside the object\n     * @param {fabric.Point} point Point to check against\n     * @param {Object} [lines] object returned from @method _getImageLines\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if point is inside the object\n     */\n    containsPoint: function(point, lines, absolute, calculate) {\n      var coords = this._getCoords(absolute, calculate),\n          lines = lines || this._getImageLines(coords),\n          xPoints = this._findCrossPoints(point, lines);\n      // if xPoints is odd then point is inside the object\n      return (xPoints !== 0 && xPoints % 2 === 1);\n    },\n\n    /**\n     * Checks if object is contained within the canvas with current viewportTransform\n     * the check is done stopping at first point that appears on screen\n     * @param {Boolean} [calculate] use coordinates of current position instead of .aCoords\n     * @return {Boolean} true if object is fully or partially contained within canvas\n     */\n    isOnScreen: function(calculate) {\n      if (!this.canvas) {\n        return false;\n      }\n      var pointTL = this.canvas.vptCoords.tl, pointBR = this.canvas.vptCoords.br;\n      var points = this.getCoords(true, calculate);\n      // if some point is on screen, the object is on screen.\n      if (points.some(function(point) {\n        return point.x <= pointBR.x && point.x >= pointTL.x &&\n        point.y <= pointBR.y && point.y >= pointTL.y;\n      })) {\n        return true;\n      }\n      // no points on screen, check intersection with absolute coordinates\n      if (this.intersectsWithRect(pointTL, pointBR, true, calculate)) {\n        return true;\n      }\n      return this._containsCenterOfCanvas(pointTL, pointBR, calculate);\n    },\n\n    /**\n     * Checks if the object contains the midpoint between canvas extremities\n     * Does not make sense outside the context of isOnScreen and isPartiallyOnScreen\n     * @private\n     * @param {Fabric.Point} pointTL Top Left point\n     * @param {Fabric.Point} pointBR Top Right point\n     * @param {Boolean} calculate use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if the object contains the point\n     */\n    _containsCenterOfCanvas: function(pointTL, pointBR, calculate) {\n      // worst case scenario the object is so big that contains the screen\n      var centerPoint = { x: (pointTL.x + pointBR.x) / 2, y: (pointTL.y + pointBR.y) / 2 };\n      if (this.containsPoint(centerPoint, null, true, calculate)) {\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Checks if object is partially contained within the canvas with current viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords\n     * @return {Boolean} true if object is partially contained within canvas\n     */\n    isPartiallyOnScreen: function(calculate) {\n      if (!this.canvas) {\n        return false;\n      }\n      var pointTL = this.canvas.vptCoords.tl, pointBR = this.canvas.vptCoords.br;\n      if (this.intersectsWithRect(pointTL, pointBR, true, calculate)) {\n        return true;\n      }\n      var allPointsAreOutside = this.getCoords(true, calculate).every(function(point) {\n        return (point.x >= pointBR.x || point.x <= pointTL.x) &&\n        (point.y >= pointBR.y || point.y <= pointTL.y);\n      });\n      return allPointsAreOutside && this._containsCenterOfCanvas(pointTL, pointBR, calculate);\n    },\n\n    /**\n     * Method that returns an object with the object edges in it, given the coordinates of the corners\n     * @private\n     * @param {Object} oCoords Coordinates of the object corners\n     */\n    _getImageLines: function(oCoords) {\n\n      var lines = {\n        topline: {\n          o: oCoords.tl,\n          d: oCoords.tr\n        },\n        rightline: {\n          o: oCoords.tr,\n          d: oCoords.br\n        },\n        bottomline: {\n          o: oCoords.br,\n          d: oCoords.bl\n        },\n        leftline: {\n          o: oCoords.bl,\n          d: oCoords.tl\n        }\n      };\n\n      // // debugging\n      // if (this.canvas.contextTop) {\n      //   this.canvas.contextTop.fillRect(lines.bottomline.d.x, lines.bottomline.d.y, 2, 2);\n      //   this.canvas.contextTop.fillRect(lines.bottomline.o.x, lines.bottomline.o.y, 2, 2);\n      //\n      //   this.canvas.contextTop.fillRect(lines.leftline.d.x, lines.leftline.d.y, 2, 2);\n      //   this.canvas.contextTop.fillRect(lines.leftline.o.x, lines.leftline.o.y, 2, 2);\n      //\n      //   this.canvas.contextTop.fillRect(lines.topline.d.x, lines.topline.d.y, 2, 2);\n      //   this.canvas.contextTop.fillRect(lines.topline.o.x, lines.topline.o.y, 2, 2);\n      //\n      //   this.canvas.contextTop.fillRect(lines.rightline.d.x, lines.rightline.d.y, 2, 2);\n      //   this.canvas.contextTop.fillRect(lines.rightline.o.x, lines.rightline.o.y, 2, 2);\n      // }\n\n      return lines;\n    },\n\n    /**\n     * Helper method to determine how many cross points are between the 4 object edges\n     * and the horizontal line determined by a point on canvas\n     * @private\n     * @param {fabric.Point} point Point to check\n     * @param {Object} lines Coordinates of the object being evaluated\n     */\n    // remove yi, not used but left code here just in case.\n    _findCrossPoints: function(point, lines) {\n      var b1, b2, a1, a2, xi, // yi,\n          xcount = 0,\n          iLine;\n\n      for (var lineKey in lines) {\n        iLine = lines[lineKey];\n        // optimisation 1: line below point. no cross\n        if ((iLine.o.y < point.y) && (iLine.d.y < point.y)) {\n          continue;\n        }\n        // optimisation 2: line above point. no cross\n        if ((iLine.o.y >= point.y) && (iLine.d.y >= point.y)) {\n          continue;\n        }\n        // optimisation 3: vertical line case\n        if ((iLine.o.x === iLine.d.x) && (iLine.o.x >= point.x)) {\n          xi = iLine.o.x;\n          // yi = point.y;\n        }\n        // calculate the intersection point\n        else {\n          b1 = 0;\n          b2 = (iLine.d.y - iLine.o.y) / (iLine.d.x - iLine.o.x);\n          a1 = point.y - b1 * point.x;\n          a2 = iLine.o.y - b2 * iLine.o.x;\n\n          xi = -(a1 - a2) / (b1 - b2);\n          // yi = a1 + b1 * xi;\n        }\n        // dont count xi < point.x cases\n        if (xi >= point.x) {\n          xcount += 1;\n        }\n        // optimisation 4: specific for square images\n        if (xcount === 2) {\n          break;\n        }\n      }\n      return xcount;\n    },\n\n    /**\n     * Returns coordinates of object's bounding rectangle (left, top, width, height)\n     * the box is intended as aligned to axis of canvas.\n     * @param {Boolean} [absolute] use coordinates without viewportTransform\n     * @param {Boolean} [calculate] use coordinates of current position instead of .oCoords / .aCoords\n     * @return {Object} Object with left, top, width, height properties\n     */\n    getBoundingRect: function(absolute, calculate) {\n      var coords = this.getCoords(absolute, calculate);\n      return util.makeBoundingBoxFromPoints(coords);\n    },\n\n    /**\n     * Returns width of an object's bounding box counting transformations\n     * before 2.0 it was named getWidth();\n     * @return {Number} width value\n     */\n    getScaledWidth: function() {\n      return this._getTransformedDimensions().x;\n    },\n\n    /**\n     * Returns height of an object bounding box counting transformations\n     * before 2.0 it was named getHeight();\n     * @return {Number} height value\n     */\n    getScaledHeight: function() {\n      return this._getTransformedDimensions().y;\n    },\n\n    /**\n     * Makes sure the scale is valid and modifies it if necessary\n     * @private\n     * @param {Number} value\n     * @return {Number}\n     */\n    _constrainScale: function(value) {\n      if (Math.abs(value) < this.minScaleLimit) {\n        if (value < 0) {\n          return -this.minScaleLimit;\n        }\n        else {\n          return this.minScaleLimit;\n        }\n      }\n      else if (value === 0) {\n        return 0.0001;\n      }\n      return value;\n    },\n\n    /**\n     * Scales an object (equally by x and y)\n     * @param {Number} value Scale factor\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    scale: function(value) {\n      this._set('scaleX', value);\n      this._set('scaleY', value);\n      return this.setCoords();\n    },\n\n    /**\n     * Scales an object to a given width, with respect to bounding box (scaling by x/y equally)\n     * @param {Number} value New width value\n     * @param {Boolean} absolute ignore viewport\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    scaleToWidth: function(value, absolute) {\n      // adjust to bounding rect factor so that rotated shapes would fit as well\n      var boundingRectFactor = this.getBoundingRect(absolute).width / this.getScaledWidth();\n      return this.scale(value / this.width / boundingRectFactor);\n    },\n\n    /**\n     * Scales an object to a given height, with respect to bounding box (scaling by x/y equally)\n     * @param {Number} value New height value\n     * @param {Boolean} absolute ignore viewport\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    scaleToHeight: function(value, absolute) {\n      // adjust to bounding rect factor so that rotated shapes would fit as well\n      var boundingRectFactor = this.getBoundingRect(absolute).height / this.getScaledHeight();\n      return this.scale(value / this.height / boundingRectFactor);\n    },\n\n    /**\n     * Calculates and returns the .coords of an object.\n     * unused by the library, only for the end dev.\n     * @return {Object} Object with tl, tr, br, bl ....\n     * @chainable\n     * @deprecated\n     */\n    calcCoords: function(absolute) {\n      // this is a compatibility function to avoid removing calcCoords now.\n      if (absolute) {\n        return this.calcACoords();\n      }\n      return this.calcOCoords();\n    },\n\n    calcLineCoords: function() {\n      var vpt = this.getViewportTransform(),\n          padding = this.padding, angle = degreesToRadians(this.angle),\n          cos = util.cos(angle), sin = util.sin(angle),\n          cosP = cos * padding, sinP = sin * padding, cosPSinP = cosP + sinP,\n          cosPMinusSinP = cosP - sinP, aCoords = this.calcACoords();\n\n      var lineCoords = {\n        tl: transformPoint(aCoords.tl, vpt),\n        tr: transformPoint(aCoords.tr, vpt),\n        bl: transformPoint(aCoords.bl, vpt),\n        br: transformPoint(aCoords.br, vpt),\n      };\n\n      if (padding) {\n        lineCoords.tl.x -= cosPMinusSinP;\n        lineCoords.tl.y -= cosPSinP;\n        lineCoords.tr.x += cosPSinP;\n        lineCoords.tr.y -= cosPMinusSinP;\n        lineCoords.bl.x -= cosPSinP;\n        lineCoords.bl.y += cosPMinusSinP;\n        lineCoords.br.x += cosPMinusSinP;\n        lineCoords.br.y += cosPSinP;\n      }\n\n      return lineCoords;\n    },\n\n    calcOCoords: function() {\n      var rotateMatrix = this._calcRotateMatrix(),\n          translateMatrix = this._calcTranslateMatrix(),\n          vpt = this.getViewportTransform(),\n          startMatrix = multiplyMatrices(vpt, translateMatrix),\n          finalMatrix = multiplyMatrices(startMatrix, rotateMatrix),\n          finalMatrix = multiplyMatrices(finalMatrix, [1 / vpt[0], 0, 0, 1 / vpt[3], 0, 0]),\n          dim = this._calculateCurrentDimensions(),\n          coords = {};\n      this.forEachControl(function(control, key, fabricObject) {\n        coords[key] = control.positionHandler(dim, finalMatrix, fabricObject);\n      });\n\n      // debug code\n      // var canvas = this.canvas;\n      // setTimeout(function() {\n      //   canvas.contextTop.clearRect(0, 0, 700, 700);\n      //   canvas.contextTop.fillStyle = 'green';\n      //   Object.keys(coords).forEach(function(key) {\n      //     var control = coords[key];\n      //     canvas.contextTop.fillRect(control.x, control.y, 3, 3);\n      //   });\n      // }, 50);\n      return coords;\n    },\n\n    calcACoords: function() {\n      var rotateMatrix = this._calcRotateMatrix(),\n          translateMatrix = this._calcTranslateMatrix(),\n          finalMatrix = multiplyMatrices(translateMatrix, rotateMatrix),\n          dim = this._getTransformedDimensions(),\n          w = dim.x / 2, h = dim.y / 2;\n      return {\n        // corners\n        tl: transformPoint({ x: -w, y: -h }, finalMatrix),\n        tr: transformPoint({ x: w, y: -h }, finalMatrix),\n        bl: transformPoint({ x: -w, y: h }, finalMatrix),\n        br: transformPoint({ x: w, y: h }, finalMatrix)\n      };\n    },\n\n    /**\n     * Sets corner and controls position coordinates based on current angle, width and height, left and top.\n     * oCoords are used to find the corners\n     * aCoords are used to quickly find an object on the canvas\n     * lineCoords are used to quickly find object during pointer events.\n     * See {@link https://github.com/kangax/fabric.js/wiki/When-to-call-setCoords|When-to-call-setCoords}\n     * @param {Boolean} [skipCorners] skip calculation of oCoords.\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setCoords: function(skipCorners) {\n      this.aCoords = this.calcACoords();\n      // in case we are in a group, for how the inner group target check works,\n      // lineCoords are exactly aCoords. Since the vpt gets absorbed by the normalized pointer.\n      this.lineCoords = this.group ? this.aCoords : this.calcLineCoords();\n      if (skipCorners) {\n        return this;\n      }\n      // set coordinates of the draggable boxes in the corners used to scale/rotate the image\n      this.oCoords = this.calcOCoords();\n      this._setCornerCoords && this._setCornerCoords();\n      return this;\n    },\n\n    /**\n     * calculate rotation matrix of an object\n     * @return {Array} rotation matrix for the object\n     */\n    _calcRotateMatrix: function() {\n      return util.calcRotateMatrix(this);\n    },\n\n    /**\n     * calculate the translation matrix for an object transform\n     * @return {Array} rotation matrix for the object\n     */\n    _calcTranslateMatrix: function() {\n      var center = this.getCenterPoint();\n      return [1, 0, 0, 1, center.x, center.y];\n    },\n\n    transformMatrixKey: function(skipGroup) {\n      var sep = '_', prefix = '';\n      if (!skipGroup && this.group) {\n        prefix = this.group.transformMatrixKey(skipGroup) + sep;\n      };\n      return prefix + this.top + sep + this.left + sep + this.scaleX + sep + this.scaleY +\n        sep + this.skewX + sep + this.skewY + sep + this.angle + sep + this.originX + sep + this.originY +\n        sep + this.width + sep + this.height + sep + this.strokeWidth + this.flipX + this.flipY;\n    },\n\n    /**\n     * calculate transform matrix that represents the current transformations from the\n     * object's properties.\n     * @param {Boolean} [skipGroup] return transform matrix for object not counting parent transformations\n     * There are some situation in which this is useful to avoid the fake rotation.\n     * @return {Array} transform matrix for the object\n     */\n    calcTransformMatrix: function(skipGroup) {\n      var matrix = this.calcOwnMatrix();\n      if (skipGroup || !this.group) {\n        return matrix;\n      }\n      var key = this.transformMatrixKey(skipGroup), cache = this.matrixCache || (this.matrixCache = {});\n      if (cache.key === key) {\n        return cache.value;\n      }\n      if (this.group) {\n        matrix = multiplyMatrices(this.group.calcTransformMatrix(false), matrix);\n      }\n      cache.key = key;\n      cache.value = matrix;\n      return matrix;\n    },\n\n    /**\n     * calculate transform matrix that represents the current transformations from the\n     * object's properties, this matrix does not include the group transformation\n     * @return {Array} transform matrix for the object\n     */\n    calcOwnMatrix: function() {\n      var key = this.transformMatrixKey(true), cache = this.ownMatrixCache || (this.ownMatrixCache = {});\n      if (cache.key === key) {\n        return cache.value;\n      }\n      var tMatrix = this._calcTranslateMatrix(),\n          options = {\n            angle: this.angle,\n            translateX: tMatrix[4],\n            translateY: tMatrix[5],\n            scaleX: this.scaleX,\n            scaleY: this.scaleY,\n            skewX: this.skewX,\n            skewY: this.skewY,\n            flipX: this.flipX,\n            flipY: this.flipY,\n          };\n      cache.key = key;\n      cache.value = util.composeMatrix(options);\n      return cache.value;\n    },\n\n    /*\n     * Calculate object dimensions from its properties\n     * @private\n     * @deprecated since 3.4.0, please use fabric.util._calcDimensionsTransformMatrix\n     * not including or including flipX, flipY to emulate the flipping boolean\n     * @return {Object} .x width dimension\n     * @return {Object} .y height dimension\n     */\n    _calcDimensionsTransformMatrix: function(skewX, skewY, flipping) {\n      return util.calcDimensionsMatrix({\n        skewX: skewX,\n        skewY: skewY,\n        scaleX: this.scaleX * (flipping && this.flipX ? -1 : 1),\n        scaleY: this.scaleY * (flipping && this.flipY ? -1 : 1)\n      });\n    },\n\n    /*\n     * Calculate object dimensions from its properties\n     * @private\n     * @return {Object} .x width dimension\n     * @return {Object} .y height dimension\n     */\n    _getNonTransformedDimensions: function() {\n      var strokeWidth = this.strokeWidth,\n          w = this.width + strokeWidth,\n          h = this.height + strokeWidth;\n      return { x: w, y: h };\n    },\n\n    /*\n     * Calculate object bounding box dimensions from its properties scale, skew.\n     * @param {Number} skewX, a value to override current skewX\n     * @param {Number} skewY, a value to override current skewY\n     * @private\n     * @return {Object} .x width dimension\n     * @return {Object} .y height dimension\n     */\n    _getTransformedDimensions: function(skewX, skewY) {\n      if (typeof skewX === 'undefined') {\n        skewX = this.skewX;\n      }\n      if (typeof skewY === 'undefined') {\n        skewY = this.skewY;\n      }\n      var dimensions = this._getNonTransformedDimensions(), dimX, dimY,\n          noSkew = skewX === 0 && skewY === 0;\n\n      if (this.strokeUniform) {\n        dimX = this.width;\n        dimY = this.height;\n      }\n      else {\n        dimX = dimensions.x;\n        dimY = dimensions.y;\n      }\n      if (noSkew) {\n        return this._finalizeDimensions(dimX * this.scaleX, dimY * this.scaleY);\n      }\n      var bbox = util.sizeAfterTransform(dimX, dimY, {\n        scaleX: this.scaleX,\n        scaleY: this.scaleY,\n        skewX: skewX,\n        skewY: skewY,\n      });\n      return this._finalizeDimensions(bbox.x, bbox.y);\n    },\n\n    /*\n     * Calculate object bounding box dimensions from its properties scale, skew.\n     * @param Number width width of the bbox\n     * @param Number height height of the bbox\n     * @private\n     * @return {Object} .x finalized width dimension\n     * @return {Object} .y finalized height dimension\n     */\n    _finalizeDimensions: function(width, height) {\n      return this.strokeUniform ?\n        { x: width + this.strokeWidth, y: height + this.strokeWidth }\n        :\n        { x: width, y: height };\n    },\n\n    /*\n     * Calculate object dimensions for controls box, including padding and canvas zoom.\n     * and active selection\n     * private\n     */\n    _calculateCurrentDimensions: function()  {\n      var vpt = this.getViewportTransform(),\n          dim = this._getTransformedDimensions(),\n          p = transformPoint(dim, vpt, true);\n      return p.scalarAdd(2 * this.padding);\n    },\n  });\n})();\n\n\nfabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n  /**\n   * Moves an object to the bottom of the stack of drawn objects\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  sendToBack: function() {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.sendToBack.call(this.group, this);\n    }\n    else if (this.canvas) {\n      this.canvas.sendToBack(this);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object to the top of the stack of drawn objects\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  bringToFront: function() {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.bringToFront.call(this.group, this);\n    }\n    else if (this.canvas) {\n      this.canvas.bringToFront(this);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object down in stack of drawn objects\n   * @param {Boolean} [intersecting] If `true`, send object behind next lower intersecting object\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  sendBackwards: function(intersecting) {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.sendBackwards.call(this.group, this, intersecting);\n    }\n    else if (this.canvas) {\n      this.canvas.sendBackwards(this, intersecting);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object up in stack of drawn objects\n   * @param {Boolean} [intersecting] If `true`, send object in front of next upper intersecting object\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  bringForward: function(intersecting) {\n    if (this.group) {\n      fabric.StaticCanvas.prototype.bringForward.call(this.group, this, intersecting);\n    }\n    else if (this.canvas) {\n      this.canvas.bringForward(this, intersecting);\n    }\n    return this;\n  },\n\n  /**\n   * Moves an object to specified level in stack of drawn objects\n   * @param {Number} index New position of object\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  moveTo: function(index) {\n    if (this.group && this.group.type !== 'activeSelection') {\n      fabric.StaticCanvas.prototype.moveTo.call(this.group, this, index);\n    }\n    else if (this.canvas) {\n      this.canvas.moveTo(this, index);\n    }\n    return this;\n  }\n});\n\n\n/* _TO_SVG_START_ */\n(function() {\n  function getSvgColorString(prop, value) {\n    if (!value) {\n      return prop + ': none; ';\n    }\n    else if (value.toLive) {\n      return prop + ': url(#SVGID_' + value.id + '); ';\n    }\n    else {\n      var color = new fabric.Color(value),\n          str = prop + ': ' + color.toRgb() + '; ',\n          opacity = color.getAlpha();\n      if (opacity !== 1) {\n        //change the color in rgb + opacity\n        str += prop + '-opacity: ' + opacity.toString() + '; ';\n      }\n      return str;\n    }\n  }\n\n  var toFixed = fabric.util.toFixed;\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n    /**\n     * Returns styles-string for svg-export\n     * @param {Boolean} skipShadow a boolean to skip shadow filter output\n     * @return {String}\n     */\n    getSvgStyles: function(skipShadow) {\n\n      var fillRule = this.fillRule ? this.fillRule : 'nonzero',\n          strokeWidth = this.strokeWidth ? this.strokeWidth : '0',\n          strokeDashArray = this.strokeDashArray ? this.strokeDashArray.join(' ') : 'none',\n          strokeDashOffset = this.strokeDashOffset ? this.strokeDashOffset : '0',\n          strokeLineCap = this.strokeLineCap ? this.strokeLineCap : 'butt',\n          strokeLineJoin = this.strokeLineJoin ? this.strokeLineJoin : 'miter',\n          strokeMiterLimit = this.strokeMiterLimit ? this.strokeMiterLimit : '4',\n          opacity = typeof this.opacity !== 'undefined' ? this.opacity : '1',\n          visibility = this.visible ? '' : ' visibility: hidden;',\n          filter = skipShadow ? '' : this.getSvgFilter(),\n          fill = getSvgColorString('fill', this.fill),\n          stroke = getSvgColorString('stroke', this.stroke);\n\n      return [\n        stroke,\n        'stroke-width: ', strokeWidth, '; ',\n        'stroke-dasharray: ', strokeDashArray, '; ',\n        'stroke-linecap: ', strokeLineCap, '; ',\n        'stroke-dashoffset: ', strokeDashOffset, '; ',\n        'stroke-linejoin: ', strokeLineJoin, '; ',\n        'stroke-miterlimit: ', strokeMiterLimit, '; ',\n        fill,\n        'fill-rule: ', fillRule, '; ',\n        'opacity: ', opacity, ';',\n        filter,\n        visibility\n      ].join('');\n    },\n\n    /**\n     * Returns styles-string for svg-export\n     * @param {Object} style the object from which to retrieve style properties\n     * @param {Boolean} useWhiteSpace a boolean to include an additional attribute in the style.\n     * @return {String}\n     */\n    getSvgSpanStyles: function(style, useWhiteSpace) {\n      var term = '; ';\n      var fontFamily = style.fontFamily ?\n        'font-family: ' + (((style.fontFamily.indexOf('\\'') === -1 && style.fontFamily.indexOf('\"') === -1) ?\n          '\\'' + style.fontFamily  + '\\'' : style.fontFamily)) + term : '';\n      var strokeWidth = style.strokeWidth ? 'stroke-width: ' + style.strokeWidth + term : '',\n          fontFamily = fontFamily,\n          fontSize = style.fontSize ? 'font-size: ' + style.fontSize + 'px' + term : '',\n          fontStyle = style.fontStyle ? 'font-style: ' + style.fontStyle + term : '',\n          fontWeight = style.fontWeight ? 'font-weight: ' + style.fontWeight + term : '',\n          fill = style.fill ? getSvgColorString('fill', style.fill) : '',\n          stroke = style.stroke ? getSvgColorString('stroke', style.stroke) : '',\n          textDecoration = this.getSvgTextDecoration(style),\n          deltaY = style.deltaY ? 'baseline-shift: ' + (-style.deltaY) + '; ' : '';\n      if (textDecoration) {\n        textDecoration = 'text-decoration: ' + textDecoration + term;\n      }\n\n      return [\n        stroke,\n        strokeWidth,\n        fontFamily,\n        fontSize,\n        fontStyle,\n        fontWeight,\n        textDecoration,\n        fill,\n        deltaY,\n        useWhiteSpace ? 'white-space: pre; ' : ''\n      ].join('');\n    },\n\n    /**\n     * Returns text-decoration property for svg-export\n     * @param {Object} style the object from which to retrieve style properties\n     * @return {String}\n     */\n    getSvgTextDecoration: function(style) {\n      return ['overline', 'underline', 'line-through'].filter(function(decoration) {\n        return style[decoration.replace('-', '')];\n      }).join(' ');\n    },\n\n    /**\n     * Returns filter for svg shadow\n     * @return {String}\n     */\n    getSvgFilter: function() {\n      return this.shadow ? 'filter: url(#SVGID_' + this.shadow.id + ');' : '';\n    },\n\n    /**\n     * Returns id attribute for svg output\n     * @return {String}\n     */\n    getSvgCommons: function() {\n      return [\n        this.id ? 'id=\"' + this.id + '\" ' : '',\n        this.clipPath ? 'clip-path=\"url(#' + this.clipPath.clipPathId + ')\" ' : '',\n      ].join('');\n    },\n\n    /**\n     * Returns transform-string for svg-export\n     * @param {Boolean} use the full transform or the single object one.\n     * @return {String}\n     */\n    getSvgTransform: function(full, additionalTransform) {\n      var transform = full ? this.calcTransformMatrix() : this.calcOwnMatrix(),\n          svgTransform = 'transform=\"' + fabric.util.matrixToSVG(transform);\n      return svgTransform +\n        (additionalTransform || '') + '\" ';\n    },\n\n    _setSVGBg: function(textBgRects) {\n      if (this.backgroundColor) {\n        var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n        textBgRects.push(\n          '\\t\\t<rect ',\n          this._getFillAttributes(this.backgroundColor),\n          ' x=\"',\n          toFixed(-this.width / 2, NUM_FRACTION_DIGITS),\n          '\" y=\"',\n          toFixed(-this.height / 2, NUM_FRACTION_DIGITS),\n          '\" width=\"',\n          toFixed(this.width, NUM_FRACTION_DIGITS),\n          '\" height=\"',\n          toFixed(this.height, NUM_FRACTION_DIGITS),\n          '\"></rect>\\n');\n      }\n    },\n\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      return this._createBaseSVGMarkup(this._toSVG(reviver), { reviver: reviver });\n    },\n\n    /**\n     * Returns svg clipPath representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toClipPathSVG: function(reviver) {\n      return '\\t' + this._createBaseClipPathSVGMarkup(this._toSVG(reviver), { reviver: reviver });\n    },\n\n    /**\n     * @private\n     */\n    _createBaseClipPathSVGMarkup: function(objectMarkup, options) {\n      options = options || {};\n      var reviver = options.reviver,\n          additionalTransform = options.additionalTransform || '',\n          commonPieces = [\n            this.getSvgTransform(true, additionalTransform),\n            this.getSvgCommons(),\n          ].join(''),\n          // insert commons in the markup, style and svgCommons\n          index = objectMarkup.indexOf('COMMON_PARTS');\n      objectMarkup[index] = commonPieces;\n      return reviver ? reviver(objectMarkup.join('')) : objectMarkup.join('');\n    },\n\n    /**\n     * @private\n     */\n    _createBaseSVGMarkup: function(objectMarkup, options) {\n      options = options || {};\n      var noStyle = options.noStyle,\n          reviver = options.reviver,\n          styleInfo = noStyle ? '' : 'style=\"' + this.getSvgStyles() + '\" ',\n          shadowInfo = options.withShadow ? 'style=\"' + this.getSvgFilter() + '\" ' : '',\n          clipPath = this.clipPath,\n          vectorEffect = this.strokeUniform ? 'vector-effect=\"non-scaling-stroke\" ' : '',\n          absoluteClipPath = clipPath && clipPath.absolutePositioned,\n          stroke = this.stroke, fill = this.fill, shadow = this.shadow,\n          commonPieces, markup = [], clipPathMarkup,\n          // insert commons in the markup, style and svgCommons\n          index = objectMarkup.indexOf('COMMON_PARTS'),\n          additionalTransform = options.additionalTransform;\n      if (clipPath) {\n        clipPath.clipPathId = 'CLIPPATH_' + fabric.Object.__uid++;\n        clipPathMarkup = '<clipPath id=\"' + clipPath.clipPathId + '\" >\\n' +\n          clipPath.toClipPathSVG(reviver) +\n          '</clipPath>\\n';\n      }\n      if (absoluteClipPath) {\n        markup.push(\n          '<g ', shadowInfo, this.getSvgCommons(), ' >\\n'\n        );\n      }\n      markup.push(\n        '<g ',\n        this.getSvgTransform(false),\n        !absoluteClipPath ? shadowInfo + this.getSvgCommons() : '',\n        ' >\\n'\n      );\n      commonPieces = [\n        styleInfo,\n        vectorEffect,\n        noStyle ? '' : this.addPaintOrder(), ' ',\n        additionalTransform ? 'transform=\"' + additionalTransform + '\" ' : '',\n      ].join('');\n      objectMarkup[index] = commonPieces;\n      if (fill && fill.toLive) {\n        markup.push(fill.toSVG(this));\n      }\n      if (stroke && stroke.toLive) {\n        markup.push(stroke.toSVG(this));\n      }\n      if (shadow) {\n        markup.push(shadow.toSVG(this));\n      }\n      if (clipPath) {\n        markup.push(clipPathMarkup);\n      }\n      markup.push(objectMarkup.join(''));\n      markup.push('</g>\\n');\n      absoluteClipPath && markup.push('</g>\\n');\n      return reviver ? reviver(markup.join('')) : markup.join('');\n    },\n\n    addPaintOrder: function() {\n      return this.paintFirst !== 'fill' ? ' paint-order=\"' + this.paintFirst + '\" ' : '';\n    }\n  });\n})();\n/* _TO_SVG_END_ */\n\n\n(function() {\n\n  var extend = fabric.util.object.extend,\n      originalSet = 'stateProperties';\n\n  /*\n    Depends on `stateProperties`\n  */\n  function saveProps(origin, destination, props) {\n    var tmpObj = { }, deep = true;\n    props.forEach(function(prop) {\n      tmpObj[prop] = origin[prop];\n    });\n\n    extend(origin[destination], tmpObj, deep);\n  }\n\n  function _isEqual(origValue, currentValue, firstPass) {\n    if (origValue === currentValue) {\n      // if the objects are identical, return\n      return true;\n    }\n    else if (Array.isArray(origValue)) {\n      if (!Array.isArray(currentValue) || origValue.length !== currentValue.length) {\n        return false;\n      }\n      for (var i = 0, len = origValue.length; i < len; i++) {\n        if (!_isEqual(origValue[i], currentValue[i])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    else if (origValue && typeof origValue === 'object') {\n      var keys = Object.keys(origValue), key;\n      if (!currentValue ||\n          typeof currentValue !== 'object' ||\n          (!firstPass && keys.length !== Object.keys(currentValue).length)\n      ) {\n        return false;\n      }\n      for (var i = 0, len = keys.length; i < len; i++) {\n        key = keys[i];\n        // since clipPath is in the statefull cache list and the clipPath objects\n        // would be iterated as an object, this would lead to possible infinite recursion\n        // we do not want to compare those.\n        if (key === 'canvas' || key === 'group') {\n          continue;\n        }\n        if (!_isEqual(origValue[key], currentValue[key])) {\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n    /**\n     * Returns true if object state (one of its state properties) was changed\n     * @param {String} [propertySet] optional name for the set of property we want to save\n     * @return {Boolean} true if instance' state has changed since `{@link fabric.Object#saveState}` was called\n     */\n    hasStateChanged: function(propertySet) {\n      propertySet = propertySet || originalSet;\n      var dashedPropertySet = '_' + propertySet;\n      if (Object.keys(this[dashedPropertySet]).length < this[propertySet].length) {\n        return true;\n      }\n      return !_isEqual(this[dashedPropertySet], this, true);\n    },\n\n    /**\n     * Saves state of an object\n     * @param {Object} [options] Object with additional `stateProperties` array to include when saving state\n     * @return {fabric.Object} thisArg\n     */\n    saveState: function(options) {\n      var propertySet = options && options.propertySet || originalSet,\n          destination = '_' + propertySet;\n      if (!this[destination]) {\n        return this.setupState(options);\n      }\n      saveProps(this, destination, this[propertySet]);\n      if (options && options.stateProperties) {\n        saveProps(this, destination, options.stateProperties);\n      }\n      return this;\n    },\n\n    /**\n     * Setups state of an object\n     * @param {Object} [options] Object with additional `stateProperties` array to include when saving state\n     * @return {fabric.Object} thisArg\n     */\n    setupState: function(options) {\n      options = options || { };\n      var propertySet = options.propertySet || originalSet;\n      options.propertySet = propertySet;\n      this['_' + propertySet] = { };\n      this.saveState(options);\n      return this;\n    }\n  });\n})();\n\n\n(function() {\n\n  var degreesToRadians = fabric.util.degreesToRadians;\n\n  fabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n    /**\n     * Determines which corner has been clicked\n     * @private\n     * @param {Object} pointer The pointer indicating the mouse position\n     * @return {String|Boolean} corner code (tl, tr, bl, br, etc.), or false if nothing is found\n     */\n    _findTargetCorner: function(pointer, forTouch) {\n      // objects in group, anykind, are not self modificable,\n      // must not return an hovered corner.\n      if (!this.hasControls || this.group || (!this.canvas || this.canvas._activeObject !== this)) {\n        return false;\n      }\n\n      var ex = pointer.x,\n          ey = pointer.y,\n          xPoints,\n          lines, keys = Object.keys(this.oCoords),\n          j = keys.length - 1, i;\n      this.__corner = 0;\n\n      // cycle in reverse order so we pick first the one on top\n      for (; j >= 0; j--) {\n        i = keys[j];\n        if (!this.isControlVisible(i)) {\n          continue;\n        }\n\n        lines = this._getImageLines(forTouch ? this.oCoords[i].touchCorner : this.oCoords[i].corner);\n        // // debugging\n        //\n        // this.canvas.contextTop.fillRect(lines.bottomline.d.x, lines.bottomline.d.y, 2, 2);\n        // this.canvas.contextTop.fillRect(lines.bottomline.o.x, lines.bottomline.o.y, 2, 2);\n        //\n        // this.canvas.contextTop.fillRect(lines.leftline.d.x, lines.leftline.d.y, 2, 2);\n        // this.canvas.contextTop.fillRect(lines.leftline.o.x, lines.leftline.o.y, 2, 2);\n        //\n        // this.canvas.contextTop.fillRect(lines.topline.d.x, lines.topline.d.y, 2, 2);\n        // this.canvas.contextTop.fillRect(lines.topline.o.x, lines.topline.o.y, 2, 2);\n        //\n        // this.canvas.contextTop.fillRect(lines.rightline.d.x, lines.rightline.d.y, 2, 2);\n        // this.canvas.contextTop.fillRect(lines.rightline.o.x, lines.rightline.o.y, 2, 2);\n\n        xPoints = this._findCrossPoints({ x: ex, y: ey }, lines);\n        if (xPoints !== 0 && xPoints % 2 === 1) {\n          this.__corner = i;\n          return i;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Calls a function for each control. The function gets called,\n     * with the control, the object that is calling the iterator and the control's key\n     * @param {Function} fn function to iterate over the controls over\n     */\n    forEachControl: function(fn) {\n      for (var i in this.controls) {\n        fn(this.controls[i], i, this);\n      };\n    },\n\n    /**\n     * Sets the coordinates of the draggable boxes in the corners of\n     * the image used to scale/rotate it.\n     * note: if we would switch to ROUND corner area, all of this would disappear.\n     * everything would resolve to a single point and a pythagorean theorem for the distance\n     * @private\n     */\n    _setCornerCoords: function() {\n      var coords = this.oCoords;\n\n      for (var control in coords) {\n        var controlObject = this.controls[control];\n        coords[control].corner = controlObject.calcCornerCoords(\n          this.angle, this.cornerSize, coords[control].x, coords[control].y, false);\n        coords[control].touchCorner = controlObject.calcCornerCoords(\n          this.angle, this.touchCornerSize, coords[control].x, coords[control].y, true);\n      }\n    },\n\n    /**\n     * Draws a colored layer behind the object, inside its selection borders.\n     * Requires public options: padding, selectionBackgroundColor\n     * this function is called when the context is transformed\n     * has checks to be skipped when the object is on a staticCanvas\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawSelectionBackground: function(ctx) {\n      if (!this.selectionBackgroundColor ||\n        (this.canvas && !this.canvas.interactive) ||\n        (this.canvas && this.canvas._activeObject !== this)\n      ) {\n        return this;\n      }\n      ctx.save();\n      var center = this.getCenterPoint(), wh = this._calculateCurrentDimensions(),\n          vpt = this.canvas.viewportTransform;\n      ctx.translate(center.x, center.y);\n      ctx.scale(1 / vpt[0], 1 / vpt[3]);\n      ctx.rotate(degreesToRadians(this.angle));\n      ctx.fillStyle = this.selectionBackgroundColor;\n      ctx.fillRect(-wh.x / 2, -wh.y / 2, wh.x, wh.y);\n      ctx.restore();\n      return this;\n    },\n\n    /**\n     * Draws borders of an object's bounding box.\n     * Requires public properties: width, height\n     * Requires public options: padding, borderColor\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @param {Object} styleOverride object to override the object style\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawBorders: function(ctx, styleOverride) {\n      styleOverride = styleOverride || {};\n      var wh = this._calculateCurrentDimensions(),\n          strokeWidth = this.borderScaleFactor,\n          width = wh.x + strokeWidth,\n          height = wh.y + strokeWidth,\n          hasControls = typeof styleOverride.hasControls !== 'undefined' ?\n            styleOverride.hasControls : this.hasControls,\n          shouldStroke = false;\n\n      ctx.save();\n      ctx.strokeStyle = styleOverride.borderColor || this.borderColor;\n      this._setLineDash(ctx, styleOverride.borderDashArray || this.borderDashArray, null);\n\n      ctx.strokeRect(\n        -width / 2,\n        -height / 2,\n        width,\n        height\n      );\n\n      if (hasControls) {\n        ctx.beginPath();\n        this.forEachControl(function(control, key, fabricObject) {\n          // in this moment, the ctx is centered on the object.\n          // width and height of the above function are the size of the bbox.\n          if (control.withConnection && control.getVisibility(fabricObject, key)) {\n            // reset movement for each control\n            shouldStroke = true;\n            ctx.moveTo(control.x * width, control.y * height);\n            ctx.lineTo(\n              control.x * width + control.offsetX,\n              control.y * height + control.offsetY\n            );\n          }\n        });\n        if (shouldStroke) {\n          ctx.stroke();\n        }\n      }\n      ctx.restore();\n      return this;\n    },\n\n    /**\n     * Draws borders of an object's bounding box when it is inside a group.\n     * Requires public properties: width, height\n     * Requires public options: padding, borderColor\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @param {object} options object representing current object parameters\n     * @param {Object} styleOverride object to override the object style\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawBordersInGroup: function(ctx, options, styleOverride) {\n      styleOverride = styleOverride || {};\n      var bbox = fabric.util.sizeAfterTransform(this.width, this.height, options),\n          strokeWidth = this.strokeWidth,\n          strokeUniform = this.strokeUniform,\n          borderScaleFactor = this.borderScaleFactor,\n          width =\n            bbox.x + strokeWidth * (strokeUniform ? this.canvas.getZoom() : options.scaleX) + borderScaleFactor,\n          height =\n            bbox.y + strokeWidth * (strokeUniform ? this.canvas.getZoom() : options.scaleY) + borderScaleFactor;\n      ctx.save();\n      this._setLineDash(ctx, styleOverride.borderDashArray || this.borderDashArray, null);\n      ctx.strokeStyle = styleOverride.borderColor || this.borderColor;\n      ctx.strokeRect(\n        -width / 2,\n        -height / 2,\n        width,\n        height\n      );\n\n      ctx.restore();\n      return this;\n    },\n\n    /**\n     * Draws corners of an object's bounding box.\n     * Requires public properties: width, height\n     * Requires public options: cornerSize, padding\n     * @param {CanvasRenderingContext2D} ctx Context to draw on\n     * @param {Object} styleOverride object to override the object style\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    drawControls: function(ctx, styleOverride) {\n      styleOverride = styleOverride || {};\n      ctx.save();\n      ctx.setTransform(this.canvas.getRetinaScaling(), 0, 0, this.canvas.getRetinaScaling(), 0, 0);\n      ctx.strokeStyle = ctx.fillStyle = styleOverride.cornerColor || this.cornerColor;\n      if (!this.transparentCorners) {\n        ctx.strokeStyle = styleOverride.cornerStrokeColor || this.cornerStrokeColor;\n      }\n      this._setLineDash(ctx, styleOverride.cornerDashArray || this.cornerDashArray, null);\n      this.setCoords();\n      this.forEachControl(function(control, key, fabricObject) {\n        if (control.getVisibility(fabricObject, key)) {\n          control.render(ctx,\n            fabricObject.oCoords[key].x,\n            fabricObject.oCoords[key].y, styleOverride, fabricObject);\n        }\n      });\n      ctx.restore();\n\n      return this;\n    },\n\n    /**\n     * Returns true if the specified control is visible, false otherwise.\n     * @param {String} controlKey The key of the control. Possible values are 'tl', 'tr', 'br', 'bl', 'ml', 'mt', 'mr', 'mb', 'mtr'.\n     * @returns {Boolean} true if the specified control is visible, false otherwise\n     */\n    isControlVisible: function(controlKey) {\n      return this.controls[controlKey] && this.controls[controlKey].getVisibility(this, controlKey);\n    },\n\n    /**\n     * Sets the visibility of the specified control.\n     * @param {String} controlKey The key of the control. Possible values are 'tl', 'tr', 'br', 'bl', 'ml', 'mt', 'mr', 'mb', 'mtr'.\n     * @param {Boolean} visible true to set the specified control visible, false otherwise\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setControlVisible: function(controlKey, visible) {\n      if (!this._controlsVisibility) {\n        this._controlsVisibility = {};\n      }\n      this._controlsVisibility[controlKey] = visible;\n      return this;\n    },\n\n    /**\n     * Sets the visibility state of object controls.\n     * @param {Object} [options] Options object\n     * @param {Boolean} [options.bl] true to enable the bottom-left control, false to disable it\n     * @param {Boolean} [options.br] true to enable the bottom-right control, false to disable it\n     * @param {Boolean} [options.mb] true to enable the middle-bottom control, false to disable it\n     * @param {Boolean} [options.ml] true to enable the middle-left control, false to disable it\n     * @param {Boolean} [options.mr] true to enable the middle-right control, false to disable it\n     * @param {Boolean} [options.mt] true to enable the middle-top control, false to disable it\n     * @param {Boolean} [options.tl] true to enable the top-left control, false to disable it\n     * @param {Boolean} [options.tr] true to enable the top-right control, false to disable it\n     * @param {Boolean} [options.mtr] true to enable the middle-top-rotate control, false to disable it\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    setControlsVisibility: function(options) {\n      options || (options = { });\n\n      for (var p in options) {\n        this.setControlVisible(p, options[p]);\n      }\n      return this;\n    },\n\n\n    /**\n     * This callback function is called every time _discardActiveObject or _setActiveObject\n     * try to to deselect this object. If the function returns true, the process is cancelled\n     * @param {Object} [options] options sent from the upper functions\n     * @param {Event} [options.e] event if the process is generated by an event\n     */\n    onDeselect: function() {\n      // implemented by sub-classes, as needed.\n    },\n\n\n    /**\n     * This callback function is called every time _discardActiveObject or _setActiveObject\n     * try to to select this object. If the function returns true, the process is cancelled\n     * @param {Object} [options] options sent from the upper functions\n     * @param {Event} [options.e] event if the process is generated by an event\n     */\n    onSelect: function() {\n      // implemented by sub-classes, as needed.\n    }\n  });\n})();\n\n\nfabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n\n  /**\n   * Animation duration (in ms) for fx* methods\n   * @type Number\n   * @default\n   */\n  FX_DURATION: 500,\n\n  /**\n   * Centers object horizontally with animation.\n   * @param {fabric.Object} object Object to center\n   * @param {Object} [callbacks] Callbacks object with optional \"onComplete\" and/or \"onChange\" properties\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  fxCenterObjectH: function (object, callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    fabric.util.animate({\n      startValue: object.left,\n      endValue: this.getCenter().left,\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        object.set('left', value);\n        _this.requestRenderAll();\n        onChange();\n      },\n      onComplete: function() {\n        object.setCoords();\n        onComplete();\n      }\n    });\n\n    return this;\n  },\n\n  /**\n   * Centers object vertically with animation.\n   * @param {fabric.Object} object Object to center\n   * @param {Object} [callbacks] Callbacks object with optional \"onComplete\" and/or \"onChange\" properties\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  fxCenterObjectV: function (object, callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    fabric.util.animate({\n      startValue: object.top,\n      endValue: this.getCenter().top,\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        object.set('top', value);\n        _this.requestRenderAll();\n        onChange();\n      },\n      onComplete: function() {\n        object.setCoords();\n        onComplete();\n      }\n    });\n\n    return this;\n  },\n\n  /**\n   * Same as `fabric.Canvas#remove` but animated\n   * @param {fabric.Object} object Object to remove\n   * @param {Object} [callbacks] Callbacks object with optional \"onComplete\" and/or \"onChange\" properties\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  fxRemove: function (object, callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    fabric.util.animate({\n      startValue: object.opacity,\n      endValue: 0,\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        object.set('opacity', value);\n        _this.requestRenderAll();\n        onChange();\n      },\n      onComplete: function () {\n        _this.remove(object);\n        onComplete();\n      }\n    });\n\n    return this;\n  }\n});\n\nfabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n  /**\n   * Animates object's properties\n   * @param {String|Object} property Property to animate (if string) or properties to animate (if object)\n   * @param {Number|Object} value Value to animate property to (if string was given first) or options object\n   * @return {fabric.Object} thisArg\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#animation}\n   * @chainable\n   *\n   * As object  multiple properties\n   *\n   * object.animate({ left: ..., top: ... });\n   * object.animate({ left: ..., top: ... }, { duration: ... });\n   *\n   * As string  one property\n   *\n   * object.animate('left', ...);\n   * object.animate('left', { duration: ... });\n   *\n   */\n  animate: function() {\n    if (arguments[0] && typeof arguments[0] === 'object') {\n      var propsToAnimate = [], prop, skipCallbacks;\n      for (prop in arguments[0]) {\n        propsToAnimate.push(prop);\n      }\n      for (var i = 0, len = propsToAnimate.length; i < len; i++) {\n        prop = propsToAnimate[i];\n        skipCallbacks = i !== len - 1;\n        this._animate(prop, arguments[0][prop], arguments[1], skipCallbacks);\n      }\n    }\n    else {\n      this._animate.apply(this, arguments);\n    }\n    return this;\n  },\n\n  /**\n   * @private\n   * @param {String} property Property to animate\n   * @param {String} to Value to animate to\n   * @param {Object} [options] Options object\n   * @param {Boolean} [skipCallbacks] When true, callbacks like onchange and oncomplete are not invoked\n   */\n  _animate: function(property, to, options, skipCallbacks) {\n    var _this = this, propPair;\n\n    to = to.toString();\n\n    if (!options) {\n      options = { };\n    }\n    else {\n      options = fabric.util.object.clone(options);\n    }\n\n    if (~property.indexOf('.')) {\n      propPair = property.split('.');\n    }\n\n    var propIsColor =\n      _this.colorProperties.indexOf(property) > -1 ||\n      (propPair && _this.colorProperties.indexOf(propPair[1]) > -1);\n\n    var currentValue = propPair\n      ? this.get(propPair[0])[propPair[1]]\n      : this.get(property);\n\n    if (!('from' in options)) {\n      options.from = currentValue;\n    }\n\n    if (!propIsColor) {\n      if (~to.indexOf('=')) {\n        to = currentValue + parseFloat(to.replace('=', ''));\n      }\n      else {\n        to = parseFloat(to);\n      }\n    }\n\n    var _options = {\n      startValue: options.from,\n      endValue: to,\n      byValue: options.by,\n      easing: options.easing,\n      duration: options.duration,\n      abort: options.abort && function () {\n        return options.abort.call(_this);\n      },\n      onChange: function (value, valueProgress, timeProgress) {\n        if (propPair) {\n          _this[propPair[0]][propPair[1]] = value;\n        }\n        else {\n          _this.set(property, value);\n        }\n        if (skipCallbacks) {\n          return;\n        }\n        options.onChange && options.onChange(value, valueProgress, timeProgress);\n      },\n      onComplete: function (value, valueProgress, timeProgress) {\n        if (skipCallbacks) {\n          return;\n        }\n\n        _this.setCoords();\n        options.onComplete && options.onComplete(value, valueProgress, timeProgress);\n      }\n    };\n\n    if (propIsColor) {\n      fabric.util.animateColor(_options.startValue, _options.endValue, _options.duration, _options);\n    }\n    else {\n      fabric.util.animate(_options);\n    }\n  }\n});\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      clone = fabric.util.object.clone,\n      coordProps = { x1: 1, x2: 1, y1: 1, y2: 1 },\n      supportsLineDash = fabric.StaticCanvas.supports('setLineDash');\n\n  if (fabric.Line) {\n    fabric.warn('fabric.Line is already defined');\n    return;\n  }\n\n  /**\n   * Line class\n   * @class fabric.Line\n   * @extends fabric.Object\n   * @see {@link fabric.Line#initialize} for constructor definition\n   */\n  fabric.Line = fabric.util.createClass(fabric.Object, /** @lends fabric.Line.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'line',\n\n    /**\n     * x value or first line edge\n     * @type Number\n     * @default\n     */\n    x1: 0,\n\n    /**\n     * y value or first line edge\n     * @type Number\n     * @default\n     */\n    y1: 0,\n\n    /**\n     * x value or second line edge\n     * @type Number\n     * @default\n     */\n    x2: 0,\n\n    /**\n     * y value or second line edge\n     * @type Number\n     * @default\n     */\n    y2: 0,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('x1', 'x2', 'y1', 'y2'),\n\n    /**\n     * Constructor\n     * @param {Array} [points] Array of points\n     * @param {Object} [options] Options object\n     * @return {fabric.Line} thisArg\n     */\n    initialize: function(points, options) {\n      if (!points) {\n        points = [0, 0, 0, 0];\n      }\n\n      this.callSuper('initialize', options);\n\n      this.set('x1', points[0]);\n      this.set('y1', points[1]);\n      this.set('x2', points[2]);\n      this.set('y2', points[3]);\n\n      this._setWidthHeight(options);\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options\n     */\n    _setWidthHeight: function(options) {\n      options || (options = { });\n\n      this.width = Math.abs(this.x2 - this.x1);\n      this.height = Math.abs(this.y2 - this.y1);\n\n      this.left = 'left' in options\n        ? options.left\n        : this._getLeftToOriginX();\n\n      this.top = 'top' in options\n        ? options.top\n        : this._getTopToOriginY();\n    },\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     */\n    _set: function(key, value) {\n      this.callSuper('_set', key, value);\n      if (typeof coordProps[key] !== 'undefined') {\n        this._setWidthHeight();\n      }\n      return this;\n    },\n\n    /**\n     * @private\n     * @return {Number} leftToOriginX Distance from left edge of canvas to originX of Line.\n     */\n    _getLeftToOriginX: makeEdgeToOriginGetter(\n      { // property names\n        origin: 'originX',\n        axis1: 'x1',\n        axis2: 'x2',\n        dimension: 'width'\n      },\n      { // possible values of origin\n        nearest: 'left',\n        center: 'center',\n        farthest: 'right'\n      }\n    ),\n\n    /**\n     * @private\n     * @return {Number} topToOriginY Distance from top edge of canvas to originY of Line.\n     */\n    _getTopToOriginY: makeEdgeToOriginGetter(\n      { // property names\n        origin: 'originY',\n        axis1: 'y1',\n        axis2: 'y2',\n        dimension: 'height'\n      },\n      { // possible values of origin\n        nearest: 'top',\n        center: 'center',\n        farthest: 'bottom'\n      }\n    ),\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      ctx.beginPath();\n\n      if (!this.strokeDashArray || this.strokeDashArray && supportsLineDash) {\n        // move from center (of virtual box) to its left/top corner\n        // we can't assume x1, y1 is top left and x2, y2 is bottom right\n        var p = this.calcLinePoints();\n        ctx.moveTo(p.x1, p.y1);\n        ctx.lineTo(p.x2, p.y2);\n      }\n\n      ctx.lineWidth = this.strokeWidth;\n\n      // TODO: test this\n      // make sure setting \"fill\" changes color of a line\n      // (by copying fillStyle to strokeStyle, since line is stroked, not filled)\n      var origStrokeStyle = ctx.strokeStyle;\n      ctx.strokeStyle = this.stroke || ctx.fillStyle;\n      this.stroke && this._renderStroke(ctx);\n      ctx.strokeStyle = origStrokeStyle;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var p = this.calcLinePoints();\n\n      ctx.beginPath();\n      fabric.util.drawDashedLine(ctx, p.x1, p.y1, p.x2, p.y2, this.strokeDashArray);\n      ctx.closePath();\n    },\n\n    /**\n     * This function is an helper for svg import. it returns the center of the object in the svg\n     * untransformed coordinates\n     * @private\n     * @return {Object} center point from element coordinates\n     */\n    _findCenterFromElement: function() {\n      return {\n        x: (this.x1 + this.x2) / 2,\n        y: (this.y1 + this.y2) / 2,\n      };\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @method toObject\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), this.calcLinePoints());\n    },\n\n    /*\n     * Calculate object dimensions from its properties\n     * @private\n     */\n    _getNonTransformedDimensions: function() {\n      var dim = this.callSuper('_getNonTransformedDimensions');\n      if (this.strokeLineCap === 'butt') {\n        if (this.width === 0) {\n          dim.y -= this.strokeWidth;\n        }\n        if (this.height === 0) {\n          dim.x -= this.strokeWidth;\n        }\n      }\n      return dim;\n    },\n\n    /**\n     * Recalculates line points given width and height\n     * @private\n     */\n    calcLinePoints: function() {\n      var xMult = this.x1 <= this.x2 ? -1 : 1,\n          yMult = this.y1 <= this.y2 ? -1 : 1,\n          x1 = (xMult * this.width * 0.5),\n          y1 = (yMult * this.height * 0.5),\n          x2 = (xMult * this.width * -0.5),\n          y2 = (yMult * this.height * -0.5);\n\n      return {\n        x1: x1,\n        x2: x2,\n        y1: y1,\n        y2: y2\n      };\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var p = this.calcLinePoints();\n      return [\n        '<line ', 'COMMON_PARTS',\n        'x1=\"', p.x1,\n        '\" y1=\"', p.y1,\n        '\" x2=\"', p.x2,\n        '\" y2=\"', p.y2,\n        '\" />\\n'\n      ];\n    },\n    /* _TO_SVG_END_ */\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Line.fromElement})\n   * @static\n   * @memberOf fabric.Line\n   * @see http://www.w3.org/TR/SVG/shapes.html#LineElement\n   */\n  fabric.Line.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('x1 y1 x2 y2'.split(' '));\n\n  /**\n   * Returns fabric.Line instance from an SVG element\n   * @static\n   * @memberOf fabric.Line\n   * @param {SVGElement} element Element to parse\n   * @param {Object} [options] Options object\n   * @param {Function} [callback] callback function invoked after parsing\n   */\n  fabric.Line.fromElement = function(element, callback, options) {\n    options = options || { };\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Line.ATTRIBUTE_NAMES),\n        points = [\n          parsedAttributes.x1 || 0,\n          parsedAttributes.y1 || 0,\n          parsedAttributes.x2 || 0,\n          parsedAttributes.y2 || 0\n        ];\n    callback(new fabric.Line(points, extend(parsedAttributes, options)));\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Line instance from an object representation\n   * @static\n   * @memberOf fabric.Line\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   */\n  fabric.Line.fromObject = function(object, callback) {\n    function _callback(instance) {\n      delete instance.points;\n      callback && callback(instance);\n    };\n    var options = clone(object, true);\n    options.points = [object.x1, object.y1, object.x2, object.y2];\n    fabric.Object._fromObject('Line', options, _callback, 'points');\n  };\n\n  /**\n   * Produces a function that calculates distance from canvas edge to Line origin.\n   */\n  function makeEdgeToOriginGetter(propertyNames, originValues) {\n    var origin = propertyNames.origin,\n        axis1 = propertyNames.axis1,\n        axis2 = propertyNames.axis2,\n        dimension = propertyNames.dimension,\n        nearest = originValues.nearest,\n        center = originValues.center,\n        farthest = originValues.farthest;\n\n    return function() {\n      switch (this.get(origin)) {\n        case nearest:\n          return Math.min(this.get(axis1), this.get(axis2));\n        case center:\n          return Math.min(this.get(axis1), this.get(axis2)) + (0.5 * this.get(dimension));\n        case farthest:\n          return Math.max(this.get(axis1), this.get(axis2));\n      }\n    };\n\n  }\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      pi = Math.PI;\n\n  if (fabric.Circle) {\n    fabric.warn('fabric.Circle is already defined.');\n    return;\n  }\n\n  /**\n   * Circle class\n   * @class fabric.Circle\n   * @extends fabric.Object\n   * @see {@link fabric.Circle#initialize} for constructor definition\n   */\n  fabric.Circle = fabric.util.createClass(fabric.Object, /** @lends fabric.Circle.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'circle',\n\n    /**\n     * Radius of this circle\n     * @type Number\n     * @default\n     */\n    radius: 0,\n\n    /**\n     * Start angle of the circle, moving clockwise\n     * deprecated type, this should be in degree, this was an oversight.\n     * probably will change to degrees in next major version\n     * @type Number\n     * @default 0\n     */\n    startAngle: 0,\n\n    /**\n     * End angle of the circle\n     * deprecated type, this should be in degree, this was an oversight.\n     * probably will change to degrees in next major version\n     * @type Number\n     * @default 2Pi\n     */\n    endAngle: pi * 2,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('radius', 'startAngle', 'endAngle'),\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     * @return {fabric.Circle} thisArg\n     */\n    _set: function(key, value) {\n      this.callSuper('_set', key, value);\n\n      if (key === 'radius') {\n        this.setRadius(value);\n      }\n\n      return this;\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['radius', 'startAngle', 'endAngle'].concat(propertiesToInclude));\n    },\n\n    /* _TO_SVG_START_ */\n\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var svgString, x = 0, y = 0,\n          angle = (this.endAngle - this.startAngle) % ( 2 * pi);\n\n      if (angle === 0) {\n        svgString = [\n          '<circle ', 'COMMON_PARTS',\n          'cx=\"' + x + '\" cy=\"' + y + '\" ',\n          'r=\"', this.radius,\n          '\" />\\n'\n        ];\n      }\n      else {\n        var startX = fabric.util.cos(this.startAngle) * this.radius,\n            startY = fabric.util.sin(this.startAngle) * this.radius,\n            endX = fabric.util.cos(this.endAngle) * this.radius,\n            endY = fabric.util.sin(this.endAngle) * this.radius,\n            largeFlag = angle > pi ? '1' : '0';\n        svgString = [\n          '<path d=\"M ' + startX + ' ' + startY,\n          ' A ' + this.radius + ' ' + this.radius,\n          ' 0 ', +largeFlag + ' 1', ' ' + endX + ' ' + endY,\n          '\" ', 'COMMON_PARTS', ' />\\n'\n        ];\n      }\n      return svgString;\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render on\n     */\n    _render: function(ctx) {\n      ctx.beginPath();\n      ctx.arc(\n        0,\n        0,\n        this.radius,\n        this.startAngle,\n        this.endAngle, false);\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * Returns horizontal radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRadiusX: function() {\n      return this.get('radius') * this.get('scaleX');\n    },\n\n    /**\n     * Returns vertical radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRadiusY: function() {\n      return this.get('radius') * this.get('scaleY');\n    },\n\n    /**\n     * Sets radius of an object (and updates width accordingly)\n     * @return {fabric.Circle} thisArg\n     */\n    setRadius: function(value) {\n      this.radius = value;\n      return this.set('width', value * 2).set('height', value * 2);\n    },\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Circle.fromElement})\n   * @static\n   * @memberOf fabric.Circle\n   * @see: http://www.w3.org/TR/SVG/shapes.html#CircleElement\n   */\n  fabric.Circle.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('cx cy r'.split(' '));\n\n  /**\n   * Returns {@link fabric.Circle} instance from an SVG element\n   * @static\n   * @memberOf fabric.Circle\n   * @param {SVGElement} element Element to parse\n   * @param {Function} [callback] Options callback invoked after parsing is finished\n   * @param {Object} [options] Options object\n   * @throws {Error} If value of `r` attribute is missing or invalid\n   */\n  fabric.Circle.fromElement = function(element, callback) {\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Circle.ATTRIBUTE_NAMES);\n\n    if (!isValidRadius(parsedAttributes)) {\n      throw new Error('value of `r` attribute is required and can not be negative');\n    }\n\n    parsedAttributes.left = (parsedAttributes.left || 0) - parsedAttributes.radius;\n    parsedAttributes.top = (parsedAttributes.top || 0) - parsedAttributes.radius;\n    callback(new fabric.Circle(parsedAttributes));\n  };\n\n  /**\n   * @private\n   */\n  function isValidRadius(attributes) {\n    return (('radius' in attributes) && (attributes.radius >= 0));\n  }\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns {@link fabric.Circle} instance from an object representation\n   * @static\n   * @memberOf fabric.Circle\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   * @return {Object} Instance of fabric.Circle\n   */\n  fabric.Circle.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Circle', object, callback);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Triangle) {\n    fabric.warn('fabric.Triangle is already defined');\n    return;\n  }\n\n  /**\n   * Triangle class\n   * @class fabric.Triangle\n   * @extends fabric.Object\n   * @return {fabric.Triangle} thisArg\n   * @see {@link fabric.Triangle#initialize} for constructor definition\n   */\n  fabric.Triangle = fabric.util.createClass(fabric.Object, /** @lends fabric.Triangle.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'triangle',\n\n    /**\n     * Width is set to 100 to compensate the old initialize code that was setting it to 100\n     * @type Number\n     * @default\n     */\n    width: 100,\n\n    /**\n     * Height is set to 100 to compensate the old initialize code that was setting it to 100\n     * @type Number\n     * @default\n     */\n    height: 100,\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      var widthBy2 = this.width / 2,\n          heightBy2 = this.height / 2;\n\n      ctx.beginPath();\n      ctx.moveTo(-widthBy2, heightBy2);\n      ctx.lineTo(0, -heightBy2);\n      ctx.lineTo(widthBy2, heightBy2);\n      ctx.closePath();\n\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var widthBy2 = this.width / 2,\n          heightBy2 = this.height / 2;\n\n      ctx.beginPath();\n      fabric.util.drawDashedLine(ctx, -widthBy2, heightBy2, 0, -heightBy2, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, 0, -heightBy2, widthBy2, heightBy2, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, widthBy2, heightBy2, -widthBy2, heightBy2, this.strokeDashArray);\n      ctx.closePath();\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var widthBy2 = this.width / 2,\n          heightBy2 = this.height / 2,\n          points = [\n            -widthBy2 + ' ' + heightBy2,\n            '0 ' + -heightBy2,\n            widthBy2 + ' ' + heightBy2\n          ].join(',');\n      return [\n        '<polygon ', 'COMMON_PARTS',\n        'points=\"', points,\n        '\" />'\n      ];\n    },\n    /* _TO_SVG_END_ */\n  });\n\n  /**\n   * Returns {@link fabric.Triangle} instance from an object representation\n   * @static\n   * @memberOf fabric.Triangle\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   */\n  fabric.Triangle.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Triangle', object, callback);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      piBy2   = Math.PI * 2;\n\n  if (fabric.Ellipse) {\n    fabric.warn('fabric.Ellipse is already defined.');\n    return;\n  }\n\n  /**\n   * Ellipse class\n   * @class fabric.Ellipse\n   * @extends fabric.Object\n   * @return {fabric.Ellipse} thisArg\n   * @see {@link fabric.Ellipse#initialize} for constructor definition\n   */\n  fabric.Ellipse = fabric.util.createClass(fabric.Object, /** @lends fabric.Ellipse.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'ellipse',\n\n    /**\n     * Horizontal radius\n     * @type Number\n     * @default\n     */\n    rx:   0,\n\n    /**\n     * Vertical radius\n     * @type Number\n     * @default\n     */\n    ry:   0,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('rx', 'ry'),\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     * @return {fabric.Ellipse} thisArg\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      this.set('rx', options && options.rx || 0);\n      this.set('ry', options && options.ry || 0);\n    },\n\n    /**\n     * @private\n     * @param {String} key\n     * @param {*} value\n     * @return {fabric.Ellipse} thisArg\n     */\n    _set: function(key, value) {\n      this.callSuper('_set', key, value);\n      switch (key) {\n\n        case 'rx':\n          this.rx = value;\n          this.set('width', value * 2);\n          break;\n\n        case 'ry':\n          this.ry = value;\n          this.set('height', value * 2);\n          break;\n\n      }\n      return this;\n    },\n\n    /**\n     * Returns horizontal radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRx: function() {\n      return this.get('rx') * this.get('scaleX');\n    },\n\n    /**\n     * Returns Vertical radius of an object (according to how an object is scaled)\n     * @return {Number}\n     */\n    getRy: function() {\n      return this.get('ry') * this.get('scaleY');\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['rx', 'ry'].concat(propertiesToInclude));\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      return [\n        '<ellipse ', 'COMMON_PARTS',\n        'cx=\"0\" cy=\"0\" ',\n        'rx=\"', this.rx,\n        '\" ry=\"', this.ry,\n        '\" />\\n'\n      ];\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render on\n     */\n    _render: function(ctx) {\n      ctx.beginPath();\n      ctx.save();\n      ctx.transform(1, 0, 0, this.ry / this.rx, 0, 0);\n      ctx.arc(\n        0,\n        0,\n        this.rx,\n        0,\n        piBy2,\n        false);\n      ctx.restore();\n      this._renderPaintInOrder(ctx);\n    },\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Ellipse.fromElement})\n   * @static\n   * @memberOf fabric.Ellipse\n   * @see http://www.w3.org/TR/SVG/shapes.html#EllipseElement\n   */\n  fabric.Ellipse.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('cx cy rx ry'.split(' '));\n\n  /**\n   * Returns {@link fabric.Ellipse} instance from an SVG element\n   * @static\n   * @memberOf fabric.Ellipse\n   * @param {SVGElement} element Element to parse\n   * @param {Function} [callback] Options callback invoked after parsing is finished\n   * @return {fabric.Ellipse}\n   */\n  fabric.Ellipse.fromElement = function(element, callback) {\n\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Ellipse.ATTRIBUTE_NAMES);\n\n    parsedAttributes.left = (parsedAttributes.left || 0) - parsedAttributes.rx;\n    parsedAttributes.top = (parsedAttributes.top || 0) - parsedAttributes.ry;\n    callback(new fabric.Ellipse(parsedAttributes));\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns {@link fabric.Ellipse} instance from an object representation\n   * @static\n   * @memberOf fabric.Ellipse\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as first argument\n   * @return {fabric.Ellipse}\n   */\n  fabric.Ellipse.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Ellipse', object, callback);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend;\n\n  if (fabric.Rect) {\n    fabric.warn('fabric.Rect is already defined');\n    return;\n  }\n\n  /**\n   * Rectangle class\n   * @class fabric.Rect\n   * @extends fabric.Object\n   * @return {fabric.Rect} thisArg\n   * @see {@link fabric.Rect#initialize} for constructor definition\n   */\n  fabric.Rect = fabric.util.createClass(fabric.Object, /** @lends fabric.Rect.prototype */ {\n\n    /**\n     * List of properties to consider when checking if state of an object is changed ({@link fabric.Object#hasStateChanged})\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: fabric.Object.prototype.stateProperties.concat('rx', 'ry'),\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'rect',\n\n    /**\n     * Horizontal border radius\n     * @type Number\n     * @default\n     */\n    rx:   0,\n\n    /**\n     * Vertical border radius\n     * @type Number\n     * @default\n     */\n    ry:   0,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('rx', 'ry'),\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      this._initRxRy();\n    },\n\n    /**\n     * Initializes rx/ry attributes\n     * @private\n     */\n    _initRxRy: function() {\n      if (this.rx && !this.ry) {\n        this.ry = this.rx;\n      }\n      else if (this.ry && !this.rx) {\n        this.rx = this.ry;\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n\n      // 1x1 case (used in spray brush) optimization was removed because\n      // with caching and higher zoom level this makes more damage than help\n\n      var rx = this.rx ? Math.min(this.rx, this.width / 2) : 0,\n          ry = this.ry ? Math.min(this.ry, this.height / 2) : 0,\n          w = this.width,\n          h = this.height,\n          x = -this.width / 2,\n          y = -this.height / 2,\n          isRounded = rx !== 0 || ry !== 0,\n          /* \"magic number\" for bezier approximations of arcs (http://itc.ktu.lt/itc354/Riskus354.pdf) */\n          k = 1 - 0.5522847498;\n      ctx.beginPath();\n\n      ctx.moveTo(x + rx, y);\n\n      ctx.lineTo(x + w - rx, y);\n      isRounded && ctx.bezierCurveTo(x + w - k * rx, y, x + w, y + k * ry, x + w, y + ry);\n\n      ctx.lineTo(x + w, y + h - ry);\n      isRounded && ctx.bezierCurveTo(x + w, y + h - k * ry, x + w - k * rx, y + h, x + w - rx, y + h);\n\n      ctx.lineTo(x + rx, y + h);\n      isRounded && ctx.bezierCurveTo(x + k * rx, y + h, x, y + h - k * ry, x, y + h - ry);\n\n      ctx.lineTo(x, y + ry);\n      isRounded && ctx.bezierCurveTo(x, y + k * ry, x + k * rx, y, x + rx, y);\n\n      ctx.closePath();\n\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var x = -this.width / 2,\n          y = -this.height / 2,\n          w = this.width,\n          h = this.height;\n\n      ctx.beginPath();\n      fabric.util.drawDashedLine(ctx, x, y, x + w, y, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x + w, y, x + w, y + h, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x + w, y + h, x, y + h, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x, y + h, x, y, this.strokeDashArray);\n      ctx.closePath();\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['rx', 'ry'].concat(propertiesToInclude));\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var x = -this.width / 2, y = -this.height / 2;\n      return [\n        '<rect ', 'COMMON_PARTS',\n        'x=\"', x, '\" y=\"', y,\n        '\" rx=\"', this.rx, '\" ry=\"', this.ry,\n        '\" width=\"', this.width, '\" height=\"', this.height,\n        '\" />\\n'\n      ];\n    },\n    /* _TO_SVG_END_ */\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by `fabric.Rect.fromElement`)\n   * @static\n   * @memberOf fabric.Rect\n   * @see: http://www.w3.org/TR/SVG/shapes.html#RectElement\n   */\n  fabric.Rect.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat('x y rx ry width height'.split(' '));\n\n  /**\n   * Returns {@link fabric.Rect} instance from an SVG element\n   * @static\n   * @memberOf fabric.Rect\n   * @param {SVGElement} element Element to parse\n   * @param {Function} callback callback function invoked after parsing\n   * @param {Object} [options] Options object\n   */\n  fabric.Rect.fromElement = function(element, callback, options) {\n    if (!element) {\n      return callback(null);\n    }\n    options = options || { };\n\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Rect.ATTRIBUTE_NAMES);\n    parsedAttributes.left = parsedAttributes.left || 0;\n    parsedAttributes.top  = parsedAttributes.top  || 0;\n    parsedAttributes.height  = parsedAttributes.height || 0;\n    parsedAttributes.width  = parsedAttributes.width || 0;\n    var rect = new fabric.Rect(extend((options ? fabric.util.object.clone(options) : { }), parsedAttributes));\n    rect.visible = rect.visible && rect.width > 0 && rect.height > 0;\n    callback(rect);\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns {@link fabric.Rect} instance from an object representation\n   * @static\n   * @memberOf fabric.Rect\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Rect instance is created\n   */\n  fabric.Rect.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Rect', object, callback);\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      min = fabric.util.array.min,\n      max = fabric.util.array.max,\n      toFixed = fabric.util.toFixed;\n\n  if (fabric.Polyline) {\n    fabric.warn('fabric.Polyline is already defined');\n    return;\n  }\n\n  /**\n   * Polyline class\n   * @class fabric.Polyline\n   * @extends fabric.Object\n   * @see {@link fabric.Polyline#initialize} for constructor definition\n   */\n  fabric.Polyline = fabric.util.createClass(fabric.Object, /** @lends fabric.Polyline.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'polyline',\n\n    /**\n     * Points array\n     * @type Array\n     * @default\n     */\n    points: null,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('points'),\n\n    /**\n     * Constructor\n     * @param {Array} points Array of points (where each point is an object with x and y)\n     * @param {Object} [options] Options object\n     * @return {fabric.Polyline} thisArg\n     * @example\n     * var poly = new fabric.Polyline([\n     *     { x: 10, y: 10 },\n     *     { x: 50, y: 30 },\n     *     { x: 40, y: 70 },\n     *     { x: 60, y: 50 },\n     *     { x: 100, y: 150 },\n     *     { x: 40, y: 100 }\n     *   ], {\n     *   stroke: 'red',\n     *   left: 100,\n     *   top: 100\n     * });\n     */\n    initialize: function(points, options) {\n      options = options || {};\n      this.points = points || [];\n      this.callSuper('initialize', options);\n      this._setPositionDimensions(options);\n    },\n\n    _setPositionDimensions: function(options) {\n      var calcDim = this._calcDimensions(options), correctLeftTop;\n      this.width = calcDim.width;\n      this.height = calcDim.height;\n      if (!options.fromSVG) {\n        correctLeftTop = this.translateToGivenOrigin(\n          { x: calcDim.left - this.strokeWidth / 2, y: calcDim.top - this.strokeWidth / 2 },\n          'left',\n          'top',\n          this.originX,\n          this.originY\n        );\n      }\n      if (typeof options.left === 'undefined') {\n        this.left = options.fromSVG ? calcDim.left : correctLeftTop.x;\n      }\n      if (typeof options.top === 'undefined') {\n        this.top = options.fromSVG ? calcDim.top : correctLeftTop.y;\n      }\n      this.pathOffset = {\n        x: calcDim.left + this.width / 2,\n        y: calcDim.top + this.height / 2\n      };\n    },\n\n    /**\n     * Calculate the polygon min and max point from points array,\n     * returning an object with left, top, width, height to measure the\n     * polygon size\n     * @return {Object} object.left X coordinate of the polygon leftmost point\n     * @return {Object} object.top Y coordinate of the polygon topmost point\n     * @return {Object} object.width distance between X coordinates of the polygon leftmost and rightmost point\n     * @return {Object} object.height distance between Y coordinates of the polygon topmost and bottommost point\n     * @private\n     */\n    _calcDimensions: function() {\n\n      var points = this.points,\n          minX = min(points, 'x') || 0,\n          minY = min(points, 'y') || 0,\n          maxX = max(points, 'x') || 0,\n          maxY = max(points, 'y') || 0,\n          width = (maxX - minX),\n          height = (maxY - minY);\n\n      return {\n        left: minX,\n        top: minY,\n        width: width,\n        height: height\n      };\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), {\n        points: this.points.concat()\n      });\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var points = [], diffX = this.pathOffset.x, diffY = this.pathOffset.y,\n          NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n\n      for (var i = 0, len = this.points.length; i < len; i++) {\n        points.push(\n          toFixed(this.points[i].x - diffX, NUM_FRACTION_DIGITS), ',',\n          toFixed(this.points[i].y - diffY, NUM_FRACTION_DIGITS), ' '\n        );\n      }\n      return [\n        '<' + this.type + ' ', 'COMMON_PARTS',\n        'points=\"', points.join(''),\n        '\" />\\n'\n      ];\n    },\n    /* _TO_SVG_END_ */\n\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    commonRender: function(ctx) {\n      var point, len = this.points.length,\n          x = this.pathOffset.x,\n          y = this.pathOffset.y;\n\n      if (!len || isNaN(this.points[len - 1].y)) {\n        // do not draw if no points or odd points\n        // NaN comes from parseFloat of a empty string in parser\n        return false;\n      }\n      ctx.beginPath();\n      ctx.moveTo(this.points[0].x - x, this.points[0].y - y);\n      for (var i = 0; i < len; i++) {\n        point = this.points[i];\n        ctx.lineTo(point.x - x, point.y - y);\n      }\n      return true;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      if (!this.commonRender(ctx)) {\n        return;\n      }\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var p1, p2;\n\n      ctx.beginPath();\n      for (var i = 0, len = this.points.length; i < len; i++) {\n        p1 = this.points[i];\n        p2 = this.points[i + 1] || p1;\n        fabric.util.drawDashedLine(ctx, p1.x, p1.y, p2.x, p2.y, this.strokeDashArray);\n      }\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity of this instance\n     */\n    complexity: function() {\n      return this.get('points').length;\n    }\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Polyline.fromElement})\n   * @static\n   * @memberOf fabric.Polyline\n   * @see: http://www.w3.org/TR/SVG/shapes.html#PolylineElement\n   */\n  fabric.Polyline.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat();\n\n  /**\n   * Returns fabric.Polyline instance from an SVG element\n   * @static\n   * @memberOf fabric.Polyline\n   * @param {SVGElement} element Element to parser\n   * @param {Function} callback callback function invoked after parsing\n   * @param {Object} [options] Options object\n   */\n  fabric.Polyline.fromElementGenerator = function(_class) {\n    return function(element, callback, options) {\n      if (!element) {\n        return callback(null);\n      }\n      options || (options = { });\n\n      var points = fabric.parsePointsAttribute(element.getAttribute('points')),\n          parsedAttributes = fabric.parseAttributes(element, fabric[_class].ATTRIBUTE_NAMES);\n      parsedAttributes.fromSVG = true;\n      callback(new fabric[_class](points, extend(parsedAttributes, options)));\n    };\n  };\n\n  fabric.Polyline.fromElement = fabric.Polyline.fromElementGenerator('Polyline');\n\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Polyline instance from an object representation\n   * @static\n   * @memberOf fabric.Polyline\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Path instance is created\n   */\n  fabric.Polyline.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Polyline', object, callback, 'points');\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.Polygon) {\n    fabric.warn('fabric.Polygon is already defined');\n    return;\n  }\n\n  /**\n   * Polygon class\n   * @class fabric.Polygon\n   * @extends fabric.Polyline\n   * @see {@link fabric.Polygon#initialize} for constructor definition\n   */\n  fabric.Polygon = fabric.util.createClass(fabric.Polyline, /** @lends fabric.Polygon.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'polygon',\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      if (!this.commonRender(ctx)) {\n        return;\n      }\n      ctx.closePath();\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      this.callSuper('_renderDashedStroke', ctx);\n      ctx.closePath();\n    },\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by `fabric.Polygon.fromElement`)\n   * @static\n   * @memberOf fabric.Polygon\n   * @see: http://www.w3.org/TR/SVG/shapes.html#PolygonElement\n   */\n  fabric.Polygon.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat();\n\n  /**\n   * Returns {@link fabric.Polygon} instance from an SVG element\n   * @static\n   * @memberOf fabric.Polygon\n   * @param {SVGElement} element Element to parse\n   * @param {Function} callback callback function invoked after parsing\n   * @param {Object} [options] Options object\n   */\n  fabric.Polygon.fromElement = fabric.Polyline.fromElementGenerator('Polygon');\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Polygon instance from an object representation\n   * @static\n   * @memberOf fabric.Polygon\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Path instance is created\n   */\n  fabric.Polygon.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Polygon', object, callback, 'points');\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      min = fabric.util.array.min,\n      max = fabric.util.array.max,\n      extend = fabric.util.object.extend,\n      _toString = Object.prototype.toString,\n      toFixed = fabric.util.toFixed;\n\n  if (fabric.Path) {\n    fabric.warn('fabric.Path is already defined');\n    return;\n  }\n\n  /**\n   * Path class\n   * @class fabric.Path\n   * @extends fabric.Object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#path_and_pathgroup}\n   * @see {@link fabric.Path#initialize} for constructor definition\n   */\n  fabric.Path = fabric.util.createClass(fabric.Object, /** @lends fabric.Path.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'path',\n\n    /**\n     * Array of path points\n     * @type Array\n     * @default\n     */\n    path: null,\n\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('path', 'fillRule'),\n\n    stateProperties: fabric.Object.prototype.stateProperties.concat('path'),\n\n    /**\n     * Constructor\n     * @param {Array|String} path Path data (sequence of coordinates and corresponding \"command\" tokens)\n     * @param {Object} [options] Options object\n     * @return {fabric.Path} thisArg\n     */\n    initialize: function(path, options) {\n      options = options || { };\n      this.callSuper('initialize', options);\n      if (!path) {\n        path = [];\n      }\n\n      var fromArray = _toString.call(path) === '[object Array]';\n\n      this.path = fromArray\n        ? fabric.util.makePathSimpler(path)\n\n        : fabric.util.makePathSimpler(\n          fabric.util.parsePath(path)\n        );\n\n      if (!this.path) {\n        return;\n      }\n      fabric.Polyline.prototype._setPositionDimensions.call(this, options);\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render path on\n     */\n    _renderPathCommands: function(ctx) {\n      var current, // current instruction\n          subpathStartX = 0,\n          subpathStartY = 0,\n          x = 0, // current x\n          y = 0, // current y\n          controlX = 0, // current control point x\n          controlY = 0, // current control point y\n          l = -this.pathOffset.x,\n          t = -this.pathOffset.y;\n\n      ctx.beginPath();\n\n      for (var i = 0, len = this.path.length; i < len; ++i) {\n\n        current = this.path[i];\n\n        switch (current[0]) { // first letter\n\n          case 'L': // lineto, absolute\n            x = current[1];\n            y = current[2];\n            ctx.lineTo(x + l, y + t);\n            break;\n\n          case 'M': // moveTo, absolute\n            x = current[1];\n            y = current[2];\n            subpathStartX = x;\n            subpathStartY = y;\n            ctx.moveTo(x + l, y + t);\n            break;\n\n          case 'C': // bezierCurveTo, absolute\n            x = current[5];\n            y = current[6];\n            controlX = current[3];\n            controlY = current[4];\n            ctx.bezierCurveTo(\n              current[1] + l,\n              current[2] + t,\n              controlX + l,\n              controlY + t,\n              x + l,\n              y + t\n            );\n            break;\n\n          case 'Q': // quadraticCurveTo, absolute\n            ctx.quadraticCurveTo(\n              current[1] + l,\n              current[2] + t,\n              current[3] + l,\n              current[4] + t\n            );\n            x = current[3];\n            y = current[4];\n            controlX = current[1];\n            controlY = current[2];\n            break;\n\n          case 'z':\n          case 'Z':\n            x = subpathStartX;\n            y = subpathStartY;\n            ctx.closePath();\n            break;\n        }\n      }\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx context to render path on\n     */\n    _render: function(ctx) {\n      this._renderPathCommands(ctx);\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * Returns string representation of an instance\n     * @return {String} string representation of an instance\n     */\n    toString: function() {\n      return '#<fabric.Path (' + this.complexity() +\n        '): { \"top\": ' + this.top + ', \"left\": ' + this.left + ' }>';\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return extend(this.callSuper('toObject', propertiesToInclude), {\n        path: this.path.map(function(item) { return item.slice(); }),\n      });\n    },\n\n    /**\n     * Returns dataless object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toDatalessObject: function(propertiesToInclude) {\n      var o = this.toObject(['sourcePath'].concat(propertiesToInclude));\n      if (o.sourcePath) {\n        delete o.path;\n      }\n      return o;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var path = this.path.map(function(path) {\n        return path.join(' ');\n      }).join(' ');\n      return [\n        '<path ', 'COMMON_PARTS',\n        'd=\"', path,\n        '\" stroke-linecap=\"round\" ',\n        '/>\\n'\n      ];\n    },\n\n    _getOffsetTransform: function() {\n      var digits = fabric.Object.NUM_FRACTION_DIGITS;\n      return ' translate(' + toFixed(-this.pathOffset.x, digits) + ', ' +\n          toFixed(-this.pathOffset.y, digits) + ')';\n    },\n\n    /**\n     * Returns svg clipPath representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toClipPathSVG: function(reviver) {\n      var additionalTransform = this._getOffsetTransform();\n      return '\\t' + this._createBaseClipPathSVGMarkup(\n        this._toSVG(), { reviver: reviver, additionalTransform: additionalTransform }\n      );\n    },\n\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      var additionalTransform = this._getOffsetTransform();\n      return this._createBaseSVGMarkup(this._toSVG(), { reviver: reviver, additionalTransform: additionalTransform  });\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns number representation of an instance complexity\n     * @return {Number} complexity of this instance\n     */\n    complexity: function() {\n      return this.path.length;\n    },\n\n    /**\n     * @private\n     */\n    _calcDimensions: function() {\n\n      var aX = [],\n          aY = [],\n          current, // current instruction\n          subpathStartX = 0,\n          subpathStartY = 0,\n          x = 0, // current x\n          y = 0, // current y\n          bounds;\n\n      for (var i = 0, len = this.path.length; i < len; ++i) {\n\n        current = this.path[i];\n\n        switch (current[0]) { // first letter\n\n          case 'L': // lineto, absolute\n            x = current[1];\n            y = current[2];\n            bounds = [];\n            break;\n\n          case 'M': // moveTo, absolute\n            x = current[1];\n            y = current[2];\n            subpathStartX = x;\n            subpathStartY = y;\n            bounds = [];\n            break;\n\n          case 'C': // bezierCurveTo, absolute\n            bounds = fabric.util.getBoundsOfCurve(x, y,\n              current[1],\n              current[2],\n              current[3],\n              current[4],\n              current[5],\n              current[6]\n            );\n            x = current[5];\n            y = current[6];\n            break;\n\n          case 'Q': // quadraticCurveTo, absolute\n            bounds = fabric.util.getBoundsOfCurve(x, y,\n              current[1],\n              current[2],\n              current[1],\n              current[2],\n              current[3],\n              current[4]\n            );\n            x = current[3];\n            y = current[4];\n            break;\n\n          case 'z':\n          case 'Z':\n            x = subpathStartX;\n            y = subpathStartY;\n            break;\n        }\n        bounds.forEach(function (point) {\n          aX.push(point.x);\n          aY.push(point.y);\n        });\n        aX.push(x);\n        aY.push(y);\n      }\n\n      var minX = min(aX) || 0,\n          minY = min(aY) || 0,\n          maxX = max(aX) || 0,\n          maxY = max(aY) || 0,\n          deltaX = maxX - minX,\n          deltaY = maxY - minY;\n\n      return {\n        left: minX,\n        top: minY,\n        width: deltaX,\n        height: deltaY\n      };\n    }\n  });\n\n  /**\n   * Creates an instance of fabric.Path from an object\n   * @static\n   * @memberOf fabric.Path\n   * @param {Object} object\n   * @param {Function} [callback] Callback to invoke when an fabric.Path instance is created\n   */\n  fabric.Path.fromObject = function(object, callback) {\n    if (typeof object.sourcePath === 'string') {\n      var pathUrl = object.sourcePath;\n      fabric.loadSVGFromURL(pathUrl, function (elements) {\n        var path = elements[0];\n        path.setOptions(object);\n        callback && callback(path);\n      });\n    }\n    else {\n      fabric.Object._fromObject('Path', object, callback, 'path');\n    }\n  };\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by `fabric.Path.fromElement`)\n   * @static\n   * @memberOf fabric.Path\n   * @see http://www.w3.org/TR/SVG/paths.html#PathElement\n   */\n  fabric.Path.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat(['d']);\n\n  /**\n   * Creates an instance of fabric.Path from an SVG <path> element\n   * @static\n   * @memberOf fabric.Path\n   * @param {SVGElement} element to parse\n   * @param {Function} callback Callback to invoke when an fabric.Path instance is created\n   * @param {Object} [options] Options object\n   * @param {Function} [callback] Options callback invoked after parsing is finished\n   */\n  fabric.Path.fromElement = function(element, callback, options) {\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Path.ATTRIBUTE_NAMES);\n    parsedAttributes.fromSVG = true;\n    callback(new fabric.Path(parsedAttributes.d, extend(parsedAttributes, options)));\n  };\n  /* _FROM_SVG_END_ */\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      min = fabric.util.array.min,\n      max = fabric.util.array.max;\n\n  if (fabric.Group) {\n    return;\n  }\n\n  /**\n   * Group class\n   * @class fabric.Group\n   * @extends fabric.Object\n   * @mixes fabric.Collection\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#groups}\n   * @see {@link fabric.Group#initialize} for constructor definition\n   */\n  fabric.Group = fabric.util.createClass(fabric.Object, fabric.Collection, /** @lends fabric.Group.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'group',\n\n    /**\n     * Width of stroke\n     * @type Number\n     * @default\n     */\n    strokeWidth: 0,\n\n    /**\n     * Indicates if click, mouseover, mouseout events & hoverCursor should also check for subtargets\n     * @type Boolean\n     * @default\n     */\n    subTargetCheck: false,\n\n    /**\n     * Groups are container, do not render anything on theyr own, ence no cache properties\n     * @type Array\n     * @default\n     */\n    cacheProperties: [],\n\n    /**\n     * setOnGroup is a method used for TextBox that is no more used since 2.0.0 The behavior is still\n     * available setting this boolean to true.\n     * @type Boolean\n     * @since 2.0.0\n     * @default\n     */\n    useSetOnGroup: false,\n\n    /**\n     * Constructor\n     * @param {Object} objects Group objects\n     * @param {Object} [options] Options object\n     * @param {Boolean} [isAlreadyGrouped] if true, objects have been grouped already.\n     * @return {Object} thisArg\n     */\n    initialize: function(objects, options, isAlreadyGrouped) {\n      options = options || {};\n      this._objects = [];\n      // if objects enclosed in a group have been grouped already,\n      // we cannot change properties of objects.\n      // Thus we need to set options to group without objects,\n      isAlreadyGrouped && this.callSuper('initialize', options);\n      this._objects = objects || [];\n      for (var i = this._objects.length; i--; ) {\n        this._objects[i].group = this;\n      }\n\n      if (!isAlreadyGrouped) {\n        var center = options && options.centerPoint;\n        // we want to set origins before calculating the bounding box.\n        // so that the topleft can be set with that in mind.\n        // if specific top and left are passed, are overwritten later\n        // with the callSuper('initialize', options)\n        if (options.originX !== undefined) {\n          this.originX = options.originX;\n        }\n        if (options.originY !== undefined) {\n          this.originY = options.originY;\n        }\n        // if coming from svg i do not want to calc bounds.\n        // i assume width and height are passed along options\n        center || this._calcBounds();\n        this._updateObjectsCoords(center);\n        delete options.centerPoint;\n        this.callSuper('initialize', options);\n      }\n      else {\n        this._updateObjectsACoords();\n      }\n\n      this.setCoords();\n    },\n\n    /**\n     * @private\n     */\n    _updateObjectsACoords: function() {\n      var skipControls = true;\n      for (var i = this._objects.length; i--; ){\n        this._objects[i].setCoords(skipControls);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Boolean} [skipCoordsChange] if true, coordinates of objects enclosed in a group do not change\n     */\n    _updateObjectsCoords: function(center) {\n      var center = center || this.getCenterPoint();\n      for (var i = this._objects.length; i--; ){\n        this._updateObjectCoords(this._objects[i], center);\n      }\n    },\n\n    /**\n     * @private\n     * @param {Object} object\n     * @param {fabric.Point} center, current center of group.\n     */\n    _updateObjectCoords: function(object, center) {\n      var objectLeft = object.left,\n          objectTop = object.top,\n          skipControls = true;\n\n      object.set({\n        left: objectLeft - center.x,\n        top: objectTop - center.y\n      });\n      object.group = this;\n      object.setCoords(skipControls);\n    },\n\n    /**\n     * Returns string represenation of a group\n     * @return {String}\n     */\n    toString: function() {\n      return '#<fabric.Group: (' + this.complexity() + ')>';\n    },\n\n    /**\n     * Adds an object to a group; Then recalculates group's dimension, position.\n     * @param {Object} object\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    addWithUpdate: function(object) {\n      var nested = !!this.group;\n      this._restoreObjectsState();\n      fabric.util.resetObjectTransform(this);\n      if (object) {\n        if (nested) {\n          // if this group is inside another group, we need to pre transform the object\n          fabric.util.removeTransformFromObject(object, this.group.calcTransformMatrix());\n        }\n        this._objects.push(object);\n        object.group = this;\n        object._set('canvas', this.canvas);\n      }\n      this._calcBounds();\n      this._updateObjectsCoords();\n      this.dirty = true;\n      if (nested) {\n        this.group.addWithUpdate();\n      }\n      else {\n        this.setCoords();\n      }\n      return this;\n    },\n\n    /**\n     * Removes an object from a group; Then recalculates group's dimension, position.\n     * @param {Object} object\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    removeWithUpdate: function(object) {\n      this._restoreObjectsState();\n      fabric.util.resetObjectTransform(this);\n\n      this.remove(object);\n      this._calcBounds();\n      this._updateObjectsCoords();\n      this.setCoords();\n      this.dirty = true;\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _onObjectAdded: function(object) {\n      this.dirty = true;\n      object.group = this;\n      object._set('canvas', this.canvas);\n    },\n\n    /**\n     * @private\n     */\n    _onObjectRemoved: function(object) {\n      this.dirty = true;\n      delete object.group;\n    },\n\n    /**\n     * @private\n     */\n    _set: function(key, value) {\n      var i = this._objects.length;\n      if (this.useSetOnGroup) {\n        while (i--) {\n          this._objects[i].setOnGroup(key, value);\n        }\n      }\n      if (key === 'canvas') {\n        while (i--) {\n          this._objects[i]._set(key, value);\n        }\n      }\n      fabric.Object.prototype._set.call(this, key, value);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var _includeDefaultValues = this.includeDefaultValues;\n      var objsToObject = this._objects.map(function(obj) {\n        var originalDefaults = obj.includeDefaultValues;\n        obj.includeDefaultValues = _includeDefaultValues;\n        var _obj = obj.toObject(propertiesToInclude);\n        obj.includeDefaultValues = originalDefaults;\n        return _obj;\n      });\n      var obj = fabric.Object.prototype.toObject.call(this, propertiesToInclude);\n      obj.objects = objsToObject;\n      return obj;\n    },\n\n    /**\n     * Returns object representation of an instance, in dataless mode.\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toDatalessObject: function(propertiesToInclude) {\n      var objsToObject, sourcePath = this.sourcePath;\n      if (sourcePath) {\n        objsToObject = sourcePath;\n      }\n      else {\n        var _includeDefaultValues = this.includeDefaultValues;\n        objsToObject = this._objects.map(function(obj) {\n          var originalDefaults = obj.includeDefaultValues;\n          obj.includeDefaultValues = _includeDefaultValues;\n          var _obj = obj.toDatalessObject(propertiesToInclude);\n          obj.includeDefaultValues = originalDefaults;\n          return _obj;\n        });\n      }\n      var obj = fabric.Object.prototype.toDatalessObject.call(this, propertiesToInclude);\n      obj.objects = objsToObject;\n      return obj;\n    },\n\n    /**\n     * Renders instance on a given context\n     * @param {CanvasRenderingContext2D} ctx context to render instance on\n     */\n    render: function(ctx) {\n      this._transformDone = true;\n      this.callSuper('render', ctx);\n      this._transformDone = false;\n    },\n\n    /**\n     * Decide if the object should cache or not. Create its own cache level\n     * needsItsOwnCache should be used when the object drawing method requires\n     * a cache step. None of the fabric classes requires it.\n     * Generally you do not cache objects in groups because the group is already cached.\n     * @return {Boolean}\n     */\n    shouldCache: function() {\n      var ownCache = fabric.Object.prototype.shouldCache.call(this);\n      if (ownCache) {\n        for (var i = 0, len = this._objects.length; i < len; i++) {\n          if (this._objects[i].willDrawShadow()) {\n            this.ownCaching = false;\n            return false;\n          }\n        }\n      }\n      return ownCache;\n    },\n\n    /**\n     * Check if this object or a child object will cast a shadow\n     * @return {Boolean}\n     */\n    willDrawShadow: function() {\n      if (fabric.Object.prototype.willDrawShadow.call(this)) {\n        return true;\n      }\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        if (this._objects[i].willDrawShadow()) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Check if this group or its parent group are caching, recursively up\n     * @return {Boolean}\n     */\n    isOnACache: function() {\n      return this.ownCaching || (this.group && this.group.isOnACache());\n    },\n\n    /**\n     * Execute the drawing operation for an object on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawObject: function(ctx) {\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        this._objects[i].render(ctx);\n      }\n      this._drawClipPath(ctx);\n    },\n\n    /**\n     * Check if cache is dirty\n     */\n    isCacheDirty: function(skipCanvas) {\n      if (this.callSuper('isCacheDirty', skipCanvas)) {\n        return true;\n      }\n      if (!this.statefullCache) {\n        return false;\n      }\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        if (this._objects[i].isCacheDirty(true)) {\n          if (this._cacheCanvas) {\n            // if this group has not a cache canvas there is nothing to clean\n            var x = this.cacheWidth / this.zoomX, y = this.cacheHeight / this.zoomY;\n            this._cacheContext.clearRect(-x / 2, -y / 2, x, y);\n          }\n          return true;\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Restores original state of each of group objects (original state is that which was before group was created).\n     * if the nested boolean is true, the original state will be restored just for the\n     * first group and not for all the group chain\n     * @private\n     * @param {Boolean} nested tell the function to restore object state up to the parent group and not more\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    _restoreObjectsState: function() {\n      var groupMatrix = this.calcOwnMatrix();\n      this._objects.forEach(function(object) {\n        // instead of using _this = this;\n        fabric.util.addTransformToObject(object, groupMatrix);\n        delete object.group;\n        object.setCoords();\n      });\n      return this;\n    },\n\n    /**\n     * Realises the transform from this group onto the supplied object\n     * i.e. it tells you what would happen if the supplied object was in\n     * the group, and then the group was destroyed. It mutates the supplied\n     * object.\n     * Warning: this method is not useful anymore, it has been kept to no break the api.\n     * is not used in the fabricJS codebase\n     * this method will be reduced to using the utility.\n     * @private\n     * @deprecated\n     * @param {fabric.Object} object\n     * @param {Array} parentMatrix parent transformation\n     * @return {fabric.Object} transformedObject\n     */\n    realizeTransform: function(object, parentMatrix) {\n      fabric.util.addTransformToObject(object, parentMatrix);\n      return object;\n    },\n\n    /**\n     * Destroys a group (restoring state of its objects)\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    destroy: function() {\n      // when group is destroyed objects needs to get a repaint to be eventually\n      // displayed on canvas.\n      this._objects.forEach(function(object) {\n        object.set('dirty', true);\n      });\n      return this._restoreObjectsState();\n    },\n\n    /**\n     * make a group an active selection, remove the group from canvas\n     * the group has to be on canvas for this to work.\n     * @return {fabric.ActiveSelection} thisArg\n     * @chainable\n     */\n    toActiveSelection: function() {\n      if (!this.canvas) {\n        return;\n      }\n      var objects = this._objects, canvas = this.canvas;\n      this._objects = [];\n      var options = this.toObject();\n      delete options.objects;\n      var activeSelection = new fabric.ActiveSelection([]);\n      activeSelection.set(options);\n      activeSelection.type = 'activeSelection';\n      canvas.remove(this);\n      objects.forEach(function(object) {\n        object.group = activeSelection;\n        object.dirty = true;\n        canvas.add(object);\n      });\n      activeSelection.canvas = canvas;\n      activeSelection._objects = objects;\n      canvas._activeObject = activeSelection;\n      activeSelection.setCoords();\n      return activeSelection;\n    },\n\n    /**\n     * Destroys a group (restoring state of its objects)\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    ungroupOnCanvas: function() {\n      return this._restoreObjectsState();\n    },\n\n    /**\n     * Sets coordinates of all objects inside group\n     * @return {fabric.Group} thisArg\n     * @chainable\n     */\n    setObjectsCoords: function() {\n      var skipControls = true;\n      this.forEachObject(function(object) {\n        object.setCoords(skipControls);\n      });\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _calcBounds: function(onlyWidthHeight) {\n      var aX = [],\n          aY = [],\n          o, prop, coords,\n          props = ['tr', 'br', 'bl', 'tl'],\n          i = 0, iLen = this._objects.length,\n          j, jLen = props.length;\n\n      for ( ; i < iLen; ++i) {\n        o = this._objects[i];\n        coords = o.calcACoords();\n        for (j = 0; j < jLen; j++) {\n          prop = props[j];\n          aX.push(coords[prop].x);\n          aY.push(coords[prop].y);\n        }\n        o.aCoords = coords;\n      }\n\n      this._getBounds(aX, aY, onlyWidthHeight);\n    },\n\n    /**\n     * @private\n     */\n    _getBounds: function(aX, aY, onlyWidthHeight) {\n      var minXY = new fabric.Point(min(aX), min(aY)),\n          maxXY = new fabric.Point(max(aX), max(aY)),\n          top = minXY.y || 0, left = minXY.x || 0,\n          width = (maxXY.x - minXY.x) || 0,\n          height = (maxXY.y - minXY.y) || 0;\n      this.width = width;\n      this.height = height;\n      if (!onlyWidthHeight) {\n        // the bounding box always finds the topleft most corner.\n        // whatever is the group origin, we set up here the left/top position.\n        this.setPositionByOrigin({ x: left, y: top }, 'left', 'top');\n      }\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    _toSVG: function(reviver) {\n      var svgString = ['<g ', 'COMMON_PARTS', ' >\\n'];\n\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        svgString.push('\\t\\t', this._objects[i].toSVG(reviver));\n      }\n      svgString.push('</g>\\n');\n      return svgString;\n    },\n\n    /**\n     * Returns styles-string for svg-export, specific version for group\n     * @return {String}\n     */\n    getSvgStyles: function() {\n      var opacity = typeof this.opacity !== 'undefined' && this.opacity !== 1 ?\n            'opacity: ' + this.opacity + ';' : '',\n          visibility = this.visible ? '' : ' visibility: hidden;';\n      return [\n        opacity,\n        this.getSvgFilter(),\n        visibility\n      ].join('');\n    },\n\n    /**\n     * Returns svg clipPath representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toClipPathSVG: function(reviver) {\n      var svgString = [];\n\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        svgString.push('\\t', this._objects[i].toClipPathSVG(reviver));\n      }\n\n      return this._createBaseClipPathSVGMarkup(svgString, { reviver: reviver });\n    },\n    /* _TO_SVG_END_ */\n  });\n\n  /**\n   * Returns {@link fabric.Group} instance from an object representation\n   * @static\n   * @memberOf fabric.Group\n   * @param {Object} object Object to create a group from\n   * @param {Function} [callback] Callback to invoke when an group instance is created\n   */\n  fabric.Group.fromObject = function(object, callback) {\n    var objects = object.objects,\n        options = fabric.util.object.clone(object, true);\n    delete options.objects;\n    if (typeof objects === 'string') {\n      // it has to be an url or something went wrong.\n      fabric.loadSVGFromURL(objects, function (elements) {\n        var group = fabric.util.groupSVGElements(elements, object, objects);\n        group.set(options);\n        callback && callback(group);\n      });\n      return;\n    }\n    fabric.util.enlivenObjects(objects, function(enlivenedObjects) {\n      fabric.util.enlivenObjects([object.clipPath], function(enlivedClipPath) {\n        var options = fabric.util.object.clone(object, true);\n        options.clipPath = enlivedClipPath[0];\n        delete options.objects;\n        callback && callback(new fabric.Group(enlivenedObjects, options, true));\n      });\n    });\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { });\n\n  if (fabric.ActiveSelection) {\n    return;\n  }\n\n  /**\n   * Group class\n   * @class fabric.ActiveSelection\n   * @extends fabric.Group\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-3#groups}\n   * @see {@link fabric.ActiveSelection#initialize} for constructor definition\n   */\n  fabric.ActiveSelection = fabric.util.createClass(fabric.Group, /** @lends fabric.ActiveSelection.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'activeSelection',\n\n    /**\n     * Constructor\n     * @param {Object} objects ActiveSelection objects\n     * @param {Object} [options] Options object\n     * @return {Object} thisArg\n     */\n    initialize: function(objects, options) {\n      options = options || {};\n      this._objects = objects || [];\n      for (var i = this._objects.length; i--; ) {\n        this._objects[i].group = this;\n      }\n\n      if (options.originX) {\n        this.originX = options.originX;\n      }\n      if (options.originY) {\n        this.originY = options.originY;\n      }\n      this._calcBounds();\n      this._updateObjectsCoords();\n      fabric.Object.prototype.initialize.call(this, options);\n      this.setCoords();\n    },\n\n    /**\n     * Change te activeSelection to a normal group,\n     * High level function that automatically adds it to canvas as\n     * active object. no events fired.\n     * @since 2.0.0\n     * @return {fabric.Group}\n     */\n    toGroup: function() {\n      var objects = this._objects.concat();\n      this._objects = [];\n      var options = fabric.Object.prototype.toObject.call(this);\n      var newGroup = new fabric.Group([]);\n      delete options.type;\n      newGroup.set(options);\n      objects.forEach(function(object) {\n        object.canvas.remove(object);\n        object.group = newGroup;\n      });\n      newGroup._objects = objects;\n      if (!this.canvas) {\n        return newGroup;\n      }\n      var canvas = this.canvas;\n      canvas.add(newGroup);\n      canvas._activeObject = newGroup;\n      newGroup.setCoords();\n      return newGroup;\n    },\n\n    /**\n     * If returns true, deselection is cancelled.\n     * @since 2.0.0\n     * @return {Boolean} [cancel]\n     */\n    onDeselect: function() {\n      this.destroy();\n      return false;\n    },\n\n    /**\n     * Returns string representation of a group\n     * @return {String}\n     */\n    toString: function() {\n      return '#<fabric.ActiveSelection: (' + this.complexity() + ')>';\n    },\n\n    /**\n     * Decide if the object should cache or not. Create its own cache level\n     * objectCaching is a global flag, wins over everything\n     * needsItsOwnCache should be used when the object drawing method requires\n     * a cache step. None of the fabric classes requires it.\n     * Generally you do not cache objects in groups because the group outside is cached.\n     * @return {Boolean}\n     */\n    shouldCache: function() {\n      return false;\n    },\n\n    /**\n     * Check if this group or its parent group are caching, recursively up\n     * @return {Boolean}\n     */\n    isOnACache: function() {\n      return false;\n    },\n\n    /**\n     * Renders controls and borders for the object\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Object} [styleOverride] properties to override the object style\n     * @param {Object} [childrenOverride] properties to override the children overrides\n     */\n    _renderControls: function(ctx, styleOverride, childrenOverride) {\n      ctx.save();\n      ctx.globalAlpha = this.isMoving ? this.borderOpacityWhenMoving : 1;\n      this.callSuper('_renderControls', ctx, styleOverride);\n      childrenOverride = childrenOverride || { };\n      if (typeof childrenOverride.hasControls === 'undefined') {\n        childrenOverride.hasControls = false;\n      }\n      childrenOverride.forActiveSelection = true;\n      for (var i = 0, len = this._objects.length; i < len; i++) {\n        this._objects[i]._renderControls(ctx, childrenOverride);\n      }\n      ctx.restore();\n    },\n  });\n\n  /**\n   * Returns {@link fabric.ActiveSelection} instance from an object representation\n   * @static\n   * @memberOf fabric.ActiveSelection\n   * @param {Object} object Object to create a group from\n   * @param {Function} [callback] Callback to invoke when an ActiveSelection instance is created\n   */\n  fabric.ActiveSelection.fromObject = function(object, callback) {\n    fabric.util.enlivenObjects(object.objects, function(enlivenedObjects) {\n      delete object.objects;\n      callback && callback(new fabric.ActiveSelection(enlivenedObjects, object, true));\n    });\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var extend = fabric.util.object.extend;\n\n  if (!global.fabric) {\n    global.fabric = { };\n  }\n\n  if (global.fabric.Image) {\n    fabric.warn('fabric.Image is already defined.');\n    return;\n  }\n\n  /**\n   * Image class\n   * @class fabric.Image\n   * @extends fabric.Object\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-1#images}\n   * @see {@link fabric.Image#initialize} for constructor definition\n   */\n  fabric.Image = fabric.util.createClass(fabric.Object, /** @lends fabric.Image.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'image',\n\n    /**\n     * Width of a stroke.\n     * For image quality a stroke multiple of 2 gives better results.\n     * @type Number\n     * @default\n     */\n    strokeWidth: 0,\n\n    /**\n     * When calling {@link fabric.Image.getSrc}, return value from element src with `element.getAttribute('src')`.\n     * This allows for relative urls as image src.\n     * @since 2.7.0\n     * @type Boolean\n     * @default\n     */\n    srcFromAttribute: false,\n\n    /**\n     * private\n     * contains last value of scaleX to detect\n     * if the Image got resized after the last Render\n     * @type Number\n     */\n    _lastScaleX: 1,\n\n    /**\n     * private\n     * contains last value of scaleY to detect\n     * if the Image got resized after the last Render\n     * @type Number\n     */\n    _lastScaleY: 1,\n\n    /**\n     * private\n     * contains last value of scaling applied by the apply filter chain\n     * @type Number\n     */\n    _filterScalingX: 1,\n\n    /**\n     * private\n     * contains last value of scaling applied by the apply filter chain\n     * @type Number\n     */\n    _filterScalingY: 1,\n\n    /**\n     * minimum scale factor under which any resizeFilter is triggered to resize the image\n     * 0 will disable the automatic resize. 1 will trigger automatically always.\n     * number bigger than 1 are not implemented yet.\n     * @type Number\n     */\n    minimumScaleTrigger: 0.5,\n\n    /**\n     * List of properties to consider when checking if\n     * state of an object is changed ({@link fabric.Object#hasStateChanged})\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: fabric.Object.prototype.stateProperties.concat('cropX', 'cropY'),\n\n    /**\n     * List of properties to consider when checking if cache needs refresh\n     * Those properties are checked by statefullCache ON ( or lazy mode if we want ) or from single\n     * calls to Object.set(key, value). If the key is in this list, the object is marked as dirty\n     * and refreshed at the next render\n     * @type Array\n     */\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat('cropX', 'cropY'),\n\n    /**\n     * key used to retrieve the texture representing this image\n     * @since 2.0.0\n     * @type String\n     * @default\n     */\n    cacheKey: '',\n\n    /**\n     * Image crop in pixels from original image size.\n     * @since 2.0.0\n     * @type Number\n     * @default\n     */\n    cropX: 0,\n\n    /**\n     * Image crop in pixels from original image size.\n     * @since 2.0.0\n     * @type Number\n     * @default\n     */\n    cropY: 0,\n\n    /**\n     * Indicates whether this canvas will use image smoothing when painting this image.\n     * Also influence if the cacheCanvas for this image uses imageSmoothing\n     * @since 4.0.0-beta.11\n     * @type Boolean\n     * @default\n     */\n    imageSmoothing: true,\n\n    /**\n     * Constructor\n     * Image can be initialized with any canvas drawable or a string.\n     * The string should be a url and will be loaded as an image.\n     * Canvas and Image element work out of the box, while videos require extra code to work.\n     * Please check video element events for seeking.\n     * @param {HTMLImageElement | HTMLCanvasElement | HTMLVideoElement | String} element Image element\n     * @param {Object} [options] Options object\n     * @param {function} [callback] callback function to call after eventual filters applied.\n     * @return {fabric.Image} thisArg\n     */\n    initialize: function(element, options) {\n      options || (options = { });\n      this.filters = [];\n      this.cacheKey = 'texture' + fabric.Object.__uid++;\n      this.callSuper('initialize', options);\n      this._initElement(element, options);\n    },\n\n    /**\n     * Returns image element which this instance if based on\n     * @return {HTMLImageElement} Image element\n     */\n    getElement: function() {\n      return this._element || {};\n    },\n\n    /**\n     * Sets image element for this instance to a specified one.\n     * If filters defined they are applied to new image.\n     * You might need to call `canvas.renderAll` and `object.setCoords` after replacing, to render new image and update controls area.\n     * @param {HTMLImageElement} element\n     * @param {Object} [options] Options object\n     * @return {fabric.Image} thisArg\n     * @chainable\n     */\n    setElement: function(element, options) {\n      this.removeTexture(this.cacheKey);\n      this.removeTexture(this.cacheKey + '_filtered');\n      this._element = element;\n      this._originalElement = element;\n      this._initConfig(options);\n      if (this.filters.length !== 0) {\n        this.applyFilters();\n      }\n      // resizeFilters work on the already filtered copy.\n      // we need to apply resizeFilters AFTER normal filters.\n      // applyResizeFilters is run more often than normal filters\n      // and is triggered by user interactions rather than dev code\n      if (this.resizeFilter) {\n        this.applyResizeFilters();\n      }\n      return this;\n    },\n\n    /**\n     * Delete a single texture if in webgl mode\n     */\n    removeTexture: function(key) {\n      var backend = fabric.filterBackend;\n      if (backend && backend.evictCachesForKey) {\n        backend.evictCachesForKey(key);\n      }\n    },\n\n    /**\n     * Delete textures, reference to elements and eventually JSDOM cleanup\n     */\n    dispose: function() {\n      this.removeTexture(this.cacheKey);\n      this.removeTexture(this.cacheKey + '_filtered');\n      this._cacheContext = undefined;\n      ['_originalElement', '_element', '_filteredEl', '_cacheCanvas'].forEach((function(element) {\n        fabric.util.cleanUpJsdomNode(this[element]);\n        this[element] = undefined;\n      }).bind(this));\n    },\n\n    /**\n     * Get the crossOrigin value (of the corresponding image element)\n     */\n    getCrossOrigin: function() {\n      return this._originalElement && (this._originalElement.crossOrigin || null);\n    },\n\n    /**\n     * Returns original size of an image\n     * @return {Object} Object with \"width\" and \"height\" properties\n     */\n    getOriginalSize: function() {\n      var element = this.getElement();\n      return {\n        width: element.naturalWidth || element.width,\n        height: element.naturalHeight || element.height\n      };\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _stroke: function(ctx) {\n      if (!this.stroke || this.strokeWidth === 0) {\n        return;\n      }\n      var w = this.width / 2, h = this.height / 2;\n      ctx.beginPath();\n      ctx.moveTo(-w, -h);\n      ctx.lineTo(w, -h);\n      ctx.lineTo(w, h);\n      ctx.lineTo(-w, h);\n      ctx.lineTo(-w, -h);\n      ctx.closePath();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderDashedStroke: function(ctx) {\n      var x = -this.width / 2,\n          y = -this.height / 2,\n          w = this.width,\n          h = this.height;\n\n      ctx.save();\n      this._setStrokeStyles(ctx, this);\n\n      ctx.beginPath();\n      fabric.util.drawDashedLine(ctx, x, y, x + w, y, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x + w, y, x + w, y + h, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x + w, y + h, x, y + h, this.strokeDashArray);\n      fabric.util.drawDashedLine(ctx, x, y + h, x, y, this.strokeDashArray);\n      ctx.closePath();\n      ctx.restore();\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var filters = [];\n\n      this.filters.forEach(function(filterObj) {\n        if (filterObj) {\n          filters.push(filterObj.toObject());\n        }\n      });\n      var object = extend(\n        this.callSuper(\n          'toObject',\n          ['cropX', 'cropY'].concat(propertiesToInclude)\n        ), {\n          src: this.getSrc(),\n          crossOrigin: this.getCrossOrigin(),\n          filters: filters,\n        });\n      if (this.resizeFilter) {\n        object.resizeFilter = this.resizeFilter.toObject();\n      }\n      return object;\n    },\n\n    /**\n     * Returns true if an image has crop applied, inspecting values of cropX,cropY,width,height.\n     * @return {Boolean}\n     */\n    hasCrop: function() {\n      return this.cropX || this.cropY || this.width < this._element.width || this.height < this._element.height;\n    },\n\n    /* _TO_SVG_START_ */\n    /**\n     * Returns svg representation of an instance\n     * @return {Array} an array of strings with the specific svg representation\n     * of the instance\n     */\n    _toSVG: function() {\n      var svgString = [], imageMarkup = [], strokeSvg, element = this._element,\n          x = -this.width / 2, y = -this.height / 2, clipPath = '', imageRendering = '';\n      if (!element) {\n        return [];\n      }\n      if (this.hasCrop()) {\n        var clipPathId = fabric.Object.__uid++;\n        svgString.push(\n          '<clipPath id=\"imageCrop_' + clipPathId + '\">\\n',\n          '\\t<rect x=\"' + x + '\" y=\"' + y + '\" width=\"' + this.width + '\" height=\"' + this.height + '\" />\\n',\n          '</clipPath>\\n'\n        );\n        clipPath = ' clip-path=\"url(#imageCrop_' + clipPathId + ')\" ';\n      }\n      if (!this.imageSmoothing) {\n        imageRendering = '\" image-rendering=\"optimizeSpeed';\n      }\n      imageMarkup.push('\\t<image ', 'COMMON_PARTS', 'xlink:href=\"', this.getSvgSrc(true),\n        '\" x=\"', x - this.cropX, '\" y=\"', y - this.cropY,\n        // we're essentially moving origin of transformation from top/left corner to the center of the shape\n        // by wrapping it in container <g> element with actual transformation, then offsetting object to the top/left\n        // so that object's center aligns with container's left/top\n        '\" width=\"', element.width || element.naturalWidth,\n        '\" height=\"', element.height || element.height,\n        imageRendering,\n        '\"', clipPath,\n        '></image>\\n');\n\n      if (this.stroke || this.strokeDashArray) {\n        var origFill = this.fill;\n        this.fill = null;\n        strokeSvg = [\n          '\\t<rect ',\n          'x=\"', x, '\" y=\"', y,\n          '\" width=\"', this.width, '\" height=\"', this.height,\n          '\" style=\"', this.getSvgStyles(),\n          '\"/>\\n'\n        ];\n        this.fill = origFill;\n      }\n      if (this.paintFirst !== 'fill') {\n        svgString = svgString.concat(strokeSvg, imageMarkup);\n      }\n      else {\n        svgString = svgString.concat(imageMarkup, strokeSvg);\n      }\n      return svgString;\n    },\n    /* _TO_SVG_END_ */\n\n    /**\n     * Returns source of an image\n     * @param {Boolean} filtered indicates if the src is needed for svg\n     * @return {String} Source of an image\n     */\n    getSrc: function(filtered) {\n      var element = filtered ? this._element : this._originalElement;\n      if (element) {\n        if (element.toDataURL) {\n          return element.toDataURL();\n        }\n\n        if (this.srcFromAttribute) {\n          return element.getAttribute('src');\n        }\n        else {\n          return element.src;\n        }\n      }\n      else {\n        return this.src || '';\n      }\n    },\n\n    /**\n     * Sets source of an image\n     * @param {String} src Source string (URL)\n     * @param {Function} [callback] Callback is invoked when image has been loaded (and all filters have been applied)\n     * @param {Object} [options] Options object\n     * @param {String} [options.crossOrigin] crossOrigin value (one of \"\", \"anonymous\", \"use-credentials\")\n     * @see https://developer.mozilla.org/en-US/docs/HTML/CORS_settings_attributes\n     * @return {fabric.Image} thisArg\n     * @chainable\n     */\n    setSrc: function(src, callback, options) {\n      fabric.util.loadImage(src, function(img, isError) {\n        this.setElement(img, options);\n        this._setWidthHeight();\n        callback && callback(this, isError);\n      }, this, options && options.crossOrigin);\n      return this;\n    },\n\n    /**\n     * Returns string representation of an instance\n     * @return {String} String representation of an instance\n     */\n    toString: function() {\n      return '#<fabric.Image: { src: \"' + this.getSrc() + '\" }>';\n    },\n\n    applyResizeFilters: function() {\n      var filter = this.resizeFilter,\n          minimumScale = this.minimumScaleTrigger,\n          objectScale = this.getTotalObjectScaling(),\n          scaleX = objectScale.scaleX,\n          scaleY = objectScale.scaleY,\n          elementToFilter = this._filteredEl || this._originalElement;\n      if (this.group) {\n        this.set('dirty', true);\n      }\n      if (!filter || (scaleX > minimumScale && scaleY > minimumScale)) {\n        this._element = elementToFilter;\n        this._filterScalingX = 1;\n        this._filterScalingY = 1;\n        this._lastScaleX = scaleX;\n        this._lastScaleY = scaleY;\n        return;\n      }\n      if (!fabric.filterBackend) {\n        fabric.filterBackend = fabric.initFilterBackend();\n      }\n      var canvasEl = fabric.util.createCanvasElement(),\n          cacheKey = this._filteredEl ? (this.cacheKey + '_filtered') : this.cacheKey,\n          sourceWidth = elementToFilter.width, sourceHeight = elementToFilter.height;\n      canvasEl.width = sourceWidth;\n      canvasEl.height = sourceHeight;\n      this._element = canvasEl;\n      this._lastScaleX = filter.scaleX = scaleX;\n      this._lastScaleY = filter.scaleY = scaleY;\n      fabric.filterBackend.applyFilters(\n        [filter], elementToFilter, sourceWidth, sourceHeight, this._element, cacheKey);\n      this._filterScalingX = canvasEl.width / this._originalElement.width;\n      this._filterScalingY = canvasEl.height / this._originalElement.height;\n    },\n\n    /**\n     * Applies filters assigned to this image (from \"filters\" array) or from filter param\n     * @method applyFilters\n     * @param {Array} filters to be applied\n     * @param {Boolean} forResizing specify if the filter operation is a resize operation\n     * @return {thisArg} return the fabric.Image object\n     * @chainable\n     */\n    applyFilters: function(filters) {\n\n      filters = filters || this.filters || [];\n      filters = filters.filter(function(filter) { return filter && !filter.isNeutralState(); });\n      this.set('dirty', true);\n\n      // needs to clear out or WEBGL will not resize correctly\n      this.removeTexture(this.cacheKey + '_filtered');\n\n      if (filters.length === 0) {\n        this._element = this._originalElement;\n        this._filteredEl = null;\n        this._filterScalingX = 1;\n        this._filterScalingY = 1;\n        return this;\n      }\n\n      var imgElement = this._originalElement,\n          sourceWidth = imgElement.naturalWidth || imgElement.width,\n          sourceHeight = imgElement.naturalHeight || imgElement.height;\n\n      if (this._element === this._originalElement) {\n        // if the element is the same we need to create a new element\n        var canvasEl = fabric.util.createCanvasElement();\n        canvasEl.width = sourceWidth;\n        canvasEl.height = sourceHeight;\n        this._element = canvasEl;\n        this._filteredEl = canvasEl;\n      }\n      else {\n        // clear the existing element to get new filter data\n        // also dereference the eventual resized _element\n        this._element = this._filteredEl;\n        this._filteredEl.getContext('2d').clearRect(0, 0, sourceWidth, sourceHeight);\n        // we also need to resize again at next renderAll, so remove saved _lastScaleX/Y\n        this._lastScaleX = 1;\n        this._lastScaleY = 1;\n      }\n      if (!fabric.filterBackend) {\n        fabric.filterBackend = fabric.initFilterBackend();\n      }\n      fabric.filterBackend.applyFilters(\n        filters, this._originalElement, sourceWidth, sourceHeight, this._element, this.cacheKey);\n      if (this._originalElement.width !== this._element.width ||\n        this._originalElement.height !== this._element.height) {\n        this._filterScalingX = this._element.width / this._originalElement.width;\n        this._filterScalingY = this._element.height / this._originalElement.height;\n      }\n      return this;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      fabric.util.setImageSmoothing(ctx, this.imageSmoothing);\n      if (this.isMoving !== true && this.resizeFilter && this._needsResize()) {\n        this.applyResizeFilters();\n      }\n      this._stroke(ctx);\n      this._renderPaintInOrder(ctx);\n    },\n\n    /**\n     * Paint the cached copy of the object on the target context.\n     * it will set the imageSmoothing for the draw operation\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    drawCacheOnCanvas: function(ctx) {\n      fabric.util.setImageSmoothing(ctx, this.imageSmoothing);\n      fabric.Object.prototype.drawCacheOnCanvas.call(this, ctx);\n    },\n\n    /**\n     * Decide if the object should cache or not. Create its own cache level\n     * needsItsOwnCache should be used when the object drawing method requires\n     * a cache step. None of the fabric classes requires it.\n     * Generally you do not cache objects in groups because the group outside is cached.\n     * This is the special image version where we would like to avoid caching where possible.\n     * Essentially images do not benefit from caching. They may require caching, and in that\n     * case we do it. Also caching an image usually ends in a loss of details.\n     * A full performance audit should be done.\n     * @return {Boolean}\n     */\n    shouldCache: function() {\n      return this.needsItsOwnCache();\n    },\n\n    _renderFill: function(ctx) {\n      var elementToDraw = this._element;\n      if (!elementToDraw) {\n        return;\n      }\n      var scaleX = this._filterScalingX, scaleY = this._filterScalingY,\n          w = this.width, h = this.height, min = Math.min, max = Math.max,\n          // crop values cannot be lesser than 0.\n          cropX = max(this.cropX, 0), cropY = max(this.cropY, 0),\n          elWidth = elementToDraw.naturalWidth || elementToDraw.width,\n          elHeight = elementToDraw.naturalHeight || elementToDraw.height,\n          sX = cropX * scaleX,\n          sY = cropY * scaleY,\n          // the width height cannot exceed element width/height, starting from the crop offset.\n          sW = min(w * scaleX, elWidth - sX),\n          sH = min(h * scaleY, elHeight - sY),\n          x = -w / 2, y = -h / 2,\n          maxDestW = min(w, elWidth / scaleX - cropX),\n          maxDestH = min(h, elHeight / scaleY - cropY);\n\n      elementToDraw && ctx.drawImage(elementToDraw, sX, sY, sW, sH, x, y, maxDestW, maxDestH);\n    },\n\n    /**\n     * needed to check if image needs resize\n     * @private\n     */\n    _needsResize: function() {\n      var scale = this.getTotalObjectScaling();\n      return (scale.scaleX !== this._lastScaleX || scale.scaleY !== this._lastScaleY);\n    },\n\n    /**\n     * @private\n     */\n    _resetWidthHeight: function() {\n      this.set(this.getOriginalSize());\n    },\n\n    /**\n     * The Image class's initialization method. This method is automatically\n     * called by the constructor.\n     * @private\n     * @param {HTMLImageElement|String} element The element representing the image\n     * @param {Object} [options] Options object\n     */\n    _initElement: function(element, options) {\n      this.setElement(fabric.util.getById(element), options);\n      fabric.util.addClass(this.getElement(), fabric.Image.CSS_CANVAS);\n    },\n\n    /**\n     * @private\n     * @param {Object} [options] Options object\n     */\n    _initConfig: function(options) {\n      options || (options = { });\n      this.setOptions(options);\n      this._setWidthHeight(options);\n    },\n\n    /**\n     * @private\n     * @param {Array} filters to be initialized\n     * @param {Function} callback Callback to invoke when all fabric.Image.filters instances are created\n     */\n    _initFilters: function(filters, callback) {\n      if (filters && filters.length) {\n        fabric.util.enlivenObjects(filters, function(enlivenedObjects) {\n          callback && callback(enlivenedObjects);\n        }, 'fabric.Image.filters');\n      }\n      else {\n        callback && callback();\n      }\n    },\n\n    /**\n     * @private\n     * Set the width and the height of the image object, using the element or the\n     * options.\n     * @param {Object} [options] Object with width/height properties\n     */\n    _setWidthHeight: function(options) {\n      options || (options = { });\n      var el = this.getElement();\n      this.width = options.width || el.naturalWidth || el.width || 0;\n      this.height = options.height || el.naturalHeight || el.height || 0;\n    },\n\n    /**\n     * Calculate offset for center and scale factor for the image in order to respect\n     * the preserveAspectRatio attribute\n     * @private\n     * @return {Object}\n     */\n    parsePreserveAspectRatioAttribute: function() {\n      var pAR = fabric.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio || ''),\n          rWidth = this._element.width, rHeight = this._element.height,\n          scaleX = 1, scaleY = 1, offsetLeft = 0, offsetTop = 0, cropX = 0, cropY = 0,\n          offset, pWidth = this.width, pHeight = this.height, parsedAttributes = { width: pWidth, height: pHeight };\n      if (pAR && (pAR.alignX !== 'none' || pAR.alignY !== 'none')) {\n        if (pAR.meetOrSlice === 'meet') {\n          scaleX = scaleY = fabric.util.findScaleToFit(this._element, parsedAttributes);\n          offset = (pWidth - rWidth * scaleX) / 2;\n          if (pAR.alignX === 'Min') {\n            offsetLeft = -offset;\n          }\n          if (pAR.alignX === 'Max') {\n            offsetLeft = offset;\n          }\n          offset = (pHeight - rHeight * scaleY) / 2;\n          if (pAR.alignY === 'Min') {\n            offsetTop = -offset;\n          }\n          if (pAR.alignY === 'Max') {\n            offsetTop = offset;\n          }\n        }\n        if (pAR.meetOrSlice === 'slice') {\n          scaleX = scaleY = fabric.util.findScaleToCover(this._element, parsedAttributes);\n          offset = rWidth - pWidth / scaleX;\n          if (pAR.alignX === 'Mid') {\n            cropX = offset / 2;\n          }\n          if (pAR.alignX === 'Max') {\n            cropX = offset;\n          }\n          offset = rHeight - pHeight / scaleY;\n          if (pAR.alignY === 'Mid') {\n            cropY = offset / 2;\n          }\n          if (pAR.alignY === 'Max') {\n            cropY = offset;\n          }\n          rWidth = pWidth / scaleX;\n          rHeight = pHeight / scaleY;\n        }\n      }\n      else {\n        scaleX = pWidth / rWidth;\n        scaleY = pHeight / rHeight;\n      }\n      return {\n        width: rWidth,\n        height: rHeight,\n        scaleX: scaleX,\n        scaleY: scaleY,\n        offsetLeft: offsetLeft,\n        offsetTop: offsetTop,\n        cropX: cropX,\n        cropY: cropY\n      };\n    }\n  });\n\n  /**\n   * Default CSS class name for canvas\n   * @static\n   * @type String\n   * @default\n   */\n  fabric.Image.CSS_CANVAS = 'canvas-img';\n\n  /**\n   * Alias for getSrc\n   * @static\n   */\n  fabric.Image.prototype.getSvgSrc = fabric.Image.prototype.getSrc;\n\n  /**\n   * Creates an instance of fabric.Image from its object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} callback Callback to invoke when an image instance is created\n   */\n  fabric.Image.fromObject = function(_object, callback) {\n    var object = fabric.util.object.clone(_object);\n    fabric.util.loadImage(object.src, function(img, isError) {\n      if (isError) {\n        callback && callback(null, true);\n        return;\n      }\n      fabric.Image.prototype._initFilters.call(object, object.filters, function(filters) {\n        object.filters = filters || [];\n        fabric.Image.prototype._initFilters.call(object, [object.resizeFilter], function(resizeFilters) {\n          object.resizeFilter = resizeFilters[0];\n          fabric.util.enlivenObjects([object.clipPath], function(enlivedProps) {\n            object.clipPath = enlivedProps[0];\n            var image = new fabric.Image(img, object);\n            callback(image, false);\n          });\n        });\n      });\n    }, null, object.crossOrigin);\n  };\n\n  /**\n   * Creates an instance of fabric.Image from an URL string\n   * @static\n   * @param {String} url URL to create an image from\n   * @param {Function} [callback] Callback to invoke when image is created (newly created image is passed as a first argument). Second argument is a boolean indicating if an error occurred or not.\n   * @param {Object} [imgOptions] Options object\n   */\n  fabric.Image.fromURL = function(url, callback, imgOptions) {\n    fabric.util.loadImage(url, function(img, isError) {\n      callback && callback(new fabric.Image(img, imgOptions), isError);\n    }, null, imgOptions && imgOptions.crossOrigin);\n  };\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Image.fromElement})\n   * @static\n   * @see {@link http://www.w3.org/TR/SVG/struct.html#ImageElement}\n   */\n  fabric.Image.ATTRIBUTE_NAMES =\n    fabric.SHARED_ATTRIBUTES.concat(\n      'x y width height preserveAspectRatio xlink:href crossOrigin image-rendering'.split(' ')\n    );\n\n  /**\n   * Returns {@link fabric.Image} instance from an SVG element\n   * @static\n   * @param {SVGElement} element Element to parse\n   * @param {Object} [options] Options object\n   * @param {Function} callback Callback to execute when fabric.Image object is created\n   * @return {fabric.Image} Instance of fabric.Image\n   */\n  fabric.Image.fromElement = function(element, callback, options) {\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Image.ATTRIBUTE_NAMES);\n    fabric.Image.fromURL(parsedAttributes['xlink:href'], callback,\n      extend((options ? fabric.util.object.clone(options) : { }), parsedAttributes));\n  };\n  /* _FROM_SVG_END_ */\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\nfabric.util.object.extend(fabric.Object.prototype, /** @lends fabric.Object.prototype */ {\n\n  /**\n   * @private\n   * @return {Number} angle value\n   */\n  _getAngleValueForStraighten: function() {\n    var angle = this.angle % 360;\n    if (angle > 0) {\n      return Math.round((angle - 1) / 90) * 90;\n    }\n    return Math.round(angle / 90) * 90;\n  },\n\n  /**\n   * Straightens an object (rotating it from current angle to one of 0, 90, 180, 270, etc. depending on which is closer)\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  straighten: function() {\n    this.rotate(this._getAngleValueForStraighten());\n    return this;\n  },\n\n  /**\n   * Same as {@link fabric.Object.prototype.straighten} but with animation\n   * @param {Object} callbacks Object with callback functions\n   * @param {Function} [callbacks.onComplete] Invoked on completion\n   * @param {Function} [callbacks.onChange] Invoked on every step of animation\n   * @return {fabric.Object} thisArg\n   * @chainable\n   */\n  fxStraighten: function(callbacks) {\n    callbacks = callbacks || { };\n\n    var empty = function() { },\n        onComplete = callbacks.onComplete || empty,\n        onChange = callbacks.onChange || empty,\n        _this = this;\n\n    fabric.util.animate({\n      startValue: this.get('angle'),\n      endValue: this._getAngleValueForStraighten(),\n      duration: this.FX_DURATION,\n      onChange: function(value) {\n        _this.rotate(value);\n        onChange();\n      },\n      onComplete: function() {\n        _this.setCoords();\n        onComplete();\n      },\n    });\n\n    return this;\n  }\n});\n\nfabric.util.object.extend(fabric.StaticCanvas.prototype, /** @lends fabric.StaticCanvas.prototype */ {\n\n  /**\n   * Straightens object, then rerenders canvas\n   * @param {fabric.Object} object Object to straighten\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  straightenObject: function (object) {\n    object.straighten();\n    this.requestRenderAll();\n    return this;\n  },\n\n  /**\n   * Same as {@link fabric.Canvas.prototype.straightenObject}, but animated\n   * @param {fabric.Object} object Object to straighten\n   * @return {fabric.Canvas} thisArg\n   * @chainable\n   */\n  fxStraightenObject: function (object) {\n    object.fxStraighten({\n      onChange: this.requestRenderAllBound\n    });\n    return this;\n  }\n});\n\n\n(function() {\n\n  'use strict';\n\n  /**\n   * Tests if webgl supports certain precision\n   * @param {WebGL} Canvas WebGL context to test on\n   * @param {String} Precision to test can be any of following: 'lowp', 'mediump', 'highp'\n   * @returns {Boolean} Whether the user's browser WebGL supports given precision.\n   */\n  function testPrecision(gl, precision){\n    var fragmentSource = 'precision ' + precision + ' float;\\nvoid main(){}';\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, fragmentSource);\n    gl.compileShader(fragmentShader);\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Indicate whether this filtering backend is supported by the user's browser.\n   * @param {Number} tileSize check if the tileSize is supported\n   * @returns {Boolean} Whether the user's browser supports WebGL.\n   */\n  fabric.isWebglSupported = function(tileSize) {\n    if (fabric.isLikelyNode) {\n      return false;\n    }\n    tileSize = tileSize || fabric.WebglFilterBackend.prototype.tileSize;\n    var canvas = document.createElement('canvas');\n    var gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');\n    var isSupported = false;\n    // eslint-disable-next-line\n    if (gl) {\n      fabric.maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n      isSupported = fabric.maxTextureSize >= tileSize;\n      var precisions = ['highp', 'mediump', 'lowp'];\n      for (var i = 0; i < 3; i++){\n        if (testPrecision(gl, precisions[i])){\n          fabric.webGlPrecision = precisions[i];\n          break;\n        };\n      }\n    }\n    this.isSupported = isSupported;\n    return isSupported;\n  };\n\n  fabric.WebglFilterBackend = WebglFilterBackend;\n\n  /**\n   * WebGL filter backend.\n   */\n  function WebglFilterBackend(options) {\n    if (options && options.tileSize) {\n      this.tileSize = options.tileSize;\n    }\n    this.setupGLContext(this.tileSize, this.tileSize);\n    this.captureGPUInfo();\n  };\n\n  WebglFilterBackend.prototype = /** @lends fabric.WebglFilterBackend.prototype */ {\n\n    tileSize: 2048,\n\n    /**\n     * Experimental. This object is a sort of repository of help layers used to avoid\n     * of recreating them during frequent filtering. If you are previewing a filter with\n     * a slider you probably do not want to create help layers every filter step.\n     * in this object there will be appended some canvases, created once, resized sometimes\n     * cleared never. Clearing is left to the developer.\n     **/\n    resources: {\n\n    },\n\n    /**\n     * Setup a WebGL context suitable for filtering, and bind any needed event handlers.\n     */\n    setupGLContext: function(width, height) {\n      this.dispose();\n      this.createWebGLCanvas(width, height);\n      // eslint-disable-next-line\n      this.aPosition = new Float32Array([0, 0, 0, 1, 1, 0, 1, 1]);\n      this.chooseFastestCopyGLTo2DMethod(width, height);\n    },\n\n    /**\n     * Pick a method to copy data from GL context to 2d canvas.  In some browsers using\n     * putImageData is faster than drawImage for that specific operation.\n     */\n    chooseFastestCopyGLTo2DMethod: function(width, height) {\n      var canMeasurePerf = typeof window.performance !== 'undefined', canUseImageData;\n      try {\n        new ImageData(1, 1);\n        canUseImageData = true;\n      }\n      catch (e) {\n        canUseImageData = false;\n      }\n      // eslint-disable-next-line no-undef\n      var canUseArrayBuffer = typeof ArrayBuffer !== 'undefined';\n      // eslint-disable-next-line no-undef\n      var canUseUint8Clamped = typeof Uint8ClampedArray !== 'undefined';\n\n      if (!(canMeasurePerf && canUseImageData && canUseArrayBuffer && canUseUint8Clamped)) {\n        return;\n      }\n\n      var targetCanvas = fabric.util.createCanvasElement();\n      // eslint-disable-next-line no-undef\n      var imageBuffer = new ArrayBuffer(width * height * 4);\n      if (fabric.forceGLPutImageData) {\n        this.imageBuffer = imageBuffer;\n        this.copyGLTo2D = copyGLTo2DPutImageData;\n        return;\n      }\n      var testContext = {\n        imageBuffer: imageBuffer,\n        destinationWidth: width,\n        destinationHeight: height,\n        targetCanvas: targetCanvas\n      };\n      var startTime, drawImageTime, putImageDataTime;\n      targetCanvas.width = width;\n      targetCanvas.height = height;\n\n      startTime = window.performance.now();\n      copyGLTo2DDrawImage.call(testContext, this.gl, testContext);\n      drawImageTime = window.performance.now() - startTime;\n\n      startTime = window.performance.now();\n      copyGLTo2DPutImageData.call(testContext, this.gl, testContext);\n      putImageDataTime = window.performance.now() - startTime;\n\n      if (drawImageTime > putImageDataTime) {\n        this.imageBuffer = imageBuffer;\n        this.copyGLTo2D = copyGLTo2DPutImageData;\n      }\n      else {\n        this.copyGLTo2D = copyGLTo2DDrawImage;\n      }\n    },\n\n    /**\n     * Create a canvas element and associated WebGL context and attaches them as\n     * class properties to the GLFilterBackend class.\n     */\n    createWebGLCanvas: function(width, height) {\n      var canvas = fabric.util.createCanvasElement();\n      canvas.width = width;\n      canvas.height = height;\n      var glOptions = {\n            alpha: true,\n            premultipliedAlpha: false,\n            depth: false,\n            stencil: false,\n            antialias: false\n          },\n          gl = canvas.getContext('webgl', glOptions);\n      if (!gl) {\n        gl = canvas.getContext('experimental-webgl', glOptions);\n      }\n      if (!gl) {\n        return;\n      }\n      gl.clearColor(0, 0, 0, 0);\n      // this canvas can fire webglcontextlost and webglcontextrestored\n      this.canvas = canvas;\n      this.gl = gl;\n    },\n\n    /**\n     * Attempts to apply the requested filters to the source provided, drawing the filtered output\n     * to the provided target canvas.\n     *\n     * @param {Array} filters The filters to apply.\n     * @param {HTMLImageElement|HTMLCanvasElement} source The source to be filtered.\n     * @param {Number} width The width of the source input.\n     * @param {Number} height The height of the source input.\n     * @param {HTMLCanvasElement} targetCanvas The destination for filtered output to be drawn.\n     * @param {String|undefined} cacheKey A key used to cache resources related to the source. If\n     * omitted, caching will be skipped.\n     */\n    applyFilters: function(filters, source, width, height, targetCanvas, cacheKey) {\n      var gl = this.gl;\n      var cachedTexture;\n      if (cacheKey) {\n        cachedTexture = this.getCachedTexture(cacheKey, source);\n      }\n      var pipelineState = {\n        originalWidth: source.width || source.originalWidth,\n        originalHeight: source.height || source.originalHeight,\n        sourceWidth: width,\n        sourceHeight: height,\n        destinationWidth: width,\n        destinationHeight: height,\n        context: gl,\n        sourceTexture: this.createTexture(gl, width, height, !cachedTexture && source),\n        targetTexture: this.createTexture(gl, width, height),\n        originalTexture: cachedTexture ||\n          this.createTexture(gl, width, height, !cachedTexture && source),\n        passes: filters.length,\n        webgl: true,\n        aPosition: this.aPosition,\n        programCache: this.programCache,\n        pass: 0,\n        filterBackend: this,\n        targetCanvas: targetCanvas\n      };\n      var tempFbo = gl.createFramebuffer();\n      gl.bindFramebuffer(gl.FRAMEBUFFER, tempFbo);\n      filters.forEach(function(filter) { filter && filter.applyTo(pipelineState); });\n      resizeCanvasIfNeeded(pipelineState);\n      this.copyGLTo2D(gl, pipelineState);\n      gl.bindTexture(gl.TEXTURE_2D, null);\n      gl.deleteTexture(pipelineState.sourceTexture);\n      gl.deleteTexture(pipelineState.targetTexture);\n      gl.deleteFramebuffer(tempFbo);\n      targetCanvas.getContext('2d').setTransform(1, 0, 0, 1, 0, 0);\n      return pipelineState;\n    },\n\n    /**\n     * Detach event listeners, remove references, and clean up caches.\n     */\n    dispose: function() {\n      if (this.canvas) {\n        this.canvas = null;\n        this.gl = null;\n      }\n      this.clearWebGLCaches();\n    },\n\n    /**\n     * Wipe out WebGL-related caches.\n     */\n    clearWebGLCaches: function() {\n      this.programCache = {};\n      this.textureCache = {};\n    },\n\n    /**\n     * Create a WebGL texture object.\n     *\n     * Accepts specific dimensions to initialize the texture to or a source image.\n     *\n     * @param {WebGLRenderingContext} gl The GL context to use for creating the texture.\n     * @param {Number} width The width to initialize the texture at.\n     * @param {Number} height The height to initialize the texture.\n     * @param {HTMLImageElement|HTMLCanvasElement} textureImageSource A source for the texture data.\n     * @returns {WebGLTexture}\n     */\n    createTexture: function(gl, width, height, textureImageSource) {\n      var texture = gl.createTexture();\n      gl.bindTexture(gl.TEXTURE_2D, texture);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n      if (textureImageSource) {\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, textureImageSource);\n      }\n      else {\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n      }\n      return texture;\n    },\n\n    /**\n     * Can be optionally used to get a texture from the cache array\n     *\n     * If an existing texture is not found, a new texture is created and cached.\n     *\n     * @param {String} uniqueId A cache key to use to find an existing texture.\n     * @param {HTMLImageElement|HTMLCanvasElement} textureImageSource A source to use to create the\n     * texture cache entry if one does not already exist.\n     */\n    getCachedTexture: function(uniqueId, textureImageSource) {\n      if (this.textureCache[uniqueId]) {\n        return this.textureCache[uniqueId];\n      }\n      else {\n        var texture = this.createTexture(\n          this.gl, textureImageSource.width, textureImageSource.height, textureImageSource);\n        this.textureCache[uniqueId] = texture;\n        return texture;\n      }\n    },\n\n    /**\n     * Clear out cached resources related to a source image that has been\n     * filtered previously.\n     *\n     * @param {String} cacheKey The cache key provided when the source image was filtered.\n     */\n    evictCachesForKey: function(cacheKey) {\n      if (this.textureCache[cacheKey]) {\n        this.gl.deleteTexture(this.textureCache[cacheKey]);\n        delete this.textureCache[cacheKey];\n      }\n    },\n\n    copyGLTo2D: copyGLTo2DDrawImage,\n\n    /**\n     * Attempt to extract GPU information strings from a WebGL context.\n     *\n     * Useful information when debugging or blacklisting specific GPUs.\n     *\n     * @returns {Object} A GPU info object with renderer and vendor strings.\n     */\n    captureGPUInfo: function() {\n      if (this.gpuInfo) {\n        return this.gpuInfo;\n      }\n      var gl = this.gl, gpuInfo = { renderer: '', vendor: '' };\n      if (!gl) {\n        return gpuInfo;\n      }\n      var ext = gl.getExtension('WEBGL_debug_renderer_info');\n      if (ext) {\n        var renderer = gl.getParameter(ext.UNMASKED_RENDERER_WEBGL);\n        var vendor = gl.getParameter(ext.UNMASKED_VENDOR_WEBGL);\n        if (renderer) {\n          gpuInfo.renderer = renderer.toLowerCase();\n        }\n        if (vendor) {\n          gpuInfo.vendor = vendor.toLowerCase();\n        }\n      }\n      this.gpuInfo = gpuInfo;\n      return gpuInfo;\n    },\n  };\n})();\n\nfunction resizeCanvasIfNeeded(pipelineState) {\n  var targetCanvas = pipelineState.targetCanvas,\n      width = targetCanvas.width, height = targetCanvas.height,\n      dWidth = pipelineState.destinationWidth,\n      dHeight = pipelineState.destinationHeight;\n\n  if (width !== dWidth || height !== dHeight) {\n    targetCanvas.width = dWidth;\n    targetCanvas.height = dHeight;\n  }\n}\n\n/**\n * Copy an input WebGL canvas on to an output 2D canvas.\n *\n * The WebGL canvas is assumed to be upside down, with the top-left pixel of the\n * desired output image appearing in the bottom-left corner of the WebGL canvas.\n *\n * @param {WebGLRenderingContext} sourceContext The WebGL context to copy from.\n * @param {HTMLCanvasElement} targetCanvas The 2D target canvas to copy on to.\n * @param {Object} pipelineState The 2D target canvas to copy on to.\n */\nfunction copyGLTo2DDrawImage(gl, pipelineState) {\n  var glCanvas = gl.canvas, targetCanvas = pipelineState.targetCanvas,\n      ctx = targetCanvas.getContext('2d');\n  ctx.translate(0, targetCanvas.height); // move it down again\n  ctx.scale(1, -1); // vertical flip\n  // where is my image on the big glcanvas?\n  var sourceY = glCanvas.height - targetCanvas.height;\n  ctx.drawImage(glCanvas, 0, sourceY, targetCanvas.width, targetCanvas.height, 0, 0,\n    targetCanvas.width, targetCanvas.height);\n}\n\n/**\n * Copy an input WebGL canvas on to an output 2D canvas using 2d canvas' putImageData\n * API. Measurably faster than using ctx.drawImage in Firefox (version 54 on OSX Sierra).\n *\n * @param {WebGLRenderingContext} sourceContext The WebGL context to copy from.\n * @param {HTMLCanvasElement} targetCanvas The 2D target canvas to copy on to.\n * @param {Object} pipelineState The 2D target canvas to copy on to.\n */\nfunction copyGLTo2DPutImageData(gl, pipelineState) {\n  var targetCanvas = pipelineState.targetCanvas, ctx = targetCanvas.getContext('2d'),\n      dWidth = pipelineState.destinationWidth,\n      dHeight = pipelineState.destinationHeight,\n      numBytes = dWidth * dHeight * 4;\n\n  // eslint-disable-next-line no-undef\n  var u8 = new Uint8Array(this.imageBuffer, 0, numBytes);\n  // eslint-disable-next-line no-undef\n  var u8Clamped = new Uint8ClampedArray(this.imageBuffer, 0, numBytes);\n\n  gl.readPixels(0, 0, dWidth, dHeight, gl.RGBA, gl.UNSIGNED_BYTE, u8);\n  var imgData = new ImageData(u8Clamped, dWidth, dHeight);\n  ctx.putImageData(imgData, 0, 0);\n}\n\n\n(function() {\n\n  'use strict';\n\n  var noop = function() {};\n\n  fabric.Canvas2dFilterBackend = Canvas2dFilterBackend;\n\n  /**\n   * Canvas 2D filter backend.\n   */\n  function Canvas2dFilterBackend() {};\n\n  Canvas2dFilterBackend.prototype = /** @lends fabric.Canvas2dFilterBackend.prototype */ {\n    evictCachesForKey: noop,\n    dispose: noop,\n    clearWebGLCaches: noop,\n\n    /**\n     * Experimental. This object is a sort of repository of help layers used to avoid\n     * of recreating them during frequent filtering. If you are previewing a filter with\n     * a slider you probably do not want to create help layers every filter step.\n     * in this object there will be appended some canvases, created once, resized sometimes\n     * cleared never. Clearing is left to the developer.\n     **/\n    resources: {\n\n    },\n\n    /**\n     * Apply a set of filters against a source image and draw the filtered output\n     * to the provided destination canvas.\n     *\n     * @param {EnhancedFilter} filters The filter to apply.\n     * @param {HTMLImageElement|HTMLCanvasElement} sourceElement The source to be filtered.\n     * @param {Number} sourceWidth The width of the source input.\n     * @param {Number} sourceHeight The height of the source input.\n     * @param {HTMLCanvasElement} targetCanvas The destination for filtered output to be drawn.\n     */\n    applyFilters: function(filters, sourceElement, sourceWidth, sourceHeight, targetCanvas) {\n      var ctx = targetCanvas.getContext('2d');\n      ctx.drawImage(sourceElement, 0, 0, sourceWidth, sourceHeight);\n      var imageData = ctx.getImageData(0, 0, sourceWidth, sourceHeight);\n      var originalImageData = ctx.getImageData(0, 0, sourceWidth, sourceHeight);\n      var pipelineState = {\n        sourceWidth: sourceWidth,\n        sourceHeight: sourceHeight,\n        imageData: imageData,\n        originalEl: sourceElement,\n        originalImageData: originalImageData,\n        canvasEl: targetCanvas,\n        ctx: ctx,\n        filterBackend: this,\n      };\n      filters.forEach(function(filter) { filter.applyTo(pipelineState); });\n      if (pipelineState.imageData.width !== sourceWidth || pipelineState.imageData.height !== sourceHeight) {\n        targetCanvas.width = pipelineState.imageData.width;\n        targetCanvas.height = pipelineState.imageData.height;\n      }\n      ctx.putImageData(pipelineState.imageData, 0, 0);\n      return pipelineState;\n    },\n\n  };\n})();\n\n\n/**\n * @namespace fabric.Image.filters\n * @memberOf fabric.Image\n * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#image_filters}\n * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n */\nfabric.Image = fabric.Image || { };\nfabric.Image.filters = fabric.Image.filters || { };\n\n/**\n * Root filter class from which all filter classes inherit from\n * @class fabric.Image.filters.BaseFilter\n * @memberOf fabric.Image.filters\n */\nfabric.Image.filters.BaseFilter = fabric.util.createClass(/** @lends fabric.Image.filters.BaseFilter.prototype */ {\n\n  /**\n   * Filter type\n   * @param {String} type\n   * @default\n   */\n  type: 'BaseFilter',\n\n  /**\n   * Array of attributes to send with buffers. do not modify\n   * @private\n   */\n\n  vertexSource: 'attribute vec2 aPosition;\\n' +\n    'varying vec2 vTexCoord;\\n' +\n    'void main() {\\n' +\n      'vTexCoord = aPosition;\\n' +\n      'gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\\n' +\n    '}',\n\n  fragmentSource: 'precision highp float;\\n' +\n    'varying vec2 vTexCoord;\\n' +\n    'uniform sampler2D uTexture;\\n' +\n    'void main() {\\n' +\n      'gl_FragColor = texture2D(uTexture, vTexCoord);\\n' +\n    '}',\n\n  /**\n   * Constructor\n   * @param {Object} [options] Options object\n   */\n  initialize: function(options) {\n    if (options) {\n      this.setOptions(options);\n    }\n  },\n\n  /**\n   * Sets filter's properties from options\n   * @param {Object} [options] Options object\n   */\n  setOptions: function(options) {\n    for (var prop in options) {\n      this[prop] = options[prop];\n    }\n  },\n\n  /**\n   * Compile this filter's shader program.\n   *\n   * @param {WebGLRenderingContext} gl The GL canvas context to use for shader compilation.\n   * @param {String} fragmentSource fragmentShader source for compilation\n   * @param {String} vertexSource vertexShader source for compilation\n   */\n  createProgram: function(gl, fragmentSource, vertexSource) {\n    fragmentSource = fragmentSource || this.fragmentSource;\n    vertexSource = vertexSource || this.vertexSource;\n    if (fabric.webGlPrecision !== 'highp'){\n      fragmentSource = fragmentSource.replace(\n        /precision highp float/g,\n        'precision ' + fabric.webGlPrecision + ' float'\n      );\n    }\n    var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n    gl.shaderSource(vertexShader, vertexSource);\n    gl.compileShader(vertexShader);\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      throw new Error(\n        // eslint-disable-next-line prefer-template\n        'Vertex shader compile error for ' + this.type + ': ' +\n        gl.getShaderInfoLog(vertexShader)\n      );\n    }\n\n    var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n    gl.shaderSource(fragmentShader, fragmentSource);\n    gl.compileShader(fragmentShader);\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      throw new Error(\n        // eslint-disable-next-line prefer-template\n        'Fragment shader compile error for ' + this.type + ': ' +\n        gl.getShaderInfoLog(fragmentShader)\n      );\n    }\n\n    var program = gl.createProgram();\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n    gl.linkProgram(program);\n    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n      throw new Error(\n        // eslint-disable-next-line prefer-template\n        'Shader link error for \"${this.type}\" ' +\n        gl.getProgramInfoLog(program)\n      );\n    }\n\n    var attributeLocations = this.getAttributeLocations(gl, program);\n    var uniformLocations = this.getUniformLocations(gl, program) || { };\n    uniformLocations.uStepW = gl.getUniformLocation(program, 'uStepW');\n    uniformLocations.uStepH = gl.getUniformLocation(program, 'uStepH');\n    return {\n      program: program,\n      attributeLocations: attributeLocations,\n      uniformLocations: uniformLocations\n    };\n  },\n\n  /**\n   * Return a map of attribute names to WebGLAttributeLocation objects.\n   *\n   * @param {WebGLRenderingContext} gl The canvas context used to compile the shader program.\n   * @param {WebGLShaderProgram} program The shader program from which to take attribute locations.\n   * @returns {Object} A map of attribute names to attribute locations.\n   */\n  getAttributeLocations: function(gl, program) {\n    return {\n      aPosition: gl.getAttribLocation(program, 'aPosition'),\n    };\n  },\n\n  /**\n   * Return a map of uniform names to WebGLUniformLocation objects.\n   *\n   * Intended to be overridden by subclasses.\n   *\n   * @param {WebGLRenderingContext} gl The canvas context used to compile the shader program.\n   * @param {WebGLShaderProgram} program The shader program from which to take uniform locations.\n   * @returns {Object} A map of uniform names to uniform locations.\n   */\n  getUniformLocations: function (/* gl, program */) {\n    // in case i do not need any special uniform i need to return an empty object\n    return { };\n  },\n\n  /**\n   * Send attribute data from this filter to its shader program on the GPU.\n   *\n   * @param {WebGLRenderingContext} gl The canvas context used to compile the shader program.\n   * @param {Object} attributeLocations A map of shader attribute names to their locations.\n   */\n  sendAttributeData: function(gl, attributeLocations, aPositionData) {\n    var attributeLocation = attributeLocations.aPosition;\n    var buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    gl.enableVertexAttribArray(attributeLocation);\n    gl.vertexAttribPointer(attributeLocation, 2, gl.FLOAT, false, 0, 0);\n    gl.bufferData(gl.ARRAY_BUFFER, aPositionData, gl.STATIC_DRAW);\n  },\n\n  _setupFrameBuffer: function(options) {\n    var gl = options.context, width, height;\n    if (options.passes > 1) {\n      width = options.destinationWidth;\n      height = options.destinationHeight;\n      if (options.sourceWidth !== width || options.sourceHeight !== height) {\n        gl.deleteTexture(options.targetTexture);\n        options.targetTexture = options.filterBackend.createTexture(gl, width, height);\n      }\n      gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D,\n        options.targetTexture, 0);\n    }\n    else {\n      // draw last filter on canvas and not to framebuffer.\n      gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n      gl.finish();\n    }\n  },\n\n  _swapTextures: function(options) {\n    options.passes--;\n    options.pass++;\n    var temp = options.targetTexture;\n    options.targetTexture = options.sourceTexture;\n    options.sourceTexture = temp;\n  },\n\n  /**\n   * Generic isNeutral implementation for one parameter based filters.\n   * Used only in image applyFilters to discard filters that will not have an effect\n   * on the image\n   * Other filters may need their own version ( ColorMatrix, HueRotation, gamma, ComposedFilter )\n   * @param {Object} options\n   **/\n  isNeutralState: function(/* options */) {\n    var main = this.mainParameter,\n        _class = fabric.Image.filters[this.type].prototype;\n    if (main) {\n      if (Array.isArray(_class[main])) {\n        for (var i = _class[main].length; i--;) {\n          if (this[main][i] !== _class[main][i]) {\n            return false;\n          }\n        }\n        return true;\n      }\n      else {\n        return _class[main] === this[main];\n      }\n    }\n    else {\n      return false;\n    }\n  },\n\n  /**\n   * Apply this filter to the input image data provided.\n   *\n   * Determines whether to use WebGL or Canvas2D based on the options.webgl flag.\n   *\n   * @param {Object} options\n   * @param {Number} options.passes The number of filters remaining to be executed\n   * @param {Boolean} options.webgl Whether to use webgl to render the filter.\n   * @param {WebGLTexture} options.sourceTexture The texture setup as the source to be filtered.\n   * @param {WebGLTexture} options.targetTexture The texture where filtered output should be drawn.\n   * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n   * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n   */\n  applyTo: function(options) {\n    if (options.webgl) {\n      this._setupFrameBuffer(options);\n      this.applyToWebGL(options);\n      this._swapTextures(options);\n    }\n    else {\n      this.applyTo2d(options);\n    }\n  },\n\n  /**\n   * Retrieves the cached shader.\n   * @param {Object} options\n   * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n   * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n   */\n  retrieveShader: function(options) {\n    if (!options.programCache.hasOwnProperty(this.type)) {\n      options.programCache[this.type] = this.createProgram(options.context);\n    }\n    return options.programCache[this.type];\n  },\n\n  /**\n   * Apply this filter using webgl.\n   *\n   * @param {Object} options\n   * @param {Number} options.passes The number of filters remaining to be executed\n   * @param {Boolean} options.webgl Whether to use webgl to render the filter.\n   * @param {WebGLTexture} options.originalTexture The texture of the original input image.\n   * @param {WebGLTexture} options.sourceTexture The texture setup as the source to be filtered.\n   * @param {WebGLTexture} options.targetTexture The texture where filtered output should be drawn.\n   * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n   * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n   */\n  applyToWebGL: function(options) {\n    var gl = options.context;\n    var shader = this.retrieveShader(options);\n    if (options.pass === 0 && options.originalTexture) {\n      gl.bindTexture(gl.TEXTURE_2D, options.originalTexture);\n    }\n    else {\n      gl.bindTexture(gl.TEXTURE_2D, options.sourceTexture);\n    }\n    gl.useProgram(shader.program);\n    this.sendAttributeData(gl, shader.attributeLocations, options.aPosition);\n\n    gl.uniform1f(shader.uniformLocations.uStepW, 1 / options.sourceWidth);\n    gl.uniform1f(shader.uniformLocations.uStepH, 1 / options.sourceHeight);\n\n    this.sendUniformData(gl, shader.uniformLocations);\n    gl.viewport(0, 0, options.destinationWidth, options.destinationHeight);\n    gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);\n  },\n\n  bindAdditionalTexture: function(gl, texture, textureUnit) {\n    gl.activeTexture(textureUnit);\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    // reset active texture to 0 as usual\n    gl.activeTexture(gl.TEXTURE0);\n  },\n\n  unbindAdditionalTexture: function(gl, textureUnit) {\n    gl.activeTexture(textureUnit);\n    gl.bindTexture(gl.TEXTURE_2D, null);\n    gl.activeTexture(gl.TEXTURE0);\n  },\n\n  getMainParameter: function() {\n    return this[this.mainParameter];\n  },\n\n  setMainParameter: function(value) {\n    this[this.mainParameter] = value;\n  },\n\n  /**\n   * Send uniform data from this filter to its shader program on the GPU.\n   *\n   * Intended to be overridden by subclasses.\n   *\n   * @param {WebGLRenderingContext} gl The canvas context used to compile the shader program.\n   * @param {Object} uniformLocations A map of shader uniform names to their locations.\n   */\n  sendUniformData: function(/* gl, uniformLocations */) {\n    // Intentionally left blank.  Override me in subclasses.\n  },\n\n  /**\n   * If needed by a 2d filter, this functions can create an helper canvas to be used\n   * remember that options.targetCanvas is available for use till end of chain.\n   */\n  createHelpLayer: function(options) {\n    if (!options.helpLayer) {\n      var helpLayer = document.createElement('canvas');\n      helpLayer.width = options.sourceWidth;\n      helpLayer.height = options.sourceHeight;\n      options.helpLayer = helpLayer;\n    }\n  },\n\n  /**\n   * Returns object representation of an instance\n   * @return {Object} Object representation of an instance\n   */\n  toObject: function() {\n    var object = { type: this.type }, mainP = this.mainParameter;\n    if (mainP) {\n      object[mainP] = this[mainP];\n    }\n    return object;\n  },\n\n  /**\n   * Returns a JSON representation of an instance\n   * @return {Object} JSON\n   */\n  toJSON: function() {\n    // delegate, not alias\n    return this.toObject();\n  }\n});\n\nfabric.Image.filters.BaseFilter.fromObject = function(object, callback) {\n  var filter = new fabric.Image.filters[object.type](object);\n  callback && callback(filter);\n  return filter;\n};\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Color Matrix filter class\n   * @class fabric.Image.filters.ColorMatrix\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.ColorMatrix#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @see {@Link http://www.webwasp.co.uk/tutorials/219/Color_Matrix_Filter.php}\n   * @see {@Link http://phoboslab.org/log/2013/11/fast-image-filters-with-webgl}\n   * @example <caption>Kodachrome filter</caption>\n   * var filter = new fabric.Image.filters.ColorMatrix({\n   *  matrix: [\n       1.1285582396593525, -0.3967382283601348, -0.03992559172921793, 0, 63.72958762196502,\n       -0.16404339962244616, 1.0835251566291304, -0.05498805115633132, 0, 24.732407896706203,\n       -0.16786010706155763, -0.5603416277695248, 1.6014850761964943, 0, 35.62982807460946,\n       0, 0, 0, 1, 0\n      ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.ColorMatrix = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.ColorMatrix.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'ColorMatrix',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'uniform mat4 uColorMatrix;\\n' +\n      'uniform vec4 uConstants;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'color *= uColorMatrix;\\n' +\n        'color += uConstants;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * Colormatrix for pixels.\n     * array of 20 floats. Numbers in positions 4, 9, 14, 19 loose meaning\n     * outside the -1, 1 range.\n     * 0.0039215686 is the part of 1 that get translated to 1 in 2d\n     * @param {Array} matrix array of 20 numbers.\n     * @default\n     */\n    matrix: [\n      1, 0, 0, 0, 0,\n      0, 1, 0, 0, 0,\n      0, 0, 1, 0, 0,\n      0, 0, 0, 1, 0\n    ],\n\n    mainParameter: 'matrix',\n\n    /**\n     * Lock the colormatrix on the color part, skipping alpha, manly for non webgl scenario\n     * to save some calculation\n     */\n    colorsOnly: true,\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      // create a new array instead mutating the prototype with push\n      this.matrix = this.matrix.slice(0);\n    },\n\n    /**\n     * Apply the ColorMatrix operation to a Uint8Array representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8Array to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data,\n          iLen = data.length,\n          m = this.matrix,\n          r, g, b, a, i, colorsOnly = this.colorsOnly;\n\n      for (i = 0; i < iLen; i += 4) {\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n        if (colorsOnly) {\n          data[i] = r * m[0] + g * m[1] + b * m[2] + m[4] * 255;\n          data[i + 1] = r * m[5] + g * m[6] + b * m[7] + m[9] * 255;\n          data[i + 2] = r * m[10] + g * m[11] + b * m[12] + m[14] * 255;\n        }\n        else {\n          a = data[i + 3];\n          data[i] = r * m[0] + g * m[1] + b * m[2] + a * m[3] + m[4] * 255;\n          data[i + 1] = r * m[5] + g * m[6] + b * m[7] + a * m[8] + m[9] * 255;\n          data[i + 2] = r * m[10] + g * m[11] + b * m[12] + a * m[13] + m[14] * 255;\n          data[i + 3] = r * m[15] + g * m[16] + b * m[17] + a * m[18] + m[19] * 255;\n        }\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uColorMatrix: gl.getUniformLocation(program, 'uColorMatrix'),\n        uConstants: gl.getUniformLocation(program, 'uConstants'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var m = this.matrix,\n          matrix = [\n            m[0], m[1], m[2], m[3],\n            m[5], m[6], m[7], m[8],\n            m[10], m[11], m[12], m[13],\n            m[15], m[16], m[17], m[18]\n          ],\n          constants = [m[4], m[9], m[14], m[19]];\n      gl.uniformMatrix4fv(uniformLocations.uColorMatrix, false, matrix);\n      gl.uniform4fv(uniformLocations.uConstants, constants);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] function to invoke after filter creation\n   * @return {fabric.Image.filters.ColorMatrix} Instance of fabric.Image.filters.ColorMatrix\n   */\n  fabric.Image.filters.ColorMatrix.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Brightness filter class\n   * @class fabric.Image.filters.Brightness\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Brightness#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Brightness({\n   *   brightness: 0.05\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Brightness = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Brightness.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Brightness',\n\n    /**\n     * Fragment source for the brightness program\n     */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uBrightness;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'color.rgb += uBrightness;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * Brightness value, from -1 to 1.\n     * translated to -255 to 255 for 2d\n     * 0.0039215686 is the part of 1 that get translated to 1 in 2d\n     * @param {Number} brightness\n     * @default\n     */\n    brightness: 0,\n\n    /**\n     * Describe the property that is the filter parameter\n     * @param {String} m\n     * @default\n     */\n    mainParameter: 'brightness',\n\n    /**\n    * Apply the Brightness operation to a Uint8ClampedArray representing the pixels of an image.\n    *\n    * @param {Object} options\n    * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n    */\n    applyTo2d: function(options) {\n      if (this.brightness === 0) {\n        return;\n      }\n      var imageData = options.imageData,\n          data = imageData.data, i, len = data.length,\n          brightness = Math.round(this.brightness * 255);\n      for (i = 0; i < len; i += 4) {\n        data[i] = data[i] + brightness;\n        data[i + 1] = data[i + 1] + brightness;\n        data[i + 2] = data[i + 2] + brightness;\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uBrightness: gl.getUniformLocation(program, 'uBrightness'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uBrightness, this.brightness);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Brightness} Instance of fabric.Image.filters.Brightness\n   */\n  fabric.Image.filters.Brightness.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Adapted from <a href=\"http://www.html5rocks.com/en/tutorials/canvas/imagefilters/\">html5rocks article</a>\n   * @class fabric.Image.filters.Convolute\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Convolute#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example <caption>Sharpen filter</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   matrix: [ 0, -1,  0,\n   *            -1,  5, -1,\n   *             0, -1,  0 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   * @example <caption>Blur filter</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   matrix: [ 1/9, 1/9, 1/9,\n   *             1/9, 1/9, 1/9,\n   *             1/9, 1/9, 1/9 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   * @example <caption>Emboss filter</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   matrix: [ 1,   1,  1,\n   *             1, 0.7, -1,\n   *            -1,  -1, -1 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   * @example <caption>Emboss filter with opaqueness</caption>\n   * var filter = new fabric.Image.filters.Convolute({\n   *   opaque: true,\n   *   matrix: [ 1,   1,  1,\n   *             1, 0.7, -1,\n   *            -1,  -1, -1 ]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n  filters.Convolute = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Convolute.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Convolute',\n\n    /*\n     * Opaque value (true/false)\n     */\n    opaque: false,\n\n    /*\n     * matrix for the filter, max 9x9\n     */\n    matrix: [0, 0, 0, 0, 1, 0, 0, 0, 0],\n\n    /**\n     * Fragment source for the brightness program\n     */\n    fragmentSource: {\n      Convolute_3_1: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[9];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 0);\\n' +\n          'for (float h = 0.0; h < 3.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 3.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\\n' +\n              'color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      Convolute_3_0: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[9];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 1);\\n' +\n          'for (float h = 0.0; h < 3.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 3.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\\n' +\n              'color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'float alpha = texture2D(uTexture, vTexCoord).a;\\n' +\n          'gl_FragColor = color;\\n' +\n          'gl_FragColor.a = alpha;\\n' +\n        '}',\n      Convolute_5_1: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[25];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 0);\\n' +\n          'for (float h = 0.0; h < 5.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 5.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\\n' +\n              'color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      Convolute_5_0: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[25];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 1);\\n' +\n          'for (float h = 0.0; h < 5.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 5.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\\n' +\n              'color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'float alpha = texture2D(uTexture, vTexCoord).a;\\n' +\n          'gl_FragColor = color;\\n' +\n          'gl_FragColor.a = alpha;\\n' +\n        '}',\n      Convolute_7_1: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[49];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 0);\\n' +\n          'for (float h = 0.0; h < 7.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 7.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\\n' +\n              'color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      Convolute_7_0: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[49];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 1);\\n' +\n          'for (float h = 0.0; h < 7.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 7.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\\n' +\n              'color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'float alpha = texture2D(uTexture, vTexCoord).a;\\n' +\n          'gl_FragColor = color;\\n' +\n          'gl_FragColor.a = alpha;\\n' +\n        '}',\n      Convolute_9_1: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[81];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 0);\\n' +\n          'for (float h = 0.0; h < 9.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 9.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\\n' +\n              'color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      Convolute_9_0: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform float uMatrix[81];\\n' +\n        'uniform float uStepW;\\n' +\n        'uniform float uStepH;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = vec4(0, 0, 0, 1);\\n' +\n          'for (float h = 0.0; h < 9.0; h+=1.0) {\\n' +\n            'for (float w = 0.0; w < 9.0; w+=1.0) {\\n' +\n              'vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\\n' +\n              'color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\\n' +\n            '}\\n' +\n          '}\\n' +\n          'float alpha = texture2D(uTexture, vTexCoord).a;\\n' +\n          'gl_FragColor = color;\\n' +\n          'gl_FragColor.a = alpha;\\n' +\n        '}',\n    },\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Convolute.prototype\n     * @param {Object} [options] Options object\n     * @param {Boolean} [options.opaque=false] Opaque value (true/false)\n     * @param {Array} [options.matrix] Filter matrix\n     */\n\n\n    /**\n    * Retrieves the cached shader.\n    * @param {Object} options\n    * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n    * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n    */\n    retrieveShader: function(options) {\n      var size = Math.sqrt(this.matrix.length);\n      var cacheKey = this.type + '_' + size + '_' + (this.opaque ? 1 : 0);\n      var shaderSource = this.fragmentSource[cacheKey];\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    /**\n     * Apply the Brightness operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data,\n          weights = this.matrix,\n          side = Math.round(Math.sqrt(weights.length)),\n          halfSide = Math.floor(side / 2),\n          sw = imageData.width,\n          sh = imageData.height,\n          output = options.ctx.createImageData(sw, sh),\n          dst = output.data,\n          // go through the destination image pixels\n          alphaFac = this.opaque ? 1 : 0,\n          r, g, b, a, dstOff,\n          scx, scy, srcOff, wt,\n          x, y, cx, cy;\n\n      for (y = 0; y < sh; y++) {\n        for (x = 0; x < sw; x++) {\n          dstOff = (y * sw + x) * 4;\n          // calculate the weighed sum of the source image pixels that\n          // fall under the convolution matrix\n          r = 0; g = 0; b = 0; a = 0;\n\n          for (cy = 0; cy < side; cy++) {\n            for (cx = 0; cx < side; cx++) {\n              scy = y + cy - halfSide;\n              scx = x + cx - halfSide;\n\n              // eslint-disable-next-line max-depth\n              if (scy < 0 || scy >= sh || scx < 0 || scx >= sw) {\n                continue;\n              }\n\n              srcOff = (scy * sw + scx) * 4;\n              wt = weights[cy * side + cx];\n\n              r += data[srcOff] * wt;\n              g += data[srcOff + 1] * wt;\n              b += data[srcOff + 2] * wt;\n              // eslint-disable-next-line max-depth\n              if (!alphaFac) {\n                a += data[srcOff + 3] * wt;\n              }\n            }\n          }\n          dst[dstOff] = r;\n          dst[dstOff + 1] = g;\n          dst[dstOff + 2] = b;\n          if (!alphaFac) {\n            dst[dstOff + 3] = a;\n          }\n          else {\n            dst[dstOff + 3] = data[dstOff + 3];\n          }\n        }\n      }\n      options.imageData = output;\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uMatrix: gl.getUniformLocation(program, 'uMatrix'),\n        uOpaque: gl.getUniformLocation(program, 'uOpaque'),\n        uHalfSize: gl.getUniformLocation(program, 'uHalfSize'),\n        uSize: gl.getUniformLocation(program, 'uSize'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1fv(uniformLocations.uMatrix, this.matrix);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        opaque: this.opaque,\n        matrix: this.matrix\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Convolute} Instance of fabric.Image.filters.Convolute\n   */\n  fabric.Image.filters.Convolute.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Grayscale image filter class\n   * @class fabric.Image.filters.Grayscale\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Grayscale();\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Grayscale = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Grayscale.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Grayscale',\n\n    fragmentSource: {\n      average: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n          'float average = (color.r + color.b + color.g) / 3.0;\\n' +\n          'gl_FragColor = vec4(average, average, average, color.a);\\n' +\n        '}',\n      lightness: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform int uMode;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 col = texture2D(uTexture, vTexCoord);\\n' +\n          'float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\\n' +\n          'gl_FragColor = vec4(average, average, average, col.a);\\n' +\n        '}',\n      luminosity: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform int uMode;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 col = texture2D(uTexture, vTexCoord);\\n' +\n          'float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\\n' +\n          'gl_FragColor = vec4(average, average, average, col.a);\\n' +\n        '}',\n    },\n\n\n    /**\n     * Grayscale mode, between 'average', 'lightness', 'luminosity'\n     * @param {String} type\n     * @default\n     */\n    mode: 'average',\n\n    mainParameter: 'mode',\n\n    /**\n     * Apply the Grayscale operation to a Uint8Array representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8Array to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data, i,\n          len = data.length, value,\n          mode = this.mode;\n      for (i = 0; i < len; i += 4) {\n        if (mode === 'average') {\n          value = (data[i] + data[i + 1] + data[i + 2]) / 3;\n        }\n        else if (mode === 'lightness') {\n          value = (Math.min(data[i], data[i + 1], data[i + 2]) +\n            Math.max(data[i], data[i + 1], data[i + 2])) / 2;\n        }\n        else if (mode === 'luminosity') {\n          value = 0.21 * data[i] + 0.72 * data[i + 1] + 0.07 * data[i + 2];\n        }\n        data[i] = value;\n        data[i + 1] = value;\n        data[i + 2] = value;\n      }\n    },\n\n    /**\n     * Retrieves the cached shader.\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    retrieveShader: function(options) {\n      var cacheKey = this.type + '_' + this.mode;\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        var shaderSource = this.fragmentSource[this.mode];\n        options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uMode: gl.getUniformLocation(program, 'uMode'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      // default average mode.\n      var mode = 1;\n      gl.uniform1i(uniformLocations.uMode, mode);\n    },\n\n    /**\n     * Grayscale filter isNeutralState implementation\n     * The filter is never neutral\n     * on the image\n     **/\n    isNeutralState: function() {\n      return false;\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Grayscale} Instance of fabric.Image.filters.Grayscale\n   */\n  fabric.Image.filters.Grayscale.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Invert filter class\n   * @class fabric.Image.filters.Invert\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Invert();\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Invert = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Invert.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Invert',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform int uInvert;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'if (uInvert == 1) {\\n' +\n          'gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\\n' +\n        '} else {\\n' +\n          'gl_FragColor = color;\\n' +\n        '}\\n' +\n      '}',\n\n    /**\n     * Filter invert. if false, does nothing\n     * @param {Boolean} invert\n     * @default\n     */\n    invert: true,\n\n    mainParameter: 'invert',\n\n    /**\n     * Apply the Invert operation to a Uint8Array representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8Array to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data, i,\n          len = data.length;\n      for (i = 0; i < len; i += 4) {\n        data[i] = 255 - data[i];\n        data[i + 1] = 255 - data[i + 1];\n        data[i + 2] = 255 - data[i + 2];\n      }\n    },\n\n    /**\n     * Invert filter isNeutralState implementation\n     * Used only in image applyFilters to discard filters that will not have an effect\n     * on the image\n     * @param {Object} options\n     **/\n    isNeutralState: function() {\n      return !this.invert;\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uInvert: gl.getUniformLocation(program, 'uInvert'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1i(uniformLocations.uInvert, this.invert);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Invert} Instance of fabric.Image.filters.Invert\n   */\n  fabric.Image.filters.Invert.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Noise filter class\n   * @class fabric.Image.filters.Noise\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Noise#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Noise({\n   *   noise: 700\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n  filters.Noise = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Noise.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Noise',\n\n    /**\n     * Fragment source for the noise program\n     */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uStepH;\\n' +\n      'uniform float uNoise;\\n' +\n      'uniform float uSeed;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'float rand(vec2 co, float seed, float vScale) {\\n' +\n        'return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\\n' +\n      '}\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * Describe the property that is the filter parameter\n     * @param {String} m\n     * @default\n     */\n    mainParameter: 'noise',\n\n    /**\n     * Noise value, from\n     * @param {Number} noise\n     * @default\n     */\n    noise: 0,\n\n    /**\n     * Apply the Brightness operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      if (this.noise === 0) {\n        return;\n      }\n      var imageData = options.imageData,\n          data = imageData.data, i, len = data.length,\n          noise = this.noise, rand;\n\n      for (i = 0, len = data.length; i < len; i += 4) {\n\n        rand = (0.5 - Math.random()) * noise;\n\n        data[i] += rand;\n        data[i + 1] += rand;\n        data[i + 2] += rand;\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uNoise: gl.getUniformLocation(program, 'uNoise'),\n        uSeed: gl.getUniformLocation(program, 'uSeed'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uNoise, this.noise / 255);\n      gl.uniform1f(uniformLocations.uSeed, Math.random());\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        noise: this.noise\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Noise} Instance of fabric.Image.filters.Noise\n   */\n  fabric.Image.filters.Noise.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Pixelate filter class\n   * @class fabric.Image.filters.Pixelate\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Pixelate#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Pixelate({\n   *   blocksize: 8\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Pixelate = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Pixelate.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Pixelate',\n\n    blocksize: 4,\n\n    mainParameter: 'blocksize',\n\n    /**\n     * Fragment source for the Pixelate program\n     */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uBlocksize;\\n' +\n      'uniform float uStepW;\\n' +\n      'uniform float uStepH;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'float blockW = uBlocksize * uStepW;\\n' +\n        'float blockH = uBlocksize * uStepW;\\n' +\n        'int posX = int(vTexCoord.x / blockW);\\n' +\n        'int posY = int(vTexCoord.y / blockH);\\n' +\n        'float fposX = float(posX);\\n' +\n        'float fposY = float(posY);\\n' +\n        'vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\\n' +\n        'vec4 color = texture2D(uTexture, squareCoords);\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * Apply the Pixelate operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data,\n          iLen = imageData.height,\n          jLen = imageData.width,\n          index, i, j, r, g, b, a,\n          _i, _j, _iLen, _jLen;\n\n      for (i = 0; i < iLen; i += this.blocksize) {\n        for (j = 0; j < jLen; j += this.blocksize) {\n\n          index = (i * 4) * jLen + (j * 4);\n\n          r = data[index];\n          g = data[index + 1];\n          b = data[index + 2];\n          a = data[index + 3];\n\n          _iLen = Math.min(i + this.blocksize, iLen);\n          _jLen = Math.min(j + this.blocksize, jLen);\n          for (_i = i; _i < _iLen; _i++) {\n            for (_j = j; _j < _jLen; _j++) {\n              index = (_i * 4) * jLen + (_j * 4);\n              data[index] = r;\n              data[index + 1] = g;\n              data[index + 2] = b;\n              data[index + 3] = a;\n            }\n          }\n        }\n      }\n    },\n\n    /**\n     * Indicate when the filter is not gonna apply changes to the image\n     **/\n    isNeutralState: function() {\n      return this.blocksize === 1;\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uBlocksize: gl.getUniformLocation(program, 'uBlocksize'),\n        uStepW: gl.getUniformLocation(program, 'uStepW'),\n        uStepH: gl.getUniformLocation(program, 'uStepH'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uBlocksize, this.blocksize);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Pixelate} Instance of fabric.Image.filters.Pixelate\n   */\n  fabric.Image.filters.Pixelate.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      extend = fabric.util.object.extend,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Remove white filter class\n   * @class fabric.Image.filters.RemoveColor\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.RemoveColor#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.RemoveColor({\n   *   threshold: 0.2,\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n  filters.RemoveColor = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.RemoveColor.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'RemoveColor',\n\n    /**\n     * Color to remove, in any format understood by fabric.Color.\n     * @param {String} type\n     * @default\n     */\n    color: '#FFFFFF',\n\n    /**\n     * Fragment source for the brightness program\n     */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform vec4 uLow;\\n' +\n      'uniform vec4 uHigh;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'gl_FragColor = texture2D(uTexture, vTexCoord);\\n' +\n        'if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\\n' +\n          'gl_FragColor.a = 0.0;\\n' +\n        '}\\n' +\n      '}',\n\n    /**\n     * distance to actual color, as value up or down from each r,g,b\n     * between 0 and 1\n     **/\n    distance: 0.02,\n\n    /**\n     * For color to remove inside distance, use alpha channel for a smoother deletion\n     * NOT IMPLEMENTED YET\n     **/\n    useAlpha: false,\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.RemoveWhite.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.color=#RRGGBB] Threshold value\n     * @param {Number} [options.distance=10] Distance value\n     */\n\n    /**\n     * Applies filter to canvas element\n     * @param {Object} canvasEl Canvas element to apply filter to\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data, i,\n          distance = this.distance * 255,\n          r, g, b,\n          source = new fabric.Color(this.color).getSource(),\n          lowC = [\n            source[0] - distance,\n            source[1] - distance,\n            source[2] - distance,\n          ],\n          highC = [\n            source[0] + distance,\n            source[1] + distance,\n            source[2] + distance,\n          ];\n\n\n      for (i = 0; i < data.length; i += 4) {\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n\n        if (r > lowC[0] &&\n            g > lowC[1] &&\n            b > lowC[2] &&\n            r < highC[0] &&\n            g < highC[1] &&\n            b < highC[2]) {\n          data[i + 3] = 0;\n        }\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uLow: gl.getUniformLocation(program, 'uLow'),\n        uHigh: gl.getUniformLocation(program, 'uHigh'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var source = new fabric.Color(this.color).getSource(),\n          distance = parseFloat(this.distance),\n          lowC = [\n            0 + source[0] / 255 - distance,\n            0 + source[1] / 255 - distance,\n            0 + source[2] / 255 - distance,\n            1\n          ],\n          highC = [\n            source[0] / 255 + distance,\n            source[1] / 255 + distance,\n            source[2] / 255 + distance,\n            1\n          ];\n      gl.uniform4fv(uniformLocations.uLow, lowC);\n      gl.uniform4fv(uniformLocations.uHigh, highC);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return extend(this.callSuper('toObject'), {\n        color: this.color,\n        distance: this.distance\n      });\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.RemoveColor} Instance of fabric.Image.filters.RemoveWhite\n   */\n  fabric.Image.filters.RemoveColor.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  var matrices = {\n    Brownie: [\n      0.59970,0.34553,-0.27082,0,0.186,\n      -0.03770,0.86095,0.15059,0,-0.1449,\n      0.24113,-0.07441,0.44972,0,-0.02965,\n      0,0,0,1,0\n    ],\n    Vintage: [\n      0.62793,0.32021,-0.03965,0,0.03784,\n      0.02578,0.64411,0.03259,0,0.02926,\n      0.04660,-0.08512,0.52416,0,0.02023,\n      0,0,0,1,0\n    ],\n    Kodachrome: [\n      1.12855,-0.39673,-0.03992,0,0.24991,\n      -0.16404,1.08352,-0.05498,0,0.09698,\n      -0.16786,-0.56034,1.60148,0,0.13972,\n      0,0,0,1,0\n    ],\n    Technicolor: [\n      1.91252,-0.85453,-0.09155,0,0.04624,\n      -0.30878,1.76589,-0.10601,0,-0.27589,\n      -0.23110,-0.75018,1.84759,0,0.12137,\n      0,0,0,1,0\n    ],\n    Polaroid: [\n      1.438,-0.062,-0.062,0,0,\n      -0.122,1.378,-0.122,0,0,\n      -0.016,-0.016,1.483,0,0,\n      0,0,0,1,0\n    ],\n    Sepia: [\n      0.393, 0.769, 0.189, 0, 0,\n      0.349, 0.686, 0.168, 0, 0,\n      0.272, 0.534, 0.131, 0, 0,\n      0, 0, 0, 1, 0\n    ],\n    BlackWhite: [\n      1.5, 1.5, 1.5, 0, -1,\n      1.5, 1.5, 1.5, 0, -1,\n      1.5, 1.5, 1.5, 0, -1,\n      0, 0, 0, 1, 0,\n    ]\n  };\n\n  for (var key in matrices) {\n    filters[key] = createClass(filters.ColorMatrix, /** @lends fabric.Image.filters.Sepia.prototype */ {\n\n      /**\n       * Filter type\n       * @param {String} type\n       * @default\n       */\n      type: key,\n\n      /**\n       * Colormatrix for the effect\n       * array of 20 floats. Numbers in positions 4, 9, 14, 19 loose meaning\n       * outside the -1, 1 range.\n       * @param {Array} matrix array of 20 numbers.\n       * @default\n       */\n      matrix: matrices[key],\n\n      /**\n       * Lock the matrix export for this kind of static, parameter less filters.\n       */\n      mainParameter: false,\n      /**\n       * Lock the colormatrix on the color part, skipping alpha\n       */\n      colorsOnly: true,\n\n    });\n    fabric.Image.filters[key].fromObject = fabric.Image.filters.BaseFilter.fromObject;\n  }\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n  'use strict';\n\n  var fabric = global.fabric,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Color Blend filter class\n   * @class fabric.Image.filter.BlendColor\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @example\n   * var filter = new fabric.Image.filters.BlendColor({\n   *  color: '#000',\n   *  mode: 'multiply'\n   * });\n   *\n   * var filter = new fabric.Image.filters.BlendImage({\n   *  image: fabricImageObject,\n   *  mode: 'multiply',\n   *  alpha: 0.5\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n\n  filters.BlendColor = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Blend.prototype */ {\n    type: 'BlendColor',\n\n    /**\n     * Color to make the blend operation with. default to a reddish color since black or white\n     * gives always strong result.\n     **/\n    color: '#F95C63',\n\n    /**\n     * Blend mode for the filter: one of multiply, add, diff, screen, subtract,\n     * darken, lighten, overlay, exclusion, tint.\n     **/\n    mode: 'multiply',\n\n    /**\n     * alpha value. represent the strength of the blend color operation.\n     **/\n    alpha: 1,\n\n    /**\n     * Fragment source for the Multiply program\n     */\n    fragmentSource: {\n      multiply: 'gl_FragColor.rgb *= uColor.rgb;\\n',\n      screen: 'gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\\n',\n      add: 'gl_FragColor.rgb += uColor.rgb;\\n',\n      diff: 'gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\\n',\n      subtract: 'gl_FragColor.rgb -= uColor.rgb;\\n',\n      lighten: 'gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\\n',\n      darken: 'gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\\n',\n      exclusion: 'gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\\n',\n      overlay: 'if (uColor.r < 0.5) {\\n' +\n          'gl_FragColor.r *= 2.0 * uColor.r;\\n' +\n        '} else {\\n' +\n          'gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\\n' +\n        '}\\n' +\n        'if (uColor.g < 0.5) {\\n' +\n          'gl_FragColor.g *= 2.0 * uColor.g;\\n' +\n        '} else {\\n' +\n          'gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\\n' +\n        '}\\n' +\n        'if (uColor.b < 0.5) {\\n' +\n          'gl_FragColor.b *= 2.0 * uColor.b;\\n' +\n        '} else {\\n' +\n          'gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\\n' +\n        '}\\n',\n      tint: 'gl_FragColor.rgb *= (1.0 - uColor.a);\\n' +\n        'gl_FragColor.rgb += uColor.rgb;\\n',\n    },\n\n    /**\n     * build the fragment source for the filters, joining the common part with\n     * the specific one.\n     * @param {String} mode the mode of the filter, a key of this.fragmentSource\n     * @return {String} the source to be compiled\n     * @private\n     */\n    buildSource: function(mode) {\n      return 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform vec4 uColor;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'void main() {\\n' +\n          'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n          'gl_FragColor = color;\\n' +\n          'if (color.a > 0.0) {\\n' +\n            this.fragmentSource[mode] +\n          '}\\n' +\n        '}';\n    },\n\n    /**\n     * Retrieves the cached shader.\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    retrieveShader: function(options) {\n      var cacheKey = this.type + '_' + this.mode, shaderSource;\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        shaderSource = this.buildSource(this.mode);\n        options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    /**\n     * Apply the Blend operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          data = imageData.data, iLen = data.length,\n          tr, tg, tb,\n          r, g, b,\n          source, alpha1 = 1 - this.alpha;\n\n      source = new fabric.Color(this.color).getSource();\n      tr = source[0] * this.alpha;\n      tg = source[1] * this.alpha;\n      tb = source[2] * this.alpha;\n\n      for (var i = 0; i < iLen; i += 4) {\n\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n\n        switch (this.mode) {\n          case 'multiply':\n            data[i] = r * tr / 255;\n            data[i + 1] = g * tg / 255;\n            data[i + 2] = b * tb / 255;\n            break;\n          case 'screen':\n            data[i] = 255 - (255 - r) * (255 - tr) / 255;\n            data[i + 1] = 255 - (255 - g) * (255 - tg) / 255;\n            data[i + 2] = 255 - (255 - b) * (255 - tb) / 255;\n            break;\n          case 'add':\n            data[i] = r + tr;\n            data[i + 1] = g + tg;\n            data[i + 2] = b + tb;\n            break;\n          case 'diff':\n          case 'difference':\n            data[i] = Math.abs(r - tr);\n            data[i + 1] = Math.abs(g - tg);\n            data[i + 2] = Math.abs(b - tb);\n            break;\n          case 'subtract':\n            data[i] = r - tr;\n            data[i + 1] = g - tg;\n            data[i + 2] = b - tb;\n            break;\n          case 'darken':\n            data[i] = Math.min(r, tr);\n            data[i + 1] = Math.min(g, tg);\n            data[i + 2] = Math.min(b, tb);\n            break;\n          case 'lighten':\n            data[i] = Math.max(r, tr);\n            data[i + 1] = Math.max(g, tg);\n            data[i + 2] = Math.max(b, tb);\n            break;\n          case 'overlay':\n            data[i] = tr < 128 ? (2 * r * tr / 255) : (255 - 2 * (255 - r) * (255 - tr) / 255);\n            data[i + 1] = tg < 128 ? (2 * g * tg / 255) : (255 - 2 * (255 - g) * (255 - tg) / 255);\n            data[i + 2] = tb < 128 ? (2 * b * tb / 255) : (255 - 2 * (255 - b) * (255 - tb) / 255);\n            break;\n          case 'exclusion':\n            data[i] = tr + r - ((2 * tr * r) / 255);\n            data[i + 1] = tg + g - ((2 * tg * g) / 255);\n            data[i + 2] = tb + b - ((2 * tb * b) / 255);\n            break;\n          case 'tint':\n            data[i] = tr + r * alpha1;\n            data[i + 1] = tg + g * alpha1;\n            data[i + 2] = tb + b * alpha1;\n        }\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uColor: gl.getUniformLocation(program, 'uColor'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var source = new fabric.Color(this.color).getSource();\n      source[0] = this.alpha * source[0] / 255;\n      source[1] = this.alpha * source[1] / 255;\n      source[2] = this.alpha * source[2] / 255;\n      source[3] = this.alpha;\n      gl.uniform4fv(uniformLocations.uColor, source);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return {\n        type: this.type,\n        color: this.color,\n        mode: this.mode,\n        alpha: this.alpha\n      };\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.BlendColor} Instance of fabric.Image.filters.BlendColor\n   */\n  fabric.Image.filters.BlendColor.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n  'use strict';\n\n  var fabric = global.fabric,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Image Blend filter class\n   * @class fabric.Image.filter.BlendImage\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @example\n   * var filter = new fabric.Image.filters.BlendColor({\n   *  color: '#000',\n   *  mode: 'multiply'\n   * });\n   *\n   * var filter = new fabric.Image.filters.BlendImage({\n   *  image: fabricImageObject,\n   *  mode: 'multiply',\n   *  alpha: 0.5\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n\n  filters.BlendImage = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.BlendImage.prototype */ {\n    type: 'BlendImage',\n\n    /**\n     * Color to make the blend operation with. default to a reddish color since black or white\n     * gives always strong result.\n     **/\n    image: null,\n\n    /**\n     * Blend mode for the filter: one of multiply, add, diff, screen, subtract,\n     * darken, lighten, overlay, exclusion, tint.\n     **/\n    mode: 'multiply',\n\n    /**\n     * alpha value. represent the strength of the blend image operation.\n     * not implemented.\n     **/\n    alpha: 1,\n\n    vertexSource: 'attribute vec2 aPosition;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'varying vec2 vTexCoord2;\\n' +\n      'uniform mat3 uTransformMatrix;\\n' +\n      'void main() {\\n' +\n        'vTexCoord = aPosition;\\n' +\n        'vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\\n' +\n        'gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\\n' +\n      '}',\n\n    /**\n     * Fragment source for the Multiply program\n     */\n    fragmentSource: {\n      multiply: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform sampler2D uImage;\\n' +\n        'uniform vec4 uColor;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'varying vec2 vTexCoord2;\\n' +\n        'void main() {\\n' +\n          'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n          'vec4 color2 = texture2D(uImage, vTexCoord2);\\n' +\n          'color.rgba *= color2.rgba;\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n      mask: 'precision highp float;\\n' +\n        'uniform sampler2D uTexture;\\n' +\n        'uniform sampler2D uImage;\\n' +\n        'uniform vec4 uColor;\\n' +\n        'varying vec2 vTexCoord;\\n' +\n        'varying vec2 vTexCoord2;\\n' +\n        'void main() {\\n' +\n          'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n          'vec4 color2 = texture2D(uImage, vTexCoord2);\\n' +\n          'color.a = color2.a;\\n' +\n          'gl_FragColor = color;\\n' +\n        '}',\n    },\n\n    /**\n     * Retrieves the cached shader.\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    retrieveShader: function(options) {\n      var cacheKey = this.type + '_' + this.mode;\n      var shaderSource = this.fragmentSource[this.mode];\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        options.programCache[cacheKey] = this.createProgram(options.context, shaderSource);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    applyToWebGL: function(options) {\n      // load texture to blend.\n      var gl = options.context,\n          texture = this.createTexture(options.filterBackend, this.image);\n      this.bindAdditionalTexture(gl, texture, gl.TEXTURE1);\n      this.callSuper('applyToWebGL', options);\n      this.unbindAdditionalTexture(gl, gl.TEXTURE1);\n    },\n\n    createTexture: function(backend, image) {\n      return backend.getCachedTexture(image.cacheKey, image._element);\n    },\n\n    /**\n     * Calculate a transformMatrix to adapt the image to blend over\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    calculateMatrix: function() {\n      var image = this.image,\n          width = image._element.width,\n          height = image._element.height;\n      return [\n        1 / image.scaleX, 0, 0,\n        0, 1 / image.scaleY, 0,\n        -image.left / width, -image.top / height, 1\n      ];\n    },\n\n    /**\n     * Apply the Blend operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          resources = options.filterBackend.resources,\n          data = imageData.data, iLen = data.length,\n          width = imageData.width,\n          height = imageData.height,\n          tr, tg, tb, ta,\n          r, g, b, a,\n          canvas1, context, image = this.image, blendData;\n\n      if (!resources.blendImage) {\n        resources.blendImage = fabric.util.createCanvasElement();\n      }\n      canvas1 = resources.blendImage;\n      context = canvas1.getContext('2d');\n      if (canvas1.width !== width || canvas1.height !== height) {\n        canvas1.width = width;\n        canvas1.height = height;\n      }\n      else {\n        context.clearRect(0, 0, width, height);\n      }\n      context.setTransform(image.scaleX, 0, 0, image.scaleY, image.left, image.top);\n      context.drawImage(image._element, 0, 0, width, height);\n      blendData = context.getImageData(0, 0, width, height).data;\n      for (var i = 0; i < iLen; i += 4) {\n\n        r = data[i];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n\n        tr = blendData[i];\n        tg = blendData[i + 1];\n        tb = blendData[i + 2];\n        ta = blendData[i + 3];\n\n        switch (this.mode) {\n          case 'multiply':\n            data[i] = r * tr / 255;\n            data[i + 1] = g * tg / 255;\n            data[i + 2] = b * tb / 255;\n            data[i + 3] = a * ta / 255;\n            break;\n          case 'mask':\n            data[i + 3] = ta;\n            break;\n        }\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uTransformMatrix: gl.getUniformLocation(program, 'uTransformMatrix'),\n        uImage: gl.getUniformLocation(program, 'uImage'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var matrix = this.calculateMatrix();\n      gl.uniform1i(uniformLocations.uImage, 1); // texture unit 1.\n      gl.uniformMatrix3fv(uniformLocations.uTransformMatrix, false, matrix);\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return {\n        type: this.type,\n        image: this.image && this.image.toObject(),\n        mode: this.mode,\n        alpha: this.alpha\n      };\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} callback to be invoked after filter creation\n   * @return {fabric.Image.filters.BlendImage} Instance of fabric.Image.filters.BlendImage\n   */\n  fabric.Image.filters.BlendImage.fromObject = function(object, callback) {\n    fabric.Image.fromObject(object.image, function(image) {\n      var options = fabric.util.object.clone(object);\n      options.image = image;\n      callback(new fabric.Image.filters.BlendImage(options));\n    });\n  };\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }), pow = Math.pow, floor = Math.floor,\n      sqrt = Math.sqrt, abs = Math.abs, round = Math.round, sin = Math.sin,\n      ceil = Math.ceil,\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Resize image filter class\n   * @class fabric.Image.filters.Resize\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Resize();\n   * object.filters.push(filter);\n   * object.applyFilters(canvas.renderAll.bind(canvas));\n   */\n  filters.Resize = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Resize.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Resize',\n\n    /**\n     * Resize type\n     * for webgl resizeType is just lanczos, for canvas2d can be:\n     * bilinear, hermite, sliceHack, lanczos.\n     * @param {String} resizeType\n     * @default\n     */\n    resizeType: 'hermite',\n\n    /**\n     * Scale factor for resizing, x axis\n     * @param {Number} scaleX\n     * @default\n     */\n    scaleX: 1,\n\n    /**\n     * Scale factor for resizing, y axis\n     * @param {Number} scaleY\n     * @default\n     */\n    scaleY: 1,\n\n    /**\n     * LanczosLobes parameter for lanczos filter, valid for resizeType lanczos\n     * @param {Number} lanczosLobes\n     * @default\n     */\n    lanczosLobes: 3,\n\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uDelta: gl.getUniformLocation(program, 'uDelta'),\n        uTaps: gl.getUniformLocation(program, 'uTaps'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform2fv(uniformLocations.uDelta, this.horizontal ? [1 / this.width, 0] : [0, 1 / this.height]);\n      gl.uniform1fv(uniformLocations.uTaps, this.taps);\n    },\n\n    /**\n     * Retrieves the cached shader.\n     * @param {Object} options\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    retrieveShader: function(options) {\n      var filterWindow = this.getFilterWindow(), cacheKey = this.type + '_' + filterWindow;\n      if (!options.programCache.hasOwnProperty(cacheKey)) {\n        var fragmentShader = this.generateShader(filterWindow);\n        options.programCache[cacheKey] = this.createProgram(options.context, fragmentShader);\n      }\n      return options.programCache[cacheKey];\n    },\n\n    getFilterWindow: function() {\n      var scale = this.tempScale;\n      return Math.ceil(this.lanczosLobes / scale);\n    },\n\n    getTaps: function() {\n      var lobeFunction = this.lanczosCreate(this.lanczosLobes), scale = this.tempScale,\n          filterWindow = this.getFilterWindow(), taps = new Array(filterWindow);\n      for (var i = 1; i <= filterWindow; i++) {\n        taps[i - 1] = lobeFunction(i * scale);\n      }\n      return taps;\n    },\n\n    /**\n     * Generate vertex and shader sources from the necessary steps numbers\n     * @param {Number} filterWindow\n     */\n    generateShader: function(filterWindow) {\n      var offsets = new Array(filterWindow),\n          fragmentShader = this.fragmentSourceTOP, filterWindow;\n\n      for (var i = 1; i <= filterWindow; i++) {\n        offsets[i - 1] = i + '.0 * uDelta';\n      }\n\n      fragmentShader += 'uniform float uTaps[' + filterWindow + '];\\n';\n      fragmentShader += 'void main() {\\n';\n      fragmentShader += '  vec4 color = texture2D(uTexture, vTexCoord);\\n';\n      fragmentShader += '  float sum = 1.0;\\n';\n\n      offsets.forEach(function(offset, i) {\n        fragmentShader += '  color += texture2D(uTexture, vTexCoord + ' + offset + ') * uTaps[' + i + '];\\n';\n        fragmentShader += '  color += texture2D(uTexture, vTexCoord - ' + offset + ') * uTaps[' + i + '];\\n';\n        fragmentShader += '  sum += 2.0 * uTaps[' + i + '];\\n';\n      });\n      fragmentShader += '  gl_FragColor = color / sum;\\n';\n      fragmentShader += '}';\n      return fragmentShader;\n    },\n\n    fragmentSourceTOP: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform vec2 uDelta;\\n' +\n      'varying vec2 vTexCoord;\\n',\n\n    /**\n     * Apply the resize filter to the image\n     * Determines whether to use WebGL or Canvas2D based on the options.webgl flag.\n     *\n     * @param {Object} options\n     * @param {Number} options.passes The number of filters remaining to be executed\n     * @param {Boolean} options.webgl Whether to use webgl to render the filter.\n     * @param {WebGLTexture} options.sourceTexture The texture setup as the source to be filtered.\n     * @param {WebGLTexture} options.targetTexture The texture where filtered output should be drawn.\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    applyTo: function(options) {\n      if (options.webgl) {\n        options.passes++;\n        this.width = options.sourceWidth;\n        this.horizontal = true;\n        this.dW = Math.round(this.width * this.scaleX);\n        this.dH = options.sourceHeight;\n        this.tempScale = this.dW / this.width;\n        this.taps = this.getTaps();\n        options.destinationWidth = this.dW;\n        this._setupFrameBuffer(options);\n        this.applyToWebGL(options);\n        this._swapTextures(options);\n        options.sourceWidth = options.destinationWidth;\n\n        this.height = options.sourceHeight;\n        this.horizontal = false;\n        this.dH = Math.round(this.height * this.scaleY);\n        this.tempScale = this.dH / this.height;\n        this.taps = this.getTaps();\n        options.destinationHeight = this.dH;\n        this._setupFrameBuffer(options);\n        this.applyToWebGL(options);\n        this._swapTextures(options);\n        options.sourceHeight = options.destinationHeight;\n      }\n      else {\n        this.applyTo2d(options);\n      }\n    },\n\n    isNeutralState: function() {\n      return this.scaleX === 1 && this.scaleY === 1;\n    },\n\n    lanczosCreate: function(lobes) {\n      return function(x) {\n        if (x >= lobes || x <= -lobes) {\n          return 0.0;\n        }\n        if (x < 1.19209290E-07 && x > -1.19209290E-07) {\n          return 1.0;\n        }\n        x *= Math.PI;\n        var xx = x / lobes;\n        return (sin(x) / x) * sin(xx) / xx;\n      };\n    },\n\n    /**\n     * Applies filter to canvas element\n     * @memberOf fabric.Image.filters.Resize.prototype\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} scaleX\n     * @param {Number} scaleY\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData,\n          scaleX = this.scaleX,\n          scaleY = this.scaleY;\n\n      this.rcpScaleX = 1 / scaleX;\n      this.rcpScaleY = 1 / scaleY;\n\n      var oW = imageData.width, oH = imageData.height,\n          dW = round(oW * scaleX), dH = round(oH * scaleY),\n          newData;\n\n      if (this.resizeType === 'sliceHack') {\n        newData = this.sliceByTwo(options, oW, oH, dW, dH);\n      }\n      else if (this.resizeType === 'hermite') {\n        newData = this.hermiteFastResize(options, oW, oH, dW, dH);\n      }\n      else if (this.resizeType === 'bilinear') {\n        newData = this.bilinearFiltering(options, oW, oH, dW, dH);\n      }\n      else if (this.resizeType === 'lanczos') {\n        newData = this.lanczosResize(options, oW, oH, dW, dH);\n      }\n      options.imageData = newData;\n    },\n\n    /**\n     * Filter sliceByTwo\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    sliceByTwo: function(options, oW, oH, dW, dH) {\n      var imageData = options.imageData,\n          mult = 0.5, doneW = false, doneH = false, stepW = oW * mult,\n          stepH = oH * mult, resources = fabric.filterBackend.resources,\n          tmpCanvas, ctx, sX = 0, sY = 0, dX = oW, dY = 0;\n      if (!resources.sliceByTwo) {\n        resources.sliceByTwo = document.createElement('canvas');\n      }\n      tmpCanvas = resources.sliceByTwo;\n      if (tmpCanvas.width < oW * 1.5 || tmpCanvas.height < oH) {\n        tmpCanvas.width = oW * 1.5;\n        tmpCanvas.height = oH;\n      }\n      ctx = tmpCanvas.getContext('2d');\n      ctx.clearRect(0, 0, oW * 1.5, oH);\n      ctx.putImageData(imageData, 0, 0);\n\n      dW = floor(dW);\n      dH = floor(dH);\n\n      while (!doneW || !doneH) {\n        oW = stepW;\n        oH = stepH;\n        if (dW < floor(stepW * mult)) {\n          stepW = floor(stepW * mult);\n        }\n        else {\n          stepW = dW;\n          doneW = true;\n        }\n        if (dH < floor(stepH * mult)) {\n          stepH = floor(stepH * mult);\n        }\n        else {\n          stepH = dH;\n          doneH = true;\n        }\n        ctx.drawImage(tmpCanvas, sX, sY, oW, oH, dX, dY, stepW, stepH);\n        sX = dX;\n        sY = dY;\n        dY += stepH;\n      }\n      return ctx.getImageData(sX, sY, dW, dH);\n    },\n\n    /**\n     * Filter lanczosResize\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    lanczosResize: function(options, oW, oH, dW, dH) {\n\n      function process(u) {\n        var v, i, weight, idx, a, red, green,\n            blue, alpha, fX, fY;\n        center.x = (u + 0.5) * ratioX;\n        icenter.x = floor(center.x);\n        for (v = 0; v < dH; v++) {\n          center.y = (v + 0.5) * ratioY;\n          icenter.y = floor(center.y);\n          a = 0; red = 0; green = 0; blue = 0; alpha = 0;\n          for (i = icenter.x - range2X; i <= icenter.x + range2X; i++) {\n            if (i < 0 || i >= oW) {\n              continue;\n            }\n            fX = floor(1000 * abs(i - center.x));\n            if (!cacheLanc[fX]) {\n              cacheLanc[fX] = { };\n            }\n            for (var j = icenter.y - range2Y; j <= icenter.y + range2Y; j++) {\n              if (j < 0 || j >= oH) {\n                continue;\n              }\n              fY = floor(1000 * abs(j - center.y));\n              if (!cacheLanc[fX][fY]) {\n                cacheLanc[fX][fY] = lanczos(sqrt(pow(fX * rcpRatioX, 2) + pow(fY * rcpRatioY, 2)) / 1000);\n              }\n              weight = cacheLanc[fX][fY];\n              if (weight > 0) {\n                idx = (j * oW + i) * 4;\n                a += weight;\n                red += weight * srcData[idx];\n                green += weight * srcData[idx + 1];\n                blue += weight * srcData[idx + 2];\n                alpha += weight * srcData[idx + 3];\n              }\n            }\n          }\n          idx = (v * dW + u) * 4;\n          destData[idx] = red / a;\n          destData[idx + 1] = green / a;\n          destData[idx + 2] = blue / a;\n          destData[idx + 3] = alpha / a;\n        }\n\n        if (++u < dW) {\n          return process(u);\n        }\n        else {\n          return destImg;\n        }\n      }\n\n      var srcData = options.imageData.data,\n          destImg = options.ctx.createImageData(dW, dH),\n          destData = destImg.data,\n          lanczos = this.lanczosCreate(this.lanczosLobes),\n          ratioX = this.rcpScaleX, ratioY = this.rcpScaleY,\n          rcpRatioX = 2 / this.rcpScaleX, rcpRatioY = 2 / this.rcpScaleY,\n          range2X = ceil(ratioX * this.lanczosLobes / 2),\n          range2Y = ceil(ratioY * this.lanczosLobes / 2),\n          cacheLanc = { }, center = { }, icenter = { };\n\n      return process(0);\n    },\n\n    /**\n     * bilinearFiltering\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    bilinearFiltering: function(options, oW, oH, dW, dH) {\n      var a, b, c, d, x, y, i, j, xDiff, yDiff, chnl,\n          color, offset = 0, origPix, ratioX = this.rcpScaleX,\n          ratioY = this.rcpScaleY,\n          w4 = 4 * (oW - 1), img = options.imageData,\n          pixels = img.data, destImage = options.ctx.createImageData(dW, dH),\n          destPixels = destImage.data;\n      for (i = 0; i < dH; i++) {\n        for (j = 0; j < dW; j++) {\n          x = floor(ratioX * j);\n          y = floor(ratioY * i);\n          xDiff = ratioX * j - x;\n          yDiff = ratioY * i - y;\n          origPix = 4 * (y * oW + x);\n\n          for (chnl = 0; chnl < 4; chnl++) {\n            a = pixels[origPix + chnl];\n            b = pixels[origPix + 4 + chnl];\n            c = pixels[origPix + w4 + chnl];\n            d = pixels[origPix + w4 + 4 + chnl];\n            color = a * (1 - xDiff) * (1 - yDiff) + b * xDiff * (1 - yDiff) +\n                    c * yDiff * (1 - xDiff) + d * xDiff * yDiff;\n            destPixels[offset++] = color;\n          }\n        }\n      }\n      return destImage;\n    },\n\n    /**\n     * hermiteFastResize\n     * @param {Object} canvasEl Canvas element to apply filter to\n     * @param {Number} oW Original Width\n     * @param {Number} oH Original Height\n     * @param {Number} dW Destination Width\n     * @param {Number} dH Destination Height\n     * @returns {ImageData}\n     */\n    hermiteFastResize: function(options, oW, oH, dW, dH) {\n      var ratioW = this.rcpScaleX, ratioH = this.rcpScaleY,\n          ratioWHalf = ceil(ratioW / 2),\n          ratioHHalf = ceil(ratioH / 2),\n          img = options.imageData, data = img.data,\n          img2 = options.ctx.createImageData(dW, dH), data2 = img2.data;\n      for (var j = 0; j < dH; j++) {\n        for (var i = 0; i < dW; i++) {\n          var x2 = (i + j * dW) * 4, weight = 0, weights = 0, weightsAlpha = 0,\n              gxR = 0, gxG = 0, gxB = 0, gxA = 0, centerY = (j + 0.5) * ratioH;\n          for (var yy = floor(j * ratioH); yy < (j + 1) * ratioH; yy++) {\n            var dy = abs(centerY - (yy + 0.5)) / ratioHHalf,\n                centerX = (i + 0.5) * ratioW, w0 = dy * dy;\n            for (var xx = floor(i * ratioW); xx < (i + 1) * ratioW; xx++) {\n              var dx = abs(centerX - (xx + 0.5)) / ratioWHalf,\n                  w = sqrt(w0 + dx * dx);\n              /* eslint-disable max-depth */\n              if (w > 1 && w < -1) {\n                continue;\n              }\n              //hermite filter\n              weight = 2 * w * w * w - 3 * w * w + 1;\n              if (weight > 0) {\n                dx = 4 * (xx + yy * oW);\n                //alpha\n                gxA += weight * data[dx + 3];\n                weightsAlpha += weight;\n                //colors\n                if (data[dx + 3] < 255) {\n                  weight = weight * data[dx + 3] / 250;\n                }\n                gxR += weight * data[dx];\n                gxG += weight * data[dx + 1];\n                gxB += weight * data[dx + 2];\n                weights += weight;\n              }\n              /* eslint-enable max-depth */\n            }\n          }\n          data2[x2] = gxR / weights;\n          data2[x2 + 1] = gxG / weights;\n          data2[x2 + 2] = gxB / weights;\n          data2[x2 + 3] = gxA / weightsAlpha;\n        }\n      }\n      return img2;\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function() {\n      return {\n        type: this.type,\n        scaleX: this.scaleX,\n        scaleY: this.scaleY,\n        resizeType: this.resizeType,\n        lanczosLobes: this.lanczosLobes\n      };\n    }\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Resize} Instance of fabric.Image.filters.Resize\n   */\n  fabric.Image.filters.Resize.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Contrast filter class\n   * @class fabric.Image.filters.Contrast\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Contrast#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Contrast({\n   *   contrast: 0.25\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Contrast = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Contrast.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Contrast',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uContrast;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\\n' +\n        'color.rgb = contrastF * (color.rgb - 0.5) + 0.5;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    /**\n     * contrast value, range from -1 to 1.\n     * @param {Number} contrast\n     * @default 0\n     */\n    contrast: 0,\n\n    mainParameter: 'contrast',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Contrast.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.contrast=0] Value to contrast the image up (-1...1)\n     */\n\n    /**\n      * Apply the Contrast operation to a Uint8Array representing the pixels of an image.\n      *\n      * @param {Object} options\n      * @param {ImageData} options.imageData The Uint8Array to be filtered.\n      */\n    applyTo2d: function(options) {\n      if (this.contrast === 0) {\n        return;\n      }\n      var imageData = options.imageData, i, len,\n          data = imageData.data, len = data.length,\n          contrast = Math.floor(this.contrast * 255),\n          contrastF = 259 * (contrast + 255) / (255 * (259 - contrast));\n\n      for (i = 0; i < len; i += 4) {\n        data[i] = contrastF * (data[i] - 128) + 128;\n        data[i + 1] = contrastF * (data[i + 1] - 128) + 128;\n        data[i + 2] = contrastF * (data[i + 2] - 128) + 128;\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uContrast: gl.getUniformLocation(program, 'uContrast'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uContrast, this.contrast);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Contrast} Instance of fabric.Image.filters.Contrast\n   */\n  fabric.Image.filters.Contrast.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Saturate filter class\n   * @class fabric.Image.filters.Saturation\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Saturation#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Saturation({\n   *   saturation: 100\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Saturation = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Saturation.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Saturation',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform float uSaturation;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'float rgMax = max(color.r, color.g);\\n' +\n        'float rgbMax = max(rgMax, color.b);\\n' +\n        'color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\\n' +\n        'color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\\n' +\n        'color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\\n' +\n        'gl_FragColor = color;\\n' +\n      '}',\n\n    saturation: 0,\n\n    mainParameter: 'saturation',\n\n    /**\n     * Constructor\n     * @memberOf fabric.Image.filters.Saturate.prototype\n     * @param {Object} [options] Options object\n     * @param {Number} [options.saturate=0] Value to saturate the image (-1...1)\n     */\n\n    /**\n     * Apply the Saturation operation to a Uint8ClampedArray representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8ClampedArray to be filtered.\n     */\n    applyTo2d: function(options) {\n      if (this.saturation === 0) {\n        return;\n      }\n      var imageData = options.imageData,\n          data = imageData.data, len = data.length,\n          adjust = -this.saturation, i, max;\n\n      for (i = 0; i < len; i += 4) {\n        max = Math.max(data[i], data[i + 1], data[i + 2]);\n        data[i] += max !== data[i] ? (max - data[i]) * adjust : 0;\n        data[i + 1] += max !== data[i + 1] ? (max - data[i + 1]) * adjust : 0;\n        data[i + 2] += max !== data[i + 2] ? (max - data[i + 2]) * adjust : 0;\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uSaturation: gl.getUniformLocation(program, 'uSaturation'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform1f(uniformLocations.uSaturation, -this.saturation);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Saturation} Instance of fabric.Image.filters.Saturate\n   */\n  fabric.Image.filters.Saturation.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Blur filter class\n   * @class fabric.Image.filters.Blur\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Blur#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Blur({\n   *   blur: 0.5\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   * canvas.renderAll();\n   */\n  filters.Blur = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Blur.prototype */ {\n\n    type: 'Blur',\n\n    /*\n'gl_FragColor = vec4(0.0);',\n'gl_FragColor += texture2D(texture, vTexCoord + -7 * uDelta)*0.0044299121055113265;',\n'gl_FragColor += texture2D(texture, vTexCoord + -6 * uDelta)*0.00895781211794;',\n'gl_FragColor += texture2D(texture, vTexCoord + -5 * uDelta)*0.0215963866053;',\n'gl_FragColor += texture2D(texture, vTexCoord + -4 * uDelta)*0.0443683338718;',\n'gl_FragColor += texture2D(texture, vTexCoord + -3 * uDelta)*0.0776744219933;',\n'gl_FragColor += texture2D(texture, vTexCoord + -2 * uDelta)*0.115876621105;',\n'gl_FragColor += texture2D(texture, vTexCoord + -1 * uDelta)*0.147308056121;',\n'gl_FragColor += texture2D(texture, vTexCoord              )*0.159576912161;',\n'gl_FragColor += texture2D(texture, vTexCoord + 1 * uDelta)*0.147308056121;',\n'gl_FragColor += texture2D(texture, vTexCoord + 2 * uDelta)*0.115876621105;',\n'gl_FragColor += texture2D(texture, vTexCoord + 3 * uDelta)*0.0776744219933;',\n'gl_FragColor += texture2D(texture, vTexCoord + 4 * uDelta)*0.0443683338718;',\n'gl_FragColor += texture2D(texture, vTexCoord + 5 * uDelta)*0.0215963866053;',\n'gl_FragColor += texture2D(texture, vTexCoord + 6 * uDelta)*0.00895781211794;',\n'gl_FragColor += texture2D(texture, vTexCoord + 7 * uDelta)*0.0044299121055113265;',\n*/\n\n    /* eslint-disable max-len */\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform vec2 uDelta;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'const float nSamples = 15.0;\\n' +\n      'vec3 v3offset = vec3(12.9898, 78.233, 151.7182);\\n' +\n      'float random(vec3 scale) {\\n' +\n        /* use the fragment position for a different seed per-pixel */\n        'return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\\n' +\n      '}\\n' +\n      'void main() {\\n' +\n        'vec4 color = vec4(0.0);\\n' +\n        'float total = 0.0;\\n' +\n        'float offset = random(v3offset);\\n' +\n        'for (float t = -nSamples; t <= nSamples; t++) {\\n' +\n          'float percent = (t + offset - 0.5) / nSamples;\\n' +\n          'float weight = 1.0 - abs(percent);\\n' +\n          'color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\\n' +\n          'total += weight;\\n' +\n        '}\\n' +\n        'gl_FragColor = color / total;\\n' +\n      '}',\n    /* eslint-enable max-len */\n\n    /**\n     * blur value, in percentage of image dimensions.\n     * specific to keep the image blur constant at different resolutions\n     * range between 0 and 1.\n     */\n    blur: 0,\n\n    mainParameter: 'blur',\n\n    applyTo: function(options) {\n      if (options.webgl) {\n        // this aspectRatio is used to give the same blur to vertical and horizontal\n        this.aspectRatio = options.sourceWidth / options.sourceHeight;\n        options.passes++;\n        this._setupFrameBuffer(options);\n        this.horizontal = true;\n        this.applyToWebGL(options);\n        this._swapTextures(options);\n        this._setupFrameBuffer(options);\n        this.horizontal = false;\n        this.applyToWebGL(options);\n        this._swapTextures(options);\n      }\n      else {\n        this.applyTo2d(options);\n      }\n    },\n\n    applyTo2d: function(options) {\n      // paint canvasEl with current image data.\n      //options.ctx.putImageData(options.imageData, 0, 0);\n      options.imageData = this.simpleBlur(options);\n    },\n\n    simpleBlur: function(options) {\n      var resources = options.filterBackend.resources, canvas1, canvas2,\n          width = options.imageData.width,\n          height = options.imageData.height;\n\n      if (!resources.blurLayer1) {\n        resources.blurLayer1 = fabric.util.createCanvasElement();\n        resources.blurLayer2 = fabric.util.createCanvasElement();\n      }\n      canvas1 = resources.blurLayer1;\n      canvas2 = resources.blurLayer2;\n      if (canvas1.width !== width || canvas1.height !== height) {\n        canvas2.width = canvas1.width = width;\n        canvas2.height = canvas1.height = height;\n      }\n      var ctx1 = canvas1.getContext('2d'),\n          ctx2 = canvas2.getContext('2d'),\n          nSamples = 15,\n          random, percent, j, i,\n          blur = this.blur * 0.06 * 0.5;\n\n      // load first canvas\n      ctx1.putImageData(options.imageData, 0, 0);\n      ctx2.clearRect(0, 0, width, height);\n\n      for (i = -nSamples; i <= nSamples; i++) {\n        random = (Math.random() - 0.5) / 4;\n        percent = i / nSamples;\n        j = blur * percent * width + random;\n        ctx2.globalAlpha = 1 - Math.abs(percent);\n        ctx2.drawImage(canvas1, j, random);\n        ctx1.drawImage(canvas2, 0, 0);\n        ctx2.globalAlpha = 1;\n        ctx2.clearRect(0, 0, canvas2.width, canvas2.height);\n      }\n      for (i = -nSamples; i <= nSamples; i++) {\n        random = (Math.random() - 0.5) / 4;\n        percent = i / nSamples;\n        j = blur * percent * height + random;\n        ctx2.globalAlpha = 1 - Math.abs(percent);\n        ctx2.drawImage(canvas1, random, j);\n        ctx1.drawImage(canvas2, 0, 0);\n        ctx2.globalAlpha = 1;\n        ctx2.clearRect(0, 0, canvas2.width, canvas2.height);\n      }\n      options.ctx.drawImage(canvas1, 0, 0);\n      var newImageData = options.ctx.getImageData(0, 0, canvas1.width, canvas1.height);\n      ctx1.globalAlpha = 1;\n      ctx1.clearRect(0, 0, canvas1.width, canvas1.height);\n      return newImageData;\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        delta: gl.getUniformLocation(program, 'uDelta'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      var delta = this.chooseRightDelta();\n      gl.uniform2fv(uniformLocations.delta, delta);\n    },\n\n    /**\n     * choose right value of image percentage to blur with\n     * @returns {Array} a numeric array with delta values\n     */\n    chooseRightDelta: function() {\n      var blurScale = 1, delta = [0, 0], blur;\n      if (this.horizontal) {\n        if (this.aspectRatio > 1) {\n          // image is wide, i want to shrink radius horizontal\n          blurScale = 1 / this.aspectRatio;\n        }\n      }\n      else {\n        if (this.aspectRatio < 1) {\n          // image is tall, i want to shrink radius vertical\n          blurScale = this.aspectRatio;\n        }\n      }\n      blur = blurScale * this.blur * 0.12;\n      if (this.horizontal) {\n        delta[0] = blur;\n      }\n      else {\n        delta[1] = blur;\n      }\n      return delta;\n    },\n  });\n\n  /**\n   * Deserialize a JSON definition of a BlurFilter into a concrete instance.\n   */\n  filters.Blur.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * Gamma filter class\n   * @class fabric.Image.filters.Gamma\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.Gamma#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.Gamma({\n   *   gamma: [1, 0.5, 2.1]\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.Gamma = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Gamma.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'Gamma',\n\n    fragmentSource: 'precision highp float;\\n' +\n      'uniform sampler2D uTexture;\\n' +\n      'uniform vec3 uGamma;\\n' +\n      'varying vec2 vTexCoord;\\n' +\n      'void main() {\\n' +\n        'vec4 color = texture2D(uTexture, vTexCoord);\\n' +\n        'vec3 correction = (1.0 / uGamma);\\n' +\n        'color.r = pow(color.r, correction.r);\\n' +\n        'color.g = pow(color.g, correction.g);\\n' +\n        'color.b = pow(color.b, correction.b);\\n' +\n        'gl_FragColor = color;\\n' +\n        'gl_FragColor.rgb *= color.a;\\n' +\n      '}',\n\n    /**\n     * Gamma array value, from 0.01 to 2.2.\n     * @param {Array} gamma\n     * @default\n     */\n    gamma: [1, 1, 1],\n\n    /**\n     * Describe the property that is the filter parameter\n     * @param {String} m\n     * @default\n     */\n    mainParameter: 'gamma',\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     */\n    initialize: function(options) {\n      this.gamma = [1, 1, 1];\n      filters.BaseFilter.prototype.initialize.call(this, options);\n    },\n\n    /**\n     * Apply the Gamma operation to a Uint8Array representing the pixels of an image.\n     *\n     * @param {Object} options\n     * @param {ImageData} options.imageData The Uint8Array to be filtered.\n     */\n    applyTo2d: function(options) {\n      var imageData = options.imageData, data = imageData.data,\n          gamma = this.gamma, len = data.length,\n          rInv = 1 / gamma[0], gInv = 1 / gamma[1],\n          bInv = 1 / gamma[2], i;\n\n      if (!this.rVals) {\n        // eslint-disable-next-line\n        this.rVals = new Uint8Array(256);\n        // eslint-disable-next-line\n        this.gVals = new Uint8Array(256);\n        // eslint-disable-next-line\n        this.bVals = new Uint8Array(256);\n      }\n\n      // This is an optimization - pre-compute a look-up table for each color channel\n      // instead of performing these pow calls for each pixel in the image.\n      for (i = 0, len = 256; i < len; i++) {\n        this.rVals[i] = Math.pow(i / 255, rInv) * 255;\n        this.gVals[i] = Math.pow(i / 255, gInv) * 255;\n        this.bVals[i] = Math.pow(i / 255, bInv) * 255;\n      }\n      for (i = 0, len = data.length; i < len; i += 4) {\n        data[i] = this.rVals[data[i]];\n        data[i + 1] = this.gVals[data[i + 1]];\n        data[i + 2] = this.bVals[data[i + 2]];\n      }\n    },\n\n    /**\n     * Return WebGL uniform locations for this filter's shader.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {WebGLShaderProgram} program This filter's compiled shader program.\n     */\n    getUniformLocations: function(gl, program) {\n      return {\n        uGamma: gl.getUniformLocation(program, 'uGamma'),\n      };\n    },\n\n    /**\n     * Send data from this filter to its shader program's uniforms.\n     *\n     * @param {WebGLRenderingContext} gl The GL canvas context used to compile this filter's shader.\n     * @param {Object} uniformLocations A map of string uniform names to WebGLUniformLocation objects\n     */\n    sendUniformData: function(gl, uniformLocations) {\n      gl.uniform3fv(uniformLocations.uGamma, this.gamma);\n    },\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.Gamma} Instance of fabric.Image.filters.Gamma\n   */\n  fabric.Image.filters.Gamma.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * A container class that knows how to apply a sequence of filters to an input image.\n   */\n  filters.Composed = createClass(filters.BaseFilter, /** @lends fabric.Image.filters.Composed.prototype */ {\n\n    type: 'Composed',\n\n    /**\n     * A non sparse array of filters to apply\n     */\n    subFilters: [],\n\n    /**\n     * Constructor\n     * @param {Object} [options] Options object\n     */\n    initialize: function(options) {\n      this.callSuper('initialize', options);\n      // create a new array instead mutating the prototype with push\n      this.subFilters = this.subFilters.slice(0);\n    },\n\n    /**\n     * Apply this container's filters to the input image provided.\n     *\n     * @param {Object} options\n     * @param {Number} options.passes The number of filters remaining to be applied.\n     */\n    applyTo: function(options) {\n      options.passes += this.subFilters.length - 1;\n      this.subFilters.forEach(function(filter) {\n        filter.applyTo(options);\n      });\n    },\n\n    /**\n     * Serialize this filter into JSON.\n     *\n     * @returns {Object} A JSON representation of this filter.\n     */\n    toObject: function() {\n      return fabric.util.object.extend(this.callSuper('toObject'), {\n        subFilters: this.subFilters.map(function(filter) { return filter.toObject(); }),\n      });\n    },\n\n    isNeutralState: function() {\n      return !this.subFilters.some(function(filter) { return !filter.isNeutralState(); });\n    }\n  });\n\n  /**\n   * Deserialize a JSON definition of a ComposedFilter into a concrete instance.\n   */\n  fabric.Image.filters.Composed.fromObject = function(object, callback) {\n    var filters = object.subFilters || [],\n        subFilters = filters.map(function(filter) {\n          return new fabric.Image.filters[filter.type](filter);\n        }),\n        instance = new fabric.Image.filters.Composed({ subFilters: subFilters });\n    callback && callback(instance);\n    return instance;\n  };\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric  = global.fabric || (global.fabric = { }),\n      filters = fabric.Image.filters,\n      createClass = fabric.util.createClass;\n\n  /**\n   * HueRotation filter class\n   * @class fabric.Image.filters.HueRotation\n   * @memberOf fabric.Image.filters\n   * @extends fabric.Image.filters.BaseFilter\n   * @see {@link fabric.Image.filters.HueRotation#initialize} for constructor definition\n   * @see {@link http://fabricjs.com/image-filters|ImageFilters demo}\n   * @example\n   * var filter = new fabric.Image.filters.HueRotation({\n   *   rotation: -0.5\n   * });\n   * object.filters.push(filter);\n   * object.applyFilters();\n   */\n  filters.HueRotation = createClass(filters.ColorMatrix, /** @lends fabric.Image.filters.HueRotation.prototype */ {\n\n    /**\n     * Filter type\n     * @param {String} type\n     * @default\n     */\n    type: 'HueRotation',\n\n    /**\n     * HueRotation value, from -1 to 1.\n     * the unit is radians\n     * @param {Number} myParameter\n     * @default\n     */\n    rotation: 0,\n\n    /**\n     * Describe the property that is the filter parameter\n     * @param {String} m\n     * @default\n     */\n    mainParameter: 'rotation',\n\n    calculateMatrix: function() {\n      var rad = this.rotation * Math.PI, cos = fabric.util.cos(rad), sin = fabric.util.sin(rad),\n          aThird = 1 / 3, aThirdSqtSin = Math.sqrt(aThird) * sin, OneMinusCos = 1 - cos;\n      this.matrix = [\n        1, 0, 0, 0, 0,\n        0, 1, 0, 0, 0,\n        0, 0, 1, 0, 0,\n        0, 0, 0, 1, 0\n      ];\n      this.matrix[0] = cos + OneMinusCos / 3;\n      this.matrix[1] = aThird * OneMinusCos - aThirdSqtSin;\n      this.matrix[2] = aThird * OneMinusCos + aThirdSqtSin;\n      this.matrix[5] = aThird * OneMinusCos + aThirdSqtSin;\n      this.matrix[6] = cos + aThird * OneMinusCos;\n      this.matrix[7] = aThird * OneMinusCos - aThirdSqtSin;\n      this.matrix[10] = aThird * OneMinusCos - aThirdSqtSin;\n      this.matrix[11] = aThird * OneMinusCos + aThirdSqtSin;\n      this.matrix[12] = cos + aThird * OneMinusCos;\n    },\n\n    /**\n     * HueRotation isNeutralState implementation\n     * Used only in image applyFilters to discard filters that will not have an effect\n     * on the image\n     * @param {Object} options\n     **/\n    isNeutralState: function(options) {\n      this.calculateMatrix();\n      return filters.BaseFilter.prototype.isNeutralState.call(this, options);\n    },\n\n    /**\n     * Apply this filter to the input image data provided.\n     *\n     * Determines whether to use WebGL or Canvas2D based on the options.webgl flag.\n     *\n     * @param {Object} options\n     * @param {Number} options.passes The number of filters remaining to be executed\n     * @param {Boolean} options.webgl Whether to use webgl to render the filter.\n     * @param {WebGLTexture} options.sourceTexture The texture setup as the source to be filtered.\n     * @param {WebGLTexture} options.targetTexture The texture where filtered output should be drawn.\n     * @param {WebGLRenderingContext} options.context The GL context used for rendering.\n     * @param {Object} options.programCache A map of compiled shader programs, keyed by filter type.\n     */\n    applyTo: function(options) {\n      this.calculateMatrix();\n      filters.BaseFilter.prototype.applyTo.call(this, options);\n    },\n\n  });\n\n  /**\n   * Returns filter instance from an object representation\n   * @static\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] to be invoked after filter creation\n   * @return {fabric.Image.filters.HueRotation} Instance of fabric.Image.filters.HueRotation\n   */\n  fabric.Image.filters.HueRotation.fromObject = fabric.Image.filters.BaseFilter.fromObject;\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = { }),\n      clone = fabric.util.object.clone;\n\n  if (fabric.Text) {\n    fabric.warn('fabric.Text is already defined');\n    return;\n  }\n\n  var additionalProps =\n    ('fontFamily fontWeight fontSize text underline overline linethrough' +\n    ' textAlign fontStyle lineHeight textBackgroundColor charSpacing styles path').split(' ');\n\n  /**\n   * Text class\n   * @class fabric.Text\n   * @extends fabric.Object\n   * @return {fabric.Text} thisArg\n   * @tutorial {@link http://fabricjs.com/fabric-intro-part-2#text}\n   * @see {@link fabric.Text#initialize} for constructor definition\n   */\n  fabric.Text = fabric.util.createClass(fabric.Object, /** @lends fabric.Text.prototype */ {\n\n    /**\n     * Properties which when set cause object to change dimensions\n     * @type Array\n     * @private\n     */\n    _dimensionAffectingProps: [\n      'fontSize',\n      'fontWeight',\n      'fontFamily',\n      'fontStyle',\n      'lineHeight',\n      'text',\n      'charSpacing',\n      'textAlign',\n      'styles',\n      'path'\n    ],\n\n    /**\n     * @private\n     */\n    _reNewline: /\\r?\\n/,\n\n    /**\n     * Use this regular expression to filter for whitespaces that is not a new line.\n     * Mostly used when text is 'justify' aligned.\n     * @private\n     */\n    _reSpacesAndTabs: /[ \\t\\r]/g,\n\n    /**\n     * Use this regular expression to filter for whitespace that is not a new line.\n     * Mostly used when text is 'justify' aligned.\n     * @private\n     */\n    _reSpaceAndTab: /[ \\t\\r]/,\n\n    /**\n     * Use this regular expression to filter consecutive groups of non spaces.\n     * Mostly used when text is 'justify' aligned.\n     * @private\n     */\n    _reWords: /\\S+/g,\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type:                 'text',\n\n    /**\n     * Font size (in pixels)\n     * @type Number\n     * @default\n     */\n    fontSize:             40,\n\n    /**\n     * Font weight (e.g. bold, normal, 400, 600, 800)\n     * @type {(Number|String)}\n     * @default\n     */\n    fontWeight:           'normal',\n\n    /**\n     * Font family\n     * @type String\n     * @default\n     */\n    fontFamily:           'Times New Roman',\n\n    /**\n     * Text decoration underline.\n     * @type Boolean\n     * @default\n     */\n    underline:       false,\n\n    /**\n     * Text decoration overline.\n     * @type Boolean\n     * @default\n     */\n    overline:       false,\n\n    /**\n     * Text decoration linethrough.\n     * @type Boolean\n     * @default\n     */\n    linethrough:       false,\n\n    /**\n     * Text alignment. Possible values: \"left\", \"center\", \"right\", \"justify\",\n     * \"justify-left\", \"justify-center\" or \"justify-right\".\n     * @type String\n     * @default\n     */\n    textAlign:            'left',\n\n    /**\n     * Font style . Possible values: \"\", \"normal\", \"italic\" or \"oblique\".\n     * @type String\n     * @default\n     */\n    fontStyle:            'normal',\n\n    /**\n     * Line height\n     * @type Number\n     * @default\n     */\n    lineHeight:           1.16,\n\n    /**\n     * Superscript schema object (minimum overlap)\n     * @type {Object}\n     * @default\n     */\n    superscript: {\n      size:      0.60, // fontSize factor\n      baseline: -0.35  // baseline-shift factor (upwards)\n    },\n\n    /**\n     * Subscript schema object (minimum overlap)\n     * @type {Object}\n     * @default\n     */\n    subscript: {\n      size:      0.60, // fontSize factor\n      baseline:  0.11  // baseline-shift factor (downwards)\n    },\n\n    /**\n     * Background color of text lines\n     * @type String\n     * @default\n     */\n    textBackgroundColor:  '',\n\n    /**\n     * List of properties to consider when checking if\n     * state of an object is changed ({@link fabric.Object#hasStateChanged})\n     * as well as for history (undo/redo) purposes\n     * @type Array\n     */\n    stateProperties: fabric.Object.prototype.stateProperties.concat(additionalProps),\n\n    /**\n     * List of properties to consider when checking if cache needs refresh\n     * @type Array\n     */\n    cacheProperties: fabric.Object.prototype.cacheProperties.concat(additionalProps),\n\n    /**\n     * When defined, an object is rendered via stroke and this property specifies its color.\n     * <b>Backwards incompatibility note:</b> This property was named \"strokeStyle\" until v1.1.6\n     * @type String\n     * @default\n     */\n    stroke:               null,\n\n    /**\n     * Shadow object representing shadow of this shape.\n     * <b>Backwards incompatibility note:</b> This property was named \"textShadow\" (String) until v1.2.11\n     * @type fabric.Shadow\n     * @default\n     */\n    shadow:               null,\n\n    /**\n     * fabric.Path that the text can follow.\n     * This feature is in BETA.\n     * @type fabric.Path\n     * @default\n     */\n    path:               null,\n\n    /**\n     * @private\n     */\n    _fontSizeFraction: 0.222,\n\n    /**\n     * @private\n     */\n    offsets: {\n      underline: 0.10,\n      linethrough: -0.315,\n      overline: -0.88\n    },\n\n    /**\n     * Text Line proportion to font Size (in pixels)\n     * @type Number\n     * @default\n     */\n    _fontSizeMult:             1.13,\n\n    /**\n     * additional space between characters\n     * expressed in thousands of em unit\n     * @type Number\n     * @default\n     */\n    charSpacing:             0,\n\n    /**\n     * Object containing character styles - top-level properties -> line numbers,\n     * 2nd-level properties - character numbers\n     * @type Object\n     * @default\n     */\n    styles: null,\n\n    /**\n     * Reference to a context to measure text char or couple of chars\n     * the cacheContext of the canvas will be used or a freshly created one if the object is not on canvas\n     * once created it will be referenced on fabric._measuringContext to avoid creating a canvas for every\n     * text object created.\n     * @type {CanvasRenderingContext2D}\n     * @default\n     */\n    _measuringContext: null,\n\n    /**\n     * Baseline shift, styles only, keep at 0 for the main text object\n     * @type {Number}\n     * @default\n     */\n    deltaY: 0,\n\n    /**\n     * Array of properties that define a style unit (of 'styles').\n     * @type {Array}\n     * @default\n     */\n    _styleProperties: [\n      'stroke',\n      'strokeWidth',\n      'fill',\n      'fontFamily',\n      'fontSize',\n      'fontWeight',\n      'fontStyle',\n      'underline',\n      'overline',\n      'linethrough',\n      'deltaY',\n      'textBackgroundColor',\n    ],\n\n    /**\n     * contains characters bounding boxes\n     */\n    __charBounds: [],\n\n    /**\n     * use this size when measuring text. To avoid IE11 rounding errors\n     * @type {Number}\n     * @default\n     * @readonly\n     * @private\n     */\n    CACHE_FONT_SIZE: 400,\n\n    /**\n     * contains the min text width to avoid getting 0\n     * @type {Number}\n     * @default\n     */\n    MIN_TEXT_WIDTH: 2,\n\n    /**\n     * Constructor\n     * @param {String} text Text string\n     * @param {Object} [options] Options object\n     * @return {fabric.Text} thisArg\n     */\n    initialize: function(text, options) {\n      this.styles = options ? (options.styles || { }) : { };\n      this.text = text;\n      this.__skipDimension = true;\n      this.callSuper('initialize', options);\n      if (this.path) {\n        this.setPathInfo();\n      }\n      this.__skipDimension = false;\n      this.initDimensions();\n      this.setCoords();\n      this.setupState({ propertySet: '_dimensionAffectingProps' });\n    },\n\n    /**\n     * If text has a path, it will add the extra information needed\n     * for path and text calculations\n     * @return {fabric.Text} thisArg\n     */\n    setPathInfo: function() {\n      var path = this.path;\n      if (path) {\n        path.segmentsInfo = fabric.util.getPathSegmentsInfo(path.path);\n      }\n    },\n\n    /**\n     * Return a context for measurement of text string.\n     * if created it gets stored for reuse\n     * @param {String} text Text string\n     * @param {Object} [options] Options object\n     * @return {fabric.Text} thisArg\n     */\n    getMeasuringContext: function() {\n      // if we did not return we have to measure something.\n      if (!fabric._measuringContext) {\n        fabric._measuringContext = this.canvas && this.canvas.contextCache ||\n          fabric.util.createCanvasElement().getContext('2d');\n      }\n      return fabric._measuringContext;\n    },\n\n    /**\n     * @private\n     * Divides text into lines of text and lines of graphemes.\n     */\n    _splitText: function() {\n      var newLines = this._splitTextIntoLines(this.text);\n      this.textLines = newLines.lines;\n      this._textLines = newLines.graphemeLines;\n      this._unwrappedTextLines = newLines._unwrappedLines;\n      this._text = newLines.graphemeText;\n      return newLines;\n    },\n\n    /**\n     * Initialize or update text dimensions.\n     * Updates this.width and this.height with the proper values.\n     * Does not return dimensions.\n     */\n    initDimensions: function() {\n      if (this.__skipDimension) {\n        return;\n      }\n      this._splitText();\n      this._clearCache();\n      if (this.path) {\n        this.width = this.path.width;\n        this.height = this.path.height;\n      }\n      else {\n        this.width = this.calcTextWidth() || this.cursorWidth || this.MIN_TEXT_WIDTH;\n        this.height = this.calcTextHeight();\n      }\n      if (this.textAlign.indexOf('justify') !== -1) {\n        // once text is measured we need to make space fatter to make justified text.\n        this.enlargeSpaces();\n      }\n      this.saveState({ propertySet: '_dimensionAffectingProps' });\n    },\n\n    /**\n     * Enlarge space boxes and shift the others\n     */\n    enlargeSpaces: function() {\n      var diffSpace, currentLineWidth, numberOfSpaces, accumulatedSpace, line, charBound, spaces;\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        if (this.textAlign !== 'justify' && (i === len - 1 || this.isEndOfWrapping(i))) {\n          continue;\n        }\n        accumulatedSpace = 0;\n        line = this._textLines[i];\n        currentLineWidth = this.getLineWidth(i);\n        if (currentLineWidth < this.width && (spaces = this.textLines[i].match(this._reSpacesAndTabs))) {\n          numberOfSpaces = spaces.length;\n          diffSpace = (this.width - currentLineWidth) / numberOfSpaces;\n          for (var j = 0, jlen = line.length; j <= jlen; j++) {\n            charBound = this.__charBounds[i][j];\n            if (this._reSpaceAndTab.test(line[j])) {\n              charBound.width += diffSpace;\n              charBound.kernedWidth += diffSpace;\n              charBound.left += accumulatedSpace;\n              accumulatedSpace += diffSpace;\n            }\n            else {\n              charBound.left += accumulatedSpace;\n            }\n          }\n        }\n      }\n    },\n\n    /**\n     * Detect if the text line is ended with an hard break\n     * text and itext do not have wrapping, return false\n     * @return {Boolean}\n     */\n    isEndOfWrapping: function(lineIndex) {\n      return lineIndex === this._textLines.length - 1;\n    },\n\n    /**\n     * Detect if a line has a linebreak and so we need to account for it when moving\n     * and counting style.\n     * It return always for text and Itext.\n     * @return Number\n     */\n    missingNewlineOffset: function() {\n      return 1;\n    },\n\n    /**\n     * Returns string representation of an instance\n     * @return {String} String representation of text object\n     */\n    toString: function() {\n      return '#<fabric.Text (' + this.complexity() +\n        '): { \"text\": \"' + this.text + '\", \"fontFamily\": \"' + this.fontFamily + '\" }>';\n    },\n\n    /**\n     * Return the dimension and the zoom level needed to create a cache canvas\n     * big enough to host the object to be cached.\n     * @private\n     * @param {Object} dim.x width of object to be cached\n     * @param {Object} dim.y height of object to be cached\n     * @return {Object}.width width of canvas\n     * @return {Object}.height height of canvas\n     * @return {Object}.zoomX zoomX zoom value to unscale the canvas before drawing cache\n     * @return {Object}.zoomY zoomY zoom value to unscale the canvas before drawing cache\n     */\n    _getCacheCanvasDimensions: function() {\n      var dims = this.callSuper('_getCacheCanvasDimensions');\n      var fontSize = this.fontSize;\n      dims.width += fontSize * dims.zoomX;\n      dims.height += fontSize * dims.zoomY;\n      return dims;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      this._setTextStyles(ctx);\n      this._renderTextLinesBackground(ctx);\n      this._renderTextDecoration(ctx, 'underline');\n      this._renderText(ctx);\n      this._renderTextDecoration(ctx, 'overline');\n      this._renderTextDecoration(ctx, 'linethrough');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderText: function(ctx) {\n      if (this.paintFirst === 'stroke') {\n        this._renderTextStroke(ctx);\n        this._renderTextFill(ctx);\n      }\n      else {\n        this._renderTextFill(ctx);\n        this._renderTextStroke(ctx);\n      }\n    },\n\n    /**\n     * Set the font parameter of the context with the object properties or with charStyle\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Object} [charStyle] object with font style properties\n     * @param {String} [charStyle.fontFamily] Font Family\n     * @param {Number} [charStyle.fontSize] Font size in pixels. ( without px suffix )\n     * @param {String} [charStyle.fontWeight] Font weight\n     * @param {String} [charStyle.fontStyle] Font style (italic|normal)\n     */\n    _setTextStyles: function(ctx, charStyle, forMeasuring) {\n      ctx.textBaseline = 'alphabetic';\n      ctx.font = this._getFontDeclaration(charStyle, forMeasuring);\n    },\n\n    /**\n     * calculate and return the text Width measuring each line.\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @return {Number} Maximum width of fabric.Text object\n     */\n    calcTextWidth: function() {\n      var maxWidth = this.getLineWidth(0);\n\n      for (var i = 1, len = this._textLines.length; i < len; i++) {\n        var currentLineWidth = this.getLineWidth(i);\n        if (currentLineWidth > maxWidth) {\n          maxWidth = currentLineWidth;\n        }\n      }\n      return maxWidth;\n    },\n\n    /**\n     * @private\n     * @param {String} method Method name (\"fillText\" or \"strokeText\")\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} line Text to render\n     * @param {Number} left Left position of text\n     * @param {Number} top Top position of text\n     * @param {Number} lineIndex Index of a line in a text\n     */\n    _renderTextLine: function(method, ctx, line, left, top, lineIndex) {\n      this._renderChars(method, ctx, line, left, top, lineIndex);\n    },\n\n    /**\n     * Renders the text background for lines, taking care of style\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextLinesBackground: function(ctx) {\n      if (!this.textBackgroundColor && !this.styleHas('textBackgroundColor')) {\n        return;\n      }\n      var heightOfLine,\n          lineLeftOffset, originalFill = ctx.fillStyle,\n          line, lastColor,\n          leftOffset = this._getLeftOffset(),\n          lineTopOffset = this._getTopOffset(),\n          boxStart = 0, boxWidth = 0, charBox, currentColor, path = this.path;\n\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        heightOfLine = this.getHeightOfLine(i);\n        if (!this.textBackgroundColor && !this.styleHas('textBackgroundColor', i)) {\n          lineTopOffset += heightOfLine;\n          continue;\n        }\n        line = this._textLines[i];\n        lineLeftOffset = this._getLineLeftOffset(i);\n        boxWidth = 0;\n        boxStart = 0;\n        lastColor = this.getValueOfPropertyAt(i, 0, 'textBackgroundColor');\n        for (var j = 0, jlen = line.length; j < jlen; j++) {\n          charBox = this.__charBounds[i][j];\n          currentColor = this.getValueOfPropertyAt(i, j, 'textBackgroundColor');\n          if (path) {\n            ctx.save();\n            ctx.translate(charBox.renderLeft, charBox.renderTop);\n            ctx.rotate(charBox.angle);\n            ctx.fillStyle = currentColor;\n            currentColor && ctx.fillRect(\n              -charBox.width / 2,\n              -heightOfLine / this.lineHeight * (1 - this._fontSizeFraction),\n              charBox.width,\n              heightOfLine / this.lineHeight\n            );\n            ctx.restore();\n          }\n          else if (currentColor !== lastColor) {\n            ctx.fillStyle = lastColor;\n            lastColor && ctx.fillRect(\n              leftOffset + lineLeftOffset + boxStart,\n              lineTopOffset,\n              boxWidth,\n              heightOfLine / this.lineHeight\n            );\n            boxStart = charBox.left;\n            boxWidth = charBox.width;\n            lastColor = currentColor;\n          }\n          else {\n            boxWidth += charBox.kernedWidth;\n          }\n        }\n        if (currentColor && !path) {\n          ctx.fillStyle = currentColor;\n          ctx.fillRect(\n            leftOffset + lineLeftOffset + boxStart,\n            lineTopOffset,\n            boxWidth,\n            heightOfLine / this.lineHeight\n          );\n        }\n        lineTopOffset += heightOfLine;\n      }\n      ctx.fillStyle = originalFill;\n      // if there is text background color no\n      // other shadows should be casted\n      this._removeShadow(ctx);\n    },\n\n    /**\n     * @private\n     * @param {Object} decl style declaration for cache\n     * @param {String} decl.fontFamily fontFamily\n     * @param {String} decl.fontStyle fontStyle\n     * @param {String} decl.fontWeight fontWeight\n     * @return {Object} reference to cache\n     */\n    getFontCache: function(decl) {\n      var fontFamily = decl.fontFamily.toLowerCase();\n      if (!fabric.charWidthsCache[fontFamily]) {\n        fabric.charWidthsCache[fontFamily] = { };\n      }\n      var cache = fabric.charWidthsCache[fontFamily],\n          cacheProp = decl.fontStyle.toLowerCase() + '_' + (decl.fontWeight + '').toLowerCase();\n      if (!cache[cacheProp]) {\n        cache[cacheProp] = { };\n      }\n      return cache[cacheProp];\n    },\n\n    /**\n     * measure and return the width of a single character.\n     * possibly overridden to accommodate different measure logic or\n     * to hook some external lib for character measurement\n     * @private\n     * @param {String} _char, char to be measured\n     * @param {Object} charStyle style of char to be measured\n     * @param {String} [previousChar] previous char\n     * @param {Object} [prevCharStyle] style of previous char\n     */\n    _measureChar: function(_char, charStyle, previousChar, prevCharStyle) {\n      // first i try to return from cache\n      var fontCache = this.getFontCache(charStyle), fontDeclaration = this._getFontDeclaration(charStyle),\n          previousFontDeclaration = this._getFontDeclaration(prevCharStyle), couple = previousChar + _char,\n          stylesAreEqual = fontDeclaration === previousFontDeclaration, width, coupleWidth, previousWidth,\n          fontMultiplier = charStyle.fontSize / this.CACHE_FONT_SIZE, kernedWidth;\n\n      if (previousChar && fontCache[previousChar] !== undefined) {\n        previousWidth = fontCache[previousChar];\n      }\n      if (fontCache[_char] !== undefined) {\n        kernedWidth = width = fontCache[_char];\n      }\n      if (stylesAreEqual && fontCache[couple] !== undefined) {\n        coupleWidth = fontCache[couple];\n        kernedWidth = coupleWidth - previousWidth;\n      }\n      if (width === undefined || previousWidth === undefined || coupleWidth === undefined) {\n        var ctx = this.getMeasuringContext();\n        // send a TRUE to specify measuring font size CACHE_FONT_SIZE\n        this._setTextStyles(ctx, charStyle, true);\n      }\n      if (width === undefined) {\n        kernedWidth = width = ctx.measureText(_char).width;\n        fontCache[_char] = width;\n      }\n      if (previousWidth === undefined && stylesAreEqual && previousChar) {\n        previousWidth = ctx.measureText(previousChar).width;\n        fontCache[previousChar] = previousWidth;\n      }\n      if (stylesAreEqual && coupleWidth === undefined) {\n        // we can measure the kerning couple and subtract the width of the previous character\n        coupleWidth = ctx.measureText(couple).width;\n        fontCache[couple] = coupleWidth;\n        kernedWidth = coupleWidth - previousWidth;\n      }\n      return { width: width * fontMultiplier, kernedWidth: kernedWidth * fontMultiplier };\n    },\n\n    /**\n     * Computes height of character at given position\n     * @param {Number} line the line index number\n     * @param {Number} _char the character index number\n     * @return {Number} fontSize of the character\n     */\n    getHeightOfChar: function(line, _char) {\n      return this.getValueOfPropertyAt(line, _char, 'fontSize');\n    },\n\n    /**\n     * measure a text line measuring all characters.\n     * @param {Number} lineIndex line number\n     * @return {Number} Line width\n     */\n    measureLine: function(lineIndex) {\n      var lineInfo = this._measureLine(lineIndex);\n      if (this.charSpacing !== 0) {\n        lineInfo.width -= this._getWidthOfCharSpacing();\n      }\n      if (lineInfo.width < 0) {\n        lineInfo.width = 0;\n      }\n      return lineInfo;\n    },\n\n    /**\n     * measure every grapheme of a line, populating __charBounds\n     * @param {Number} lineIndex\n     * @return {Object} object.width total width of characters\n     * @return {Object} object.widthOfSpaces length of chars that match this._reSpacesAndTabs\n     */\n    _measureLine: function(lineIndex) {\n      var width = 0, i, grapheme, line = this._textLines[lineIndex], prevGrapheme,\n          graphemeInfo, numOfSpaces = 0, lineBounds = new Array(line.length),\n          positionInPath = 0, startingPoint, totalPathLength, path = this.path;\n\n      this.__charBounds[lineIndex] = lineBounds;\n      if (path) {\n        startingPoint = fabric.util.getPointOnPath(path.path, 0, path.segmentsInfo);\n        totalPathLength = path.segmentsInfo[path.segmentsInfo.length - 1].length;\n        startingPoint.x += path.pathOffset.x;\n        startingPoint.y += path.pathOffset.y;\n      }\n      for (i = 0; i < line.length; i++) {\n        grapheme = line[i];\n        graphemeInfo = this._getGraphemeBox(grapheme, lineIndex, i, prevGrapheme);\n        if (path) {\n          if (positionInPath > totalPathLength) {\n            positionInPath %= totalPathLength;\n          }\n          // it would probably much fater to send all the grapheme position for a line\n          // and calculate path position/angle at once.\n          this._setGraphemeOnPath(positionInPath, graphemeInfo, startingPoint);\n        }\n        lineBounds[i] = graphemeInfo;\n        width += graphemeInfo.kernedWidth;\n        positionInPath += graphemeInfo.kernedWidth;\n        prevGrapheme = grapheme;\n      }\n      // this latest bound box represent the last character of the line\n      // to simplify cursor handling in interactive mode.\n      lineBounds[i] = {\n        left: graphemeInfo ? graphemeInfo.left + graphemeInfo.width : 0,\n        width: 0,\n        kernedWidth: 0,\n        height: this.fontSize\n      };\n      return { width: width, numOfSpaces: numOfSpaces };\n    },\n\n    /**\n     * Calculate the angle  and the left,top position of the char that follow a path.\n     * It appends it to graphemeInfo to be reused later at rendering\n     * @private\n     * @param {Number} positionInPath to be measured\n     * @param {Object} graphemeInfo current grapheme box information\n     * @param {Object} startingPoint position of the point\n     */\n    _setGraphemeOnPath: function(positionInPath, graphemeInfo, startingPoint) {\n      var centerPosition = positionInPath + graphemeInfo.kernedWidth / 2,\n          path = this.path;\n\n      // we are at currentPositionOnPath. we want to know what point on the path is.\n      var info = fabric.util.getPointOnPath(path.path, centerPosition, path.segmentsInfo);\n      graphemeInfo.renderLeft = info.x - startingPoint.x;\n      graphemeInfo.renderTop = info.y - startingPoint.y;\n      graphemeInfo.angle = info.angle;\n    },\n\n    /**\n     * Measure and return the info of a single grapheme.\n     * needs the the info of previous graphemes already filled\n     * @private\n     * @param {String} grapheme to be measured\n     * @param {Number} lineIndex index of the line where the char is\n     * @param {Number} charIndex position in the line\n     * @param {String} [prevGrapheme] character preceding the one to be measured\n     */\n    _getGraphemeBox: function(grapheme, lineIndex, charIndex, prevGrapheme, skipLeft) {\n      var style = this.getCompleteStyleDeclaration(lineIndex, charIndex),\n          prevStyle = prevGrapheme ? this.getCompleteStyleDeclaration(lineIndex, charIndex - 1) : { },\n          info = this._measureChar(grapheme, style, prevGrapheme, prevStyle),\n          kernedWidth = info.kernedWidth,\n          width = info.width, charSpacing;\n\n      if (this.charSpacing !== 0) {\n        charSpacing = this._getWidthOfCharSpacing();\n        width += charSpacing;\n        kernedWidth += charSpacing;\n      }\n\n      var box = {\n        width: width,\n        left: 0,\n        height: style.fontSize,\n        kernedWidth: kernedWidth,\n        deltaY: style.deltaY,\n      };\n      if (charIndex > 0 && !skipLeft) {\n        var previousBox = this.__charBounds[lineIndex][charIndex - 1];\n        box.left = previousBox.left + previousBox.width + info.kernedWidth - info.width;\n      }\n      return box;\n    },\n\n    /**\n     * Calculate height of line at 'lineIndex'\n     * @param {Number} lineIndex index of line to calculate\n     * @return {Number}\n     */\n    getHeightOfLine: function(lineIndex) {\n      if (this.__lineHeights[lineIndex]) {\n        return this.__lineHeights[lineIndex];\n      }\n\n      var line = this._textLines[lineIndex],\n          // char 0 is measured before the line cycle because it nneds to char\n          // emptylines\n          maxHeight = this.getHeightOfChar(lineIndex, 0);\n      for (var i = 1, len = line.length; i < len; i++) {\n        maxHeight = Math.max(this.getHeightOfChar(lineIndex, i), maxHeight);\n      }\n\n      return this.__lineHeights[lineIndex] = maxHeight * this.lineHeight * this._fontSizeMult;\n    },\n\n    /**\n     * Calculate text box height\n     */\n    calcTextHeight: function() {\n      var lineHeight, height = 0;\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        lineHeight = this.getHeightOfLine(i);\n        height += (i === len - 1 ? lineHeight / this.lineHeight : lineHeight);\n      }\n      return height;\n    },\n\n    /**\n     * @private\n     * @return {Number} Left offset\n     */\n    _getLeftOffset: function() {\n      return -this.width / 2;\n    },\n\n    /**\n     * @private\n     * @return {Number} Top offset\n     */\n    _getTopOffset: function() {\n      return -this.height / 2;\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {String} method Method name (\"fillText\" or \"strokeText\")\n     */\n    _renderTextCommon: function(ctx, method) {\n      ctx.save();\n      var lineHeights = 0, left = this._getLeftOffset(), top = this._getTopOffset();\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        var heightOfLine = this.getHeightOfLine(i),\n            maxHeight = heightOfLine / this.lineHeight,\n            leftOffset = this._getLineLeftOffset(i);\n        this._renderTextLine(\n          method,\n          ctx,\n          this._textLines[i],\n          left + leftOffset,\n          top + lineHeights + maxHeight,\n          i\n        );\n        lineHeights += heightOfLine;\n      }\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextFill: function(ctx) {\n      if (!this.fill && !this.styleHas('fill')) {\n        return;\n      }\n\n      this._renderTextCommon(ctx, 'fillText');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextStroke: function(ctx) {\n      if ((!this.stroke || this.strokeWidth === 0) && this.isEmptyStyles()) {\n        return;\n      }\n\n      if (this.shadow && !this.shadow.affectStroke) {\n        this._removeShadow(ctx);\n      }\n\n      ctx.save();\n      this._setLineDash(ctx, this.strokeDashArray);\n      ctx.beginPath();\n      this._renderTextCommon(ctx, 'strokeText');\n      ctx.closePath();\n      ctx.restore();\n    },\n\n    /**\n     * @private\n     * @param {String} method fillText or strokeText.\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Array} line Content of the line, splitted in an array by grapheme\n     * @param {Number} left\n     * @param {Number} top\n     * @param {Number} lineIndex\n     */\n    _renderChars: function(method, ctx, line, left, top, lineIndex) {\n      // set proper line offset\n      var lineHeight = this.getHeightOfLine(lineIndex),\n          isJustify = this.textAlign.indexOf('justify') !== -1,\n          actualStyle,\n          nextStyle,\n          charsToRender = '',\n          charBox,\n          boxWidth = 0,\n          timeToRender,\n          path = this.path,\n          shortCut = !isJustify && this.charSpacing === 0 && this.isEmptyStyles(lineIndex) && !path;\n\n      ctx.save();\n      top -= lineHeight * this._fontSizeFraction / this.lineHeight;\n      if (shortCut) {\n        // render all the line in one pass without checking\n        this._renderChar(method, ctx, lineIndex, 0, line.join(''), left, top, lineHeight);\n        ctx.restore();\n        return;\n      }\n      for (var i = 0, len = line.length - 1; i <= len; i++) {\n        timeToRender = i === len || this.charSpacing || path;\n        charsToRender += line[i];\n        charBox = this.__charBounds[lineIndex][i];\n        if (boxWidth === 0) {\n          left += charBox.kernedWidth - charBox.width;\n          boxWidth += charBox.width;\n        }\n        else {\n          boxWidth += charBox.kernedWidth;\n        }\n        if (isJustify && !timeToRender) {\n          if (this._reSpaceAndTab.test(line[i])) {\n            timeToRender = true;\n          }\n        }\n        if (!timeToRender) {\n          // if we have charSpacing, we render char by char\n          actualStyle = actualStyle || this.getCompleteStyleDeclaration(lineIndex, i);\n          nextStyle = this.getCompleteStyleDeclaration(lineIndex, i + 1);\n          timeToRender = this._hasStyleChanged(actualStyle, nextStyle);\n        }\n        if (timeToRender) {\n          if (path) {\n            ctx.save();\n            ctx.translate(charBox.renderLeft, charBox.renderTop);\n            ctx.rotate(charBox.angle);\n            this._renderChar(method, ctx, lineIndex, i, charsToRender, -boxWidth / 2, 0, lineHeight);\n            ctx.restore();\n          }\n          else {\n            this._renderChar(method, ctx, lineIndex, i, charsToRender, left, top, lineHeight);\n          }\n          charsToRender = '';\n          actualStyle = nextStyle;\n          left += boxWidth;\n          boxWidth = 0;\n        }\n      }\n      ctx.restore();\n    },\n\n    /**\n     * This function try to patch the missing gradientTransform on canvas gradients.\n     * transforming a context to transform the gradient, is going to transform the stroke too.\n     * we want to transform the gradient but not the stroke operation, so we create\n     * a transformed gradient on a pattern and then we use the pattern instead of the gradient.\n     * this method has drawbacks: is slow, is in low resolution, needs a patch for when the size\n     * is limited.\n     * @private\n     * @param {fabric.Gradient} filler a fabric gradient instance\n     * @return {CanvasPattern} a pattern to use as fill/stroke style\n     */\n    _applyPatternGradientTransformText: function(filler) {\n      var pCanvas = fabric.util.createCanvasElement(), pCtx,\n          // TODO: verify compatibility with strokeUniform\n          width = this.width + this.strokeWidth, height = this.height + this.strokeWidth;\n      pCanvas.width = width;\n      pCanvas.height = height;\n      pCtx = pCanvas.getContext('2d');\n      pCtx.beginPath(); pCtx.moveTo(0, 0); pCtx.lineTo(width, 0); pCtx.lineTo(width, height);\n      pCtx.lineTo(0, height); pCtx.closePath();\n      pCtx.translate(width / 2, height / 2);\n      pCtx.fillStyle = filler.toLive(pCtx);\n      this._applyPatternGradientTransform(pCtx, filler);\n      pCtx.fill();\n      return pCtx.createPattern(pCanvas, 'no-repeat');\n    },\n\n    handleFiller: function(ctx, property, filler) {\n      var offsetX, offsetY;\n      if (filler.toLive) {\n        if (filler.gradientUnits === 'percentage' || filler.gradientTrasnform || filler.patternTransform) {\n          // need to transform gradient in a pattern.\n          // this is a slow process. If you are hitting this codepath, and the object\n          // is not using caching, you should consider switching it on.\n          // we need a canvas as big as the current object caching canvas.\n          offsetX = -this.width / 2;\n          offsetY = -this.height / 2;\n          ctx.translate(offsetX, offsetY);\n          ctx[property] = this._applyPatternGradientTransformText(filler);\n          return { offsetX: offsetX, offsetY: offsetY };\n        }\n        else {\n          // is a simple gradient or pattern\n          ctx[property] = filler.toLive(ctx, this);\n          return this._applyPatternGradientTransform(ctx, filler);\n        }\n      }\n      else {\n        // is a color\n        ctx[property] = filler;\n      }\n      return { offsetX: 0, offsetY: 0 };\n    },\n\n    _setStrokeStyles: function(ctx, decl) {\n      ctx.lineWidth = decl.strokeWidth;\n      ctx.lineCap = this.strokeLineCap;\n      ctx.lineDashOffset = this.strokeDashOffset;\n      ctx.lineJoin = this.strokeLineJoin;\n      ctx.miterLimit = this.strokeMiterLimit;\n      return this.handleFiller(ctx, 'strokeStyle', decl.stroke);\n    },\n\n    _setFillStyles: function(ctx, decl) {\n      return this.handleFiller(ctx, 'fillStyle', decl.fill);\n    },\n\n    /**\n     * @private\n     * @param {String} method\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @param {String} _char\n     * @param {Number} left Left coordinate\n     * @param {Number} top Top coordinate\n     * @param {Number} lineHeight Height of the line\n     */\n    _renderChar: function(method, ctx, lineIndex, charIndex, _char, left, top) {\n      var decl = this._getStyleDeclaration(lineIndex, charIndex),\n          fullDecl = this.getCompleteStyleDeclaration(lineIndex, charIndex),\n          shouldFill = method === 'fillText' && fullDecl.fill,\n          shouldStroke = method === 'strokeText' && fullDecl.stroke && fullDecl.strokeWidth,\n          fillOffsets, strokeOffsets;\n\n      if (!shouldStroke && !shouldFill) {\n        return;\n      }\n      ctx.save();\n\n      shouldFill && (fillOffsets = this._setFillStyles(ctx, fullDecl));\n      shouldStroke && (strokeOffsets = this._setStrokeStyles(ctx, fullDecl));\n\n      ctx.font = this._getFontDeclaration(fullDecl);\n\n\n      if (decl && decl.textBackgroundColor) {\n        this._removeShadow(ctx);\n      }\n      if (decl && decl.deltaY) {\n        top += decl.deltaY;\n      }\n      shouldFill && ctx.fillText(_char, left - fillOffsets.offsetX, top - fillOffsets.offsetY);\n      shouldStroke && ctx.strokeText(_char, left - strokeOffsets.offsetX, top - strokeOffsets.offsetY);\n      ctx.restore();\n    },\n\n    /**\n     * Turns the character into a 'superior figure' (i.e. 'superscript')\n     * @param {Number} start selection start\n     * @param {Number} end selection end\n     * @returns {fabric.Text} thisArg\n     * @chainable\n     */\n    setSuperscript: function(start, end) {\n      return this._setScript(start, end, this.superscript);\n    },\n\n    /**\n     * Turns the character into an 'inferior figure' (i.e. 'subscript')\n     * @param {Number} start selection start\n     * @param {Number} end selection end\n     * @returns {fabric.Text} thisArg\n     * @chainable\n     */\n    setSubscript: function(start, end) {\n      return this._setScript(start, end, this.subscript);\n    },\n\n    /**\n     * Applies 'schema' at given position\n     * @private\n     * @param {Number} start selection start\n     * @param {Number} end selection end\n     * @param {Number} schema\n     * @returns {fabric.Text} thisArg\n     * @chainable\n     */\n    _setScript: function(start, end, schema) {\n      var loc = this.get2DCursorLocation(start, true),\n          fontSize = this.getValueOfPropertyAt(loc.lineIndex, loc.charIndex, 'fontSize'),\n          dy = this.getValueOfPropertyAt(loc.lineIndex, loc.charIndex, 'deltaY'),\n          style = { fontSize: fontSize * schema.size, deltaY: dy + fontSize * schema.baseline };\n      this.setSelectionStyles(style, start, end);\n      return this;\n    },\n\n    /**\n     * @private\n     * @param {Object} prevStyle\n     * @param {Object} thisStyle\n     */\n    _hasStyleChanged: function(prevStyle, thisStyle) {\n      return prevStyle.fill !== thisStyle.fill ||\n              prevStyle.stroke !== thisStyle.stroke ||\n              prevStyle.strokeWidth !== thisStyle.strokeWidth ||\n              prevStyle.fontSize !== thisStyle.fontSize ||\n              prevStyle.fontFamily !== thisStyle.fontFamily ||\n              prevStyle.fontWeight !== thisStyle.fontWeight ||\n              prevStyle.fontStyle !== thisStyle.fontStyle ||\n              prevStyle.deltaY !== thisStyle.deltaY;\n    },\n\n    /**\n     * @private\n     * @param {Object} prevStyle\n     * @param {Object} thisStyle\n     */\n    _hasStyleChangedForSvg: function(prevStyle, thisStyle) {\n      return this._hasStyleChanged(prevStyle, thisStyle) ||\n        prevStyle.overline !== thisStyle.overline ||\n        prevStyle.underline !== thisStyle.underline ||\n        prevStyle.linethrough !== thisStyle.linethrough;\n    },\n\n    /**\n     * @private\n     * @param {Number} lineIndex index text line\n     * @return {Number} Line left offset\n     */\n    _getLineLeftOffset: function(lineIndex) {\n      var lineWidth = this.getLineWidth(lineIndex);\n      if (this.textAlign === 'center') {\n        return (this.width - lineWidth) / 2;\n      }\n      if (this.textAlign === 'right') {\n        return this.width - lineWidth;\n      }\n      if (this.textAlign === 'justify-center' && this.isEndOfWrapping(lineIndex)) {\n        return (this.width - lineWidth) / 2;\n      }\n      if (this.textAlign === 'justify-right' && this.isEndOfWrapping(lineIndex)) {\n        return this.width - lineWidth;\n      }\n      return 0;\n    },\n\n    /**\n     * @private\n     */\n    _clearCache: function() {\n      this.__lineWidths = [];\n      this.__lineHeights = [];\n      this.__charBounds = [];\n    },\n\n    /**\n     * @private\n     */\n    _shouldClearDimensionCache: function() {\n      var shouldClear = this._forceClearCache;\n      shouldClear || (shouldClear = this.hasStateChanged('_dimensionAffectingProps'));\n      if (shouldClear) {\n        this.dirty = true;\n        this._forceClearCache = false;\n      }\n      return shouldClear;\n    },\n\n    /**\n     * Measure a single line given its index. Used to calculate the initial\n     * text bounding box. The values are calculated and stored in __lineWidths cache.\n     * @private\n     * @param {Number} lineIndex line number\n     * @return {Number} Line width\n     */\n    getLineWidth: function(lineIndex) {\n      if (this.__lineWidths[lineIndex]) {\n        return this.__lineWidths[lineIndex];\n      }\n\n      var width, line = this._textLines[lineIndex], lineInfo;\n\n      if (line === '') {\n        width = 0;\n      }\n      else {\n        lineInfo = this.measureLine(lineIndex);\n        width = lineInfo.width;\n      }\n      this.__lineWidths[lineIndex] = width;\n      return width;\n    },\n\n    _getWidthOfCharSpacing: function() {\n      if (this.charSpacing !== 0) {\n        return this.fontSize * this.charSpacing / 1000;\n      }\n      return 0;\n    },\n\n    /**\n     * Retrieves the value of property at given character position\n     * @param {Number} lineIndex the line number\n     * @param {Number} charIndex the character number\n     * @param {String} property the property name\n     * @returns the value of 'property'\n     */\n    getValueOfPropertyAt: function(lineIndex, charIndex, property) {\n      var charStyle = this._getStyleDeclaration(lineIndex, charIndex);\n      if (charStyle && typeof charStyle[property] !== 'undefined') {\n        return charStyle[property];\n      }\n      return this[property];\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _renderTextDecoration: function(ctx, type) {\n      if (!this[type] && !this.styleHas(type)) {\n        return;\n      }\n      var heightOfLine, size, _size,\n          lineLeftOffset, dy, _dy,\n          line, lastDecoration,\n          leftOffset = this._getLeftOffset(),\n          topOffset = this._getTopOffset(), top,\n          boxStart, boxWidth, charBox, currentDecoration,\n          maxHeight, currentFill, lastFill, path = this.path,\n          charSpacing = this._getWidthOfCharSpacing();\n\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        heightOfLine = this.getHeightOfLine(i);\n        if (!this[type] && !this.styleHas(type, i)) {\n          topOffset += heightOfLine;\n          continue;\n        }\n        line = this._textLines[i];\n        maxHeight = heightOfLine / this.lineHeight;\n        lineLeftOffset = this._getLineLeftOffset(i);\n        boxStart = 0;\n        boxWidth = 0;\n        lastDecoration = this.getValueOfPropertyAt(i, 0, type);\n        lastFill = this.getValueOfPropertyAt(i, 0, 'fill');\n        top = topOffset + maxHeight * (1 - this._fontSizeFraction);\n        size = this.getHeightOfChar(i, 0);\n        dy = this.getValueOfPropertyAt(i, 0, 'deltaY');\n        for (var j = 0, jlen = line.length; j < jlen; j++) {\n          charBox = this.__charBounds[i][j];\n          currentDecoration = this.getValueOfPropertyAt(i, j, type);\n          currentFill = this.getValueOfPropertyAt(i, j, 'fill');\n          _size = this.getHeightOfChar(i, j);\n          _dy = this.getValueOfPropertyAt(i, j, 'deltaY');\n          if (path && currentDecoration && currentFill) {\n            ctx.save();\n            ctx.fillStyle = lastFill;\n            ctx.translate(charBox.renderLeft, charBox.renderTop);\n            ctx.rotate(charBox.angle);\n            ctx.fillRect(\n              -charBox.kernedWidth / 2,\n              this.offsets[type] * _size + _dy,\n              charBox.kernedWidth,\n              this.fontSize / 15\n            );\n            ctx.restore();\n          }\n          else if (\n            (currentDecoration !== lastDecoration || currentFill !== lastFill || _size !== size || _dy !== dy)\n            && boxWidth > 0\n          ) {\n            if (lastDecoration && lastFill) {\n              ctx.fillStyle = lastFill;\n              ctx.fillRect(\n                leftOffset + lineLeftOffset + boxStart,\n                top + this.offsets[type] * size + dy,\n                boxWidth,\n                this.fontSize / 15\n              );\n            }\n            boxStart = charBox.left;\n            boxWidth = charBox.width;\n            lastDecoration = currentDecoration;\n            lastFill = currentFill;\n            size = _size;\n            dy = _dy;\n          }\n          else {\n            boxWidth += charBox.kernedWidth;\n          }\n        }\n        ctx.fillStyle = currentFill;\n        currentDecoration && currentFill && ctx.fillRect(\n          leftOffset + lineLeftOffset + boxStart,\n          top + this.offsets[type] * size + dy,\n          boxWidth - charSpacing,\n          this.fontSize / 15\n        );\n        topOffset += heightOfLine;\n      }\n      // if there is text background color no\n      // other shadows should be casted\n      this._removeShadow(ctx);\n    },\n\n    /**\n     * return font declaration string for canvas context\n     * @param {Object} [styleObject] object\n     * @returns {String} font declaration formatted for canvas context.\n     */\n    _getFontDeclaration: function(styleObject, forMeasuring) {\n      var style = styleObject || this, family = this.fontFamily,\n          fontIsGeneric = fabric.Text.genericFonts.indexOf(family.toLowerCase()) > -1;\n      var fontFamily = family === undefined ||\n      family.indexOf('\\'') > -1 || family.indexOf(',') > -1 ||\n      family.indexOf('\"') > -1 || fontIsGeneric\n        ? style.fontFamily : '\"' + style.fontFamily + '\"';\n      return [\n        // node-canvas needs \"weight style\", while browsers need \"style weight\"\n        // verify if this can be fixed in JSDOM\n        (fabric.isLikelyNode ? style.fontWeight : style.fontStyle),\n        (fabric.isLikelyNode ? style.fontStyle : style.fontWeight),\n        forMeasuring ? this.CACHE_FONT_SIZE + 'px' : style.fontSize + 'px',\n        fontFamily\n      ].join(' ');\n    },\n\n    /**\n     * Renders text instance on a specified context\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    render: function(ctx) {\n      // do not render if object is not visible\n      if (!this.visible) {\n        return;\n      }\n      if (this.canvas && this.canvas.skipOffscreen && !this.group && !this.isOnScreen()) {\n        return;\n      }\n      if (this._shouldClearDimensionCache()) {\n        this.initDimensions();\n      }\n      this.callSuper('render', ctx);\n    },\n\n    /**\n     * Returns the text as an array of lines.\n     * @param {String} text text to split\n     * @returns {Array} Lines in the text\n     */\n    _splitTextIntoLines: function(text) {\n      var lines = text.split(this._reNewline),\n          newLines = new Array(lines.length),\n          newLine = ['\\n'],\n          newText = [];\n      for (var i = 0; i < lines.length; i++) {\n        newLines[i] = fabric.util.string.graphemeSplit(lines[i]);\n        newText = newText.concat(newLines[i], newLine);\n      }\n      newText.pop();\n      return { _unwrappedLines: newLines, lines: lines, graphemeText: newText, graphemeLines: newLines };\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} Object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      var additionalProperties = [\n        'text',\n        'fontSize',\n        'fontWeight',\n        'fontFamily',\n        'fontStyle',\n        'lineHeight',\n        'underline',\n        'overline',\n        'linethrough',\n        'textAlign',\n        'textBackgroundColor',\n        'charSpacing',\n        'path'\n      ].concat(propertiesToInclude);\n      var obj = this.callSuper('toObject', additionalProperties);\n      obj.styles = clone(this.styles, true);\n      obj.path = this.path && this.path.toObject();\n      return obj;\n    },\n\n    /**\n     * Sets property to a given value. When changing position/dimension -related properties (left, top, scale, angle, etc.) `set` does not update position of object's borders/controls. If you need to update those, call `setCoords()`.\n     * @param {String|Object} key Property name or object (if object, iterate over the object properties)\n     * @param {Object|Function} value Property value (if function, the value is passed into it and its return value is used as a new one)\n     * @return {fabric.Object} thisArg\n     * @chainable\n     */\n    set: function(key, value) {\n      this.callSuper('set', key, value);\n      var needsDims = false;\n      var isAddingPath = false;\n      if (typeof key === 'object') {\n        for (var _key in key) {\n          if (_key === 'path') {\n            this.setPathInfo();\n          }\n          needsDims = needsDims || this._dimensionAffectingProps.indexOf(_key) !== -1;\n          isAddingPath = isAddingPath || _key === 'path';\n        }\n      }\n      else {\n        needsDims = this._dimensionAffectingProps.indexOf(key) !== -1;\n        isAddingPath = key === 'path';\n      }\n      if (isAddingPath) {\n        this.setPathInfo();\n      }\n      if (needsDims) {\n        this.initDimensions();\n        this.setCoords();\n      }\n      return this;\n    },\n\n    /**\n     * Returns complexity of an instance\n     * @return {Number} complexity\n     */\n    complexity: function() {\n      return 1;\n    }\n  });\n\n  /* _FROM_SVG_START_ */\n  /**\n   * List of attribute names to account for when parsing SVG element (used by {@link fabric.Text.fromElement})\n   * @static\n   * @memberOf fabric.Text\n   * @see: http://www.w3.org/TR/SVG/text.html#TextElement\n   */\n  fabric.Text.ATTRIBUTE_NAMES = fabric.SHARED_ATTRIBUTES.concat(\n    'x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor'.split(' '));\n\n  /**\n   * Default SVG font size\n   * @static\n   * @memberOf fabric.Text\n   */\n  fabric.Text.DEFAULT_SVG_FONT_SIZE = 16;\n\n  /**\n   * Returns fabric.Text instance from an SVG element (<b>not yet implemented</b>)\n   * @static\n   * @memberOf fabric.Text\n   * @param {SVGElement} element Element to parse\n   * @param {Function} callback callback function invoked after parsing\n   * @param {Object} [options] Options object\n   */\n  fabric.Text.fromElement = function(element, callback, options) {\n    if (!element) {\n      return callback(null);\n    }\n\n    var parsedAttributes = fabric.parseAttributes(element, fabric.Text.ATTRIBUTE_NAMES),\n        parsedAnchor = parsedAttributes.textAnchor || 'left';\n    options = fabric.util.object.extend((options ? clone(options) : { }), parsedAttributes);\n\n    options.top = options.top || 0;\n    options.left = options.left || 0;\n    if (parsedAttributes.textDecoration) {\n      var textDecoration = parsedAttributes.textDecoration;\n      if (textDecoration.indexOf('underline') !== -1) {\n        options.underline = true;\n      }\n      if (textDecoration.indexOf('overline') !== -1) {\n        options.overline = true;\n      }\n      if (textDecoration.indexOf('line-through') !== -1) {\n        options.linethrough = true;\n      }\n      delete options.textDecoration;\n    }\n    if ('dx' in parsedAttributes) {\n      options.left += parsedAttributes.dx;\n    }\n    if ('dy' in parsedAttributes) {\n      options.top += parsedAttributes.dy;\n    }\n    if (!('fontSize' in options)) {\n      options.fontSize = fabric.Text.DEFAULT_SVG_FONT_SIZE;\n    }\n\n    var textContent = '';\n\n    // The XML is not properly parsed in IE9 so a workaround to get\n    // textContent is through firstChild.data. Another workaround would be\n    // to convert XML loaded from a file to be converted using DOMParser (same way loadSVGFromString() does)\n    if (!('textContent' in element)) {\n      if ('firstChild' in element && element.firstChild !== null) {\n        if ('data' in element.firstChild && element.firstChild.data !== null) {\n          textContent = element.firstChild.data;\n        }\n      }\n    }\n    else {\n      textContent = element.textContent;\n    }\n\n    textContent = textContent.replace(/^\\s+|\\s+$|\\n+/g, '').replace(/\\s+/g, ' ');\n    var originalStrokeWidth = options.strokeWidth;\n    options.strokeWidth = 0;\n\n    var text = new fabric.Text(textContent, options),\n        textHeightScaleFactor = text.getScaledHeight() / text.height,\n        lineHeightDiff = (text.height + text.strokeWidth) * text.lineHeight - text.height,\n        scaledDiff = lineHeightDiff * textHeightScaleFactor,\n        textHeight = text.getScaledHeight() + scaledDiff,\n        offX = 0;\n    /*\n      Adjust positioning:\n        x/y attributes in SVG correspond to the bottom-left corner of text bounding box\n        fabric output by default at top, left.\n    */\n    if (parsedAnchor === 'center') {\n      offX = text.getScaledWidth() / 2;\n    }\n    if (parsedAnchor === 'right') {\n      offX = text.getScaledWidth();\n    }\n    text.set({\n      left: text.left - offX,\n      top: text.top - (textHeight - text.fontSize * (0.07 + text._fontSizeFraction)) / text.lineHeight,\n      strokeWidth: typeof originalStrokeWidth !== 'undefined' ? originalStrokeWidth : 1,\n    });\n    callback(text);\n  };\n  /* _FROM_SVG_END_ */\n\n  /**\n   * Returns fabric.Text instance from an object representation\n   * @static\n   * @memberOf fabric.Text\n   * @param {Object} object plain js Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Text instance is created\n   */\n  fabric.Text.fromObject = function(object, callback) {\n    var objectCopy = clone(object), path = object.path;\n    delete objectCopy.path;\n    return fabric.Object._fromObject('Text', objectCopy, function(textInstance) {\n      if (path) {\n        fabric.Object._fromObject('Path', path, function(pathInstance) {\n          textInstance.set('path', pathInstance);\n          callback(textInstance);\n        }, 'path');\n      }\n      else {\n        callback(textInstance);\n      }\n    }, 'text');\n  };\n\n  fabric.Text.genericFonts = ['sans-serif', 'serif', 'cursive', 'fantasy', 'monospace'];\n\n  fabric.util.createAccessors && fabric.util.createAccessors(fabric.Text);\n\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n  fabric.util.object.extend(fabric.Text.prototype, /** @lends fabric.Text.prototype */ {\n    /**\n     * Returns true if object has no styling or no styling in a line\n     * @param {Number} lineIndex , lineIndex is on wrapped lines.\n     * @return {Boolean}\n     */\n    isEmptyStyles: function(lineIndex) {\n      if (!this.styles) {\n        return true;\n      }\n      if (typeof lineIndex !== 'undefined' && !this.styles[lineIndex]) {\n        return true;\n      }\n      var obj = typeof lineIndex === 'undefined' ? this.styles : { line: this.styles[lineIndex] };\n      for (var p1 in obj) {\n        for (var p2 in obj[p1]) {\n          // eslint-disable-next-line no-unused-vars\n          for (var p3 in obj[p1][p2]) {\n            return false;\n          }\n        }\n      }\n      return true;\n    },\n\n    /**\n     * Returns true if object has a style property or has it ina specified line\n     * This function is used to detect if a text will use a particular property or not.\n     * @param {String} property to check for\n     * @param {Number} lineIndex to check the style on\n     * @return {Boolean}\n     */\n    styleHas: function(property, lineIndex) {\n      if (!this.styles || !property || property === '') {\n        return false;\n      }\n      if (typeof lineIndex !== 'undefined' && !this.styles[lineIndex]) {\n        return false;\n      }\n      var obj = typeof lineIndex === 'undefined' ? this.styles : { 0: this.styles[lineIndex] };\n      // eslint-disable-next-line\n      for (var p1 in obj) {\n        // eslint-disable-next-line\n        for (var p2 in obj[p1]) {\n          if (typeof obj[p1][p2][property] !== 'undefined') {\n            return true;\n          }\n        }\n      }\n      return false;\n    },\n\n    /**\n     * Check if characters in a text have a value for a property\n     * whose value matches the textbox's value for that property.  If so,\n     * the character-level property is deleted.  If the character\n     * has no other properties, then it is also deleted.  Finally,\n     * if the line containing that character has no other characters\n     * then it also is deleted.\n     *\n     * @param {string} property The property to compare between characters and text.\n     */\n    cleanStyle: function(property) {\n      if (!this.styles || !property || property === '') {\n        return false;\n      }\n      var obj = this.styles, stylesCount = 0, letterCount, stylePropertyValue,\n          allStyleObjectPropertiesMatch = true, graphemeCount = 0, styleObject;\n      // eslint-disable-next-line\n      for (var p1 in obj) {\n        letterCount = 0;\n        // eslint-disable-next-line\n        for (var p2 in obj[p1]) {\n          var styleObject = obj[p1][p2],\n              stylePropertyHasBeenSet = styleObject.hasOwnProperty(property);\n\n          stylesCount++;\n\n          if (stylePropertyHasBeenSet) {\n            if (!stylePropertyValue) {\n              stylePropertyValue = styleObject[property];\n            }\n            else if (styleObject[property] !== stylePropertyValue) {\n              allStyleObjectPropertiesMatch = false;\n            }\n\n            if (styleObject[property] === this[property]) {\n              delete styleObject[property];\n            }\n          }\n          else {\n            allStyleObjectPropertiesMatch = false;\n          }\n\n          if (Object.keys(styleObject).length !== 0) {\n            letterCount++;\n          }\n          else {\n            delete obj[p1][p2];\n          }\n        }\n\n        if (letterCount === 0) {\n          delete obj[p1];\n        }\n      }\n      // if every grapheme has the same style set then\n      // delete those styles and set it on the parent\n      for (var i = 0; i < this._textLines.length; i++) {\n        graphemeCount += this._textLines[i].length;\n      }\n      if (allStyleObjectPropertiesMatch && stylesCount === graphemeCount) {\n        this[property] = stylePropertyValue;\n        this.removeStyle(property);\n      }\n    },\n\n    /**\n     * Remove a style property or properties from all individual character styles\n     * in a text object.  Deletes the character style object if it contains no other style\n     * props.  Deletes a line style object if it contains no other character styles.\n     *\n     * @param {String} props The property to remove from character styles.\n     */\n    removeStyle: function(property) {\n      if (!this.styles || !property || property === '') {\n        return;\n      }\n      var obj = this.styles, line, lineNum, charNum;\n      for (lineNum in obj) {\n        line = obj[lineNum];\n        for (charNum in line) {\n          delete line[charNum][property];\n          if (Object.keys(line[charNum]).length === 0) {\n            delete line[charNum];\n          }\n        }\n        if (Object.keys(line).length === 0) {\n          delete obj[lineNum];\n        }\n      }\n    },\n\n    /**\n     * @private\n     */\n    _extendStyles: function(index, styles) {\n      var loc = this.get2DCursorLocation(index);\n\n      if (!this._getLineStyle(loc.lineIndex)) {\n        this._setLineStyle(loc.lineIndex);\n      }\n\n      if (!this._getStyleDeclaration(loc.lineIndex, loc.charIndex)) {\n        this._setStyleDeclaration(loc.lineIndex, loc.charIndex, {});\n      }\n\n      fabric.util.object.extend(this._getStyleDeclaration(loc.lineIndex, loc.charIndex), styles);\n    },\n\n    /**\n     * Returns 2d representation (lineIndex and charIndex) of cursor (or selection start)\n     * @param {Number} [selectionStart] Optional index. When not given, current selectionStart is used.\n     * @param {Boolean} [skipWrapping] consider the location for unwrapped lines. useful to manage styles.\n     */\n    get2DCursorLocation: function(selectionStart, skipWrapping) {\n      if (typeof selectionStart === 'undefined') {\n        selectionStart = this.selectionStart;\n      }\n      var lines = skipWrapping ? this._unwrappedTextLines : this._textLines,\n          len = lines.length;\n      for (var i = 0; i < len; i++) {\n        if (selectionStart <= lines[i].length) {\n          return {\n            lineIndex: i,\n            charIndex: selectionStart\n          };\n        }\n        selectionStart -= lines[i].length + this.missingNewlineOffset(i);\n      }\n      return {\n        lineIndex: i - 1,\n        charIndex: lines[i - 1].length < selectionStart ? lines[i - 1].length : selectionStart\n      };\n    },\n\n    /**\n     * Gets style of a current selection/cursor (at the start position)\n     * if startIndex or endIndex are not provided, selectionStart or selectionEnd will be used.\n     * @param {Number} [startIndex] Start index to get styles at\n     * @param {Number} [endIndex] End index to get styles at, if not specified selectionEnd or startIndex + 1\n     * @param {Boolean} [complete] get full style or not\n     * @return {Array} styles an array with one, zero or more Style objects\n     */\n    getSelectionStyles: function(startIndex, endIndex, complete) {\n      if (typeof startIndex === 'undefined') {\n        startIndex = this.selectionStart || 0;\n      }\n      if (typeof endIndex === 'undefined') {\n        endIndex = this.selectionEnd || startIndex;\n      }\n      var styles = [];\n      for (var i = startIndex; i < endIndex; i++) {\n        styles.push(this.getStyleAtPosition(i, complete));\n      }\n      return styles;\n    },\n\n    /**\n     * Gets style of a current selection/cursor position\n     * @param {Number} position  to get styles at\n     * @param {Boolean} [complete] full style if true\n     * @return {Object} style Style object at a specified index\n     * @private\n     */\n    getStyleAtPosition: function(position, complete) {\n      var loc = this.get2DCursorLocation(position),\n          style = complete ? this.getCompleteStyleDeclaration(loc.lineIndex, loc.charIndex) :\n            this._getStyleDeclaration(loc.lineIndex, loc.charIndex);\n      return style || {};\n    },\n\n    /**\n     * Sets style of a current selection, if no selection exist, do not set anything.\n     * @param {Object} [styles] Styles object\n     * @param {Number} [startIndex] Start index to get styles at\n     * @param {Number} [endIndex] End index to get styles at, if not specified selectionEnd or startIndex + 1\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    setSelectionStyles: function(styles, startIndex, endIndex) {\n      if (typeof startIndex === 'undefined') {\n        startIndex = this.selectionStart || 0;\n      }\n      if (typeof endIndex === 'undefined') {\n        endIndex = this.selectionEnd || startIndex;\n      }\n      for (var i = startIndex; i < endIndex; i++) {\n        this._extendStyles(i, styles);\n      }\n      /* not included in _extendStyles to avoid clearing cache more than once */\n      this._forceClearCache = true;\n      return this;\n    },\n\n    /**\n     * get the reference, not a clone, of the style object for a given character\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @return {Object} style object\n     */\n    _getStyleDeclaration: function(lineIndex, charIndex) {\n      var lineStyle = this.styles && this.styles[lineIndex];\n      if (!lineStyle) {\n        return null;\n      }\n      return lineStyle[charIndex];\n    },\n\n    /**\n     * return a new object that contains all the style property for a character\n     * the object returned is newly created\n     * @param {Number} lineIndex of the line where the character is\n     * @param {Number} charIndex position of the character on the line\n     * @return {Object} style object\n     */\n    getCompleteStyleDeclaration: function(lineIndex, charIndex) {\n      var style = this._getStyleDeclaration(lineIndex, charIndex) || { },\n          styleObject = { }, prop;\n      for (var i = 0; i < this._styleProperties.length; i++) {\n        prop = this._styleProperties[i];\n        styleObject[prop] = typeof style[prop] === 'undefined' ? this[prop] : style[prop];\n      }\n      return styleObject;\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @param {Object} style\n     * @private\n     */\n    _setStyleDeclaration: function(lineIndex, charIndex, style) {\n      this.styles[lineIndex][charIndex] = style;\n    },\n\n    /**\n     *\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @private\n     */\n    _deleteStyleDeclaration: function(lineIndex, charIndex) {\n      delete this.styles[lineIndex][charIndex];\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @return {Boolean} if the line exists or not\n     * @private\n     */\n    _getLineStyle: function(lineIndex) {\n      return !!this.styles[lineIndex];\n    },\n\n    /**\n     * Set the line style to an empty object so that is initialized\n     * @param {Number} lineIndex\n     * @private\n     */\n    _setLineStyle: function(lineIndex) {\n      this.styles[lineIndex] = {};\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @private\n     */\n    _deleteLineStyle: function(lineIndex) {\n      delete this.styles[lineIndex];\n    }\n  });\n})();\n\n\n(function() {\n\n  function parseDecoration(object) {\n    if (object.textDecoration) {\n      object.textDecoration.indexOf('underline') > -1 && (object.underline = true);\n      object.textDecoration.indexOf('line-through') > -1 && (object.linethrough = true);\n      object.textDecoration.indexOf('overline') > -1 && (object.overline = true);\n      delete object.textDecoration;\n    }\n  }\n\n  /**\n   * IText class (introduced in <b>v1.4</b>) Events are also fired with \"text:\"\n   * prefix when observing canvas.\n   * @class fabric.IText\n   * @extends fabric.Text\n   * @mixes fabric.Observable\n   *\n   * @fires changed\n   * @fires selection:changed\n   * @fires editing:entered\n   * @fires editing:exited\n   *\n   * @return {fabric.IText} thisArg\n   * @see {@link fabric.IText#initialize} for constructor definition\n   *\n   * <p>Supported key combinations:</p>\n   * <pre>\n   *   Move cursor:                    left, right, up, down\n   *   Select character:               shift + left, shift + right\n   *   Select text vertically:         shift + up, shift + down\n   *   Move cursor by word:            alt + left, alt + right\n   *   Select words:                   shift + alt + left, shift + alt + right\n   *   Move cursor to line start/end:  cmd + left, cmd + right or home, end\n   *   Select till start/end of line:  cmd + shift + left, cmd + shift + right or shift + home, shift + end\n   *   Jump to start/end of text:      cmd + up, cmd + down\n   *   Select till start/end of text:  cmd + shift + up, cmd + shift + down or shift + pgUp, shift + pgDown\n   *   Delete character:               backspace\n   *   Delete word:                    alt + backspace\n   *   Delete line:                    cmd + backspace\n   *   Forward delete:                 delete\n   *   Copy text:                      ctrl/cmd + c\n   *   Paste text:                     ctrl/cmd + v\n   *   Cut text:                       ctrl/cmd + x\n   *   Select entire text:             ctrl/cmd + a\n   *   Quit editing                    tab or esc\n   * </pre>\n   *\n   * <p>Supported mouse/touch combination</p>\n   * <pre>\n   *   Position cursor:                click/touch\n   *   Create selection:               click/touch & drag\n   *   Create selection:               click & shift + click\n   *   Select word:                    double click\n   *   Select line:                    triple click\n   * </pre>\n   */\n  fabric.IText = fabric.util.createClass(fabric.Text, fabric.Observable, /** @lends fabric.IText.prototype */ {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'i-text',\n\n    /**\n     * Index where text selection starts (or where cursor is when there is no selection)\n     * @type Number\n     * @default\n     */\n    selectionStart: 0,\n\n    /**\n     * Index where text selection ends\n     * @type Number\n     * @default\n     */\n    selectionEnd: 0,\n\n    /**\n     * Color of text selection\n     * @type String\n     * @default\n     */\n    selectionColor: 'rgba(17,119,255,0.3)',\n\n    /**\n     * Indicates whether text is in editing mode\n     * @type Boolean\n     * @default\n     */\n    isEditing: false,\n\n    /**\n     * Indicates whether a text can be edited\n     * @type Boolean\n     * @default\n     */\n    editable: true,\n\n    /**\n     * Border color of text object while it's in editing mode\n     * @type String\n     * @default\n     */\n    editingBorderColor: 'rgba(102,153,255,0.25)',\n\n    /**\n     * Width of cursor (in px)\n     * @type Number\n     * @default\n     */\n    cursorWidth: 2,\n\n    /**\n     * Color of text cursor color in editing mode.\n     * if not set (default) will take color from the text.\n     * if set to a color value that fabric can understand, it will\n     * be used instead of the color of the text at the current position.\n     * @type String\n     * @default\n     */\n    cursorColor: '',\n\n    /**\n     * Delay between cursor blink (in ms)\n     * @type Number\n     * @default\n     */\n    cursorDelay: 1000,\n\n    /**\n     * Duration of cursor fadein (in ms)\n     * @type Number\n     * @default\n     */\n    cursorDuration: 600,\n\n    /**\n     * Indicates whether internal text char widths can be cached\n     * @type Boolean\n     * @default\n     */\n    caching: true,\n\n    /**\n     * @private\n     */\n    _reSpace: /\\s|\\n/,\n\n    /**\n     * @private\n     */\n    _currentCursorOpacity: 0,\n\n    /**\n     * @private\n     */\n    _selectionDirection: null,\n\n    /**\n     * @private\n     */\n    _abortCursorAnimation: false,\n\n    /**\n     * @private\n     */\n    __widthOfSpace: [],\n\n    /**\n     * Helps determining when the text is in composition, so that the cursor\n     * rendering is altered.\n     */\n    inCompositionMode: false,\n\n    /**\n     * Constructor\n     * @param {String} text Text string\n     * @param {Object} [options] Options object\n     * @return {fabric.IText} thisArg\n     */\n    initialize: function(text, options) {\n      this.callSuper('initialize', text, options);\n      this.initBehavior();\n    },\n\n    /**\n     * Sets selection start (left boundary of a selection)\n     * @param {Number} index Index to set selection start to\n     */\n    setSelectionStart: function(index) {\n      index = Math.max(index, 0);\n      this._updateAndFire('selectionStart', index);\n    },\n\n    /**\n     * Sets selection end (right boundary of a selection)\n     * @param {Number} index Index to set selection end to\n     */\n    setSelectionEnd: function(index) {\n      index = Math.min(index, this.text.length);\n      this._updateAndFire('selectionEnd', index);\n    },\n\n    /**\n     * @private\n     * @param {String} property 'selectionStart' or 'selectionEnd'\n     * @param {Number} index new position of property\n     */\n    _updateAndFire: function(property, index) {\n      if (this[property] !== index) {\n        this._fireSelectionChanged();\n        this[property] = index;\n      }\n      this._updateTextarea();\n    },\n\n    /**\n     * Fires the even of selection changed\n     * @private\n     */\n    _fireSelectionChanged: function() {\n      this.fire('selection:changed');\n      this.canvas && this.canvas.fire('text:selection:changed', { target: this });\n    },\n\n    /**\n     * Initialize text dimensions. Render all text on given context\n     * or on a offscreen canvas to get the text width with measureText.\n     * Updates this.width and this.height with the proper values.\n     * Does not return dimensions.\n     * @private\n     */\n    initDimensions: function() {\n      this.isEditing && this.initDelayedCursor();\n      this.clearContextTop();\n      this.callSuper('initDimensions');\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    render: function(ctx) {\n      this.clearContextTop();\n      this.callSuper('render', ctx);\n      // clear the cursorOffsetCache, so we ensure to calculate once per renderCursor\n      // the correct position but not at every cursor animation.\n      this.cursorOffsetCache = { };\n      this.renderCursorOrSelection();\n    },\n\n    /**\n     * @private\n     * @param {CanvasRenderingContext2D} ctx Context to render on\n     */\n    _render: function(ctx) {\n      this.callSuper('_render', ctx);\n    },\n\n    /**\n     * Prepare and clean the contextTop\n     */\n    clearContextTop: function(skipRestore) {\n      if (!this.isEditing || !this.canvas || !this.canvas.contextTop) {\n        return;\n      }\n      var ctx = this.canvas.contextTop, v = this.canvas.viewportTransform;\n      ctx.save();\n      ctx.transform(v[0], v[1], v[2], v[3], v[4], v[5]);\n      this.transform(ctx);\n      this._clearTextArea(ctx);\n      skipRestore || ctx.restore();\n    },\n    /**\n     * Renders cursor or selection (depending on what exists)\n     * it does on the contextTop. If contextTop is not available, do nothing.\n     */\n    renderCursorOrSelection: function() {\n      if (!this.isEditing || !this.canvas || !this.canvas.contextTop) {\n        return;\n      }\n      var boundaries = this._getCursorBoundaries(),\n          ctx = this.canvas.contextTop;\n      this.clearContextTop(true);\n      if (this.selectionStart === this.selectionEnd) {\n        this.renderCursor(boundaries, ctx);\n      }\n      else {\n        this.renderSelection(boundaries, ctx);\n      }\n      ctx.restore();\n    },\n\n    _clearTextArea: function(ctx) {\n      // we add 4 pixel, to be sure to do not leave any pixel out\n      var width = this.width + 4, height = this.height + 4;\n      ctx.clearRect(-width / 2, -height / 2, width, height);\n    },\n\n    /**\n     * Returns cursor boundaries (left, top, leftOffset, topOffset)\n     * @private\n     * @param {Array} chars Array of characters\n     * @param {String} typeOfBoundaries\n     */\n    _getCursorBoundaries: function(position) {\n\n      // left/top are left/top of entire text box\n      // leftOffset/topOffset are offset from that left/top point of a text box\n\n      if (typeof position === 'undefined') {\n        position = this.selectionStart;\n      }\n\n      var left = this._getLeftOffset(),\n          top = this._getTopOffset(),\n          offsets = this._getCursorBoundariesOffsets(position);\n\n      return {\n        left: left,\n        top: top,\n        leftOffset: offsets.left,\n        topOffset: offsets.top\n      };\n    },\n\n    /**\n     * @private\n     */\n    _getCursorBoundariesOffsets: function(position) {\n      if (this.cursorOffsetCache && 'top' in this.cursorOffsetCache) {\n        return this.cursorOffsetCache;\n      }\n      var lineLeftOffset,\n          lineIndex,\n          charIndex,\n          topOffset = 0,\n          leftOffset = 0,\n          boundaries,\n          cursorPosition = this.get2DCursorLocation(position);\n      charIndex = cursorPosition.charIndex;\n      lineIndex = cursorPosition.lineIndex;\n      for (var i = 0; i < lineIndex; i++) {\n        topOffset += this.getHeightOfLine(i);\n      }\n      lineLeftOffset = this._getLineLeftOffset(lineIndex);\n      var bound = this.__charBounds[lineIndex][charIndex];\n      bound && (leftOffset = bound.left);\n      if (this.charSpacing !== 0 && charIndex === this._textLines[lineIndex].length) {\n        leftOffset -= this._getWidthOfCharSpacing();\n      }\n      boundaries = {\n        top: topOffset,\n        left: lineLeftOffset + (leftOffset > 0 ? leftOffset : 0),\n      };\n      this.cursorOffsetCache = boundaries;\n      return this.cursorOffsetCache;\n    },\n\n    /**\n     * Renders cursor\n     * @param {Object} boundaries\n     * @param {CanvasRenderingContext2D} ctx transformed context to draw on\n     */\n    renderCursor: function(boundaries, ctx) {\n      var cursorLocation = this.get2DCursorLocation(),\n          lineIndex = cursorLocation.lineIndex,\n          charIndex = cursorLocation.charIndex > 0 ? cursorLocation.charIndex - 1 : 0,\n          charHeight = this.getValueOfPropertyAt(lineIndex, charIndex, 'fontSize'),\n          multiplier = this.scaleX * this.canvas.getZoom(),\n          cursorWidth = this.cursorWidth / multiplier,\n          topOffset = boundaries.topOffset,\n          dy = this.getValueOfPropertyAt(lineIndex, charIndex, 'deltaY');\n\n      topOffset += (1 - this._fontSizeFraction) * this.getHeightOfLine(lineIndex) / this.lineHeight\n        - charHeight * (1 - this._fontSizeFraction);\n\n      if (this.inCompositionMode) {\n        this.renderSelection(boundaries, ctx);\n      }\n\n      ctx.fillStyle = this.cursorColor || this.getValueOfPropertyAt(lineIndex, charIndex, 'fill');\n      ctx.globalAlpha = this.__isMousedown ? 1 : this._currentCursorOpacity;\n      ctx.fillRect(\n        boundaries.left + boundaries.leftOffset - cursorWidth / 2,\n        topOffset + boundaries.top + dy,\n        cursorWidth,\n        charHeight);\n    },\n\n    /**\n     * Renders text selection\n     * @param {Object} boundaries Object with left/top/leftOffset/topOffset\n     * @param {CanvasRenderingContext2D} ctx transformed context to draw on\n     */\n    renderSelection: function(boundaries, ctx) {\n\n      var selectionStart = this.inCompositionMode ? this.hiddenTextarea.selectionStart : this.selectionStart,\n          selectionEnd = this.inCompositionMode ? this.hiddenTextarea.selectionEnd : this.selectionEnd,\n          isJustify = this.textAlign.indexOf('justify') !== -1,\n          start = this.get2DCursorLocation(selectionStart),\n          end = this.get2DCursorLocation(selectionEnd),\n          startLine = start.lineIndex,\n          endLine = end.lineIndex,\n          startChar = start.charIndex < 0 ? 0 : start.charIndex,\n          endChar = end.charIndex < 0 ? 0 : end.charIndex;\n\n      for (var i = startLine; i <= endLine; i++) {\n        var lineOffset = this._getLineLeftOffset(i) || 0,\n            lineHeight = this.getHeightOfLine(i),\n            realLineHeight = 0, boxStart = 0, boxEnd = 0;\n\n        if (i === startLine) {\n          boxStart = this.__charBounds[startLine][startChar].left;\n        }\n        if (i >= startLine && i < endLine) {\n          boxEnd = isJustify && !this.isEndOfWrapping(i) ? this.width : this.getLineWidth(i) || 5; // WTF is this 5?\n        }\n        else if (i === endLine) {\n          if (endChar === 0) {\n            boxEnd = this.__charBounds[endLine][endChar].left;\n          }\n          else {\n            var charSpacing = this._getWidthOfCharSpacing();\n            boxEnd = this.__charBounds[endLine][endChar - 1].left\n              + this.__charBounds[endLine][endChar - 1].width - charSpacing;\n          }\n        }\n        realLineHeight = lineHeight;\n        if (this.lineHeight < 1 || (i === endLine && this.lineHeight > 1)) {\n          lineHeight /= this.lineHeight;\n        }\n        if (this.inCompositionMode) {\n          ctx.fillStyle = this.compositionColor || 'black';\n          ctx.fillRect(\n            boundaries.left + lineOffset + boxStart,\n            boundaries.top + boundaries.topOffset + lineHeight,\n            boxEnd - boxStart,\n            1);\n        }\n        else {\n          ctx.fillStyle = this.selectionColor;\n          ctx.fillRect(\n            boundaries.left + lineOffset + boxStart,\n            boundaries.top + boundaries.topOffset,\n            boxEnd - boxStart,\n            lineHeight);\n        }\n\n\n        boundaries.topOffset += realLineHeight;\n      }\n    },\n\n    /**\n     * High level function to know the height of the cursor.\n     * the currentChar is the one that precedes the cursor\n     * Returns fontSize of char at the current cursor\n     * Unused from the library, is for the end user\n     * @return {Number} Character font size\n     */\n    getCurrentCharFontSize: function() {\n      var cp = this._getCurrentCharIndex();\n      return this.getValueOfPropertyAt(cp.l, cp.c, 'fontSize');\n    },\n\n    /**\n     * High level function to know the color of the cursor.\n     * the currentChar is the one that precedes the cursor\n     * Returns color (fill) of char at the current cursor\n     * if the text object has a pattern or gradient for filler, it will return that.\n     * Unused by the library, is for the end user\n     * @return {String | fabric.Gradient | fabric.Pattern} Character color (fill)\n     */\n    getCurrentCharColor: function() {\n      var cp = this._getCurrentCharIndex();\n      return this.getValueOfPropertyAt(cp.l, cp.c, 'fill');\n    },\n\n    /**\n     * Returns the cursor position for the getCurrent.. functions\n     * @private\n     */\n    _getCurrentCharIndex: function() {\n      var cursorPosition = this.get2DCursorLocation(this.selectionStart, true),\n          charIndex = cursorPosition.charIndex > 0 ? cursorPosition.charIndex - 1 : 0;\n      return { l: cursorPosition.lineIndex, c: charIndex };\n    }\n  });\n\n  /**\n   * Returns fabric.IText instance from an object representation\n   * @static\n   * @memberOf fabric.IText\n   * @param {Object} object Object to create an instance from\n   * @param {function} [callback] invoked with new instance as argument\n   */\n  fabric.IText.fromObject = function(object, callback) {\n    parseDecoration(object);\n    if (object.styles) {\n      for (var i in object.styles) {\n        for (var j in object.styles[i]) {\n          parseDecoration(object.styles[i][j]);\n        }\n      }\n    }\n    fabric.Object._fromObject('IText', object, callback, 'text');\n  };\n})();\n\n\n(function() {\n\n  var clone = fabric.util.object.clone;\n\n  fabric.util.object.extend(fabric.IText.prototype, /** @lends fabric.IText.prototype */ {\n\n    /**\n     * Initializes all the interactive behavior of IText\n     */\n    initBehavior: function() {\n      this.initAddedHandler();\n      this.initRemovedHandler();\n      this.initCursorSelectionHandlers();\n      this.initDoubleClickSimulation();\n      this.mouseMoveHandler = this.mouseMoveHandler.bind(this);\n    },\n\n    onDeselect: function() {\n      this.isEditing && this.exitEditing();\n      this.selected = false;\n    },\n\n    /**\n     * Initializes \"added\" event handler\n     */\n    initAddedHandler: function() {\n      var _this = this;\n      this.on('added', function() {\n        var canvas = _this.canvas;\n        if (canvas) {\n          if (!canvas._hasITextHandlers) {\n            canvas._hasITextHandlers = true;\n            _this._initCanvasHandlers(canvas);\n          }\n          canvas._iTextInstances = canvas._iTextInstances || [];\n          canvas._iTextInstances.push(_this);\n        }\n      });\n    },\n\n    initRemovedHandler: function() {\n      var _this = this;\n      this.on('removed', function() {\n        var canvas = _this.canvas;\n        if (canvas) {\n          canvas._iTextInstances = canvas._iTextInstances || [];\n          fabric.util.removeFromArray(canvas._iTextInstances, _this);\n          if (canvas._iTextInstances.length === 0) {\n            canvas._hasITextHandlers = false;\n            _this._removeCanvasHandlers(canvas);\n          }\n        }\n      });\n    },\n\n    /**\n     * register canvas event to manage exiting on other instances\n     * @private\n     */\n    _initCanvasHandlers: function(canvas) {\n      canvas._mouseUpITextHandler = function() {\n        if (canvas._iTextInstances) {\n          canvas._iTextInstances.forEach(function(obj) {\n            obj.__isMousedown = false;\n          });\n        }\n      };\n      canvas.on('mouse:up', canvas._mouseUpITextHandler);\n    },\n\n    /**\n     * remove canvas event to manage exiting on other instances\n     * @private\n     */\n    _removeCanvasHandlers: function(canvas) {\n      canvas.off('mouse:up', canvas._mouseUpITextHandler);\n    },\n\n    /**\n     * @private\n     */\n    _tick: function() {\n      this._currentTickState = this._animateCursor(this, 1, this.cursorDuration, '_onTickComplete');\n    },\n\n    /**\n     * @private\n     */\n    _animateCursor: function(obj, targetOpacity, duration, completeMethod) {\n\n      var tickState;\n\n      tickState = {\n        isAborted: false,\n        abort: function() {\n          this.isAborted = true;\n        },\n      };\n\n      obj.animate('_currentCursorOpacity', targetOpacity, {\n        duration: duration,\n        onComplete: function() {\n          if (!tickState.isAborted) {\n            obj[completeMethod]();\n          }\n        },\n        onChange: function() {\n          // we do not want to animate a selection, only cursor\n          if (obj.canvas && obj.selectionStart === obj.selectionEnd) {\n            obj.renderCursorOrSelection();\n          }\n        },\n        abort: function() {\n          return tickState.isAborted;\n        }\n      });\n      return tickState;\n    },\n\n    /**\n     * @private\n     */\n    _onTickComplete: function() {\n\n      var _this = this;\n\n      if (this._cursorTimeout1) {\n        clearTimeout(this._cursorTimeout1);\n      }\n      this._cursorTimeout1 = setTimeout(function() {\n        _this._currentTickCompleteState = _this._animateCursor(_this, 0, this.cursorDuration / 2, '_tick');\n      }, 100);\n    },\n\n    /**\n     * Initializes delayed cursor\n     */\n    initDelayedCursor: function(restart) {\n      var _this = this,\n          delay = restart ? 0 : this.cursorDelay;\n\n      this.abortCursorAnimation();\n      this._currentCursorOpacity = 1;\n      this._cursorTimeout2 = setTimeout(function() {\n        _this._tick();\n      }, delay);\n    },\n\n    /**\n     * Aborts cursor animation and clears all timeouts\n     */\n    abortCursorAnimation: function() {\n      var shouldClear = this._currentTickState || this._currentTickCompleteState,\n          canvas = this.canvas;\n      this._currentTickState && this._currentTickState.abort();\n      this._currentTickCompleteState && this._currentTickCompleteState.abort();\n\n      clearTimeout(this._cursorTimeout1);\n      clearTimeout(this._cursorTimeout2);\n\n      this._currentCursorOpacity = 0;\n      // to clear just itext area we need to transform the context\n      // it may not be worth it\n      if (shouldClear && canvas) {\n        canvas.clearContext(canvas.contextTop || canvas.contextContainer);\n      }\n\n    },\n\n    /**\n     * Selects entire text\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    selectAll: function() {\n      this.selectionStart = 0;\n      this.selectionEnd = this._text.length;\n      this._fireSelectionChanged();\n      this._updateTextarea();\n      return this;\n    },\n\n    /**\n     * Returns selected text\n     * @return {String}\n     */\n    getSelectedText: function() {\n      return this._text.slice(this.selectionStart, this.selectionEnd).join('');\n    },\n\n    /**\n     * Find new selection index representing start of current word according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findWordBoundaryLeft: function(startFrom) {\n      var offset = 0, index = startFrom - 1;\n\n      // remove space before cursor first\n      if (this._reSpace.test(this._text[index])) {\n        while (this._reSpace.test(this._text[index])) {\n          offset++;\n          index--;\n        }\n      }\n      while (/\\S/.test(this._text[index]) && index > -1) {\n        offset++;\n        index--;\n      }\n\n      return startFrom - offset;\n    },\n\n    /**\n     * Find new selection index representing end of current word according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findWordBoundaryRight: function(startFrom) {\n      var offset = 0, index = startFrom;\n\n      // remove space after cursor first\n      if (this._reSpace.test(this._text[index])) {\n        while (this._reSpace.test(this._text[index])) {\n          offset++;\n          index++;\n        }\n      }\n      while (/\\S/.test(this._text[index]) && index < this._text.length) {\n        offset++;\n        index++;\n      }\n\n      return startFrom + offset;\n    },\n\n    /**\n     * Find new selection index representing start of current line according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findLineBoundaryLeft: function(startFrom) {\n      var offset = 0, index = startFrom - 1;\n\n      while (!/\\n/.test(this._text[index]) && index > -1) {\n        offset++;\n        index--;\n      }\n\n      return startFrom - offset;\n    },\n\n    /**\n     * Find new selection index representing end of current line according to current selection index\n     * @param {Number} startFrom Current selection index\n     * @return {Number} New selection index\n     */\n    findLineBoundaryRight: function(startFrom) {\n      var offset = 0, index = startFrom;\n\n      while (!/\\n/.test(this._text[index]) && index < this._text.length) {\n        offset++;\n        index++;\n      }\n\n      return startFrom + offset;\n    },\n\n    /**\n     * Finds index corresponding to beginning or end of a word\n     * @param {Number} selectionStart Index of a character\n     * @param {Number} direction 1 or -1\n     * @return {Number} Index of the beginning or end of a word\n     */\n    searchWordBoundary: function(selectionStart, direction) {\n      var text = this._text,\n          index     = this._reSpace.test(text[selectionStart]) ? selectionStart - 1 : selectionStart,\n          _char     = text[index],\n          // wrong\n          reNonWord = fabric.reNonWord;\n\n      while (!reNonWord.test(_char) && index > 0 && index < text.length) {\n        index += direction;\n        _char = text[index];\n      }\n      if (reNonWord.test(_char)) {\n        index += direction === 1 ? 0 : 1;\n      }\n      return index;\n    },\n\n    /**\n     * Selects a word based on the index\n     * @param {Number} selectionStart Index of a character\n     */\n    selectWord: function(selectionStart) {\n      selectionStart = selectionStart || this.selectionStart;\n      var newSelectionStart = this.searchWordBoundary(selectionStart, -1), /* search backwards */\n          newSelectionEnd = this.searchWordBoundary(selectionStart, 1); /* search forward */\n\n      this.selectionStart = newSelectionStart;\n      this.selectionEnd = newSelectionEnd;\n      this._fireSelectionChanged();\n      this._updateTextarea();\n      this.renderCursorOrSelection();\n    },\n\n    /**\n     * Selects a line based on the index\n     * @param {Number} selectionStart Index of a character\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    selectLine: function(selectionStart) {\n      selectionStart = selectionStart || this.selectionStart;\n      var newSelectionStart = this.findLineBoundaryLeft(selectionStart),\n          newSelectionEnd = this.findLineBoundaryRight(selectionStart);\n\n      this.selectionStart = newSelectionStart;\n      this.selectionEnd = newSelectionEnd;\n      this._fireSelectionChanged();\n      this._updateTextarea();\n      return this;\n    },\n\n    /**\n     * Enters editing state\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    enterEditing: function(e) {\n      if (this.isEditing || !this.editable) {\n        return;\n      }\n\n      if (this.canvas) {\n        this.canvas.calcOffset();\n        this.exitEditingOnOthers(this.canvas);\n      }\n\n      this.isEditing = true;\n\n      this.initHiddenTextarea(e);\n      this.hiddenTextarea.focus();\n      this.hiddenTextarea.value = this.text;\n      this._updateTextarea();\n      this._saveEditingProps();\n      this._setEditingProps();\n      this._textBeforeEdit = this.text;\n\n      this._tick();\n      this.fire('editing:entered');\n      this._fireSelectionChanged();\n      if (!this.canvas) {\n        return this;\n      }\n      this.canvas.fire('text:editing:entered', { target: this });\n      this.initMouseMoveHandler();\n      this.canvas.requestRenderAll();\n      return this;\n    },\n\n    exitEditingOnOthers: function(canvas) {\n      if (canvas._iTextInstances) {\n        canvas._iTextInstances.forEach(function(obj) {\n          obj.selected = false;\n          if (obj.isEditing) {\n            obj.exitEditing();\n          }\n        });\n      }\n    },\n\n    /**\n     * Initializes \"mousemove\" event handler\n     */\n    initMouseMoveHandler: function() {\n      this.canvas.on('mouse:move', this.mouseMoveHandler);\n    },\n\n    /**\n     * @private\n     */\n    mouseMoveHandler: function(options) {\n      if (!this.__isMousedown || !this.isEditing) {\n        return;\n      }\n\n      var newSelectionStart = this.getSelectionStartFromPointer(options.e),\n          currentStart = this.selectionStart,\n          currentEnd = this.selectionEnd;\n      if (\n        (newSelectionStart !== this.__selectionStartOnMouseDown || currentStart === currentEnd)\n        &&\n        (currentStart === newSelectionStart || currentEnd === newSelectionStart)\n      ) {\n        return;\n      }\n      if (newSelectionStart > this.__selectionStartOnMouseDown) {\n        this.selectionStart = this.__selectionStartOnMouseDown;\n        this.selectionEnd = newSelectionStart;\n      }\n      else {\n        this.selectionStart = newSelectionStart;\n        this.selectionEnd = this.__selectionStartOnMouseDown;\n      }\n      if (this.selectionStart !== currentStart || this.selectionEnd !== currentEnd) {\n        this.restartCursorIfNeeded();\n        this._fireSelectionChanged();\n        this._updateTextarea();\n        this.renderCursorOrSelection();\n      }\n    },\n\n    /**\n     * @private\n     */\n    _setEditingProps: function() {\n      this.hoverCursor = 'text';\n\n      if (this.canvas) {\n        this.canvas.defaultCursor = this.canvas.moveCursor = 'text';\n      }\n\n      this.borderColor = this.editingBorderColor;\n      this.hasControls = this.selectable = false;\n      this.lockMovementX = this.lockMovementY = true;\n    },\n\n    /**\n     * convert from textarea to grapheme indexes\n     */\n    fromStringToGraphemeSelection: function(start, end, text) {\n      var smallerTextStart = text.slice(0, start),\n          graphemeStart = fabric.util.string.graphemeSplit(smallerTextStart).length;\n      if (start === end) {\n        return { selectionStart: graphemeStart, selectionEnd: graphemeStart };\n      }\n      var smallerTextEnd = text.slice(start, end),\n          graphemeEnd = fabric.util.string.graphemeSplit(smallerTextEnd).length;\n      return { selectionStart: graphemeStart, selectionEnd: graphemeStart + graphemeEnd };\n    },\n\n    /**\n     * convert from fabric to textarea values\n     */\n    fromGraphemeToStringSelection: function(start, end, _text) {\n      var smallerTextStart = _text.slice(0, start),\n          graphemeStart = smallerTextStart.join('').length;\n      if (start === end) {\n        return { selectionStart: graphemeStart, selectionEnd: graphemeStart };\n      }\n      var smallerTextEnd = _text.slice(start, end),\n          graphemeEnd = smallerTextEnd.join('').length;\n      return { selectionStart: graphemeStart, selectionEnd: graphemeStart + graphemeEnd };\n    },\n\n    /**\n     * @private\n     */\n    _updateTextarea: function() {\n      this.cursorOffsetCache = { };\n      if (!this.hiddenTextarea) {\n        return;\n      }\n      if (!this.inCompositionMode) {\n        var newSelection = this.fromGraphemeToStringSelection(this.selectionStart, this.selectionEnd, this._text);\n        this.hiddenTextarea.selectionStart = newSelection.selectionStart;\n        this.hiddenTextarea.selectionEnd = newSelection.selectionEnd;\n      }\n      this.updateTextareaPosition();\n    },\n\n    /**\n     * @private\n     */\n    updateFromTextArea: function() {\n      if (!this.hiddenTextarea) {\n        return;\n      }\n      this.cursorOffsetCache = { };\n      this.text = this.hiddenTextarea.value;\n      if (this._shouldClearDimensionCache()) {\n        this.initDimensions();\n        this.setCoords();\n      }\n      var newSelection = this.fromStringToGraphemeSelection(\n        this.hiddenTextarea.selectionStart, this.hiddenTextarea.selectionEnd, this.hiddenTextarea.value);\n      this.selectionEnd = this.selectionStart = newSelection.selectionEnd;\n      if (!this.inCompositionMode) {\n        this.selectionStart = newSelection.selectionStart;\n      }\n      this.updateTextareaPosition();\n    },\n\n    /**\n     * @private\n     */\n    updateTextareaPosition: function() {\n      if (this.selectionStart === this.selectionEnd) {\n        var style = this._calcTextareaPosition();\n        this.hiddenTextarea.style.left = style.left;\n        this.hiddenTextarea.style.top = style.top;\n      }\n    },\n\n    /**\n     * @private\n     * @return {Object} style contains style for hiddenTextarea\n     */\n    _calcTextareaPosition: function() {\n      if (!this.canvas) {\n        return { x: 1, y: 1 };\n      }\n      var desiredPosition = this.inCompositionMode ? this.compositionStart : this.selectionStart,\n          boundaries = this._getCursorBoundaries(desiredPosition),\n          cursorLocation = this.get2DCursorLocation(desiredPosition),\n          lineIndex = cursorLocation.lineIndex,\n          charIndex = cursorLocation.charIndex,\n          charHeight = this.getValueOfPropertyAt(lineIndex, charIndex, 'fontSize') * this.lineHeight,\n          leftOffset = boundaries.leftOffset,\n          m = this.calcTransformMatrix(),\n          p = {\n            x: boundaries.left + leftOffset,\n            y: boundaries.top + boundaries.topOffset + charHeight\n          },\n          retinaScaling = this.canvas.getRetinaScaling(),\n          upperCanvas = this.canvas.upperCanvasEl,\n          upperCanvasWidth = upperCanvas.width / retinaScaling,\n          upperCanvasHeight = upperCanvas.height / retinaScaling,\n          maxWidth = upperCanvasWidth - charHeight,\n          maxHeight = upperCanvasHeight - charHeight,\n          scaleX = upperCanvas.clientWidth / upperCanvasWidth,\n          scaleY = upperCanvas.clientHeight / upperCanvasHeight;\n\n      p = fabric.util.transformPoint(p, m);\n      p = fabric.util.transformPoint(p, this.canvas.viewportTransform);\n      p.x *= scaleX;\n      p.y *= scaleY;\n      if (p.x < 0) {\n        p.x = 0;\n      }\n      if (p.x > maxWidth) {\n        p.x = maxWidth;\n      }\n      if (p.y < 0) {\n        p.y = 0;\n      }\n      if (p.y > maxHeight) {\n        p.y = maxHeight;\n      }\n\n      // add canvas offset on document\n      p.x += this.canvas._offset.left;\n      p.y += this.canvas._offset.top;\n\n      return { left: p.x + 'px', top: p.y + 'px', fontSize: charHeight + 'px', charHeight: charHeight };\n    },\n\n    /**\n     * @private\n     */\n    _saveEditingProps: function() {\n      this._savedProps = {\n        hasControls: this.hasControls,\n        borderColor: this.borderColor,\n        lockMovementX: this.lockMovementX,\n        lockMovementY: this.lockMovementY,\n        hoverCursor: this.hoverCursor,\n        selectable: this.selectable,\n        defaultCursor: this.canvas && this.canvas.defaultCursor,\n        moveCursor: this.canvas && this.canvas.moveCursor\n      };\n    },\n\n    /**\n     * @private\n     */\n    _restoreEditingProps: function() {\n      if (!this._savedProps) {\n        return;\n      }\n\n      this.hoverCursor = this._savedProps.hoverCursor;\n      this.hasControls = this._savedProps.hasControls;\n      this.borderColor = this._savedProps.borderColor;\n      this.selectable = this._savedProps.selectable;\n      this.lockMovementX = this._savedProps.lockMovementX;\n      this.lockMovementY = this._savedProps.lockMovementY;\n\n      if (this.canvas) {\n        this.canvas.defaultCursor = this._savedProps.defaultCursor;\n        this.canvas.moveCursor = this._savedProps.moveCursor;\n      }\n    },\n\n    /**\n     * Exits from editing state\n     * @return {fabric.IText} thisArg\n     * @chainable\n     */\n    exitEditing: function() {\n      var isTextChanged = (this._textBeforeEdit !== this.text);\n      var hiddenTextarea = this.hiddenTextarea;\n      this.selected = false;\n      this.isEditing = false;\n\n      this.selectionEnd = this.selectionStart;\n\n      if (hiddenTextarea) {\n        hiddenTextarea.blur && hiddenTextarea.blur();\n        hiddenTextarea.parentNode && hiddenTextarea.parentNode.removeChild(hiddenTextarea);\n      }\n      this.hiddenTextarea = null;\n      this.abortCursorAnimation();\n      this._restoreEditingProps();\n      this._currentCursorOpacity = 0;\n      if (this._shouldClearDimensionCache()) {\n        this.initDimensions();\n        this.setCoords();\n      }\n      this.fire('editing:exited');\n      isTextChanged && this.fire('modified');\n      if (this.canvas) {\n        this.canvas.off('mouse:move', this.mouseMoveHandler);\n        this.canvas.fire('text:editing:exited', { target: this });\n        isTextChanged && this.canvas.fire('object:modified', { target: this });\n      }\n      return this;\n    },\n\n    /**\n     * @private\n     */\n    _removeExtraneousStyles: function() {\n      for (var prop in this.styles) {\n        if (!this._textLines[prop]) {\n          delete this.styles[prop];\n        }\n      }\n    },\n\n    /**\n     * remove and reflow a style block from start to end.\n     * @param {Number} start linear start position for removal (included in removal)\n     * @param {Number} end linear end position for removal ( excluded from removal )\n     */\n    removeStyleFromTo: function(start, end) {\n      var cursorStart = this.get2DCursorLocation(start, true),\n          cursorEnd = this.get2DCursorLocation(end, true),\n          lineStart = cursorStart.lineIndex,\n          charStart = cursorStart.charIndex,\n          lineEnd = cursorEnd.lineIndex,\n          charEnd = cursorEnd.charIndex,\n          i, styleObj;\n      if (lineStart !== lineEnd) {\n        // step1 remove the trailing of lineStart\n        if (this.styles[lineStart]) {\n          for (i = charStart; i < this._unwrappedTextLines[lineStart].length; i++) {\n            delete this.styles[lineStart][i];\n          }\n        }\n        // step2 move the trailing of lineEnd to lineStart if needed\n        if (this.styles[lineEnd]) {\n          for (i = charEnd; i < this._unwrappedTextLines[lineEnd].length; i++) {\n            styleObj = this.styles[lineEnd][i];\n            if (styleObj) {\n              this.styles[lineStart] || (this.styles[lineStart] = { });\n              this.styles[lineStart][charStart + i - charEnd] = styleObj;\n            }\n          }\n        }\n        // step3 detects lines will be completely removed.\n        for (i = lineStart + 1; i <= lineEnd; i++) {\n          delete this.styles[i];\n        }\n        // step4 shift remaining lines.\n        this.shiftLineStyles(lineEnd, lineStart - lineEnd);\n      }\n      else {\n        // remove and shift left on the same line\n        if (this.styles[lineStart]) {\n          styleObj = this.styles[lineStart];\n          var diff = charEnd - charStart, numericChar, _char;\n          for (i = charStart; i < charEnd; i++) {\n            delete styleObj[i];\n          }\n          for (_char in this.styles[lineStart]) {\n            numericChar = parseInt(_char, 10);\n            if (numericChar >= charEnd) {\n              styleObj[numericChar - diff] = styleObj[_char];\n              delete styleObj[_char];\n            }\n          }\n        }\n      }\n    },\n\n    /**\n     * Shifts line styles up or down\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} offset Can any number?\n     */\n    shiftLineStyles: function(lineIndex, offset) {\n      // shift all line styles by offset upward or downward\n      // do not clone deep. we need new array, not new style objects\n      var clonedStyles = clone(this.styles);\n      for (var line in this.styles) {\n        var numericLine = parseInt(line, 10);\n        if (numericLine > lineIndex) {\n          this.styles[numericLine + offset] = clonedStyles[numericLine];\n          if (!clonedStyles[numericLine - offset]) {\n            delete this.styles[numericLine];\n          }\n        }\n      }\n    },\n\n    restartCursorIfNeeded: function() {\n      if (!this._currentTickState || this._currentTickState.isAborted\n        || !this._currentTickCompleteState || this._currentTickCompleteState.isAborted\n      ) {\n        this.initDelayedCursor();\n      }\n    },\n\n    /**\n     * Handle insertion of more consecutive style lines for when one or more\n     * newlines gets added to the text. Since current style needs to be shifted\n     * first we shift the current style of the number lines needed, then we add\n     * new lines from the last to the first.\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} charIndex Index of a char\n     * @param {Number} qty number of lines to add\n     * @param {Array} copiedStyle Array of objects styles\n     */\n    insertNewlineStyleObject: function(lineIndex, charIndex, qty, copiedStyle) {\n      var currentCharStyle,\n          newLineStyles = {},\n          somethingAdded = false,\n          isEndOfLine = this._unwrappedTextLines[lineIndex].length === charIndex;\n\n      qty || (qty = 1);\n      this.shiftLineStyles(lineIndex, qty);\n      if (this.styles[lineIndex]) {\n        currentCharStyle = this.styles[lineIndex][charIndex === 0 ? charIndex : charIndex - 1];\n      }\n      // we clone styles of all chars\n      // after cursor onto the current line\n      for (var index in this.styles[lineIndex]) {\n        var numIndex = parseInt(index, 10);\n        if (numIndex >= charIndex) {\n          somethingAdded = true;\n          newLineStyles[numIndex - charIndex] = this.styles[lineIndex][index];\n          // remove lines from the previous line since they're on a new line now\n          if (!(isEndOfLine && charIndex === 0)) {\n            delete this.styles[lineIndex][index];\n          }\n        }\n      }\n      var styleCarriedOver = false;\n      if (somethingAdded && !isEndOfLine) {\n        // if is end of line, the extra style we copied\n        // is probably not something we want\n        this.styles[lineIndex + qty] = newLineStyles;\n        styleCarriedOver = true;\n      }\n      if (styleCarriedOver) {\n        // skip the last line of since we already prepared it.\n        qty--;\n      }\n      // for the all the lines or all the other lines\n      // we clone current char style onto the next (otherwise empty) line\n      while (qty > 0) {\n        if (copiedStyle && copiedStyle[qty - 1]) {\n          this.styles[lineIndex + qty] = { 0: clone(copiedStyle[qty - 1]) };\n        }\n        else if (currentCharStyle) {\n          this.styles[lineIndex + qty] = { 0: clone(currentCharStyle) };\n        }\n        else {\n          delete this.styles[lineIndex + qty];\n        }\n        qty--;\n      }\n      this._forceClearCache = true;\n    },\n\n    /**\n     * Inserts style object for a given line/char index\n     * @param {Number} lineIndex Index of a line\n     * @param {Number} charIndex Index of a char\n     * @param {Number} quantity number Style object to insert, if given\n     * @param {Array} copiedStyle array of style objects\n     */\n    insertCharStyleObject: function(lineIndex, charIndex, quantity, copiedStyle) {\n      if (!this.styles) {\n        this.styles = {};\n      }\n      var currentLineStyles       = this.styles[lineIndex],\n          currentLineStylesCloned = currentLineStyles ? clone(currentLineStyles) : {};\n\n      quantity || (quantity = 1);\n      // shift all char styles by quantity forward\n      // 0,1,2,3 -> (charIndex=2) -> 0,1,3,4 -> (insert 2) -> 0,1,2,3,4\n      for (var index in currentLineStylesCloned) {\n        var numericIndex = parseInt(index, 10);\n        if (numericIndex >= charIndex) {\n          currentLineStyles[numericIndex + quantity] = currentLineStylesCloned[numericIndex];\n          // only delete the style if there was nothing moved there\n          if (!currentLineStylesCloned[numericIndex - quantity]) {\n            delete currentLineStyles[numericIndex];\n          }\n        }\n      }\n      this._forceClearCache = true;\n      if (copiedStyle) {\n        while (quantity--) {\n          if (!Object.keys(copiedStyle[quantity]).length) {\n            continue;\n          }\n          if (!this.styles[lineIndex]) {\n            this.styles[lineIndex] = {};\n          }\n          this.styles[lineIndex][charIndex + quantity] = clone(copiedStyle[quantity]);\n        }\n        return;\n      }\n      if (!currentLineStyles) {\n        return;\n      }\n      var newStyle = currentLineStyles[charIndex ? charIndex - 1 : 1];\n      while (newStyle && quantity--) {\n        this.styles[lineIndex][charIndex + quantity] = clone(newStyle);\n      }\n    },\n\n    /**\n     * Inserts style object(s)\n     * @param {Array} insertedText Characters at the location where style is inserted\n     * @param {Number} start cursor index for inserting style\n     * @param {Array} [copiedStyle] array of style objects to insert.\n     */\n    insertNewStyleBlock: function(insertedText, start, copiedStyle) {\n      var cursorLoc = this.get2DCursorLocation(start, true),\n          addedLines = [0], linesLength = 0;\n      // get an array of how many char per lines are being added.\n      for (var i = 0; i < insertedText.length; i++) {\n        if (insertedText[i] === '\\n') {\n          linesLength++;\n          addedLines[linesLength] = 0;\n        }\n        else {\n          addedLines[linesLength]++;\n        }\n      }\n      // for the first line copy the style from the current char position.\n      if (addedLines[0] > 0) {\n        this.insertCharStyleObject(cursorLoc.lineIndex, cursorLoc.charIndex, addedLines[0], copiedStyle);\n        copiedStyle = copiedStyle && copiedStyle.slice(addedLines[0] + 1);\n      }\n      linesLength && this.insertNewlineStyleObject(\n        cursorLoc.lineIndex, cursorLoc.charIndex + addedLines[0], linesLength);\n      for (var i = 1; i < linesLength; i++) {\n        if (addedLines[i] > 0) {\n          this.insertCharStyleObject(cursorLoc.lineIndex + i, 0, addedLines[i], copiedStyle);\n        }\n        else if (copiedStyle) {\n          this.styles[cursorLoc.lineIndex + i][0] = copiedStyle[0];\n        }\n        copiedStyle = copiedStyle && copiedStyle.slice(addedLines[i] + 1);\n      }\n      // we use i outside the loop to get it like linesLength\n      if (addedLines[i] > 0) {\n        this.insertCharStyleObject(cursorLoc.lineIndex + i, 0, addedLines[i], copiedStyle);\n      }\n    },\n\n    /**\n     * Set the selectionStart and selectionEnd according to the new position of cursor\n     * mimic the key - mouse navigation when shift is pressed.\n     */\n    setSelectionStartEndWithShift: function(start, end, newSelection) {\n      if (newSelection <= start) {\n        if (end === start) {\n          this._selectionDirection = 'left';\n        }\n        else if (this._selectionDirection === 'right') {\n          this._selectionDirection = 'left';\n          this.selectionEnd = start;\n        }\n        this.selectionStart = newSelection;\n      }\n      else if (newSelection > start && newSelection < end) {\n        if (this._selectionDirection === 'right') {\n          this.selectionEnd = newSelection;\n        }\n        else {\n          this.selectionStart = newSelection;\n        }\n      }\n      else {\n        // newSelection is > selection start and end\n        if (end === start) {\n          this._selectionDirection = 'right';\n        }\n        else if (this._selectionDirection === 'left') {\n          this._selectionDirection = 'right';\n          this.selectionStart = end;\n        }\n        this.selectionEnd = newSelection;\n      }\n    },\n\n    setSelectionInBoundaries: function() {\n      var length = this.text.length;\n      if (this.selectionStart > length) {\n        this.selectionStart = length;\n      }\n      else if (this.selectionStart < 0) {\n        this.selectionStart = 0;\n      }\n      if (this.selectionEnd > length) {\n        this.selectionEnd = length;\n      }\n      else if (this.selectionEnd < 0) {\n        this.selectionEnd = 0;\n      }\n    }\n  });\n})();\n\n\nfabric.util.object.extend(fabric.IText.prototype, /** @lends fabric.IText.prototype */ {\n  /**\n   * Initializes \"dbclick\" event handler\n   */\n  initDoubleClickSimulation: function() {\n\n    // for double click\n    this.__lastClickTime = +new Date();\n\n    // for triple click\n    this.__lastLastClickTime = +new Date();\n\n    this.__lastPointer = { };\n\n    this.on('mousedown', this.onMouseDown);\n  },\n\n  /**\n   * Default event handler to simulate triple click\n   * @private\n   */\n  onMouseDown: function(options) {\n    if (!this.canvas) {\n      return;\n    }\n    this.__newClickTime = +new Date();\n    var newPointer = options.pointer;\n    if (this.isTripleClick(newPointer)) {\n      this.fire('tripleclick', options);\n      this._stopEvent(options.e);\n    }\n    this.__lastLastClickTime = this.__lastClickTime;\n    this.__lastClickTime = this.__newClickTime;\n    this.__lastPointer = newPointer;\n    this.__lastIsEditing = this.isEditing;\n    this.__lastSelected = this.selected;\n  },\n\n  isTripleClick: function(newPointer) {\n    return this.__newClickTime - this.__lastClickTime < 500 &&\n        this.__lastClickTime - this.__lastLastClickTime < 500 &&\n        this.__lastPointer.x === newPointer.x &&\n        this.__lastPointer.y === newPointer.y;\n  },\n\n  /**\n   * @private\n   */\n  _stopEvent: function(e) {\n    e.preventDefault && e.preventDefault();\n    e.stopPropagation && e.stopPropagation();\n  },\n\n  /**\n   * Initializes event handlers related to cursor or selection\n   */\n  initCursorSelectionHandlers: function() {\n    this.initMousedownHandler();\n    this.initMouseupHandler();\n    this.initClicks();\n  },\n\n  /**\n   * Default handler for double click, select a word\n   */\n  doubleClickHandler: function(options) {\n    if (!this.isEditing) {\n      return;\n    }\n    this.selectWord(this.getSelectionStartFromPointer(options.e));\n  },\n\n  /**\n   * Default handler for triple click, select a line\n   */\n  tripleClickHandler: function(options) {\n    if (!this.isEditing) {\n      return;\n    }\n    this.selectLine(this.getSelectionStartFromPointer(options.e));\n  },\n\n  /**\n   * Initializes double and triple click event handlers\n   */\n  initClicks: function() {\n    this.on('mousedblclick', this.doubleClickHandler);\n    this.on('tripleclick', this.tripleClickHandler);\n  },\n\n  /**\n   * Default event handler for the basic functionalities needed on _mouseDown\n   * can be overridden to do something different.\n   * Scope of this implementation is: find the click position, set selectionStart\n   * find selectionEnd, initialize the drawing of either cursor or selection area\n   * initializing a mousedDown on a text area will cancel fabricjs knowledge of\n   * current compositionMode. It will be set to false.\n   */\n  _mouseDownHandler: function(options) {\n    if (!this.canvas || !this.editable || (options.e.button && options.e.button !== 1)) {\n      return;\n    }\n\n    this.__isMousedown = true;\n\n    if (this.selected) {\n      this.inCompositionMode = false;\n      this.setCursorByClick(options.e);\n    }\n\n    if (this.isEditing) {\n      this.__selectionStartOnMouseDown = this.selectionStart;\n      if (this.selectionStart === this.selectionEnd) {\n        this.abortCursorAnimation();\n      }\n      this.renderCursorOrSelection();\n    }\n  },\n\n  /**\n   * Default event handler for the basic functionalities needed on mousedown:before\n   * can be overridden to do something different.\n   * Scope of this implementation is: verify the object is already selected when mousing down\n   */\n  _mouseDownHandlerBefore: function(options) {\n    if (!this.canvas || !this.editable || (options.e.button && options.e.button !== 1)) {\n      return;\n    }\n    // we want to avoid that an object that was selected and then becomes unselectable,\n    // may trigger editing mode in some way.\n    this.selected = this === this.canvas._activeObject;\n  },\n\n  /**\n   * Initializes \"mousedown\" event handler\n   */\n  initMousedownHandler: function() {\n    this.on('mousedown', this._mouseDownHandler);\n    this.on('mousedown:before', this._mouseDownHandlerBefore);\n  },\n\n  /**\n   * Initializes \"mouseup\" event handler\n   */\n  initMouseupHandler: function() {\n    this.on('mouseup', this.mouseUpHandler);\n  },\n\n  /**\n   * standard handler for mouse up, overridable\n   * @private\n   */\n  mouseUpHandler: function(options) {\n    this.__isMousedown = false;\n    if (!this.editable || this.group ||\n      (options.transform && options.transform.actionPerformed) ||\n      (options.e.button && options.e.button !== 1)) {\n      return;\n    }\n\n    if (this.canvas) {\n      var currentActive = this.canvas._activeObject;\n      if (currentActive && currentActive !== this) {\n        // avoid running this logic when there is an active object\n        // this because is possible with shift click and fast clicks,\n        // to rapidly deselect and reselect this object and trigger an enterEdit\n        return;\n      }\n    }\n\n    if (this.__lastSelected && !this.__corner) {\n      this.selected = false;\n      this.__lastSelected = false;\n      this.enterEditing(options.e);\n      if (this.selectionStart === this.selectionEnd) {\n        this.initDelayedCursor(true);\n      }\n      else {\n        this.renderCursorOrSelection();\n      }\n    }\n    else {\n      this.selected = true;\n    }\n  },\n\n  /**\n   * Changes cursor location in a text depending on passed pointer (x/y) object\n   * @param {Event} e Event object\n   */\n  setCursorByClick: function(e) {\n    var newSelection = this.getSelectionStartFromPointer(e),\n        start = this.selectionStart, end = this.selectionEnd;\n    if (e.shiftKey) {\n      this.setSelectionStartEndWithShift(start, end, newSelection);\n    }\n    else {\n      this.selectionStart = newSelection;\n      this.selectionEnd = newSelection;\n    }\n    if (this.isEditing) {\n      this._fireSelectionChanged();\n      this._updateTextarea();\n    }\n  },\n\n  /**\n   * Returns index of a character corresponding to where an object was clicked\n   * @param {Event} e Event object\n   * @return {Number} Index of a character\n   */\n  getSelectionStartFromPointer: function(e) {\n    var mouseOffset = this.getLocalPointer(e),\n        prevWidth = 0,\n        width = 0,\n        height = 0,\n        charIndex = 0,\n        lineIndex = 0,\n        lineLeftOffset,\n        line;\n\n    for (var i = 0, len = this._textLines.length; i < len; i++) {\n      if (height <= mouseOffset.y) {\n        height += this.getHeightOfLine(i) * this.scaleY;\n        lineIndex = i;\n        if (i > 0) {\n          charIndex += this._textLines[i - 1].length + this.missingNewlineOffset(i - 1);\n        }\n      }\n      else {\n        break;\n      }\n    }\n    lineLeftOffset = this._getLineLeftOffset(lineIndex);\n    width = lineLeftOffset * this.scaleX;\n    line = this._textLines[lineIndex];\n    for (var j = 0, jlen = line.length; j < jlen; j++) {\n      prevWidth = width;\n      // i removed something about flipX here, check.\n      width += this.__charBounds[lineIndex][j].kernedWidth * this.scaleX;\n      if (width <= mouseOffset.x) {\n        charIndex++;\n      }\n      else {\n        break;\n      }\n    }\n    return this._getNewSelectionStartFromOffset(mouseOffset, prevWidth, width, charIndex, jlen);\n  },\n\n  /**\n   * @private\n   */\n  _getNewSelectionStartFromOffset: function(mouseOffset, prevWidth, width, index, jlen) {\n    // we need Math.abs because when width is after the last char, the offset is given as 1, while is 0\n    var distanceBtwLastCharAndCursor = mouseOffset.x - prevWidth,\n        distanceBtwNextCharAndCursor = width - mouseOffset.x,\n        offset = distanceBtwNextCharAndCursor > distanceBtwLastCharAndCursor ||\n          distanceBtwNextCharAndCursor < 0 ? 0 : 1,\n        newSelectionStart = index + offset;\n    // if object is horizontally flipped, mirror cursor location from the end\n    if (this.flipX) {\n      newSelectionStart = jlen - newSelectionStart;\n    }\n\n    if (newSelectionStart > this._text.length) {\n      newSelectionStart = this._text.length;\n    }\n\n    return newSelectionStart;\n  }\n});\n\n\nfabric.util.object.extend(fabric.IText.prototype, /** @lends fabric.IText.prototype */ {\n\n  /**\n   * Initializes hidden textarea (needed to bring up keyboard in iOS)\n   */\n  initHiddenTextarea: function() {\n    this.hiddenTextarea = fabric.document.createElement('textarea');\n    this.hiddenTextarea.setAttribute('autocapitalize', 'off');\n    this.hiddenTextarea.setAttribute('autocorrect', 'off');\n    this.hiddenTextarea.setAttribute('autocomplete', 'off');\n    this.hiddenTextarea.setAttribute('spellcheck', 'false');\n    this.hiddenTextarea.setAttribute('data-fabric-hiddentextarea', '');\n    this.hiddenTextarea.setAttribute('wrap', 'off');\n    var style = this._calcTextareaPosition();\n    // line-height: 1px; was removed from the style to fix this:\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=870966\n    this.hiddenTextarea.style.cssText = 'position: absolute; top: ' + style.top +\n    '; left: ' + style.left + '; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px;' +\n    ' paddingtop: ' + style.fontSize + ';';\n    fabric.document.body.appendChild(this.hiddenTextarea);\n\n    fabric.util.addListener(this.hiddenTextarea, 'keydown', this.onKeyDown.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'keyup', this.onKeyUp.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'input', this.onInput.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'copy', this.copy.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'cut', this.copy.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'paste', this.paste.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'compositionstart', this.onCompositionStart.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'compositionupdate', this.onCompositionUpdate.bind(this));\n    fabric.util.addListener(this.hiddenTextarea, 'compositionend', this.onCompositionEnd.bind(this));\n\n    if (!this._clickHandlerInitialized && this.canvas) {\n      fabric.util.addListener(this.canvas.upperCanvasEl, 'click', this.onClick.bind(this));\n      this._clickHandlerInitialized = true;\n    }\n  },\n\n  /**\n   * For functionalities on keyDown\n   * Map a special key to a function of the instance/prototype\n   * If you need different behaviour for ESC or TAB or arrows, you have to change\n   * this map setting the name of a function that you build on the fabric.Itext or\n   * your prototype.\n   * the map change will affect all Instances unless you need for only some text Instances\n   * in that case you have to clone this object and assign your Instance.\n   * this.keysMap = fabric.util.object.clone(this.keysMap);\n   * The function must be in fabric.Itext.prototype.myFunction And will receive event as args[0]\n   */\n  keysMap: {\n    9:  'exitEditing',\n    27: 'exitEditing',\n    33: 'moveCursorUp',\n    34: 'moveCursorDown',\n    35: 'moveCursorRight',\n    36: 'moveCursorLeft',\n    37: 'moveCursorLeft',\n    38: 'moveCursorUp',\n    39: 'moveCursorRight',\n    40: 'moveCursorDown',\n  },\n\n  /**\n   * For functionalities on keyUp + ctrl || cmd\n   */\n  ctrlKeysMapUp: {\n    67: 'copy',\n    88: 'cut'\n  },\n\n  /**\n   * For functionalities on keyDown + ctrl || cmd\n   */\n  ctrlKeysMapDown: {\n    65: 'selectAll'\n  },\n\n  onClick: function() {\n    // No need to trigger click event here, focus is enough to have the keyboard appear on Android\n    this.hiddenTextarea && this.hiddenTextarea.focus();\n  },\n\n  /**\n   * Handles keydown event\n   * only used for arrows and combination of modifier keys.\n   * @param {Event} e Event object\n   */\n  onKeyDown: function(e) {\n    if (!this.isEditing) {\n      return;\n    }\n    if (e.keyCode in this.keysMap) {\n      this[this.keysMap[e.keyCode]](e);\n    }\n    else if ((e.keyCode in this.ctrlKeysMapDown) && (e.ctrlKey || e.metaKey)) {\n      this[this.ctrlKeysMapDown[e.keyCode]](e);\n    }\n    else {\n      return;\n    }\n    e.stopImmediatePropagation();\n    e.preventDefault();\n    if (e.keyCode >= 33 && e.keyCode <= 40) {\n      // if i press an arrow key just update selection\n      this.inCompositionMode = false;\n      this.clearContextTop();\n      this.renderCursorOrSelection();\n    }\n    else {\n      this.canvas && this.canvas.requestRenderAll();\n    }\n  },\n\n  /**\n   * Handles keyup event\n   * We handle KeyUp because ie11 and edge have difficulties copy/pasting\n   * if a copy/cut event fired, keyup is dismissed\n   * @param {Event} e Event object\n   */\n  onKeyUp: function(e) {\n    if (!this.isEditing || this._copyDone || this.inCompositionMode) {\n      this._copyDone = false;\n      return;\n    }\n    if ((e.keyCode in this.ctrlKeysMapUp) && (e.ctrlKey || e.metaKey)) {\n      this[this.ctrlKeysMapUp[e.keyCode]](e);\n    }\n    else {\n      return;\n    }\n    e.stopImmediatePropagation();\n    e.preventDefault();\n    this.canvas && this.canvas.requestRenderAll();\n  },\n\n  /**\n   * Handles onInput event\n   * @param {Event} e Event object\n   */\n  onInput: function(e) {\n    var fromPaste = this.fromPaste;\n    this.fromPaste = false;\n    e && e.stopPropagation();\n    if (!this.isEditing) {\n      return;\n    }\n    // decisions about style changes.\n    var nextText = this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,\n        charCount = this._text.length,\n        nextCharCount = nextText.length,\n        removedText, insertedText,\n        charDiff = nextCharCount - charCount,\n        selectionStart = this.selectionStart, selectionEnd = this.selectionEnd,\n        selection = selectionStart !== selectionEnd,\n        copiedStyle, removeFrom, removeTo;\n    if (this.hiddenTextarea.value === '') {\n      this.styles = { };\n      this.updateFromTextArea();\n      this.fire('changed');\n      if (this.canvas) {\n        this.canvas.fire('text:changed', { target: this });\n        this.canvas.requestRenderAll();\n      }\n      return;\n    }\n\n    var textareaSelection = this.fromStringToGraphemeSelection(\n      this.hiddenTextarea.selectionStart,\n      this.hiddenTextarea.selectionEnd,\n      this.hiddenTextarea.value\n    );\n    var backDelete = selectionStart > textareaSelection.selectionStart;\n\n    if (selection) {\n      removedText = this._text.slice(selectionStart, selectionEnd);\n      charDiff += selectionEnd - selectionStart;\n    }\n    else if (nextCharCount < charCount) {\n      if (backDelete) {\n        removedText = this._text.slice(selectionEnd + charDiff, selectionEnd);\n      }\n      else {\n        removedText = this._text.slice(selectionStart, selectionStart - charDiff);\n      }\n    }\n    insertedText = nextText.slice(textareaSelection.selectionEnd - charDiff, textareaSelection.selectionEnd);\n    if (removedText && removedText.length) {\n      if (insertedText.length) {\n        // let's copy some style before deleting.\n        // we want to copy the style before the cursor OR the style at the cursor if selection\n        // is bigger than 0.\n        copiedStyle = this.getSelectionStyles(selectionStart, selectionStart + 1, false);\n        // now duplicate the style one for each inserted text.\n        copiedStyle = insertedText.map(function() {\n          // this return an array of references, but that is fine since we are\n          // copying the style later.\n          return copiedStyle[0];\n        });\n      }\n      if (selection) {\n        removeFrom = selectionStart;\n        removeTo = selectionEnd;\n      }\n      else if (backDelete) {\n        // detect differences between forwardDelete and backDelete\n        removeFrom = selectionEnd - removedText.length;\n        removeTo = selectionEnd;\n      }\n      else {\n        removeFrom = selectionEnd;\n        removeTo = selectionEnd + removedText.length;\n      }\n      this.removeStyleFromTo(removeFrom, removeTo);\n    }\n    if (insertedText.length) {\n      if (fromPaste && insertedText.join('') === fabric.copiedText && !fabric.disableStyleCopyPaste) {\n        copiedStyle = fabric.copiedTextStyle;\n      }\n      this.insertNewStyleBlock(insertedText, selectionStart, copiedStyle);\n    }\n    this.updateFromTextArea();\n    this.fire('changed');\n    if (this.canvas) {\n      this.canvas.fire('text:changed', { target: this });\n      this.canvas.requestRenderAll();\n    }\n  },\n  /**\n   * Composition start\n   */\n  onCompositionStart: function() {\n    this.inCompositionMode = true;\n  },\n\n  /**\n   * Composition end\n   */\n  onCompositionEnd: function() {\n    this.inCompositionMode = false;\n  },\n\n  // /**\n  //  * Composition update\n  //  */\n  onCompositionUpdate: function(e) {\n    this.compositionStart = e.target.selectionStart;\n    this.compositionEnd = e.target.selectionEnd;\n    this.updateTextareaPosition();\n  },\n\n  /**\n   * Copies selected text\n   * @param {Event} e Event object\n   */\n  copy: function() {\n    if (this.selectionStart === this.selectionEnd) {\n      //do not cut-copy if no selection\n      return;\n    }\n\n    fabric.copiedText = this.getSelectedText();\n    if (!fabric.disableStyleCopyPaste) {\n      fabric.copiedTextStyle = this.getSelectionStyles(this.selectionStart, this.selectionEnd, true);\n    }\n    else {\n      fabric.copiedTextStyle = null;\n    }\n    this._copyDone = true;\n  },\n\n  /**\n   * Pastes text\n   * @param {Event} e Event object\n   */\n  paste: function() {\n    this.fromPaste = true;\n  },\n\n  /**\n   * @private\n   * @param {Event} e Event object\n   * @return {Object} Clipboard data object\n   */\n  _getClipboardData: function(e) {\n    return (e && e.clipboardData) || fabric.window.clipboardData;\n  },\n\n  /**\n   * Finds the width in pixels before the cursor on the same line\n   * @private\n   * @param {Number} lineIndex\n   * @param {Number} charIndex\n   * @return {Number} widthBeforeCursor width before cursor\n   */\n  _getWidthBeforeCursor: function(lineIndex, charIndex) {\n    var widthBeforeCursor = this._getLineLeftOffset(lineIndex), bound;\n\n    if (charIndex > 0) {\n      bound = this.__charBounds[lineIndex][charIndex - 1];\n      widthBeforeCursor += bound.left + bound.width;\n    }\n    return widthBeforeCursor;\n  },\n\n  /**\n   * Gets start offset of a selection\n   * @param {Event} e Event object\n   * @param {Boolean} isRight\n   * @return {Number}\n   */\n  getDownCursorOffset: function(e, isRight) {\n    var selectionProp = this._getSelectionForOffset(e, isRight),\n        cursorLocation = this.get2DCursorLocation(selectionProp),\n        lineIndex = cursorLocation.lineIndex;\n    // if on last line, down cursor goes to end of line\n    if (lineIndex === this._textLines.length - 1 || e.metaKey || e.keyCode === 34) {\n      // move to the end of a text\n      return this._text.length - selectionProp;\n    }\n    var charIndex = cursorLocation.charIndex,\n        widthBeforeCursor = this._getWidthBeforeCursor(lineIndex, charIndex),\n        indexOnOtherLine = this._getIndexOnLine(lineIndex + 1, widthBeforeCursor),\n        textAfterCursor = this._textLines[lineIndex].slice(charIndex);\n    return textAfterCursor.length + indexOnOtherLine + 1 + this.missingNewlineOffset(lineIndex);\n  },\n\n  /**\n   * private\n   * Helps finding if the offset should be counted from Start or End\n   * @param {Event} e Event object\n   * @param {Boolean} isRight\n   * @return {Number}\n   */\n  _getSelectionForOffset: function(e, isRight) {\n    if (e.shiftKey && this.selectionStart !== this.selectionEnd && isRight) {\n      return this.selectionEnd;\n    }\n    else {\n      return this.selectionStart;\n    }\n  },\n\n  /**\n   * @param {Event} e Event object\n   * @param {Boolean} isRight\n   * @return {Number}\n   */\n  getUpCursorOffset: function(e, isRight) {\n    var selectionProp = this._getSelectionForOffset(e, isRight),\n        cursorLocation = this.get2DCursorLocation(selectionProp),\n        lineIndex = cursorLocation.lineIndex;\n    if (lineIndex === 0 || e.metaKey || e.keyCode === 33) {\n      // if on first line, up cursor goes to start of line\n      return -selectionProp;\n    }\n    var charIndex = cursorLocation.charIndex,\n        widthBeforeCursor = this._getWidthBeforeCursor(lineIndex, charIndex),\n        indexOnOtherLine = this._getIndexOnLine(lineIndex - 1, widthBeforeCursor),\n        textBeforeCursor = this._textLines[lineIndex].slice(0, charIndex),\n        missingNewlineOffset = this.missingNewlineOffset(lineIndex - 1);\n    // return a negative offset\n    return -this._textLines[lineIndex - 1].length\n     + indexOnOtherLine - textBeforeCursor.length + (1 - missingNewlineOffset);\n  },\n\n  /**\n   * for a given width it founds the matching character.\n   * @private\n   */\n  _getIndexOnLine: function(lineIndex, width) {\n\n    var line = this._textLines[lineIndex],\n        lineLeftOffset = this._getLineLeftOffset(lineIndex),\n        widthOfCharsOnLine = lineLeftOffset,\n        indexOnLine = 0, charWidth, foundMatch;\n\n    for (var j = 0, jlen = line.length; j < jlen; j++) {\n      charWidth = this.__charBounds[lineIndex][j].width;\n      widthOfCharsOnLine += charWidth;\n      if (widthOfCharsOnLine > width) {\n        foundMatch = true;\n        var leftEdge = widthOfCharsOnLine - charWidth,\n            rightEdge = widthOfCharsOnLine,\n            offsetFromLeftEdge = Math.abs(leftEdge - width),\n            offsetFromRightEdge = Math.abs(rightEdge - width);\n\n        indexOnLine = offsetFromRightEdge < offsetFromLeftEdge ? j : (j - 1);\n        break;\n      }\n    }\n\n    // reached end\n    if (!foundMatch) {\n      indexOnLine = line.length - 1;\n    }\n\n    return indexOnLine;\n  },\n\n\n  /**\n   * Moves cursor down\n   * @param {Event} e Event object\n   */\n  moveCursorDown: function(e) {\n    if (this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length) {\n      return;\n    }\n    this._moveCursorUpOrDown('Down', e);\n  },\n\n  /**\n   * Moves cursor up\n   * @param {Event} e Event object\n   */\n  moveCursorUp: function(e) {\n    if (this.selectionStart === 0 && this.selectionEnd === 0) {\n      return;\n    }\n    this._moveCursorUpOrDown('Up', e);\n  },\n\n  /**\n   * Moves cursor up or down, fires the events\n   * @param {String} direction 'Up' or 'Down'\n   * @param {Event} e Event object\n   */\n  _moveCursorUpOrDown: function(direction, e) {\n    // getUpCursorOffset\n    // getDownCursorOffset\n    var action = 'get' + direction + 'CursorOffset',\n        offset = this[action](e, this._selectionDirection === 'right');\n    if (e.shiftKey) {\n      this.moveCursorWithShift(offset);\n    }\n    else {\n      this.moveCursorWithoutShift(offset);\n    }\n    if (offset !== 0) {\n      this.setSelectionInBoundaries();\n      this.abortCursorAnimation();\n      this._currentCursorOpacity = 1;\n      this.initDelayedCursor();\n      this._fireSelectionChanged();\n      this._updateTextarea();\n    }\n  },\n\n  /**\n   * Moves cursor with shift\n   * @param {Number} offset\n   */\n  moveCursorWithShift: function(offset) {\n    var newSelection = this._selectionDirection === 'left'\n      ? this.selectionStart + offset\n      : this.selectionEnd + offset;\n    this.setSelectionStartEndWithShift(this.selectionStart, this.selectionEnd, newSelection);\n    return offset !== 0;\n  },\n\n  /**\n   * Moves cursor up without shift\n   * @param {Number} offset\n   */\n  moveCursorWithoutShift: function(offset) {\n    if (offset < 0) {\n      this.selectionStart += offset;\n      this.selectionEnd = this.selectionStart;\n    }\n    else {\n      this.selectionEnd += offset;\n      this.selectionStart = this.selectionEnd;\n    }\n    return offset !== 0;\n  },\n\n  /**\n   * Moves cursor left\n   * @param {Event} e Event object\n   */\n  moveCursorLeft: function(e) {\n    if (this.selectionStart === 0 && this.selectionEnd === 0) {\n      return;\n    }\n    this._moveCursorLeftOrRight('Left', e);\n  },\n\n  /**\n   * @private\n   * @return {Boolean} true if a change happened\n   */\n  _move: function(e, prop, direction) {\n    var newValue;\n    if (e.altKey) {\n      newValue = this['findWordBoundary' + direction](this[prop]);\n    }\n    else if (e.metaKey || e.keyCode === 35 ||  e.keyCode === 36 ) {\n      newValue = this['findLineBoundary' + direction](this[prop]);\n    }\n    else {\n      this[prop] += direction === 'Left' ? -1 : 1;\n      return true;\n    }\n    if (typeof newValue !== undefined && this[prop] !== newValue) {\n      this[prop] = newValue;\n      return true;\n    }\n  },\n\n  /**\n   * @private\n   */\n  _moveLeft: function(e, prop) {\n    return this._move(e, prop, 'Left');\n  },\n\n  /**\n   * @private\n   */\n  _moveRight: function(e, prop) {\n    return this._move(e, prop, 'Right');\n  },\n\n  /**\n   * Moves cursor left without keeping selection\n   * @param {Event} e\n   */\n  moveCursorLeftWithoutShift: function(e) {\n    var change = true;\n    this._selectionDirection = 'left';\n\n    // only move cursor when there is no selection,\n    // otherwise we discard it, and leave cursor on same place\n    if (this.selectionEnd === this.selectionStart && this.selectionStart !== 0) {\n      change = this._moveLeft(e, 'selectionStart');\n\n    }\n    this.selectionEnd = this.selectionStart;\n    return change;\n  },\n\n  /**\n   * Moves cursor left while keeping selection\n   * @param {Event} e\n   */\n  moveCursorLeftWithShift: function(e) {\n    if (this._selectionDirection === 'right' && this.selectionStart !== this.selectionEnd) {\n      return this._moveLeft(e, 'selectionEnd');\n    }\n    else if (this.selectionStart !== 0){\n      this._selectionDirection = 'left';\n      return this._moveLeft(e, 'selectionStart');\n    }\n  },\n\n  /**\n   * Moves cursor right\n   * @param {Event} e Event object\n   */\n  moveCursorRight: function(e) {\n    if (this.selectionStart >= this._text.length && this.selectionEnd >= this._text.length) {\n      return;\n    }\n    this._moveCursorLeftOrRight('Right', e);\n  },\n\n  /**\n   * Moves cursor right or Left, fires event\n   * @param {String} direction 'Left', 'Right'\n   * @param {Event} e Event object\n   */\n  _moveCursorLeftOrRight: function(direction, e) {\n    var actionName = 'moveCursor' + direction + 'With';\n    this._currentCursorOpacity = 1;\n\n    if (e.shiftKey) {\n      actionName += 'Shift';\n    }\n    else {\n      actionName += 'outShift';\n    }\n    if (this[actionName](e)) {\n      this.abortCursorAnimation();\n      this.initDelayedCursor();\n      this._fireSelectionChanged();\n      this._updateTextarea();\n    }\n  },\n\n  /**\n   * Moves cursor right while keeping selection\n   * @param {Event} e\n   */\n  moveCursorRightWithShift: function(e) {\n    if (this._selectionDirection === 'left' && this.selectionStart !== this.selectionEnd) {\n      return this._moveRight(e, 'selectionStart');\n    }\n    else if (this.selectionEnd !== this._text.length) {\n      this._selectionDirection = 'right';\n      return this._moveRight(e, 'selectionEnd');\n    }\n  },\n\n  /**\n   * Moves cursor right without keeping selection\n   * @param {Event} e Event object\n   */\n  moveCursorRightWithoutShift: function(e) {\n    var changed = true;\n    this._selectionDirection = 'right';\n\n    if (this.selectionStart === this.selectionEnd) {\n      changed = this._moveRight(e, 'selectionStart');\n      this.selectionEnd = this.selectionStart;\n    }\n    else {\n      this.selectionStart = this.selectionEnd;\n    }\n    return changed;\n  },\n\n  /**\n   * Removes characters from start/end\n   * start/end ar per grapheme position in _text array.\n   *\n   * @param {Number} start\n   * @param {Number} end default to start + 1\n   */\n  removeChars: function(start, end) {\n    if (typeof end === 'undefined') {\n      end = start + 1;\n    }\n    this.removeStyleFromTo(start, end);\n    this._text.splice(start, end - start);\n    this.text = this._text.join('');\n    this.set('dirty', true);\n    if (this._shouldClearDimensionCache()) {\n      this.initDimensions();\n      this.setCoords();\n    }\n    this._removeExtraneousStyles();\n  },\n\n  /**\n   * insert characters at start position, before start position.\n   * start  equal 1 it means the text get inserted between actual grapheme 0 and 1\n   * if style array is provided, it must be as the same length of text in graphemes\n   * if end is provided and is bigger than start, old text is replaced.\n   * start/end ar per grapheme position in _text array.\n   *\n   * @param {String} text text to insert\n   * @param {Array} style array of style objects\n   * @param {Number} start\n   * @param {Number} end default to start + 1\n   */\n  insertChars: function(text, style, start, end) {\n    if (typeof end === 'undefined') {\n      end = start;\n    }\n    if (end > start) {\n      this.removeStyleFromTo(start, end);\n    }\n    var graphemes = fabric.util.string.graphemeSplit(text);\n    this.insertNewStyleBlock(graphemes, start, style);\n    this._text = [].concat(this._text.slice(0, start), graphemes, this._text.slice(end));\n    this.text = this._text.join('');\n    this.set('dirty', true);\n    if (this._shouldClearDimensionCache()) {\n      this.initDimensions();\n      this.setCoords();\n    }\n    this._removeExtraneousStyles();\n  },\n\n});\n\n\n/* _TO_SVG_START_ */\n(function() {\n  var toFixed = fabric.util.toFixed,\n      multipleSpacesRegex = /  +/g;\n\n  fabric.util.object.extend(fabric.Text.prototype, /** @lends fabric.Text.prototype */ {\n\n    /**\n     * Returns SVG representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    _toSVG: function() {\n      var offsets = this._getSVGLeftTopOffsets(),\n          textAndBg = this._getSVGTextAndBg(offsets.textTop, offsets.textLeft);\n      return this._wrapSVGTextAndBg(textAndBg);\n    },\n\n    /**\n     * Returns svg representation of an instance\n     * @param {Function} [reviver] Method for further parsing of svg representation.\n     * @return {String} svg representation of an instance\n     */\n    toSVG: function(reviver) {\n      return this._createBaseSVGMarkup(\n        this._toSVG(),\n        { reviver: reviver, noStyle: true, withShadow: true }\n      );\n    },\n\n    /**\n     * @private\n     */\n    _getSVGLeftTopOffsets: function() {\n      return {\n        textLeft: -this.width / 2,\n        textTop: -this.height / 2,\n        lineTop: this.getHeightOfLine(0)\n      };\n    },\n\n    /**\n     * @private\n     */\n    _wrapSVGTextAndBg: function(textAndBg) {\n      var noShadow = true,\n          textDecoration = this.getSvgTextDecoration(this);\n      return [\n        textAndBg.textBgRects.join(''),\n        '\\t\\t<text xml:space=\"preserve\" ',\n        (this.fontFamily ? 'font-family=\"' + this.fontFamily.replace(/\"/g, '\\'') + '\" ' : ''),\n        (this.fontSize ? 'font-size=\"' + this.fontSize + '\" ' : ''),\n        (this.fontStyle ? 'font-style=\"' + this.fontStyle + '\" ' : ''),\n        (this.fontWeight ? 'font-weight=\"' + this.fontWeight + '\" ' : ''),\n        (textDecoration ? 'text-decoration=\"' + textDecoration + '\" ' : ''),\n        'style=\"', this.getSvgStyles(noShadow), '\"', this.addPaintOrder(), ' >',\n        textAndBg.textSpans.join(''),\n        '</text>\\n'\n      ];\n    },\n\n    /**\n     * @private\n     * @param {Number} textTopOffset Text top offset\n     * @param {Number} textLeftOffset Text left offset\n     * @return {Object}\n     */\n    _getSVGTextAndBg: function(textTopOffset, textLeftOffset) {\n      var textSpans = [],\n          textBgRects = [],\n          height = textTopOffset, lineOffset;\n      // bounding-box background\n      this._setSVGBg(textBgRects);\n\n      // text and text-background\n      for (var i = 0, len = this._textLines.length; i < len; i++) {\n        lineOffset = this._getLineLeftOffset(i);\n        if (this.textBackgroundColor || this.styleHas('textBackgroundColor', i)) {\n          this._setSVGTextLineBg(textBgRects, i, textLeftOffset + lineOffset, height);\n        }\n        this._setSVGTextLineText(textSpans, i, textLeftOffset + lineOffset, height);\n        height += this.getHeightOfLine(i);\n      }\n\n      return {\n        textSpans: textSpans,\n        textBgRects: textBgRects\n      };\n    },\n\n    /**\n     * @private\n     */\n    _createTextCharSpan: function(_char, styleDecl, left, top) {\n      var shouldUseWhitespace = _char !== _char.trim() || _char.match(multipleSpacesRegex),\n          styleProps = this.getSvgSpanStyles(styleDecl, shouldUseWhitespace),\n          fillStyles = styleProps ? 'style=\"' + styleProps + '\"' : '',\n          dy = styleDecl.deltaY, dySpan = '',\n          NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n      if (dy) {\n        dySpan = ' dy=\"' + toFixed(dy, NUM_FRACTION_DIGITS) + '\" ';\n      }\n      return [\n        '<tspan x=\"', toFixed(left, NUM_FRACTION_DIGITS), '\" y=\"',\n        toFixed(top, NUM_FRACTION_DIGITS), '\" ', dySpan,\n        fillStyles, '>',\n        fabric.util.string.escapeXml(_char),\n        '</tspan>'\n      ].join('');\n    },\n\n    _setSVGTextLineText: function(textSpans, lineIndex, textLeftOffset, textTopOffset) {\n      // set proper line offset\n      var lineHeight = this.getHeightOfLine(lineIndex),\n          isJustify = this.textAlign.indexOf('justify') !== -1,\n          actualStyle,\n          nextStyle,\n          charsToRender = '',\n          charBox, style,\n          boxWidth = 0,\n          line = this._textLines[lineIndex],\n          timeToRender;\n\n      textTopOffset += lineHeight * (1 - this._fontSizeFraction) / this.lineHeight;\n      for (var i = 0, len = line.length - 1; i <= len; i++) {\n        timeToRender = i === len || this.charSpacing;\n        charsToRender += line[i];\n        charBox = this.__charBounds[lineIndex][i];\n        if (boxWidth === 0) {\n          textLeftOffset += charBox.kernedWidth - charBox.width;\n          boxWidth += charBox.width;\n        }\n        else {\n          boxWidth += charBox.kernedWidth;\n        }\n        if (isJustify && !timeToRender) {\n          if (this._reSpaceAndTab.test(line[i])) {\n            timeToRender = true;\n          }\n        }\n        if (!timeToRender) {\n          // if we have charSpacing, we render char by char\n          actualStyle = actualStyle || this.getCompleteStyleDeclaration(lineIndex, i);\n          nextStyle = this.getCompleteStyleDeclaration(lineIndex, i + 1);\n          timeToRender = this._hasStyleChangedForSvg(actualStyle, nextStyle);\n        }\n        if (timeToRender) {\n          style = this._getStyleDeclaration(lineIndex, i) || { };\n          textSpans.push(this._createTextCharSpan(charsToRender, style, textLeftOffset, textTopOffset));\n          charsToRender = '';\n          actualStyle = nextStyle;\n          textLeftOffset += boxWidth;\n          boxWidth = 0;\n        }\n      }\n    },\n\n    _pushTextBgRect: function(textBgRects, color, left, top, width, height) {\n      var NUM_FRACTION_DIGITS = fabric.Object.NUM_FRACTION_DIGITS;\n      textBgRects.push(\n        '\\t\\t<rect ',\n        this._getFillAttributes(color),\n        ' x=\"',\n        toFixed(left, NUM_FRACTION_DIGITS),\n        '\" y=\"',\n        toFixed(top, NUM_FRACTION_DIGITS),\n        '\" width=\"',\n        toFixed(width, NUM_FRACTION_DIGITS),\n        '\" height=\"',\n        toFixed(height, NUM_FRACTION_DIGITS),\n        '\"></rect>\\n');\n    },\n\n    _setSVGTextLineBg: function(textBgRects, i, leftOffset, textTopOffset) {\n      var line = this._textLines[i],\n          heightOfLine = this.getHeightOfLine(i) / this.lineHeight,\n          boxWidth = 0,\n          boxStart = 0,\n          charBox, currentColor,\n          lastColor = this.getValueOfPropertyAt(i, 0, 'textBackgroundColor');\n      for (var j = 0, jlen = line.length; j < jlen; j++) {\n        charBox = this.__charBounds[i][j];\n        currentColor = this.getValueOfPropertyAt(i, j, 'textBackgroundColor');\n        if (currentColor !== lastColor) {\n          lastColor && this._pushTextBgRect(textBgRects, lastColor, leftOffset + boxStart,\n            textTopOffset, boxWidth, heightOfLine);\n          boxStart = charBox.left;\n          boxWidth = charBox.width;\n          lastColor = currentColor;\n        }\n        else {\n          boxWidth += charBox.kernedWidth;\n        }\n      }\n      currentColor && this._pushTextBgRect(textBgRects, currentColor, leftOffset + boxStart,\n        textTopOffset, boxWidth, heightOfLine);\n    },\n\n    /**\n     * Adobe Illustrator (at least CS5) is unable to render rgba()-based fill values\n     * we work around it by \"moving\" alpha channel into opacity attribute and setting fill's alpha to 1\n     *\n     * @private\n     * @param {*} value\n     * @return {String}\n     */\n    _getFillAttributes: function(value) {\n      var fillColor = (value && typeof value === 'string') ? new fabric.Color(value) : '';\n      if (!fillColor || !fillColor.getSource() || fillColor.getAlpha() === 1) {\n        return 'fill=\"' + value + '\"';\n      }\n      return 'opacity=\"' + fillColor.getAlpha() + '\" fill=\"' + fillColor.setAlpha(1).toRgb() + '\"';\n    },\n\n    /**\n     * @private\n     */\n    _getSVGLineTopOffset: function(lineIndex) {\n      var lineTopOffset = 0, lastHeight = 0;\n      for (var j = 0; j < lineIndex; j++) {\n        lineTopOffset += this.getHeightOfLine(j);\n      }\n      lastHeight = this.getHeightOfLine(j);\n      return {\n        lineTop: lineTopOffset,\n        offset: (this._fontSizeMult - this._fontSizeFraction) * lastHeight / (this.lineHeight * this._fontSizeMult)\n      };\n    },\n\n    /**\n     * Returns styles-string for svg-export\n     * @param {Boolean} skipShadow a boolean to skip shadow filter output\n     * @return {String}\n     */\n    getSvgStyles: function(skipShadow) {\n      var svgStyle = fabric.Object.prototype.getSvgStyles.call(this, skipShadow);\n      return svgStyle + ' white-space: pre;';\n    },\n  });\n})();\n/* _TO_SVG_END_ */\n\n\n(function(global) {\n\n  'use strict';\n\n  var fabric = global.fabric || (global.fabric = {});\n\n  /**\n   * Textbox class, based on IText, allows the user to resize the text rectangle\n   * and wraps lines automatically. Textboxes have their Y scaling locked, the\n   * user can only change width. Height is adjusted automatically based on the\n   * wrapping of lines.\n   * @class fabric.Textbox\n   * @extends fabric.IText\n   * @mixes fabric.Observable\n   * @return {fabric.Textbox} thisArg\n   * @see {@link fabric.Textbox#initialize} for constructor definition\n   */\n  fabric.Textbox = fabric.util.createClass(fabric.IText, fabric.Observable, {\n\n    /**\n     * Type of an object\n     * @type String\n     * @default\n     */\n    type: 'textbox',\n\n    /**\n     * Minimum width of textbox, in pixels.\n     * @type Number\n     * @default\n     */\n    minWidth: 20,\n\n    /**\n     * Minimum calculated width of a textbox, in pixels.\n     * fixed to 2 so that an empty textbox cannot go to 0\n     * and is still selectable without text.\n     * @type Number\n     * @default\n     */\n    dynamicMinWidth: 2,\n\n    /**\n     * Cached array of text wrapping.\n     * @type Array\n     */\n    __cachedLines: null,\n\n    /**\n     * Override standard Object class values\n     */\n    lockScalingFlip: true,\n\n    /**\n     * Override standard Object class values\n     * Textbox needs this on false\n     */\n    noScaleCache: false,\n\n    /**\n     * Properties which when set cause object to change dimensions\n     * @type Object\n     * @private\n     */\n    _dimensionAffectingProps: fabric.Text.prototype._dimensionAffectingProps.concat('width'),\n\n    /**\n     * Use this regular expression to split strings in breakable lines\n     * @private\n     */\n    _wordJoiners: /[ \\t\\r]/,\n\n    /**\n     * Use this boolean property in order to split strings that have no white space concept.\n     * this is a cheap way to help with chinese/japanese\n     * @type Boolean\n     * @since 2.6.0\n     */\n    splitByGrapheme: false,\n\n    /**\n     * Unlike superclass's version of this function, Textbox does not update\n     * its width.\n     * @private\n     * @override\n     */\n    initDimensions: function() {\n      if (this.__skipDimension) {\n        return;\n      }\n      this.isEditing && this.initDelayedCursor();\n      this.clearContextTop();\n      this._clearCache();\n      // clear dynamicMinWidth as it will be different after we re-wrap line\n      this.dynamicMinWidth = 0;\n      // wrap lines\n      this._styleMap = this._generateStyleMap(this._splitText());\n      // if after wrapping, the width is smaller than dynamicMinWidth, change the width and re-wrap\n      if (this.dynamicMinWidth > this.width) {\n        this._set('width', this.dynamicMinWidth);\n      }\n      if (this.textAlign.indexOf('justify') !== -1) {\n        // once text is measured we need to make space fatter to make justified text.\n        this.enlargeSpaces();\n      }\n      // clear cache and re-calculate height\n      this.height = this.calcTextHeight();\n      this.saveState({ propertySet: '_dimensionAffectingProps' });\n    },\n\n    /**\n     * Generate an object that translates the style object so that it is\n     * broken up by visual lines (new lines and automatic wrapping).\n     * The original text styles object is broken up by actual lines (new lines only),\n     * which is only sufficient for Text / IText\n     * @private\n     */\n    _generateStyleMap: function(textInfo) {\n      var realLineCount     = 0,\n          realLineCharCount = 0,\n          charCount         = 0,\n          map               = {};\n\n      for (var i = 0; i < textInfo.graphemeLines.length; i++) {\n        if (textInfo.graphemeText[charCount] === '\\n' && i > 0) {\n          realLineCharCount = 0;\n          charCount++;\n          realLineCount++;\n        }\n        else if (!this.splitByGrapheme && this._reSpaceAndTab.test(textInfo.graphemeText[charCount]) && i > 0) {\n          // this case deals with space's that are removed from end of lines when wrapping\n          realLineCharCount++;\n          charCount++;\n        }\n\n        map[i] = { line: realLineCount, offset: realLineCharCount };\n\n        charCount += textInfo.graphemeLines[i].length;\n        realLineCharCount += textInfo.graphemeLines[i].length;\n      }\n\n      return map;\n    },\n\n    /**\n     * Returns true if object has a style property or has it on a specified line\n     * @param {Number} lineIndex\n     * @return {Boolean}\n     */\n    styleHas: function(property, lineIndex) {\n      if (this._styleMap && !this.isWrapping) {\n        var map = this._styleMap[lineIndex];\n        if (map) {\n          lineIndex = map.line;\n        }\n      }\n      return fabric.Text.prototype.styleHas.call(this, property, lineIndex);\n    },\n\n    /**\n     * Returns true if object has no styling or no styling in a line\n     * @param {Number} lineIndex , lineIndex is on wrapped lines.\n     * @return {Boolean}\n     */\n    isEmptyStyles: function(lineIndex) {\n      if (!this.styles) {\n        return true;\n      }\n      var offset = 0, nextLineIndex = lineIndex + 1, nextOffset, obj, shouldLimit = false,\n          map = this._styleMap[lineIndex], mapNextLine = this._styleMap[lineIndex + 1];\n      if (map) {\n        lineIndex = map.line;\n        offset = map.offset;\n      }\n      if (mapNextLine) {\n        nextLineIndex = mapNextLine.line;\n        shouldLimit = nextLineIndex === lineIndex;\n        nextOffset = mapNextLine.offset;\n      }\n      obj = typeof lineIndex === 'undefined' ? this.styles : { line: this.styles[lineIndex] };\n      for (var p1 in obj) {\n        for (var p2 in obj[p1]) {\n          if (p2 >= offset && (!shouldLimit || p2 < nextOffset)) {\n            // eslint-disable-next-line no-unused-vars\n            for (var p3 in obj[p1][p2]) {\n              return false;\n            }\n          }\n        }\n      }\n      return true;\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @private\n     */\n    _getStyleDeclaration: function(lineIndex, charIndex) {\n      if (this._styleMap && !this.isWrapping) {\n        var map = this._styleMap[lineIndex];\n        if (!map) {\n          return null;\n        }\n        lineIndex = map.line;\n        charIndex = map.offset + charIndex;\n      }\n      return this.callSuper('_getStyleDeclaration', lineIndex, charIndex);\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @param {Object} style\n     * @private\n     */\n    _setStyleDeclaration: function(lineIndex, charIndex, style) {\n      var map = this._styleMap[lineIndex];\n      lineIndex = map.line;\n      charIndex = map.offset + charIndex;\n\n      this.styles[lineIndex][charIndex] = style;\n    },\n\n    /**\n     * @param {Number} lineIndex\n     * @param {Number} charIndex\n     * @private\n     */\n    _deleteStyleDeclaration: function(lineIndex, charIndex) {\n      var map = this._styleMap[lineIndex];\n      lineIndex = map.line;\n      charIndex = map.offset + charIndex;\n      delete this.styles[lineIndex][charIndex];\n    },\n\n    /**\n     * probably broken need a fix\n     * Returns the real style line that correspond to the wrapped lineIndex line\n     * Used just to verify if the line does exist or not.\n     * @param {Number} lineIndex\n     * @returns {Boolean} if the line exists or not\n     * @private\n     */\n    _getLineStyle: function(lineIndex) {\n      var map = this._styleMap[lineIndex];\n      return !!this.styles[map.line];\n    },\n\n    /**\n     * Set the line style to an empty object so that is initialized\n     * @param {Number} lineIndex\n     * @param {Object} style\n     * @private\n     */\n    _setLineStyle: function(lineIndex) {\n      var map = this._styleMap[lineIndex];\n      this.styles[map.line] = {};\n    },\n\n    /**\n     * Wraps text using the 'width' property of Textbox. First this function\n     * splits text on newlines, so we preserve newlines entered by the user.\n     * Then it wraps each line using the width of the Textbox by calling\n     * _wrapLine().\n     * @param {Array} lines The string array of text that is split into lines\n     * @param {Number} desiredWidth width you want to wrap to\n     * @returns {Array} Array of lines\n     */\n    _wrapText: function(lines, desiredWidth) {\n      var wrapped = [], i;\n      this.isWrapping = true;\n      for (i = 0; i < lines.length; i++) {\n        wrapped = wrapped.concat(this._wrapLine(lines[i], i, desiredWidth));\n      }\n      this.isWrapping = false;\n      return wrapped;\n    },\n\n    /**\n     * Helper function to measure a string of text, given its lineIndex and charIndex offset\n     * it gets called when charBounds are not available yet.\n     * @param {CanvasRenderingContext2D} ctx\n     * @param {String} text\n     * @param {number} lineIndex\n     * @param {number} charOffset\n     * @returns {number}\n     * @private\n     */\n    _measureWord: function(word, lineIndex, charOffset) {\n      var width = 0, prevGrapheme, skipLeft = true;\n      charOffset = charOffset || 0;\n      for (var i = 0, len = word.length; i < len; i++) {\n        var box = this._getGraphemeBox(word[i], lineIndex, i + charOffset, prevGrapheme, skipLeft);\n        width += box.kernedWidth;\n        prevGrapheme = word[i];\n      }\n      return width;\n    },\n\n    /**\n     * Wraps a line of text using the width of the Textbox and a context.\n     * @param {Array} line The grapheme array that represent the line\n     * @param {Number} lineIndex\n     * @param {Number} desiredWidth width you want to wrap the line to\n     * @param {Number} reservedSpace space to remove from wrapping for custom functionalities\n     * @returns {Array} Array of line(s) into which the given text is wrapped\n     * to.\n     */\n    _wrapLine: function(_line, lineIndex, desiredWidth, reservedSpace) {\n      var lineWidth = 0,\n          splitByGrapheme = this.splitByGrapheme,\n          graphemeLines = [],\n          line = [],\n          // spaces in different languages?\n          words = splitByGrapheme ? fabric.util.string.graphemeSplit(_line) : _line.split(this._wordJoiners),\n          word = '',\n          offset = 0,\n          infix = splitByGrapheme ? '' : ' ',\n          wordWidth = 0,\n          infixWidth = 0,\n          largestWordWidth = 0,\n          lineJustStarted = true,\n          additionalSpace = this._getWidthOfCharSpacing(),\n          reservedSpace = reservedSpace || 0;\n      // fix a difference between split and graphemeSplit\n      if (words.length === 0) {\n        words.push([]);\n      }\n      desiredWidth -= reservedSpace;\n      for (var i = 0; i < words.length; i++) {\n        // if using splitByGrapheme words are already in graphemes.\n        word = splitByGrapheme ? words[i] : fabric.util.string.graphemeSplit(words[i]);\n        wordWidth = this._measureWord(word, lineIndex, offset);\n        offset += word.length;\n\n        lineWidth += infixWidth + wordWidth - additionalSpace;\n        if (lineWidth > desiredWidth && !lineJustStarted) {\n          graphemeLines.push(line);\n          line = [];\n          lineWidth = wordWidth;\n          lineJustStarted = true;\n        }\n        else {\n          lineWidth += additionalSpace;\n        }\n\n        if (!lineJustStarted && !splitByGrapheme) {\n          line.push(infix);\n        }\n        line = line.concat(word);\n\n        infixWidth = splitByGrapheme ? 0 : this._measureWord([infix], lineIndex, offset);\n        offset++;\n        lineJustStarted = false;\n        // keep track of largest word\n        if (wordWidth > largestWordWidth) {\n          largestWordWidth = wordWidth;\n        }\n      }\n\n      i && graphemeLines.push(line);\n\n      if (largestWordWidth + reservedSpace > this.dynamicMinWidth) {\n        this.dynamicMinWidth = largestWordWidth - additionalSpace + reservedSpace;\n      }\n      return graphemeLines;\n    },\n\n    /**\n     * Detect if the text line is ended with an hard break\n     * text and itext do not have wrapping, return false\n     * @param {Number} lineIndex text to split\n     * @return {Boolean}\n     */\n    isEndOfWrapping: function(lineIndex) {\n      if (!this._styleMap[lineIndex + 1]) {\n        // is last line, return true;\n        return true;\n      }\n      if (this._styleMap[lineIndex + 1].line !== this._styleMap[lineIndex].line) {\n        // this is last line before a line break, return true;\n        return true;\n      }\n      return false;\n    },\n\n    /**\n     * Detect if a line has a linebreak and so we need to account for it when moving\n     * and counting style.\n     * @return Number\n     */\n    missingNewlineOffset: function(lineIndex) {\n      if (this.splitByGrapheme) {\n        return this.isEndOfWrapping(lineIndex) ? 1 : 0;\n      }\n      return 1;\n    },\n\n    /**\n    * Gets lines of text to render in the Textbox. This function calculates\n    * text wrapping on the fly every time it is called.\n    * @param {String} text text to split\n    * @returns {Array} Array of lines in the Textbox.\n    * @override\n    */\n    _splitTextIntoLines: function(text) {\n      var newText = fabric.Text.prototype._splitTextIntoLines.call(this, text),\n          graphemeLines = this._wrapText(newText.lines, this.width),\n          lines = new Array(graphemeLines.length);\n      for (var i = 0; i < graphemeLines.length; i++) {\n        lines[i] = graphemeLines[i].join('');\n      }\n      newText.lines = lines;\n      newText.graphemeLines = graphemeLines;\n      return newText;\n    },\n\n    getMinWidth: function() {\n      return Math.max(this.minWidth, this.dynamicMinWidth);\n    },\n\n    _removeExtraneousStyles: function() {\n      var linesToKeep = {};\n      for (var prop in this._styleMap) {\n        if (this._textLines[prop]) {\n          linesToKeep[this._styleMap[prop].line] = 1;\n        }\n      }\n      for (var prop in this.styles) {\n        if (!linesToKeep[prop]) {\n          delete this.styles[prop];\n        }\n      }\n    },\n\n    /**\n     * Returns object representation of an instance\n     * @method toObject\n     * @param {Array} [propertiesToInclude] Any properties that you might want to additionally include in the output\n     * @return {Object} object representation of an instance\n     */\n    toObject: function(propertiesToInclude) {\n      return this.callSuper('toObject', ['minWidth', 'splitByGrapheme'].concat(propertiesToInclude));\n    }\n  });\n\n  /**\n   * Returns fabric.Textbox instance from an object representation\n   * @static\n   * @memberOf fabric.Textbox\n   * @param {Object} object Object to create an instance from\n   * @param {Function} [callback] Callback to invoke when an fabric.Textbox instance is created\n   */\n  fabric.Textbox.fromObject = function(object, callback) {\n    return fabric.Object._fromObject('Textbox', object, callback, 'text');\n  };\n})(typeof exports !== 'undefined' ? exports : this);\n\n\n(function() {\n\n  var controlsUtils = fabric.controlsUtils,\n      scaleSkewStyleHandler = controlsUtils.scaleSkewCursorStyleHandler,\n      scaleStyleHandler = controlsUtils.scaleCursorStyleHandler,\n      scalingEqually = controlsUtils.scalingEqually,\n      scalingYOrSkewingX = controlsUtils.scalingYOrSkewingX,\n      scalingXOrSkewingY = controlsUtils.scalingXOrSkewingY,\n      scaleOrSkewActionName = controlsUtils.scaleOrSkewActionName,\n      objectControls = fabric.Object.prototype.controls;\n\n  objectControls.ml = new fabric.Control({\n    x: -0.5,\n    y: 0,\n    cursorStyleHandler: scaleSkewStyleHandler,\n    actionHandler: scalingXOrSkewingY,\n    getActionName: scaleOrSkewActionName,\n  });\n\n  objectControls.mr = new fabric.Control({\n    x: 0.5,\n    y: 0,\n    cursorStyleHandler: scaleSkewStyleHandler,\n    actionHandler: scalingXOrSkewingY,\n    getActionName: scaleOrSkewActionName,\n  });\n\n  objectControls.mb = new fabric.Control({\n    x: 0,\n    y: 0.5,\n    cursorStyleHandler: scaleSkewStyleHandler,\n    actionHandler: scalingYOrSkewingX,\n    getActionName: scaleOrSkewActionName,\n  });\n\n  objectControls.mt = new fabric.Control({\n    x: 0,\n    y: -0.5,\n    cursorStyleHandler: scaleSkewStyleHandler,\n    actionHandler: scalingYOrSkewingX,\n    getActionName: scaleOrSkewActionName,\n  });\n\n  objectControls.tl = new fabric.Control({\n    x: -0.5,\n    y: -0.5,\n    cursorStyleHandler: scaleStyleHandler,\n    actionHandler: scalingEqually\n  });\n\n  objectControls.tr = new fabric.Control({\n    x: 0.5,\n    y: -0.5,\n    cursorStyleHandler: scaleStyleHandler,\n    actionHandler: scalingEqually\n  });\n\n  objectControls.bl = new fabric.Control({\n    x: -0.5,\n    y: 0.5,\n    cursorStyleHandler: scaleStyleHandler,\n    actionHandler: scalingEqually\n  });\n\n  objectControls.br = new fabric.Control({\n    x: 0.5,\n    y: 0.5,\n    cursorStyleHandler: scaleStyleHandler,\n    actionHandler: scalingEqually\n  });\n\n  objectControls.mtr = new fabric.Control({\n    x: 0,\n    y: -0.5,\n    actionHandler: controlsUtils.rotationWithSnapping,\n    cursorStyleHandler: controlsUtils.rotationStyleHandler,\n    offsetY: -40,\n    withConnection: true,\n    actionName: 'rotate',\n  });\n\n  if (fabric.Textbox) {\n    // this is breaking the prototype inheritance, no time / ideas to fix it.\n    // is important to document that if you want to have all objects to have a\n    // specific custom control, you have to add it to Object prototype and to Textbox\n    // prototype. The controls are shared as references. So changes to control `tr`\n    // can still apply to all objects if needed.\n    var textBoxControls = fabric.Textbox.prototype.controls = { };\n\n    textBoxControls.mtr = objectControls.mtr;\n    textBoxControls.tr = objectControls.tr;\n    textBoxControls.br = objectControls.br;\n    textBoxControls.tl = objectControls.tl;\n    textBoxControls.bl = objectControls.bl;\n    textBoxControls.mt = objectControls.mt;\n    textBoxControls.mb = objectControls.mb;\n\n    textBoxControls.mr = new fabric.Control({\n      x: 0.5,\n      y: 0,\n      actionHandler: controlsUtils.changeWidth,\n      cursorStyleHandler: scaleSkewStyleHandler,\n      actionName: 'resizing',\n    });\n\n    textBoxControls.ml = new fabric.Control({\n      x: -0.5,\n      y: 0,\n      actionHandler: controlsUtils.changeWidth,\n      cursorStyleHandler: scaleSkewStyleHandler,\n      actionName: 'resizing',\n    });\n  }\n})();\n\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    /* global ActiveXObject -- old IE */\n    activeXDocument = document.domain && new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\n\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {\n          createNonEnumerableProperty(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    INCORRECT_VALUES_NAME = true;\n    defaultIterator = function values() { return nativeIterator.call(this); };\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    createNonEnumerableProperty(IterablePrototype, ITERATOR, defaultIterator);\n  }\n  Iterators[NAME] = defaultIterator;\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  return methods;\n};\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n","/**\r\n * Make a map and return a function for checking if a key\r\n * is in that map.\r\n * IMPORTANT: all calls of this function must be prefixed with\r\n * \\/\\*#\\_\\_PURE\\_\\_\\*\\/\r\n * So that rollup can tree-shake them if necessary.\r\n */\r\nfunction makeMap(str, expectsLowerCase) {\r\n    const map = Object.create(null);\r\n    const list = str.split(',');\r\n    for (let i = 0; i < list.length; i++) {\r\n        map[list[i]] = true;\r\n    }\r\n    return expectsLowerCase ? val => !!map[val.toLowerCase()] : val => !!map[val];\r\n}\n\n/**\r\n * dev only flag -> name mapping\r\n */\r\nconst PatchFlagNames = {\r\n    [1 /* TEXT */]: `TEXT`,\r\n    [2 /* CLASS */]: `CLASS`,\r\n    [4 /* STYLE */]: `STYLE`,\r\n    [8 /* PROPS */]: `PROPS`,\r\n    [16 /* FULL_PROPS */]: `FULL_PROPS`,\r\n    [32 /* HYDRATE_EVENTS */]: `HYDRATE_EVENTS`,\r\n    [64 /* STABLE_FRAGMENT */]: `STABLE_FRAGMENT`,\r\n    [128 /* KEYED_FRAGMENT */]: `KEYED_FRAGMENT`,\r\n    [256 /* UNKEYED_FRAGMENT */]: `UNKEYED_FRAGMENT`,\r\n    [512 /* NEED_PATCH */]: `NEED_PATCH`,\r\n    [1024 /* DYNAMIC_SLOTS */]: `DYNAMIC_SLOTS`,\r\n    [2048 /* DEV_ROOT_FRAGMENT */]: `DEV_ROOT_FRAGMENT`,\r\n    [-1 /* HOISTED */]: `HOISTED`,\r\n    [-2 /* BAIL */]: `BAIL`\r\n};\n\n/**\r\n * Dev only\r\n */\r\nconst slotFlagsText = {\r\n    [1 /* STABLE */]: 'STABLE',\r\n    [2 /* DYNAMIC */]: 'DYNAMIC',\r\n    [3 /* FORWARDED */]: 'FORWARDED'\r\n};\n\nconst GLOBALS_WHITE_LISTED = 'Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,' +\r\n    'decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,' +\r\n    'Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt';\r\nconst isGloballyWhitelisted = /*#__PURE__*/ makeMap(GLOBALS_WHITE_LISTED);\n\nconst range = 2;\r\nfunction generateCodeFrame(source, start = 0, end = source.length) {\r\n    const lines = source.split(/\\r?\\n/);\r\n    let count = 0;\r\n    const res = [];\r\n    for (let i = 0; i < lines.length; i++) {\r\n        count += lines[i].length + 1;\r\n        if (count >= start) {\r\n            for (let j = i - range; j <= i + range || end > count; j++) {\r\n                if (j < 0 || j >= lines.length)\r\n                    continue;\r\n                const line = j + 1;\r\n                res.push(`${line}${' '.repeat(Math.max(3 - String(line).length, 0))}|  ${lines[j]}`);\r\n                const lineLength = lines[j].length;\r\n                if (j === i) {\r\n                    // push underline\r\n                    const pad = start - (count - lineLength) + 1;\r\n                    const length = Math.max(1, end > count ? lineLength - pad : end - start);\r\n                    res.push(`   |  ` + ' '.repeat(pad) + '^'.repeat(length));\r\n                }\r\n                else if (j > i) {\r\n                    if (end > count) {\r\n                        const length = Math.max(Math.min(end - count, lineLength), 1);\r\n                        res.push(`   |  ` + '^'.repeat(length));\r\n                    }\r\n                    count += lineLength + 1;\r\n                }\r\n            }\r\n            break;\r\n        }\r\n    }\r\n    return res.join('\\n');\r\n}\n\n/**\r\n * On the client we only need to offer special cases for boolean attributes that\r\n * have different names from their corresponding dom properties:\r\n * - itemscope -> N/A\r\n * - allowfullscreen -> allowFullscreen\r\n * - formnovalidate -> formNoValidate\r\n * - ismap -> isMap\r\n * - nomodule -> noModule\r\n * - novalidate -> noValidate\r\n * - readonly -> readOnly\r\n */\r\nconst specialBooleanAttrs = `itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`;\r\nconst isSpecialBooleanAttr = /*#__PURE__*/ makeMap(specialBooleanAttrs);\r\n/**\r\n * The full list is needed during SSR to produce the correct initial markup.\r\n */\r\nconst isBooleanAttr = /*#__PURE__*/ makeMap(specialBooleanAttrs +\r\n    `,async,autofocus,autoplay,controls,default,defer,disabled,hidden,` +\r\n    `loop,open,required,reversed,scoped,seamless,` +\r\n    `checked,muted,multiple,selected`);\r\nconst unsafeAttrCharRE = /[>/=\"'\\u0009\\u000a\\u000c\\u0020]/;\r\nconst attrValidationCache = {};\r\nfunction isSSRSafeAttrName(name) {\r\n    if (attrValidationCache.hasOwnProperty(name)) {\r\n        return attrValidationCache[name];\r\n    }\r\n    const isUnsafe = unsafeAttrCharRE.test(name);\r\n    if (isUnsafe) {\r\n        console.error(`unsafe attribute name: ${name}`);\r\n    }\r\n    return (attrValidationCache[name] = !isUnsafe);\r\n}\r\nconst propsToAttrMap = {\r\n    acceptCharset: 'accept-charset',\r\n    className: 'class',\r\n    htmlFor: 'for',\r\n    httpEquiv: 'http-equiv'\r\n};\r\n/**\r\n * CSS properties that accept plain numbers\r\n */\r\nconst isNoUnitNumericStyleProp = /*#__PURE__*/ makeMap(`animation-iteration-count,border-image-outset,border-image-slice,` +\r\n    `border-image-width,box-flex,box-flex-group,box-ordinal-group,column-count,` +\r\n    `columns,flex,flex-grow,flex-positive,flex-shrink,flex-negative,flex-order,` +\r\n    `grid-row,grid-row-end,grid-row-span,grid-row-start,grid-column,` +\r\n    `grid-column-end,grid-column-span,grid-column-start,font-weight,line-clamp,` +\r\n    `line-height,opacity,order,orphans,tab-size,widows,z-index,zoom,` +\r\n    // SVG\r\n    `fill-opacity,flood-opacity,stop-opacity,stroke-dasharray,stroke-dashoffset,` +\r\n    `stroke-miterlimit,stroke-opacity,stroke-width`);\r\n/**\r\n * Known attributes, this is used for stringification of runtime static nodes\r\n * so that we don't stringify bindings that cannot be set from HTML.\r\n * Don't also forget to allow `data-*` and `aria-*`!\r\n * Generated from https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes\r\n */\r\nconst isKnownAttr = /*#__PURE__*/ makeMap(`accept,accept-charset,accesskey,action,align,allow,alt,async,` +\r\n    `autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,` +\r\n    `border,buffered,capture,challenge,charset,checked,cite,class,code,` +\r\n    `codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,` +\r\n    `coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,` +\r\n    `disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,` +\r\n    `formaction,formenctype,formmethod,formnovalidate,formtarget,headers,` +\r\n    `height,hidden,high,href,hreflang,http-equiv,icon,id,importance,integrity,` +\r\n    `ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,` +\r\n    `manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,` +\r\n    `open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,` +\r\n    `referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,` +\r\n    `selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,` +\r\n    `start,step,style,summary,tabindex,target,title,translate,type,usemap,` +\r\n    `value,width,wrap`);\n\nfunction normalizeStyle(value) {\r\n    if (isArray(value)) {\r\n        const res = {};\r\n        for (let i = 0; i < value.length; i++) {\r\n            const item = value[i];\r\n            const normalized = normalizeStyle(isString(item) ? parseStringStyle(item) : item);\r\n            if (normalized) {\r\n                for (const key in normalized) {\r\n                    res[key] = normalized[key];\r\n                }\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n    else if (isObject(value)) {\r\n        return value;\r\n    }\r\n}\r\nconst listDelimiterRE = /;(?![^(]*\\))/g;\r\nconst propertyDelimiterRE = /:(.+)/;\r\nfunction parseStringStyle(cssText) {\r\n    const ret = {};\r\n    cssText.split(listDelimiterRE).forEach(item => {\r\n        if (item) {\r\n            const tmp = item.split(propertyDelimiterRE);\r\n            tmp.length > 1 && (ret[tmp[0].trim()] = tmp[1].trim());\r\n        }\r\n    });\r\n    return ret;\r\n}\r\nfunction stringifyStyle(styles) {\r\n    let ret = '';\r\n    if (!styles) {\r\n        return ret;\r\n    }\r\n    for (const key in styles) {\r\n        const value = styles[key];\r\n        const normalizedKey = key.startsWith(`--`) ? key : hyphenate(key);\r\n        if (isString(value) ||\r\n            (typeof value === 'number' && isNoUnitNumericStyleProp(normalizedKey))) {\r\n            // only render valid values\r\n            ret += `${normalizedKey}:${value};`;\r\n        }\r\n    }\r\n    return ret;\r\n}\r\nfunction normalizeClass(value) {\r\n    let res = '';\r\n    if (isString(value)) {\r\n        res = value;\r\n    }\r\n    else if (isArray(value)) {\r\n        for (let i = 0; i < value.length; i++) {\r\n            const normalized = normalizeClass(value[i]);\r\n            if (normalized) {\r\n                res += normalized + ' ';\r\n            }\r\n        }\r\n    }\r\n    else if (isObject(value)) {\r\n        for (const name in value) {\r\n            if (value[name]) {\r\n                res += name + ' ';\r\n            }\r\n        }\r\n    }\r\n    return res.trim();\r\n}\n\n// These tag configs are shared between compiler-dom and runtime-dom, so they\r\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element\r\nconst HTML_TAGS = 'html,body,base,head,link,meta,style,title,address,article,aside,footer,' +\r\n    'header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,' +\r\n    'figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,' +\r\n    'data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,' +\r\n    'time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,' +\r\n    'canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,' +\r\n    'th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,' +\r\n    'option,output,progress,select,textarea,details,dialog,menu,' +\r\n    'summary,template,blockquote,iframe,tfoot';\r\n// https://developer.mozilla.org/en-US/docs/Web/SVG/Element\r\nconst SVG_TAGS = 'svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,' +\r\n    'defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,' +\r\n    'feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,' +\r\n    'feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,' +\r\n    'feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,' +\r\n    'fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,' +\r\n    'foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,' +\r\n    'mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,' +\r\n    'polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,' +\r\n    'text,textPath,title,tspan,unknown,use,view';\r\nconst VOID_TAGS = 'area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr';\r\nconst isHTMLTag = /*#__PURE__*/ makeMap(HTML_TAGS);\r\nconst isSVGTag = /*#__PURE__*/ makeMap(SVG_TAGS);\r\nconst isVoidTag = /*#__PURE__*/ makeMap(VOID_TAGS);\n\nconst escapeRE = /[\"'&<>]/;\r\nfunction escapeHtml(string) {\r\n    const str = '' + string;\r\n    const match = escapeRE.exec(str);\r\n    if (!match) {\r\n        return str;\r\n    }\r\n    let html = '';\r\n    let escaped;\r\n    let index;\r\n    let lastIndex = 0;\r\n    for (index = match.index; index < str.length; index++) {\r\n        switch (str.charCodeAt(index)) {\r\n            case 34: // \"\r\n                escaped = '&quot;';\r\n                break;\r\n            case 38: // &\r\n                escaped = '&amp;';\r\n                break;\r\n            case 39: // '\r\n                escaped = '&#39;';\r\n                break;\r\n            case 60: // <\r\n                escaped = '&lt;';\r\n                break;\r\n            case 62: // >\r\n                escaped = '&gt;';\r\n                break;\r\n            default:\r\n                continue;\r\n        }\r\n        if (lastIndex !== index) {\r\n            html += str.substring(lastIndex, index);\r\n        }\r\n        lastIndex = index + 1;\r\n        html += escaped;\r\n    }\r\n    return lastIndex !== index ? html + str.substring(lastIndex, index) : html;\r\n}\r\n// https://www.w3.org/TR/html52/syntax.html#comments\r\nconst commentStripRE = /^-?>|<!--|-->|--!>|<!-$/g;\r\nfunction escapeHtmlComment(src) {\r\n    return src.replace(commentStripRE, '');\r\n}\n\nfunction looseCompareArrays(a, b) {\r\n    if (a.length !== b.length)\r\n        return false;\r\n    let equal = true;\r\n    for (let i = 0; equal && i < a.length; i++) {\r\n        equal = looseEqual(a[i], b[i]);\r\n    }\r\n    return equal;\r\n}\r\nfunction looseEqual(a, b) {\r\n    if (a === b)\r\n        return true;\r\n    let aValidType = isDate(a);\r\n    let bValidType = isDate(b);\r\n    if (aValidType || bValidType) {\r\n        return aValidType && bValidType ? a.getTime() === b.getTime() : false;\r\n    }\r\n    aValidType = isArray(a);\r\n    bValidType = isArray(b);\r\n    if (aValidType || bValidType) {\r\n        return aValidType && bValidType ? looseCompareArrays(a, b) : false;\r\n    }\r\n    aValidType = isObject(a);\r\n    bValidType = isObject(b);\r\n    if (aValidType || bValidType) {\r\n        /* istanbul ignore if: this if will probably never be called */\r\n        if (!aValidType || !bValidType) {\r\n            return false;\r\n        }\r\n        const aKeysCount = Object.keys(a).length;\r\n        const bKeysCount = Object.keys(b).length;\r\n        if (aKeysCount !== bKeysCount) {\r\n            return false;\r\n        }\r\n        for (const key in a) {\r\n            const aHasKey = a.hasOwnProperty(key);\r\n            const bHasKey = b.hasOwnProperty(key);\r\n            if ((aHasKey && !bHasKey) ||\r\n                (!aHasKey && bHasKey) ||\r\n                !looseEqual(a[key], b[key])) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    return String(a) === String(b);\r\n}\r\nfunction looseIndexOf(arr, val) {\r\n    return arr.findIndex(item => looseEqual(item, val));\r\n}\n\n/**\r\n * For converting {{ interpolation }} values to displayed strings.\r\n * @private\r\n */\r\nconst toDisplayString = (val) => {\r\n    return val == null\r\n        ? ''\r\n        : isObject(val)\r\n            ? JSON.stringify(val, replacer, 2)\r\n            : String(val);\r\n};\r\nconst replacer = (_key, val) => {\r\n    if (isMap(val)) {\r\n        return {\r\n            [`Map(${val.size})`]: [...val.entries()].reduce((entries, [key, val]) => {\r\n                entries[`${key} =>`] = val;\r\n                return entries;\r\n            }, {})\r\n        };\r\n    }\r\n    else if (isSet(val)) {\r\n        return {\r\n            [`Set(${val.size})`]: [...val.values()]\r\n        };\r\n    }\r\n    else if (isObject(val) && !isArray(val) && !isPlainObject(val)) {\r\n        return String(val);\r\n    }\r\n    return val;\r\n};\n\n/**\r\n * List of @babel/parser plugins that are used for template expression\r\n * transforms and SFC script transforms. By default we enable proposals slated\r\n * for ES2020. This will need to be updated as the spec moves forward.\r\n * Full list at https://babeljs.io/docs/en/next/babel-parser#plugins\r\n */\r\nconst babelParserDefaultPlugins = [\r\n    'bigInt',\r\n    'optionalChaining',\r\n    'nullishCoalescingOperator'\r\n];\r\nconst EMPTY_OBJ = (process.env.NODE_ENV !== 'production')\r\n    ? Object.freeze({})\r\n    : {};\r\nconst EMPTY_ARR = (process.env.NODE_ENV !== 'production') ? Object.freeze([]) : [];\r\nconst NOOP = () => { };\r\n/**\r\n * Always return false.\r\n */\r\nconst NO = () => false;\r\nconst onRE = /^on[^a-z]/;\r\nconst isOn = (key) => onRE.test(key);\r\nconst isModelListener = (key) => key.startsWith('onUpdate:');\r\nconst extend = Object.assign;\r\nconst remove = (arr, el) => {\r\n    const i = arr.indexOf(el);\r\n    if (i > -1) {\r\n        arr.splice(i, 1);\r\n    }\r\n};\r\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\r\nconst hasOwn = (val, key) => hasOwnProperty.call(val, key);\r\nconst isArray = Array.isArray;\r\nconst isMap = (val) => toTypeString(val) === '[object Map]';\r\nconst isSet = (val) => toTypeString(val) === '[object Set]';\r\nconst isDate = (val) => val instanceof Date;\r\nconst isFunction = (val) => typeof val === 'function';\r\nconst isString = (val) => typeof val === 'string';\r\nconst isSymbol = (val) => typeof val === 'symbol';\r\nconst isObject = (val) => val !== null && typeof val === 'object';\r\nconst isPromise = (val) => {\r\n    return isObject(val) && isFunction(val.then) && isFunction(val.catch);\r\n};\r\nconst objectToString = Object.prototype.toString;\r\nconst toTypeString = (value) => objectToString.call(value);\r\nconst toRawType = (value) => {\r\n    // extract \"RawType\" from strings like \"[object RawType]\"\r\n    return toTypeString(value).slice(8, -1);\r\n};\r\nconst isPlainObject = (val) => toTypeString(val) === '[object Object]';\r\nconst isIntegerKey = (key) => isString(key) &&\r\n    key !== 'NaN' &&\r\n    key[0] !== '-' &&\r\n    '' + parseInt(key, 10) === key;\r\nconst isReservedProp = /*#__PURE__*/ makeMap(\r\n// the leading comma is intentional so empty string \"\" is also included\r\n',key,ref,' +\r\n    'onVnodeBeforeMount,onVnodeMounted,' +\r\n    'onVnodeBeforeUpdate,onVnodeUpdated,' +\r\n    'onVnodeBeforeUnmount,onVnodeUnmounted');\r\nconst cacheStringFunction = (fn) => {\r\n    const cache = Object.create(null);\r\n    return ((str) => {\r\n        const hit = cache[str];\r\n        return hit || (cache[str] = fn(str));\r\n    });\r\n};\r\nconst camelizeRE = /-(\\w)/g;\r\n/**\r\n * @private\r\n */\r\nconst camelize = cacheStringFunction((str) => {\r\n    return str.replace(camelizeRE, (_, c) => (c ? c.toUpperCase() : ''));\r\n});\r\nconst hyphenateRE = /\\B([A-Z])/g;\r\n/**\r\n * @private\r\n */\r\nconst hyphenate = cacheStringFunction((str) => str.replace(hyphenateRE, '-$1').toLowerCase());\r\n/**\r\n * @private\r\n */\r\nconst capitalize = cacheStringFunction((str) => str.charAt(0).toUpperCase() + str.slice(1));\r\n/**\r\n * @private\r\n */\r\nconst toHandlerKey = cacheStringFunction((str) => (str ? `on${capitalize(str)}` : ``));\r\n// compare whether a value has changed, accounting for NaN.\r\nconst hasChanged = (value, oldValue) => value !== oldValue && (value === value || oldValue === oldValue);\r\nconst invokeArrayFns = (fns, arg) => {\r\n    for (let i = 0; i < fns.length; i++) {\r\n        fns[i](arg);\r\n    }\r\n};\r\nconst def = (obj, key, value) => {\r\n    Object.defineProperty(obj, key, {\r\n        configurable: true,\r\n        enumerable: false,\r\n        value\r\n    });\r\n};\r\nconst toNumber = (val) => {\r\n    const n = parseFloat(val);\r\n    return isNaN(n) ? val : n;\r\n};\r\nlet _globalThis;\r\nconst getGlobalThis = () => {\r\n    return (_globalThis ||\r\n        (_globalThis =\r\n            typeof globalThis !== 'undefined'\r\n                ? globalThis\r\n                : typeof self !== 'undefined'\r\n                    ? self\r\n                    : typeof window !== 'undefined'\r\n                        ? window\r\n                        : typeof global !== 'undefined'\r\n                            ? global\r\n                            : {}));\r\n};\n\nexport { EMPTY_ARR, EMPTY_OBJ, NO, NOOP, PatchFlagNames, babelParserDefaultPlugins, camelize, capitalize, def, escapeHtml, escapeHtmlComment, extend, generateCodeFrame, getGlobalThis, hasChanged, hasOwn, hyphenate, invokeArrayFns, isArray, isBooleanAttr, isDate, isFunction, isGloballyWhitelisted, isHTMLTag, isIntegerKey, isKnownAttr, isMap, isModelListener, isNoUnitNumericStyleProp, isObject, isOn, isPlainObject, isPromise, isReservedProp, isSSRSafeAttrName, isSVGTag, isSet, isSpecialBooleanAttr, isString, isSymbol, isVoidTag, looseEqual, looseIndexOf, makeMap, normalizeClass, normalizeStyle, objectToString, parseStringStyle, propsToAttrMap, remove, slotFlagsText, stringifyStyle, toDisplayString, toHandlerKey, toNumber, toRawType, toTypeString };\n","var userAgent = require('../internals/engine-user-agent');\n\nmodule.exports = /web0s(?!.*chrome)/i.test(userAgent);\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar IS_PURE = require('../internals/is-pure');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar anObject = require('../internals/an-object');\nvar toObject = require('../internals/to-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar nativeObjectCreate = require('../internals/object-create');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternal = require('../internals/object-get-own-property-names-external');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar shared = require('../internals/shared');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar uid = require('../internals/uid');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineWellKnownSymbol = require('../internals/define-well-known-symbol');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar InternalStateModule = require('../internals/internal-state');\nvar $forEach = require('../internals/array-iteration').forEach;\n\nvar HIDDEN = sharedKey('hidden');\nvar SYMBOL = 'Symbol';\nvar PROTOTYPE = 'prototype';\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(SYMBOL);\nvar ObjectPrototype = Object[PROTOTYPE];\nvar $Symbol = global.Symbol;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;\nvar nativePropertyIsEnumerable = propertyIsEnumerableModule.f;\nvar AllSymbols = shared('symbols');\nvar ObjectPrototypeSymbols = shared('op-symbols');\nvar StringToSymbolRegistry = shared('string-to-symbol-registry');\nvar SymbolToStringRegistry = shared('symbol-to-string-registry');\nvar WellKnownSymbolsStore = shared('wks');\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDescriptor = DESCRIPTORS && fails(function () {\n  return nativeObjectCreate(nativeDefineProperty({}, 'a', {\n    get: function () { return nativeDefineProperty(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (O, P, Attributes) {\n  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);\n  if (ObjectPrototypeDescriptor) delete ObjectPrototype[P];\n  nativeDefineProperty(O, P, Attributes);\n  if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {\n    nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);\n  }\n} : nativeDefineProperty;\n\nvar wrap = function (tag, description) {\n  var symbol = AllSymbols[tag] = nativeObjectCreate($Symbol[PROTOTYPE]);\n  setInternalState(symbol, {\n    type: SYMBOL,\n    tag: tag,\n    description: description\n  });\n  if (!DESCRIPTORS) symbol.description = description;\n  return symbol;\n};\n\nvar isSymbol = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return Object(it) instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(O, P, Attributes) {\n  if (O === ObjectPrototype) $defineProperty(ObjectPrototypeSymbols, P, Attributes);\n  anObject(O);\n  var key = toPrimitive(P, true);\n  anObject(Attributes);\n  if (has(AllSymbols, key)) {\n    if (!Attributes.enumerable) {\n      if (!has(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, {}));\n      O[HIDDEN][key] = true;\n    } else {\n      if (has(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;\n      Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });\n    } return setSymbolDescriptor(O, key, Attributes);\n  } return nativeDefineProperty(O, key, Attributes);\n};\n\nvar $defineProperties = function defineProperties(O, Properties) {\n  anObject(O);\n  var properties = toIndexedObject(Properties);\n  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));\n  $forEach(keys, function (key) {\n    if (!DESCRIPTORS || $propertyIsEnumerable.call(properties, key)) $defineProperty(O, key, properties[key]);\n  });\n  return O;\n};\n\nvar $create = function create(O, Properties) {\n  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);\n};\n\nvar $propertyIsEnumerable = function propertyIsEnumerable(V) {\n  var P = toPrimitive(V, true);\n  var enumerable = nativePropertyIsEnumerable.call(this, P);\n  if (this === ObjectPrototype && has(AllSymbols, P) && !has(ObjectPrototypeSymbols, P)) return false;\n  return enumerable || !has(this, P) || !has(AllSymbols, P) || has(this, HIDDEN) && this[HIDDEN][P] ? enumerable : true;\n};\n\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {\n  var it = toIndexedObject(O);\n  var key = toPrimitive(P, true);\n  if (it === ObjectPrototype && has(AllSymbols, key) && !has(ObjectPrototypeSymbols, key)) return;\n  var descriptor = nativeGetOwnPropertyDescriptor(it, key);\n  if (descriptor && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) {\n    descriptor.enumerable = true;\n  }\n  return descriptor;\n};\n\nvar $getOwnPropertyNames = function getOwnPropertyNames(O) {\n  var names = nativeGetOwnPropertyNames(toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (!has(AllSymbols, key) && !has(hiddenKeys, key)) result.push(key);\n  });\n  return result;\n};\n\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(O) {\n  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;\n  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (has(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || has(ObjectPrototype, key))) {\n      result.push(AllSymbols[key]);\n    }\n  });\n  return result;\n};\n\n// `Symbol` constructor\n// https://tc39.es/ecma262/#sec-symbol-constructor\nif (!NATIVE_SYMBOL) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor');\n    var description = !arguments.length || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var tag = uid(description);\n    var setter = function (value) {\n      if (this === ObjectPrototype) setter.call(ObjectPrototypeSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDescriptor(this, tag, createPropertyDescriptor(1, value));\n    };\n    if (DESCRIPTORS && USE_SETTER) setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });\n    return wrap(tag, description);\n  };\n\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return getInternalState(this).tag;\n  });\n\n  redefine($Symbol, 'withoutSetter', function (description) {\n    return wrap(uid(description), description);\n  });\n\n  propertyIsEnumerableModule.f = $propertyIsEnumerable;\n  definePropertyModule.f = $defineProperty;\n  getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;\n  getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;\n  getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;\n\n  wrappedWellKnownSymbolModule.f = function (name) {\n    return wrap(wellKnownSymbol(name), name);\n  };\n\n  if (DESCRIPTORS) {\n    // https://github.com/tc39/proposal-Symbol-description\n    nativeDefineProperty($Symbol[PROTOTYPE], 'description', {\n      configurable: true,\n      get: function description() {\n        return getInternalState(this).description;\n      }\n    });\n    if (!IS_PURE) {\n      redefine(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });\n    }\n  }\n}\n\n$({ global: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {\n  Symbol: $Symbol\n});\n\n$forEach(objectKeys(WellKnownSymbolsStore), function (name) {\n  defineWellKnownSymbol(name);\n});\n\n$({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Symbol.for` method\n  // https://tc39.es/ecma262/#sec-symbol.for\n  'for': function (key) {\n    var string = String(key);\n    if (has(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];\n    var symbol = $Symbol(string);\n    StringToSymbolRegistry[string] = symbol;\n    SymbolToStringRegistry[symbol] = string;\n    return symbol;\n  },\n  // `Symbol.keyFor` method\n  // https://tc39.es/ecma262/#sec-symbol.keyfor\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol');\n    if (has(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];\n  },\n  useSetter: function () { USE_SETTER = true; },\n  useSimple: function () { USE_SETTER = false; }\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {\n  // `Object.create` method\n  // https://tc39.es/ecma262/#sec-object.create\n  create: $create,\n  // `Object.defineProperty` method\n  // https://tc39.es/ecma262/#sec-object.defineproperty\n  defineProperty: $defineProperty,\n  // `Object.defineProperties` method\n  // https://tc39.es/ecma262/#sec-object.defineproperties\n  defineProperties: $defineProperties,\n  // `Object.getOwnPropertyDescriptor` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Object.getOwnPropertyNames` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertynames\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // `Object.getOwnPropertySymbols` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertysymbols\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\n$({ target: 'Object', stat: true, forced: fails(function () { getOwnPropertySymbolsModule.f(1); }) }, {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return getOwnPropertySymbolsModule.f(toObject(it));\n  }\n});\n\n// `JSON.stringify` method behavior with symbols\n// https://tc39.es/ecma262/#sec-json.stringify\nif ($stringify) {\n  var FORCED_JSON_STRINGIFY = !NATIVE_SYMBOL || fails(function () {\n    var symbol = $Symbol();\n    // MS Edge converts symbol values to JSON as {}\n    return $stringify([symbol]) != '[null]'\n      // WebKit converts symbol values to JSON as null\n      || $stringify({ a: symbol }) != '{}'\n      // V8 throws on boxed symbols\n      || $stringify(Object(symbol)) != '{}';\n  });\n\n  $({ target: 'JSON', stat: true, forced: FORCED_JSON_STRINGIFY }, {\n    // eslint-disable-next-line no-unused-vars -- required for `.length`\n    stringify: function stringify(it, replacer, space) {\n      var args = [it];\n      var index = 1;\n      var $replacer;\n      while (arguments.length > index) args.push(arguments[index++]);\n      $replacer = replacer;\n      if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n      if (!isArray(replacer)) replacer = function (key, value) {\n        if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n        if (!isSymbol(value)) return value;\n      };\n      args[1] = replacer;\n      return $stringify.apply(null, args);\n    }\n  });\n}\n\n// `Symbol.prototype[@@toPrimitive]` method\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive\nif (!$Symbol[PROTOTYPE][TO_PRIMITIVE]) {\n  createNonEnumerableProperty($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n}\n// `Symbol.prototype[@@toStringTag]` property\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@tostringtag\nsetToStringTag($Symbol, SYMBOL);\n\nhiddenKeys[HIDDEN] = true;\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.es/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar fails = require('../internals/fails');\nvar getBuiltIn = require('../internals/get-built-in');\nvar speciesConstructor = require('../internals/species-constructor');\nvar promiseResolve = require('../internals/promise-resolve');\nvar redefine = require('../internals/redefine');\n\n// Safari bug https://bugs.webkit.org/show_bug.cgi?id=200829\nvar NON_GENERIC = !!NativePromise && fails(function () {\n  NativePromise.prototype['finally'].call({ then: function () { /* empty */ } }, function () { /* empty */ });\n});\n\n// `Promise.prototype.finally` method\n// https://tc39.es/ecma262/#sec-promise.prototype.finally\n$({ target: 'Promise', proto: true, real: true, forced: NON_GENERIC }, {\n  'finally': function (onFinally) {\n    var C = speciesConstructor(this, getBuiltIn('Promise'));\n    var isFunction = typeof onFinally == 'function';\n    return this.then(\n      isFunction ? function (x) {\n        return promiseResolve(C, onFinally()).then(function () { return x; });\n      } : onFinally,\n      isFunction ? function (e) {\n        return promiseResolve(C, onFinally()).then(function () { throw e; });\n      } : onFinally\n    );\n  }\n});\n\n// patch native Promise.prototype for native async functions\nif (!IS_PURE && typeof NativePromise == 'function' && !NativePromise.prototype['finally']) {\n  redefine(NativePromise.prototype, 'finally', getBuiltIn('Promise').prototype['finally']);\n}\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\nvar returnThis = function () { return this; };\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\n/* eslint-disable es/no-array-prototype-keys -- safe */\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = IteratorPrototype == undefined || fails(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype[ITERATOR].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nif ((!IS_PURE || NEW_ITERATOR_PROTOTYPE) && !has(IteratorPrototype, ITERATOR)) {\n  createNonEnumerableProperty(IteratorPrototype, ITERATOR, returnThis);\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classof = require('../internals/classof');\n\n// `Object.prototype.toString` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nmodule.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {\n  return '[object ' + classof(this) + ']';\n};\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar macrotask = require('../internals/task').set;\nvar IS_IOS = require('../internals/engine-is-ios');\nvar IS_WEBOS_WEBKIT = require('../internals/engine-is-webos-webkit');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar MutationObserver = global.MutationObserver || global.WebKitMutationObserver;\nvar document = global.document;\nvar process = global.process;\nvar Promise = global.Promise;\n// Node.js 11 shows ExperimentalWarning on getting `queueMicrotask`\nvar queueMicrotaskDescriptor = getOwnPropertyDescriptor(global, 'queueMicrotask');\nvar queueMicrotask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;\n\nvar flush, head, last, notify, toggle, node, promise, then;\n\n// modern engines have queueMicrotask method\nif (!queueMicrotask) {\n  flush = function () {\n    var parent, fn;\n    if (IS_NODE && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (error) {\n        if (head) notify();\n        else last = undefined;\n        throw error;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // browsers with MutationObserver, except iOS - https://github.com/zloirock/core-js/issues/339\n  // also except WebOS Webkit https://github.com/zloirock/core-js/issues/898\n  if (!IS_IOS && !IS_NODE && !IS_WEBOS_WEBKIT && MutationObserver && document) {\n    toggle = true;\n    node = document.createTextNode('');\n    new MutationObserver(flush).observe(node, { characterData: true });\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    promise = Promise.resolve(undefined);\n    then = promise.then;\n    notify = function () {\n      then.call(promise, flush);\n    };\n  // Node.js without promises\n  } else if (IS_NODE) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n}\n\nmodule.exports = queueMicrotask || function (fn) {\n  var task = { fn: fn, next: undefined };\n  if (last) last.next = task;\n  if (!head) {\n    head = task;\n    notify();\n  } last = task;\n};\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterOut }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_OUT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_OUT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push.call(target, value); // filterOut\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterOut` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterOut: createMethod(7)\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-isextensible, es/no-object-preventextensions -- required for testing\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","module.exports = false;\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.es/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var $ = require('../internals/export');\nvar assign = require('../internals/object-assign');\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\n// eslint-disable-next-line es/no-object-assign -- required for testing\n$({ target: 'Object', stat: true, forced: Object.assign !== assign }, {\n  assign: assign\n});\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","import _typeof from \"@babel/runtime/helpers/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn.js\";\nexport default function _createSuper(Derived) {\n  var hasNativeReflectConstruct = isNativeReflectConstruct();\n  return function _createSuperInternal() {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct;\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}","import { EMPTY_OBJ, isArray, isMap, isIntegerKey, isSymbol, extend, hasOwn, isObject, hasChanged, makeMap, capitalize, toRawType, def, isFunction, NOOP } from '@vue/shared';\n\nconst targetMap = new WeakMap();\r\nconst effectStack = [];\r\nlet activeEffect;\r\nconst ITERATE_KEY = Symbol((process.env.NODE_ENV !== 'production') ? 'iterate' : '');\r\nconst MAP_KEY_ITERATE_KEY = Symbol((process.env.NODE_ENV !== 'production') ? 'Map key iterate' : '');\r\nfunction isEffect(fn) {\r\n    return fn && fn._isEffect === true;\r\n}\r\nfunction effect(fn, options = EMPTY_OBJ) {\r\n    if (isEffect(fn)) {\r\n        fn = fn.raw;\r\n    }\r\n    const effect = createReactiveEffect(fn, options);\r\n    if (!options.lazy) {\r\n        effect();\r\n    }\r\n    return effect;\r\n}\r\nfunction stop(effect) {\r\n    if (effect.active) {\r\n        cleanup(effect);\r\n        if (effect.options.onStop) {\r\n            effect.options.onStop();\r\n        }\r\n        effect.active = false;\r\n    }\r\n}\r\nlet uid = 0;\r\nfunction createReactiveEffect(fn, options) {\r\n    const effect = function reactiveEffect() {\r\n        if (!effect.active) {\r\n            return options.scheduler ? undefined : fn();\r\n        }\r\n        if (!effectStack.includes(effect)) {\r\n            cleanup(effect);\r\n            try {\r\n                enableTracking();\r\n                effectStack.push(effect);\r\n                activeEffect = effect;\r\n                return fn();\r\n            }\r\n            finally {\r\n                effectStack.pop();\r\n                resetTracking();\r\n                activeEffect = effectStack[effectStack.length - 1];\r\n            }\r\n        }\r\n    };\r\n    effect.id = uid++;\r\n    effect.allowRecurse = !!options.allowRecurse;\r\n    effect._isEffect = true;\r\n    effect.active = true;\r\n    effect.raw = fn;\r\n    effect.deps = [];\r\n    effect.options = options;\r\n    return effect;\r\n}\r\nfunction cleanup(effect) {\r\n    const { deps } = effect;\r\n    if (deps.length) {\r\n        for (let i = 0; i < deps.length; i++) {\r\n            deps[i].delete(effect);\r\n        }\r\n        deps.length = 0;\r\n    }\r\n}\r\nlet shouldTrack = true;\r\nconst trackStack = [];\r\nfunction pauseTracking() {\r\n    trackStack.push(shouldTrack);\r\n    shouldTrack = false;\r\n}\r\nfunction enableTracking() {\r\n    trackStack.push(shouldTrack);\r\n    shouldTrack = true;\r\n}\r\nfunction resetTracking() {\r\n    const last = trackStack.pop();\r\n    shouldTrack = last === undefined ? true : last;\r\n}\r\nfunction track(target, type, key) {\r\n    if (!shouldTrack || activeEffect === undefined) {\r\n        return;\r\n    }\r\n    let depsMap = targetMap.get(target);\r\n    if (!depsMap) {\r\n        targetMap.set(target, (depsMap = new Map()));\r\n    }\r\n    let dep = depsMap.get(key);\r\n    if (!dep) {\r\n        depsMap.set(key, (dep = new Set()));\r\n    }\r\n    if (!dep.has(activeEffect)) {\r\n        dep.add(activeEffect);\r\n        activeEffect.deps.push(dep);\r\n        if ((process.env.NODE_ENV !== 'production') && activeEffect.options.onTrack) {\r\n            activeEffect.options.onTrack({\r\n                effect: activeEffect,\r\n                target,\r\n                type,\r\n                key\r\n            });\r\n        }\r\n    }\r\n}\r\nfunction trigger(target, type, key, newValue, oldValue, oldTarget) {\r\n    const depsMap = targetMap.get(target);\r\n    if (!depsMap) {\r\n        // never been tracked\r\n        return;\r\n    }\r\n    const effects = new Set();\r\n    const add = (effectsToAdd) => {\r\n        if (effectsToAdd) {\r\n            effectsToAdd.forEach(effect => {\r\n                if (effect !== activeEffect || effect.allowRecurse) {\r\n                    effects.add(effect);\r\n                }\r\n            });\r\n        }\r\n    };\r\n    if (type === \"clear\" /* CLEAR */) {\r\n        // collection being cleared\r\n        // trigger all effects for target\r\n        depsMap.forEach(add);\r\n    }\r\n    else if (key === 'length' && isArray(target)) {\r\n        depsMap.forEach((dep, key) => {\r\n            if (key === 'length' || key >= newValue) {\r\n                add(dep);\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        // schedule runs for SET | ADD | DELETE\r\n        if (key !== void 0) {\r\n            add(depsMap.get(key));\r\n        }\r\n        // also run for iteration key on ADD | DELETE | Map.SET\r\n        switch (type) {\r\n            case \"add\" /* ADD */:\r\n                if (!isArray(target)) {\r\n                    add(depsMap.get(ITERATE_KEY));\r\n                    if (isMap(target)) {\r\n                        add(depsMap.get(MAP_KEY_ITERATE_KEY));\r\n                    }\r\n                }\r\n                else if (isIntegerKey(key)) {\r\n                    // new index added to array -> length changes\r\n                    add(depsMap.get('length'));\r\n                }\r\n                break;\r\n            case \"delete\" /* DELETE */:\r\n                if (!isArray(target)) {\r\n                    add(depsMap.get(ITERATE_KEY));\r\n                    if (isMap(target)) {\r\n                        add(depsMap.get(MAP_KEY_ITERATE_KEY));\r\n                    }\r\n                }\r\n                break;\r\n            case \"set\" /* SET */:\r\n                if (isMap(target)) {\r\n                    add(depsMap.get(ITERATE_KEY));\r\n                }\r\n                break;\r\n        }\r\n    }\r\n    const run = (effect) => {\r\n        if ((process.env.NODE_ENV !== 'production') && effect.options.onTrigger) {\r\n            effect.options.onTrigger({\r\n                effect,\r\n                target,\r\n                key,\r\n                type,\r\n                newValue,\r\n                oldValue,\r\n                oldTarget\r\n            });\r\n        }\r\n        if (effect.options.scheduler) {\r\n            effect.options.scheduler(effect);\r\n        }\r\n        else {\r\n            effect();\r\n        }\r\n    };\r\n    effects.forEach(run);\r\n}\n\nconst isNonTrackableKeys = /*#__PURE__*/ makeMap(`__proto__,__v_isRef,__isVue`);\r\nconst builtInSymbols = new Set(Object.getOwnPropertyNames(Symbol)\r\n    .map(key => Symbol[key])\r\n    .filter(isSymbol));\r\nconst get = /*#__PURE__*/ createGetter();\r\nconst shallowGet = /*#__PURE__*/ createGetter(false, true);\r\nconst readonlyGet = /*#__PURE__*/ createGetter(true);\r\nconst shallowReadonlyGet = /*#__PURE__*/ createGetter(true, true);\r\nconst arrayInstrumentations = {};\r\n['includes', 'indexOf', 'lastIndexOf'].forEach(key => {\r\n    const method = Array.prototype[key];\r\n    arrayInstrumentations[key] = function (...args) {\r\n        const arr = toRaw(this);\r\n        for (let i = 0, l = this.length; i < l; i++) {\r\n            track(arr, \"get\" /* GET */, i + '');\r\n        }\r\n        // we run the method using the original args first (which may be reactive)\r\n        const res = method.apply(arr, args);\r\n        if (res === -1 || res === false) {\r\n            // if that didn't work, run it again using raw values.\r\n            return method.apply(arr, args.map(toRaw));\r\n        }\r\n        else {\r\n            return res;\r\n        }\r\n    };\r\n});\r\n['push', 'pop', 'shift', 'unshift', 'splice'].forEach(key => {\r\n    const method = Array.prototype[key];\r\n    arrayInstrumentations[key] = function (...args) {\r\n        pauseTracking();\r\n        const res = method.apply(this, args);\r\n        resetTracking();\r\n        return res;\r\n    };\r\n});\r\nfunction createGetter(isReadonly = false, shallow = false) {\r\n    return function get(target, key, receiver) {\r\n        if (key === \"__v_isReactive\" /* IS_REACTIVE */) {\r\n            return !isReadonly;\r\n        }\r\n        else if (key === \"__v_isReadonly\" /* IS_READONLY */) {\r\n            return isReadonly;\r\n        }\r\n        else if (key === \"__v_raw\" /* RAW */ &&\r\n            receiver ===\r\n                (isReadonly\r\n                    ? shallow\r\n                        ? shallowReadonlyMap\r\n                        : readonlyMap\r\n                    : shallow\r\n                        ? shallowReactiveMap\r\n                        : reactiveMap).get(target)) {\r\n            return target;\r\n        }\r\n        const targetIsArray = isArray(target);\r\n        if (!isReadonly && targetIsArray && hasOwn(arrayInstrumentations, key)) {\r\n            return Reflect.get(arrayInstrumentations, key, receiver);\r\n        }\r\n        const res = Reflect.get(target, key, receiver);\r\n        if (isSymbol(key)\r\n            ? builtInSymbols.has(key)\r\n            : isNonTrackableKeys(key)) {\r\n            return res;\r\n        }\r\n        if (!isReadonly) {\r\n            track(target, \"get\" /* GET */, key);\r\n        }\r\n        if (shallow) {\r\n            return res;\r\n        }\r\n        if (isRef(res)) {\r\n            // ref unwrapping - does not apply for Array + integer key.\r\n            const shouldUnwrap = !targetIsArray || !isIntegerKey(key);\r\n            return shouldUnwrap ? res.value : res;\r\n        }\r\n        if (isObject(res)) {\r\n            // Convert returned value into a proxy as well. we do the isObject check\r\n            // here to avoid invalid value warning. Also need to lazy access readonly\r\n            // and reactive here to avoid circular dependency.\r\n            return isReadonly ? readonly(res) : reactive(res);\r\n        }\r\n        return res;\r\n    };\r\n}\r\nconst set = /*#__PURE__*/ createSetter();\r\nconst shallowSet = /*#__PURE__*/ createSetter(true);\r\nfunction createSetter(shallow = false) {\r\n    return function set(target, key, value, receiver) {\r\n        let oldValue = target[key];\r\n        if (!shallow) {\r\n            value = toRaw(value);\r\n            oldValue = toRaw(oldValue);\r\n            if (!isArray(target) && isRef(oldValue) && !isRef(value)) {\r\n                oldValue.value = value;\r\n                return true;\r\n            }\r\n        }\r\n        const hadKey = isArray(target) && isIntegerKey(key)\r\n            ? Number(key) < target.length\r\n            : hasOwn(target, key);\r\n        const result = Reflect.set(target, key, value, receiver);\r\n        // don't trigger if target is something up in the prototype chain of original\r\n        if (target === toRaw(receiver)) {\r\n            if (!hadKey) {\r\n                trigger(target, \"add\" /* ADD */, key, value);\r\n            }\r\n            else if (hasChanged(value, oldValue)) {\r\n                trigger(target, \"set\" /* SET */, key, value, oldValue);\r\n            }\r\n        }\r\n        return result;\r\n    };\r\n}\r\nfunction deleteProperty(target, key) {\r\n    const hadKey = hasOwn(target, key);\r\n    const oldValue = target[key];\r\n    const result = Reflect.deleteProperty(target, key);\r\n    if (result && hadKey) {\r\n        trigger(target, \"delete\" /* DELETE */, key, undefined, oldValue);\r\n    }\r\n    return result;\r\n}\r\nfunction has(target, key) {\r\n    const result = Reflect.has(target, key);\r\n    if (!isSymbol(key) || !builtInSymbols.has(key)) {\r\n        track(target, \"has\" /* HAS */, key);\r\n    }\r\n    return result;\r\n}\r\nfunction ownKeys(target) {\r\n    track(target, \"iterate\" /* ITERATE */, isArray(target) ? 'length' : ITERATE_KEY);\r\n    return Reflect.ownKeys(target);\r\n}\r\nconst mutableHandlers = {\r\n    get,\r\n    set,\r\n    deleteProperty,\r\n    has,\r\n    ownKeys\r\n};\r\nconst readonlyHandlers = {\r\n    get: readonlyGet,\r\n    set(target, key) {\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            console.warn(`Set operation on key \"${String(key)}\" failed: target is readonly.`, target);\r\n        }\r\n        return true;\r\n    },\r\n    deleteProperty(target, key) {\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            console.warn(`Delete operation on key \"${String(key)}\" failed: target is readonly.`, target);\r\n        }\r\n        return true;\r\n    }\r\n};\r\nconst shallowReactiveHandlers = extend({}, mutableHandlers, {\r\n    get: shallowGet,\r\n    set: shallowSet\r\n});\r\n// Props handlers are special in the sense that it should not unwrap top-level\r\n// refs (in order to allow refs to be explicitly passed down), but should\r\n// retain the reactivity of the normal readonly object.\r\nconst shallowReadonlyHandlers = extend({}, readonlyHandlers, {\r\n    get: shallowReadonlyGet\r\n});\n\nconst toReactive = (value) => isObject(value) ? reactive(value) : value;\r\nconst toReadonly = (value) => isObject(value) ? readonly(value) : value;\r\nconst toShallow = (value) => value;\r\nconst getProto = (v) => Reflect.getPrototypeOf(v);\r\nfunction get$1(target, key, isReadonly = false, isShallow = false) {\r\n    // #1772: readonly(reactive(Map)) should return readonly + reactive version\r\n    // of the value\r\n    target = target[\"__v_raw\" /* RAW */];\r\n    const rawTarget = toRaw(target);\r\n    const rawKey = toRaw(key);\r\n    if (key !== rawKey) {\r\n        !isReadonly && track(rawTarget, \"get\" /* GET */, key);\r\n    }\r\n    !isReadonly && track(rawTarget, \"get\" /* GET */, rawKey);\r\n    const { has } = getProto(rawTarget);\r\n    const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\r\n    if (has.call(rawTarget, key)) {\r\n        return wrap(target.get(key));\r\n    }\r\n    else if (has.call(rawTarget, rawKey)) {\r\n        return wrap(target.get(rawKey));\r\n    }\r\n}\r\nfunction has$1(key, isReadonly = false) {\r\n    const target = this[\"__v_raw\" /* RAW */];\r\n    const rawTarget = toRaw(target);\r\n    const rawKey = toRaw(key);\r\n    if (key !== rawKey) {\r\n        !isReadonly && track(rawTarget, \"has\" /* HAS */, key);\r\n    }\r\n    !isReadonly && track(rawTarget, \"has\" /* HAS */, rawKey);\r\n    return key === rawKey\r\n        ? target.has(key)\r\n        : target.has(key) || target.has(rawKey);\r\n}\r\nfunction size(target, isReadonly = false) {\r\n    target = target[\"__v_raw\" /* RAW */];\r\n    !isReadonly && track(toRaw(target), \"iterate\" /* ITERATE */, ITERATE_KEY);\r\n    return Reflect.get(target, 'size', target);\r\n}\r\nfunction add(value) {\r\n    value = toRaw(value);\r\n    const target = toRaw(this);\r\n    const proto = getProto(target);\r\n    const hadKey = proto.has.call(target, value);\r\n    if (!hadKey) {\r\n        target.add(value);\r\n        trigger(target, \"add\" /* ADD */, value, value);\r\n    }\r\n    return this;\r\n}\r\nfunction set$1(key, value) {\r\n    value = toRaw(value);\r\n    const target = toRaw(this);\r\n    const { has, get } = getProto(target);\r\n    let hadKey = has.call(target, key);\r\n    if (!hadKey) {\r\n        key = toRaw(key);\r\n        hadKey = has.call(target, key);\r\n    }\r\n    else if ((process.env.NODE_ENV !== 'production')) {\r\n        checkIdentityKeys(target, has, key);\r\n    }\r\n    const oldValue = get.call(target, key);\r\n    target.set(key, value);\r\n    if (!hadKey) {\r\n        trigger(target, \"add\" /* ADD */, key, value);\r\n    }\r\n    else if (hasChanged(value, oldValue)) {\r\n        trigger(target, \"set\" /* SET */, key, value, oldValue);\r\n    }\r\n    return this;\r\n}\r\nfunction deleteEntry(key) {\r\n    const target = toRaw(this);\r\n    const { has, get } = getProto(target);\r\n    let hadKey = has.call(target, key);\r\n    if (!hadKey) {\r\n        key = toRaw(key);\r\n        hadKey = has.call(target, key);\r\n    }\r\n    else if ((process.env.NODE_ENV !== 'production')) {\r\n        checkIdentityKeys(target, has, key);\r\n    }\r\n    const oldValue = get ? get.call(target, key) : undefined;\r\n    // forward the operation before queueing reactions\r\n    const result = target.delete(key);\r\n    if (hadKey) {\r\n        trigger(target, \"delete\" /* DELETE */, key, undefined, oldValue);\r\n    }\r\n    return result;\r\n}\r\nfunction clear() {\r\n    const target = toRaw(this);\r\n    const hadItems = target.size !== 0;\r\n    const oldTarget = (process.env.NODE_ENV !== 'production')\r\n        ? isMap(target)\r\n            ? new Map(target)\r\n            : new Set(target)\r\n        : undefined;\r\n    // forward the operation before queueing reactions\r\n    const result = target.clear();\r\n    if (hadItems) {\r\n        trigger(target, \"clear\" /* CLEAR */, undefined, undefined, oldTarget);\r\n    }\r\n    return result;\r\n}\r\nfunction createForEach(isReadonly, isShallow) {\r\n    return function forEach(callback, thisArg) {\r\n        const observed = this;\r\n        const target = observed[\"__v_raw\" /* RAW */];\r\n        const rawTarget = toRaw(target);\r\n        const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\r\n        !isReadonly && track(rawTarget, \"iterate\" /* ITERATE */, ITERATE_KEY);\r\n        return target.forEach((value, key) => {\r\n            // important: make sure the callback is\r\n            // 1. invoked with the reactive map as `this` and 3rd arg\r\n            // 2. the value received should be a corresponding reactive/readonly.\r\n            return callback.call(thisArg, wrap(value), wrap(key), observed);\r\n        });\r\n    };\r\n}\r\nfunction createIterableMethod(method, isReadonly, isShallow) {\r\n    return function (...args) {\r\n        const target = this[\"__v_raw\" /* RAW */];\r\n        const rawTarget = toRaw(target);\r\n        const targetIsMap = isMap(rawTarget);\r\n        const isPair = method === 'entries' || (method === Symbol.iterator && targetIsMap);\r\n        const isKeyOnly = method === 'keys' && targetIsMap;\r\n        const innerIterator = target[method](...args);\r\n        const wrap = isShallow ? toShallow : isReadonly ? toReadonly : toReactive;\r\n        !isReadonly &&\r\n            track(rawTarget, \"iterate\" /* ITERATE */, isKeyOnly ? MAP_KEY_ITERATE_KEY : ITERATE_KEY);\r\n        // return a wrapped iterator which returns observed versions of the\r\n        // values emitted from the real iterator\r\n        return {\r\n            // iterator protocol\r\n            next() {\r\n                const { value, done } = innerIterator.next();\r\n                return done\r\n                    ? { value, done }\r\n                    : {\r\n                        value: isPair ? [wrap(value[0]), wrap(value[1])] : wrap(value),\r\n                        done\r\n                    };\r\n            },\r\n            // iterable protocol\r\n            [Symbol.iterator]() {\r\n                return this;\r\n            }\r\n        };\r\n    };\r\n}\r\nfunction createReadonlyMethod(type) {\r\n    return function (...args) {\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            const key = args[0] ? `on key \"${args[0]}\" ` : ``;\r\n            console.warn(`${capitalize(type)} operation ${key}failed: target is readonly.`, toRaw(this));\r\n        }\r\n        return type === \"delete\" /* DELETE */ ? false : this;\r\n    };\r\n}\r\nconst mutableInstrumentations = {\r\n    get(key) {\r\n        return get$1(this, key);\r\n    },\r\n    get size() {\r\n        return size(this);\r\n    },\r\n    has: has$1,\r\n    add,\r\n    set: set$1,\r\n    delete: deleteEntry,\r\n    clear,\r\n    forEach: createForEach(false, false)\r\n};\r\nconst shallowInstrumentations = {\r\n    get(key) {\r\n        return get$1(this, key, false, true);\r\n    },\r\n    get size() {\r\n        return size(this);\r\n    },\r\n    has: has$1,\r\n    add,\r\n    set: set$1,\r\n    delete: deleteEntry,\r\n    clear,\r\n    forEach: createForEach(false, true)\r\n};\r\nconst readonlyInstrumentations = {\r\n    get(key) {\r\n        return get$1(this, key, true);\r\n    },\r\n    get size() {\r\n        return size(this, true);\r\n    },\r\n    has(key) {\r\n        return has$1.call(this, key, true);\r\n    },\r\n    add: createReadonlyMethod(\"add\" /* ADD */),\r\n    set: createReadonlyMethod(\"set\" /* SET */),\r\n    delete: createReadonlyMethod(\"delete\" /* DELETE */),\r\n    clear: createReadonlyMethod(\"clear\" /* CLEAR */),\r\n    forEach: createForEach(true, false)\r\n};\r\nconst shallowReadonlyInstrumentations = {\r\n    get(key) {\r\n        return get$1(this, key, true, true);\r\n    },\r\n    get size() {\r\n        return size(this, true);\r\n    },\r\n    has(key) {\r\n        return has$1.call(this, key, true);\r\n    },\r\n    add: createReadonlyMethod(\"add\" /* ADD */),\r\n    set: createReadonlyMethod(\"set\" /* SET */),\r\n    delete: createReadonlyMethod(\"delete\" /* DELETE */),\r\n    clear: createReadonlyMethod(\"clear\" /* CLEAR */),\r\n    forEach: createForEach(true, true)\r\n};\r\nconst iteratorMethods = ['keys', 'values', 'entries', Symbol.iterator];\r\niteratorMethods.forEach(method => {\r\n    mutableInstrumentations[method] = createIterableMethod(method, false, false);\r\n    readonlyInstrumentations[method] = createIterableMethod(method, true, false);\r\n    shallowInstrumentations[method] = createIterableMethod(method, false, true);\r\n    shallowReadonlyInstrumentations[method] = createIterableMethod(method, true, true);\r\n});\r\nfunction createInstrumentationGetter(isReadonly, shallow) {\r\n    const instrumentations = shallow\r\n        ? isReadonly\r\n            ? shallowReadonlyInstrumentations\r\n            : shallowInstrumentations\r\n        : isReadonly\r\n            ? readonlyInstrumentations\r\n            : mutableInstrumentations;\r\n    return (target, key, receiver) => {\r\n        if (key === \"__v_isReactive\" /* IS_REACTIVE */) {\r\n            return !isReadonly;\r\n        }\r\n        else if (key === \"__v_isReadonly\" /* IS_READONLY */) {\r\n            return isReadonly;\r\n        }\r\n        else if (key === \"__v_raw\" /* RAW */) {\r\n            return target;\r\n        }\r\n        return Reflect.get(hasOwn(instrumentations, key) && key in target\r\n            ? instrumentations\r\n            : target, key, receiver);\r\n    };\r\n}\r\nconst mutableCollectionHandlers = {\r\n    get: createInstrumentationGetter(false, false)\r\n};\r\nconst shallowCollectionHandlers = {\r\n    get: createInstrumentationGetter(false, true)\r\n};\r\nconst readonlyCollectionHandlers = {\r\n    get: createInstrumentationGetter(true, false)\r\n};\r\nconst shallowReadonlyCollectionHandlers = {\r\n    get: createInstrumentationGetter(true, true)\r\n};\r\nfunction checkIdentityKeys(target, has, key) {\r\n    const rawKey = toRaw(key);\r\n    if (rawKey !== key && has.call(target, rawKey)) {\r\n        const type = toRawType(target);\r\n        console.warn(`Reactive ${type} contains both the raw and reactive ` +\r\n            `versions of the same object${type === `Map` ? ` as keys` : ``}, ` +\r\n            `which can lead to inconsistencies. ` +\r\n            `Avoid differentiating between the raw and reactive versions ` +\r\n            `of an object and only use the reactive version if possible.`);\r\n    }\r\n}\n\nconst reactiveMap = new WeakMap();\r\nconst shallowReactiveMap = new WeakMap();\r\nconst readonlyMap = new WeakMap();\r\nconst shallowReadonlyMap = new WeakMap();\r\nfunction targetTypeMap(rawType) {\r\n    switch (rawType) {\r\n        case 'Object':\r\n        case 'Array':\r\n            return 1 /* COMMON */;\r\n        case 'Map':\r\n        case 'Set':\r\n        case 'WeakMap':\r\n        case 'WeakSet':\r\n            return 2 /* COLLECTION */;\r\n        default:\r\n            return 0 /* INVALID */;\r\n    }\r\n}\r\nfunction getTargetType(value) {\r\n    return value[\"__v_skip\" /* SKIP */] || !Object.isExtensible(value)\r\n        ? 0 /* INVALID */\r\n        : targetTypeMap(toRawType(value));\r\n}\r\nfunction reactive(target) {\r\n    // if trying to observe a readonly proxy, return the readonly version.\r\n    if (target && target[\"__v_isReadonly\" /* IS_READONLY */]) {\r\n        return target;\r\n    }\r\n    return createReactiveObject(target, false, mutableHandlers, mutableCollectionHandlers, reactiveMap);\r\n}\r\n/**\r\n * Return a shallowly-reactive copy of the original object, where only the root\r\n * level properties are reactive. It also does not auto-unwrap refs (even at the\r\n * root level).\r\n */\r\nfunction shallowReactive(target) {\r\n    return createReactiveObject(target, false, shallowReactiveHandlers, shallowCollectionHandlers, shallowReactiveMap);\r\n}\r\n/**\r\n * Creates a readonly copy of the original object. Note the returned copy is not\r\n * made reactive, but `readonly` can be called on an already reactive object.\r\n */\r\nfunction readonly(target) {\r\n    return createReactiveObject(target, true, readonlyHandlers, readonlyCollectionHandlers, readonlyMap);\r\n}\r\n/**\r\n * Returns a reactive-copy of the original object, where only the root level\r\n * properties are readonly, and does NOT unwrap refs nor recursively convert\r\n * returned properties.\r\n * This is used for creating the props proxy object for stateful components.\r\n */\r\nfunction shallowReadonly(target) {\r\n    return createReactiveObject(target, true, shallowReadonlyHandlers, shallowReadonlyCollectionHandlers, shallowReadonlyMap);\r\n}\r\nfunction createReactiveObject(target, isReadonly, baseHandlers, collectionHandlers, proxyMap) {\r\n    if (!isObject(target)) {\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            console.warn(`value cannot be made reactive: ${String(target)}`);\r\n        }\r\n        return target;\r\n    }\r\n    // target is already a Proxy, return it.\r\n    // exception: calling readonly() on a reactive object\r\n    if (target[\"__v_raw\" /* RAW */] &&\r\n        !(isReadonly && target[\"__v_isReactive\" /* IS_REACTIVE */])) {\r\n        return target;\r\n    }\r\n    // target already has corresponding Proxy\r\n    const existingProxy = proxyMap.get(target);\r\n    if (existingProxy) {\r\n        return existingProxy;\r\n    }\r\n    // only a whitelist of value types can be observed.\r\n    const targetType = getTargetType(target);\r\n    if (targetType === 0 /* INVALID */) {\r\n        return target;\r\n    }\r\n    const proxy = new Proxy(target, targetType === 2 /* COLLECTION */ ? collectionHandlers : baseHandlers);\r\n    proxyMap.set(target, proxy);\r\n    return proxy;\r\n}\r\nfunction isReactive(value) {\r\n    if (isReadonly(value)) {\r\n        return isReactive(value[\"__v_raw\" /* RAW */]);\r\n    }\r\n    return !!(value && value[\"__v_isReactive\" /* IS_REACTIVE */]);\r\n}\r\nfunction isReadonly(value) {\r\n    return !!(value && value[\"__v_isReadonly\" /* IS_READONLY */]);\r\n}\r\nfunction isProxy(value) {\r\n    return isReactive(value) || isReadonly(value);\r\n}\r\nfunction toRaw(observed) {\r\n    return ((observed && toRaw(observed[\"__v_raw\" /* RAW */])) || observed);\r\n}\r\nfunction markRaw(value) {\r\n    def(value, \"__v_skip\" /* SKIP */, true);\r\n    return value;\r\n}\n\nconst convert = (val) => isObject(val) ? reactive(val) : val;\r\nfunction isRef(r) {\r\n    return Boolean(r && r.__v_isRef === true);\r\n}\r\nfunction ref(value) {\r\n    return createRef(value);\r\n}\r\nfunction shallowRef(value) {\r\n    return createRef(value, true);\r\n}\r\nclass RefImpl {\r\n    constructor(_rawValue, _shallow = false) {\r\n        this._rawValue = _rawValue;\r\n        this._shallow = _shallow;\r\n        this.__v_isRef = true;\r\n        this._value = _shallow ? _rawValue : convert(_rawValue);\r\n    }\r\n    get value() {\r\n        track(toRaw(this), \"get\" /* GET */, 'value');\r\n        return this._value;\r\n    }\r\n    set value(newVal) {\r\n        if (hasChanged(toRaw(newVal), this._rawValue)) {\r\n            this._rawValue = newVal;\r\n            this._value = this._shallow ? newVal : convert(newVal);\r\n            trigger(toRaw(this), \"set\" /* SET */, 'value', newVal);\r\n        }\r\n    }\r\n}\r\nfunction createRef(rawValue, shallow = false) {\r\n    if (isRef(rawValue)) {\r\n        return rawValue;\r\n    }\r\n    return new RefImpl(rawValue, shallow);\r\n}\r\nfunction triggerRef(ref) {\r\n    trigger(toRaw(ref), \"set\" /* SET */, 'value', (process.env.NODE_ENV !== 'production') ? ref.value : void 0);\r\n}\r\nfunction unref(ref) {\r\n    return isRef(ref) ? ref.value : ref;\r\n}\r\nconst shallowUnwrapHandlers = {\r\n    get: (target, key, receiver) => unref(Reflect.get(target, key, receiver)),\r\n    set: (target, key, value, receiver) => {\r\n        const oldValue = target[key];\r\n        if (isRef(oldValue) && !isRef(value)) {\r\n            oldValue.value = value;\r\n            return true;\r\n        }\r\n        else {\r\n            return Reflect.set(target, key, value, receiver);\r\n        }\r\n    }\r\n};\r\nfunction proxyRefs(objectWithRefs) {\r\n    return isReactive(objectWithRefs)\r\n        ? objectWithRefs\r\n        : new Proxy(objectWithRefs, shallowUnwrapHandlers);\r\n}\r\nclass CustomRefImpl {\r\n    constructor(factory) {\r\n        this.__v_isRef = true;\r\n        const { get, set } = factory(() => track(this, \"get\" /* GET */, 'value'), () => trigger(this, \"set\" /* SET */, 'value'));\r\n        this._get = get;\r\n        this._set = set;\r\n    }\r\n    get value() {\r\n        return this._get();\r\n    }\r\n    set value(newVal) {\r\n        this._set(newVal);\r\n    }\r\n}\r\nfunction customRef(factory) {\r\n    return new CustomRefImpl(factory);\r\n}\r\nfunction toRefs(object) {\r\n    if ((process.env.NODE_ENV !== 'production') && !isProxy(object)) {\r\n        console.warn(`toRefs() expects a reactive object but received a plain one.`);\r\n    }\r\n    const ret = isArray(object) ? new Array(object.length) : {};\r\n    for (const key in object) {\r\n        ret[key] = toRef(object, key);\r\n    }\r\n    return ret;\r\n}\r\nclass ObjectRefImpl {\r\n    constructor(_object, _key) {\r\n        this._object = _object;\r\n        this._key = _key;\r\n        this.__v_isRef = true;\r\n    }\r\n    get value() {\r\n        return this._object[this._key];\r\n    }\r\n    set value(newVal) {\r\n        this._object[this._key] = newVal;\r\n    }\r\n}\r\nfunction toRef(object, key) {\r\n    return isRef(object[key])\r\n        ? object[key]\r\n        : new ObjectRefImpl(object, key);\r\n}\n\nclass ComputedRefImpl {\r\n    constructor(getter, _setter, isReadonly) {\r\n        this._setter = _setter;\r\n        this._dirty = true;\r\n        this.__v_isRef = true;\r\n        this.effect = effect(getter, {\r\n            lazy: true,\r\n            scheduler: () => {\r\n                if (!this._dirty) {\r\n                    this._dirty = true;\r\n                    trigger(toRaw(this), \"set\" /* SET */, 'value');\r\n                }\r\n            }\r\n        });\r\n        this[\"__v_isReadonly\" /* IS_READONLY */] = isReadonly;\r\n    }\r\n    get value() {\r\n        // the computed ref may get wrapped by other proxies e.g. readonly() #3376\r\n        const self = toRaw(this);\r\n        if (self._dirty) {\r\n            self._value = this.effect();\r\n            self._dirty = false;\r\n        }\r\n        track(self, \"get\" /* GET */, 'value');\r\n        return self._value;\r\n    }\r\n    set value(newValue) {\r\n        this._setter(newValue);\r\n    }\r\n}\r\nfunction computed(getterOrOptions) {\r\n    let getter;\r\n    let setter;\r\n    if (isFunction(getterOrOptions)) {\r\n        getter = getterOrOptions;\r\n        setter = (process.env.NODE_ENV !== 'production')\r\n            ? () => {\r\n                console.warn('Write operation failed: computed value is readonly');\r\n            }\r\n            : NOOP;\r\n    }\r\n    else {\r\n        getter = getterOrOptions.get;\r\n        setter = getterOrOptions.set;\r\n    }\r\n    return new ComputedRefImpl(getter, setter, isFunction(getterOrOptions) || !getterOrOptions.set);\r\n}\n\nexport { ITERATE_KEY, computed, customRef, effect, enableTracking, isProxy, isReactive, isReadonly, isRef, markRaw, pauseTracking, proxyRefs, reactive, readonly, ref, resetTracking, shallowReactive, shallowReadonly, shallowRef, stop, toRaw, toRef, toRefs, track, trigger, triggerRef, unref };\n","import { pauseTracking, resetTracking, isRef, toRaw, shallowReactive, trigger, isReactive, effect, stop, ref, isProxy, proxyRefs, toRef, reactive, shallowReadonly, track, computed as computed$1, isReadonly } from '@vue/reactivity';\nexport { customRef, isProxy, isReactive, isReadonly, isRef, markRaw, proxyRefs, reactive, readonly, ref, shallowReactive, shallowReadonly, shallowRef, toRaw, toRef, toRefs, triggerRef, unref } from '@vue/reactivity';\nimport { isString, isFunction, isPromise, isArray, extend, EMPTY_OBJ, toHandlerKey, toNumber, hyphenate, camelize, isOn, hasOwn, isModelListener, def, isReservedProp, EMPTY_ARR, isObject, capitalize, toRawType, makeMap, remove, NOOP, hasChanged, isSet, isMap, invokeArrayFns, NO, getGlobalThis, normalizeClass, normalizeStyle, isGloballyWhitelisted } from '@vue/shared';\nexport { camelize, capitalize, toDisplayString, toHandlerKey } from '@vue/shared';\n\nconst stack = [];\r\nfunction pushWarningContext(vnode) {\r\n    stack.push(vnode);\r\n}\r\nfunction popWarningContext() {\r\n    stack.pop();\r\n}\r\nfunction warn(msg, ...args) {\r\n    // avoid props formatting or warn handler tracking deps that might be mutated\r\n    // during patch, leading to infinite recursion.\r\n    pauseTracking();\r\n    const instance = stack.length ? stack[stack.length - 1].component : null;\r\n    const appWarnHandler = instance && instance.appContext.config.warnHandler;\r\n    const trace = getComponentTrace();\r\n    if (appWarnHandler) {\r\n        callWithErrorHandling(appWarnHandler, instance, 11 /* APP_WARN_HANDLER */, [\r\n            msg + args.join(''),\r\n            instance && instance.proxy,\r\n            trace\r\n                .map(({ vnode }) => `at <${formatComponentName(instance, vnode.type)}>`)\r\n                .join('\\n'),\r\n            trace\r\n        ]);\r\n    }\r\n    else {\r\n        const warnArgs = [`[Vue warn]: ${msg}`, ...args];\r\n        /* istanbul ignore if */\r\n        if (trace.length &&\r\n            // avoid spamming console during tests\r\n            !false) {\r\n            warnArgs.push(`\\n`, ...formatTrace(trace));\r\n        }\r\n        console.warn(...warnArgs);\r\n    }\r\n    resetTracking();\r\n}\r\nfunction getComponentTrace() {\r\n    let currentVNode = stack[stack.length - 1];\r\n    if (!currentVNode) {\r\n        return [];\r\n    }\r\n    // we can't just use the stack because it will be incomplete during updates\r\n    // that did not start from the root. Re-construct the parent chain using\r\n    // instance parent pointers.\r\n    const normalizedStack = [];\r\n    while (currentVNode) {\r\n        const last = normalizedStack[0];\r\n        if (last && last.vnode === currentVNode) {\r\n            last.recurseCount++;\r\n        }\r\n        else {\r\n            normalizedStack.push({\r\n                vnode: currentVNode,\r\n                recurseCount: 0\r\n            });\r\n        }\r\n        const parentInstance = currentVNode.component && currentVNode.component.parent;\r\n        currentVNode = parentInstance && parentInstance.vnode;\r\n    }\r\n    return normalizedStack;\r\n}\r\n/* istanbul ignore next */\r\nfunction formatTrace(trace) {\r\n    const logs = [];\r\n    trace.forEach((entry, i) => {\r\n        logs.push(...(i === 0 ? [] : [`\\n`]), ...formatTraceEntry(entry));\r\n    });\r\n    return logs;\r\n}\r\nfunction formatTraceEntry({ vnode, recurseCount }) {\r\n    const postfix = recurseCount > 0 ? `... (${recurseCount} recursive calls)` : ``;\r\n    const isRoot = vnode.component ? vnode.component.parent == null : false;\r\n    const open = ` at <${formatComponentName(vnode.component, vnode.type, isRoot)}`;\r\n    const close = `>` + postfix;\r\n    return vnode.props\r\n        ? [open, ...formatProps(vnode.props), close]\r\n        : [open + close];\r\n}\r\n/* istanbul ignore next */\r\nfunction formatProps(props) {\r\n    const res = [];\r\n    const keys = Object.keys(props);\r\n    keys.slice(0, 3).forEach(key => {\r\n        res.push(...formatProp(key, props[key]));\r\n    });\r\n    if (keys.length > 3) {\r\n        res.push(` ...`);\r\n    }\r\n    return res;\r\n}\r\n/* istanbul ignore next */\r\nfunction formatProp(key, value, raw) {\r\n    if (isString(value)) {\r\n        value = JSON.stringify(value);\r\n        return raw ? value : [`${key}=${value}`];\r\n    }\r\n    else if (typeof value === 'number' ||\r\n        typeof value === 'boolean' ||\r\n        value == null) {\r\n        return raw ? value : [`${key}=${value}`];\r\n    }\r\n    else if (isRef(value)) {\r\n        value = formatProp(key, toRaw(value.value), true);\r\n        return raw ? value : [`${key}=Ref<`, value, `>`];\r\n    }\r\n    else if (isFunction(value)) {\r\n        return [`${key}=fn${value.name ? `<${value.name}>` : ``}`];\r\n    }\r\n    else {\r\n        value = toRaw(value);\r\n        return raw ? value : [`${key}=`, value];\r\n    }\r\n}\n\nconst ErrorTypeStrings = {\r\n    [\"bc\" /* BEFORE_CREATE */]: 'beforeCreate hook',\r\n    [\"c\" /* CREATED */]: 'created hook',\r\n    [\"bm\" /* BEFORE_MOUNT */]: 'beforeMount hook',\r\n    [\"m\" /* MOUNTED */]: 'mounted hook',\r\n    [\"bu\" /* BEFORE_UPDATE */]: 'beforeUpdate hook',\r\n    [\"u\" /* UPDATED */]: 'updated',\r\n    [\"bum\" /* BEFORE_UNMOUNT */]: 'beforeUnmount hook',\r\n    [\"um\" /* UNMOUNTED */]: 'unmounted hook',\r\n    [\"a\" /* ACTIVATED */]: 'activated hook',\r\n    [\"da\" /* DEACTIVATED */]: 'deactivated hook',\r\n    [\"ec\" /* ERROR_CAPTURED */]: 'errorCaptured hook',\r\n    [\"rtc\" /* RENDER_TRACKED */]: 'renderTracked hook',\r\n    [\"rtg\" /* RENDER_TRIGGERED */]: 'renderTriggered hook',\r\n    [0 /* SETUP_FUNCTION */]: 'setup function',\r\n    [1 /* RENDER_FUNCTION */]: 'render function',\r\n    [2 /* WATCH_GETTER */]: 'watcher getter',\r\n    [3 /* WATCH_CALLBACK */]: 'watcher callback',\r\n    [4 /* WATCH_CLEANUP */]: 'watcher cleanup function',\r\n    [5 /* NATIVE_EVENT_HANDLER */]: 'native event handler',\r\n    [6 /* COMPONENT_EVENT_HANDLER */]: 'component event handler',\r\n    [7 /* VNODE_HOOK */]: 'vnode hook',\r\n    [8 /* DIRECTIVE_HOOK */]: 'directive hook',\r\n    [9 /* TRANSITION_HOOK */]: 'transition hook',\r\n    [10 /* APP_ERROR_HANDLER */]: 'app errorHandler',\r\n    [11 /* APP_WARN_HANDLER */]: 'app warnHandler',\r\n    [12 /* FUNCTION_REF */]: 'ref function',\r\n    [13 /* ASYNC_COMPONENT_LOADER */]: 'async component loader',\r\n    [14 /* SCHEDULER */]: 'scheduler flush. This is likely a Vue internals bug. ' +\r\n        'Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/vue-next'\r\n};\r\nfunction callWithErrorHandling(fn, instance, type, args) {\r\n    let res;\r\n    try {\r\n        res = args ? fn(...args) : fn();\r\n    }\r\n    catch (err) {\r\n        handleError(err, instance, type);\r\n    }\r\n    return res;\r\n}\r\nfunction callWithAsyncErrorHandling(fn, instance, type, args) {\r\n    if (isFunction(fn)) {\r\n        const res = callWithErrorHandling(fn, instance, type, args);\r\n        if (res && isPromise(res)) {\r\n            res.catch(err => {\r\n                handleError(err, instance, type);\r\n            });\r\n        }\r\n        return res;\r\n    }\r\n    const values = [];\r\n    for (let i = 0; i < fn.length; i++) {\r\n        values.push(callWithAsyncErrorHandling(fn[i], instance, type, args));\r\n    }\r\n    return values;\r\n}\r\nfunction handleError(err, instance, type, throwInDev = true) {\r\n    const contextVNode = instance ? instance.vnode : null;\r\n    if (instance) {\r\n        let cur = instance.parent;\r\n        // the exposed instance is the render proxy to keep it consistent with 2.x\r\n        const exposedInstance = instance.proxy;\r\n        // in production the hook receives only the error code\r\n        const errorInfo = (process.env.NODE_ENV !== 'production') ? ErrorTypeStrings[type] : type;\r\n        while (cur) {\r\n            const errorCapturedHooks = cur.ec;\r\n            if (errorCapturedHooks) {\r\n                for (let i = 0; i < errorCapturedHooks.length; i++) {\r\n                    if (errorCapturedHooks[i](err, exposedInstance, errorInfo) === false) {\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            cur = cur.parent;\r\n        }\r\n        // app-level handling\r\n        const appErrorHandler = instance.appContext.config.errorHandler;\r\n        if (appErrorHandler) {\r\n            callWithErrorHandling(appErrorHandler, null, 10 /* APP_ERROR_HANDLER */, [err, exposedInstance, errorInfo]);\r\n            return;\r\n        }\r\n    }\r\n    logError(err, type, contextVNode, throwInDev);\r\n}\r\nfunction logError(err, type, contextVNode, throwInDev = true) {\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        const info = ErrorTypeStrings[type];\r\n        if (contextVNode) {\r\n            pushWarningContext(contextVNode);\r\n        }\r\n        warn(`Unhandled error${info ? ` during execution of ${info}` : ``}`);\r\n        if (contextVNode) {\r\n            popWarningContext();\r\n        }\r\n        // crash in dev by default so it's more noticeable\r\n        if (throwInDev) {\r\n            throw err;\r\n        }\r\n        else {\r\n            console.error(err);\r\n        }\r\n    }\r\n    else {\r\n        // recover in prod to reduce the impact on end-user\r\n        console.error(err);\r\n    }\r\n}\n\nlet isFlushing = false;\r\nlet isFlushPending = false;\r\nconst queue = [];\r\nlet flushIndex = 0;\r\nconst pendingPreFlushCbs = [];\r\nlet activePreFlushCbs = null;\r\nlet preFlushIndex = 0;\r\nconst pendingPostFlushCbs = [];\r\nlet activePostFlushCbs = null;\r\nlet postFlushIndex = 0;\r\nconst resolvedPromise = Promise.resolve();\r\nlet currentFlushPromise = null;\r\nlet currentPreFlushParentJob = null;\r\nconst RECURSION_LIMIT = 100;\r\nfunction nextTick(fn) {\r\n    const p = currentFlushPromise || resolvedPromise;\r\n    return fn ? p.then(this ? fn.bind(this) : fn) : p;\r\n}\r\n// #2768\r\n// Use binary-search to find a suitable position in the queue,\r\n// so that the queue maintains the increasing order of job's id,\r\n// which can prevent the job from being skipped and also can avoid repeated patching.\r\nfunction findInsertionIndex(job) {\r\n    // the start index should be `flushIndex + 1`\r\n    let start = flushIndex + 1;\r\n    let end = queue.length;\r\n    const jobId = getId(job);\r\n    while (start < end) {\r\n        const middle = (start + end) >>> 1;\r\n        const middleJobId = getId(queue[middle]);\r\n        middleJobId < jobId ? (start = middle + 1) : (end = middle);\r\n    }\r\n    return start;\r\n}\r\nfunction queueJob(job) {\r\n    // the dedupe search uses the startIndex argument of Array.includes()\r\n    // by default the search index includes the current job that is being run\r\n    // so it cannot recursively trigger itself again.\r\n    // if the job is a watch() callback, the search will start with a +1 index to\r\n    // allow it recursively trigger itself - it is the user's responsibility to\r\n    // ensure it doesn't end up in an infinite loop.\r\n    if ((!queue.length ||\r\n        !queue.includes(job, isFlushing && job.allowRecurse ? flushIndex + 1 : flushIndex)) &&\r\n        job !== currentPreFlushParentJob) {\r\n        const pos = findInsertionIndex(job);\r\n        if (pos > -1) {\r\n            queue.splice(pos, 0, job);\r\n        }\r\n        else {\r\n            queue.push(job);\r\n        }\r\n        queueFlush();\r\n    }\r\n}\r\nfunction queueFlush() {\r\n    if (!isFlushing && !isFlushPending) {\r\n        isFlushPending = true;\r\n        currentFlushPromise = resolvedPromise.then(flushJobs);\r\n    }\r\n}\r\nfunction invalidateJob(job) {\r\n    const i = queue.indexOf(job);\r\n    if (i > flushIndex) {\r\n        queue.splice(i, 1);\r\n    }\r\n}\r\nfunction queueCb(cb, activeQueue, pendingQueue, index) {\r\n    if (!isArray(cb)) {\r\n        if (!activeQueue ||\r\n            !activeQueue.includes(cb, cb.allowRecurse ? index + 1 : index)) {\r\n            pendingQueue.push(cb);\r\n        }\r\n    }\r\n    else {\r\n        // if cb is an array, it is a component lifecycle hook which can only be\r\n        // triggered by a job, which is already deduped in the main queue, so\r\n        // we can skip duplicate check here to improve perf\r\n        pendingQueue.push(...cb);\r\n    }\r\n    queueFlush();\r\n}\r\nfunction queuePreFlushCb(cb) {\r\n    queueCb(cb, activePreFlushCbs, pendingPreFlushCbs, preFlushIndex);\r\n}\r\nfunction queuePostFlushCb(cb) {\r\n    queueCb(cb, activePostFlushCbs, pendingPostFlushCbs, postFlushIndex);\r\n}\r\nfunction flushPreFlushCbs(seen, parentJob = null) {\r\n    if (pendingPreFlushCbs.length) {\r\n        currentPreFlushParentJob = parentJob;\r\n        activePreFlushCbs = [...new Set(pendingPreFlushCbs)];\r\n        pendingPreFlushCbs.length = 0;\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            seen = seen || new Map();\r\n        }\r\n        for (preFlushIndex = 0; preFlushIndex < activePreFlushCbs.length; preFlushIndex++) {\r\n            if ((process.env.NODE_ENV !== 'production')) {\r\n                checkRecursiveUpdates(seen, activePreFlushCbs[preFlushIndex]);\r\n            }\r\n            activePreFlushCbs[preFlushIndex]();\r\n        }\r\n        activePreFlushCbs = null;\r\n        preFlushIndex = 0;\r\n        currentPreFlushParentJob = null;\r\n        // recursively flush until it drains\r\n        flushPreFlushCbs(seen, parentJob);\r\n    }\r\n}\r\nfunction flushPostFlushCbs(seen) {\r\n    if (pendingPostFlushCbs.length) {\r\n        const deduped = [...new Set(pendingPostFlushCbs)];\r\n        pendingPostFlushCbs.length = 0;\r\n        // #1947 already has active queue, nested flushPostFlushCbs call\r\n        if (activePostFlushCbs) {\r\n            activePostFlushCbs.push(...deduped);\r\n            return;\r\n        }\r\n        activePostFlushCbs = deduped;\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            seen = seen || new Map();\r\n        }\r\n        activePostFlushCbs.sort((a, b) => getId(a) - getId(b));\r\n        for (postFlushIndex = 0; postFlushIndex < activePostFlushCbs.length; postFlushIndex++) {\r\n            if ((process.env.NODE_ENV !== 'production')) {\r\n                checkRecursiveUpdates(seen, activePostFlushCbs[postFlushIndex]);\r\n            }\r\n            activePostFlushCbs[postFlushIndex]();\r\n        }\r\n        activePostFlushCbs = null;\r\n        postFlushIndex = 0;\r\n    }\r\n}\r\nconst getId = (job) => job.id == null ? Infinity : job.id;\r\nfunction flushJobs(seen) {\r\n    isFlushPending = false;\r\n    isFlushing = true;\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        seen = seen || new Map();\r\n    }\r\n    flushPreFlushCbs(seen);\r\n    // Sort queue before flush.\r\n    // This ensures that:\r\n    // 1. Components are updated from parent to child. (because parent is always\r\n    //    created before the child so its render effect will have smaller\r\n    //    priority number)\r\n    // 2. If a component is unmounted during a parent component's update,\r\n    //    its update can be skipped.\r\n    queue.sort((a, b) => getId(a) - getId(b));\r\n    try {\r\n        for (flushIndex = 0; flushIndex < queue.length; flushIndex++) {\r\n            const job = queue[flushIndex];\r\n            if (job) {\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    checkRecursiveUpdates(seen, job);\r\n                }\r\n                callWithErrorHandling(job, null, 14 /* SCHEDULER */);\r\n            }\r\n        }\r\n    }\r\n    finally {\r\n        flushIndex = 0;\r\n        queue.length = 0;\r\n        flushPostFlushCbs(seen);\r\n        isFlushing = false;\r\n        currentFlushPromise = null;\r\n        // some postFlushCb queued jobs!\r\n        // keep flushing until it drains.\r\n        if (queue.length || pendingPostFlushCbs.length) {\r\n            flushJobs(seen);\r\n        }\r\n    }\r\n}\r\nfunction checkRecursiveUpdates(seen, fn) {\r\n    if (!seen.has(fn)) {\r\n        seen.set(fn, 1);\r\n    }\r\n    else {\r\n        const count = seen.get(fn);\r\n        if (count > RECURSION_LIMIT) {\r\n            throw new Error(`Maximum recursive updates exceeded. ` +\r\n                `This means you have a reactive effect that is mutating its own ` +\r\n                `dependencies and thus recursively triggering itself. Possible sources ` +\r\n                `include component template, render function, updated hook or ` +\r\n                `watcher source function.`);\r\n        }\r\n        else {\r\n            seen.set(fn, count + 1);\r\n        }\r\n    }\r\n}\n\n/* eslint-disable no-restricted-globals */\r\nlet isHmrUpdating = false;\r\nconst hmrDirtyComponents = new Set();\r\n// Expose the HMR runtime on the global object\r\n// This makes it entirely tree-shakable without polluting the exports and makes\r\n// it easier to be used in toolings like vue-loader\r\n// Note: for a component to be eligible for HMR it also needs the __hmrId option\r\n// to be set so that its instances can be registered / removed.\r\nif ((process.env.NODE_ENV !== 'production')) {\r\n    const globalObject = typeof global !== 'undefined'\r\n        ? global\r\n        : typeof self !== 'undefined'\r\n            ? self\r\n            : typeof window !== 'undefined'\r\n                ? window\r\n                : {};\r\n    globalObject.__VUE_HMR_RUNTIME__ = {\r\n        createRecord: tryWrap(createRecord),\r\n        rerender: tryWrap(rerender),\r\n        reload: tryWrap(reload)\r\n    };\r\n}\r\nconst map = new Map();\r\nfunction registerHMR(instance) {\r\n    const id = instance.type.__hmrId;\r\n    let record = map.get(id);\r\n    if (!record) {\r\n        createRecord(id, instance.type);\r\n        record = map.get(id);\r\n    }\r\n    record.instances.add(instance);\r\n}\r\nfunction unregisterHMR(instance) {\r\n    map.get(instance.type.__hmrId).instances.delete(instance);\r\n}\r\nfunction createRecord(id, component) {\r\n    if (!component) {\r\n        warn(`HMR API usage is out of date.\\n` +\r\n            `Please upgrade vue-loader/vite/rollup-plugin-vue or other relevant ` +\r\n            `dependency that handles Vue SFC compilation.`);\r\n        component = {};\r\n    }\r\n    if (map.has(id)) {\r\n        return false;\r\n    }\r\n    map.set(id, {\r\n        component: isClassComponent(component) ? component.__vccOpts : component,\r\n        instances: new Set()\r\n    });\r\n    return true;\r\n}\r\nfunction rerender(id, newRender) {\r\n    const record = map.get(id);\r\n    if (!record)\r\n        return;\r\n    if (newRender)\r\n        record.component.render = newRender;\r\n    // Array.from creates a snapshot which avoids the set being mutated during\r\n    // updates\r\n    Array.from(record.instances).forEach(instance => {\r\n        if (newRender) {\r\n            instance.render = newRender;\r\n        }\r\n        instance.renderCache = [];\r\n        // this flag forces child components with slot content to update\r\n        isHmrUpdating = true;\r\n        instance.update();\r\n        isHmrUpdating = false;\r\n    });\r\n}\r\nfunction reload(id, newComp) {\r\n    const record = map.get(id);\r\n    if (!record)\r\n        return;\r\n    // Array.from creates a snapshot which avoids the set being mutated during\r\n    // updates\r\n    const { component, instances } = record;\r\n    if (!hmrDirtyComponents.has(component)) {\r\n        // 1. Update existing comp definition to match new one\r\n        newComp = isClassComponent(newComp) ? newComp.__vccOpts : newComp;\r\n        extend(component, newComp);\r\n        for (const key in component) {\r\n            if (!(key in newComp)) {\r\n                delete component[key];\r\n            }\r\n        }\r\n        // 2. Mark component dirty. This forces the renderer to replace the component\r\n        // on patch.\r\n        hmrDirtyComponents.add(component);\r\n        // 3. Make sure to unmark the component after the reload.\r\n        queuePostFlushCb(() => {\r\n            hmrDirtyComponents.delete(component);\r\n        });\r\n    }\r\n    Array.from(instances).forEach(instance => {\r\n        if (instance.parent) {\r\n            // 4. Force the parent instance to re-render. This will cause all updated\r\n            // components to be unmounted and re-mounted. Queue the update so that we\r\n            // don't end up forcing the same parent to re-render multiple times.\r\n            queueJob(instance.parent.update);\r\n        }\r\n        else if (instance.appContext.reload) {\r\n            // root instance mounted via createApp() has a reload method\r\n            instance.appContext.reload();\r\n        }\r\n        else if (typeof window !== 'undefined') {\r\n            // root instance inside tree created via raw render(). Force reload.\r\n            window.location.reload();\r\n        }\r\n        else {\r\n            console.warn('[HMR] Root or manually mounted instance modified. Full reload required.');\r\n        }\r\n    });\r\n}\r\nfunction tryWrap(fn) {\r\n    return (id, arg) => {\r\n        try {\r\n            return fn(id, arg);\r\n        }\r\n        catch (e) {\r\n            console.error(e);\r\n            console.warn(`[HMR] Something went wrong during Vue component hot-reload. ` +\r\n                `Full reload required.`);\r\n        }\r\n    };\r\n}\n\nlet devtools;\r\nfunction setDevtoolsHook(hook) {\r\n    devtools = hook;\r\n}\r\nfunction devtoolsInitApp(app, version) {\r\n    // TODO queue if devtools is undefined\r\n    if (!devtools)\r\n        return;\r\n    devtools.emit(\"app:init\" /* APP_INIT */, app, version, {\r\n        Fragment,\r\n        Text,\r\n        Comment,\r\n        Static\r\n    });\r\n}\r\nfunction devtoolsUnmountApp(app) {\r\n    if (!devtools)\r\n        return;\r\n    devtools.emit(\"app:unmount\" /* APP_UNMOUNT */, app);\r\n}\r\nconst devtoolsComponentAdded = /*#__PURE__*/ createDevtoolsComponentHook(\"component:added\" /* COMPONENT_ADDED */);\r\nconst devtoolsComponentUpdated = /*#__PURE__*/ createDevtoolsComponentHook(\"component:updated\" /* COMPONENT_UPDATED */);\r\nconst devtoolsComponentRemoved = /*#__PURE__*/ createDevtoolsComponentHook(\"component:removed\" /* COMPONENT_REMOVED */);\r\nfunction createDevtoolsComponentHook(hook) {\r\n    return (component) => {\r\n        if (!devtools)\r\n            return;\r\n        devtools.emit(hook, component.appContext.app, component.uid, component.parent ? component.parent.uid : undefined, component);\r\n    };\r\n}\r\nfunction devtoolsComponentEmit(component, event, params) {\r\n    if (!devtools)\r\n        return;\r\n    devtools.emit(\"component:emit\" /* COMPONENT_EMIT */, component.appContext.app, component, event, params);\r\n}\n\nfunction emit(instance, event, ...rawArgs) {\r\n    const props = instance.vnode.props || EMPTY_OBJ;\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        const { emitsOptions, propsOptions: [propsOptions] } = instance;\r\n        if (emitsOptions) {\r\n            if (!(event in emitsOptions)) {\r\n                if (!propsOptions || !(toHandlerKey(event) in propsOptions)) {\r\n                    warn(`Component emitted event \"${event}\" but it is neither declared in ` +\r\n                        `the emits option nor as an \"${toHandlerKey(event)}\" prop.`);\r\n                }\r\n            }\r\n            else {\r\n                const validator = emitsOptions[event];\r\n                if (isFunction(validator)) {\r\n                    const isValid = validator(...rawArgs);\r\n                    if (!isValid) {\r\n                        warn(`Invalid event arguments: event validation failed for event \"${event}\".`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    let args = rawArgs;\r\n    const isModelListener = event.startsWith('update:');\r\n    // for v-model update:xxx events, apply modifiers on args\r\n    const modelArg = isModelListener && event.slice(7);\r\n    if (modelArg && modelArg in props) {\r\n        const modifiersKey = `${modelArg === 'modelValue' ? 'model' : modelArg}Modifiers`;\r\n        const { number, trim } = props[modifiersKey] || EMPTY_OBJ;\r\n        if (trim) {\r\n            args = rawArgs.map(a => a.trim());\r\n        }\r\n        else if (number) {\r\n            args = rawArgs.map(toNumber);\r\n        }\r\n    }\r\n    if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\r\n        devtoolsComponentEmit(instance, event, args);\r\n    }\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        const lowerCaseEvent = event.toLowerCase();\r\n        if (lowerCaseEvent !== event && props[toHandlerKey(lowerCaseEvent)]) {\r\n            warn(`Event \"${lowerCaseEvent}\" is emitted in component ` +\r\n                `${formatComponentName(instance, instance.type)} but the handler is registered for \"${event}\". ` +\r\n                `Note that HTML attributes are case-insensitive and you cannot use ` +\r\n                `v-on to listen to camelCase events when using in-DOM templates. ` +\r\n                `You should probably use \"${hyphenate(event)}\" instead of \"${event}\".`);\r\n        }\r\n    }\r\n    let handlerName;\r\n    let handler = props[(handlerName = toHandlerKey(event))] ||\r\n        // also try camelCase event handler (#2249)\r\n        props[(handlerName = toHandlerKey(camelize(event)))];\r\n    // for v-model update:xxx events, also trigger kebab-case equivalent\r\n    // for props passed via kebab-case\r\n    if (!handler && isModelListener) {\r\n        handler = props[(handlerName = toHandlerKey(hyphenate(event)))];\r\n    }\r\n    if (handler) {\r\n        callWithAsyncErrorHandling(handler, instance, 6 /* COMPONENT_EVENT_HANDLER */, args);\r\n    }\r\n    const onceHandler = props[handlerName + `Once`];\r\n    if (onceHandler) {\r\n        if (!instance.emitted) {\r\n            (instance.emitted = {})[handlerName] = true;\r\n        }\r\n        else if (instance.emitted[handlerName]) {\r\n            return;\r\n        }\r\n        callWithAsyncErrorHandling(onceHandler, instance, 6 /* COMPONENT_EVENT_HANDLER */, args);\r\n    }\r\n}\r\nfunction normalizeEmitsOptions(comp, appContext, asMixin = false) {\r\n    if (!appContext.deopt && comp.__emits !== undefined) {\r\n        return comp.__emits;\r\n    }\r\n    const raw = comp.emits;\r\n    let normalized = {};\r\n    // apply mixin/extends props\r\n    let hasExtends = false;\r\n    if (__VUE_OPTIONS_API__ && !isFunction(comp)) {\r\n        const extendEmits = (raw) => {\r\n            const normalizedFromExtend = normalizeEmitsOptions(raw, appContext, true);\r\n            if (normalizedFromExtend) {\r\n                hasExtends = true;\r\n                extend(normalized, normalizedFromExtend);\r\n            }\r\n        };\r\n        if (!asMixin && appContext.mixins.length) {\r\n            appContext.mixins.forEach(extendEmits);\r\n        }\r\n        if (comp.extends) {\r\n            extendEmits(comp.extends);\r\n        }\r\n        if (comp.mixins) {\r\n            comp.mixins.forEach(extendEmits);\r\n        }\r\n    }\r\n    if (!raw && !hasExtends) {\r\n        return (comp.__emits = null);\r\n    }\r\n    if (isArray(raw)) {\r\n        raw.forEach(key => (normalized[key] = null));\r\n    }\r\n    else {\r\n        extend(normalized, raw);\r\n    }\r\n    return (comp.__emits = normalized);\r\n}\r\n// Check if an incoming prop key is a declared emit event listener.\r\n// e.g. With `emits: { click: null }`, props named `onClick` and `onclick` are\r\n// both considered matched listeners.\r\nfunction isEmitListener(options, key) {\r\n    if (!options || !isOn(key)) {\r\n        return false;\r\n    }\r\n    key = key.slice(2).replace(/Once$/, '');\r\n    return (hasOwn(options, key[0].toLowerCase() + key.slice(1)) ||\r\n        hasOwn(options, hyphenate(key)) ||\r\n        hasOwn(options, key));\r\n}\n\nlet isRenderingCompiledSlot = 0;\r\nconst setCompiledSlotRendering = (n) => (isRenderingCompiledSlot += n);\r\n/**\r\n * Compiler runtime helper for rendering `<slot/>`\r\n * @private\r\n */\r\nfunction renderSlot(slots, name, props = {}, \r\n// this is not a user-facing function, so the fallback is always generated by\r\n// the compiler and guaranteed to be a function returning an array\r\nfallback, noSlotted) {\r\n    let slot = slots[name];\r\n    if ((process.env.NODE_ENV !== 'production') && slot && slot.length > 1) {\r\n        warn(`SSR-optimized slot function detected in a non-SSR-optimized render ` +\r\n            `function. You need to mark this component with $dynamic-slots in the ` +\r\n            `parent template.`);\r\n        slot = () => [];\r\n    }\r\n    // a compiled slot disables block tracking by default to avoid manual\r\n    // invocation interfering with template-based block tracking, but in\r\n    // `renderSlot` we can be sure that it's template-based so we can force\r\n    // enable it.\r\n    isRenderingCompiledSlot++;\r\n    openBlock();\r\n    const validSlotContent = slot && ensureValidVNode(slot(props));\r\n    const rendered = createBlock(Fragment, { key: props.key || `_${name}` }, validSlotContent || (fallback ? fallback() : []), validSlotContent && slots._ === 1 /* STABLE */\r\n        ? 64 /* STABLE_FRAGMENT */\r\n        : -2 /* BAIL */);\r\n    if (!noSlotted && rendered.scopeId) {\r\n        rendered.slotScopeIds = [rendered.scopeId + '-s'];\r\n    }\r\n    isRenderingCompiledSlot--;\r\n    return rendered;\r\n}\r\nfunction ensureValidVNode(vnodes) {\r\n    return vnodes.some(child => {\r\n        if (!isVNode(child))\r\n            return true;\r\n        if (child.type === Comment)\r\n            return false;\r\n        if (child.type === Fragment &&\r\n            !ensureValidVNode(child.children))\r\n            return false;\r\n        return true;\r\n    })\r\n        ? vnodes\r\n        : null;\r\n}\n\n/**\r\n * mark the current rendering instance for asset resolution (e.g.\r\n * resolveComponent, resolveDirective) during render\r\n */\r\nlet currentRenderingInstance = null;\r\nlet currentScopeId = null;\r\n/**\r\n * Note: rendering calls maybe nested. The function returns the parent rendering\r\n * instance if present, which should be restored after the render is done:\r\n *\r\n * ```js\r\n * const prev = setCurrentRenderingInstance(i)\r\n * // ...render\r\n * setCurrentRenderingInstance(prev)\r\n * ```\r\n */\r\nfunction setCurrentRenderingInstance(instance) {\r\n    const prev = currentRenderingInstance;\r\n    currentRenderingInstance = instance;\r\n    currentScopeId = (instance && instance.type.__scopeId) || null;\r\n    return prev;\r\n}\r\n/**\r\n * Set scope id when creating hoisted vnodes.\r\n * @private compiler helper\r\n */\r\nfunction pushScopeId(id) {\r\n    currentScopeId = id;\r\n}\r\n/**\r\n * Technically we no longer need this after 3.0.8 but we need to keep the same\r\n * API for backwards compat w/ code generated by compilers.\r\n * @private\r\n */\r\nfunction popScopeId() {\r\n    currentScopeId = null;\r\n}\r\n/**\r\n * Only for backwards compat\r\n * @private\r\n */\r\nconst withScopeId = (_id) => withCtx;\r\n/**\r\n * Wrap a slot function to memoize current rendering instance\r\n * @private compiler helper\r\n */\r\nfunction withCtx(fn, ctx = currentRenderingInstance) {\r\n    if (!ctx)\r\n        return fn;\r\n    const renderFnWithContext = (...args) => {\r\n        // If a user calls a compiled slot inside a template expression (#1745), it\r\n        // can mess up block tracking, so by default we need to push a null block to\r\n        // avoid that. This isn't necessary if rendering a compiled `<slot>`.\r\n        if (!isRenderingCompiledSlot) {\r\n            openBlock(true /* null block that disables tracking */);\r\n        }\r\n        const prevInstance = setCurrentRenderingInstance(ctx);\r\n        const res = fn(...args);\r\n        setCurrentRenderingInstance(prevInstance);\r\n        if (!isRenderingCompiledSlot) {\r\n            closeBlock();\r\n        }\r\n        return res;\r\n    };\r\n    // mark this as a compiled slot function.\r\n    // this is used in vnode.ts -> normalizeChildren() to set the slot\r\n    // rendering flag.\r\n    renderFnWithContext._c = true;\r\n    return renderFnWithContext;\r\n}\n\n/**\r\n * dev only flag to track whether $attrs was used during render.\r\n * If $attrs was used during render then the warning for failed attrs\r\n * fallthrough can be suppressed.\r\n */\r\nlet accessedAttrs = false;\r\nfunction markAttrsAccessed() {\r\n    accessedAttrs = true;\r\n}\r\nfunction renderComponentRoot(instance) {\r\n    const { type: Component, vnode, proxy, withProxy, props, propsOptions: [propsOptions], slots, attrs, emit, render, renderCache, data, setupState, ctx } = instance;\r\n    let result;\r\n    const prev = setCurrentRenderingInstance(instance);\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        accessedAttrs = false;\r\n    }\r\n    try {\r\n        let fallthroughAttrs;\r\n        if (vnode.shapeFlag & 4 /* STATEFUL_COMPONENT */) {\r\n            // withProxy is a proxy with a different `has` trap only for\r\n            // runtime-compiled render functions using `with` block.\r\n            const proxyToUse = withProxy || proxy;\r\n            result = normalizeVNode(render.call(proxyToUse, proxyToUse, renderCache, props, setupState, data, ctx));\r\n            fallthroughAttrs = attrs;\r\n        }\r\n        else {\r\n            // functional\r\n            const render = Component;\r\n            // in dev, mark attrs accessed if optional props (attrs === props)\r\n            if ((process.env.NODE_ENV !== 'production') && attrs === props) {\r\n                markAttrsAccessed();\r\n            }\r\n            result = normalizeVNode(render.length > 1\r\n                ? render(props, (process.env.NODE_ENV !== 'production')\r\n                    ? {\r\n                        get attrs() {\r\n                            markAttrsAccessed();\r\n                            return attrs;\r\n                        },\r\n                        slots,\r\n                        emit\r\n                    }\r\n                    : { attrs, slots, emit })\r\n                : render(props, null /* we know it doesn't need it */));\r\n            fallthroughAttrs = Component.props\r\n                ? attrs\r\n                : getFunctionalFallthrough(attrs);\r\n        }\r\n        // attr merging\r\n        // in dev mode, comments are preserved, and it's possible for a template\r\n        // to have comments along side the root element which makes it a fragment\r\n        let root = result;\r\n        let setRoot = undefined;\r\n        if ((process.env.NODE_ENV !== 'production') &&\r\n            result.patchFlag > 0 &&\r\n            result.patchFlag & 2048 /* DEV_ROOT_FRAGMENT */) {\r\n            ;\r\n            [root, setRoot] = getChildRoot(result);\r\n        }\r\n        if (Component.inheritAttrs !== false && fallthroughAttrs) {\r\n            const keys = Object.keys(fallthroughAttrs);\r\n            const { shapeFlag } = root;\r\n            if (keys.length) {\r\n                if (shapeFlag & 1 /* ELEMENT */ ||\r\n                    shapeFlag & 6 /* COMPONENT */) {\r\n                    if (propsOptions && keys.some(isModelListener)) {\r\n                        // If a v-model listener (onUpdate:xxx) has a corresponding declared\r\n                        // prop, it indicates this component expects to handle v-model and\r\n                        // it should not fallthrough.\r\n                        // related: #1543, #1643, #1989\r\n                        fallthroughAttrs = filterModelListeners(fallthroughAttrs, propsOptions);\r\n                    }\r\n                    root = cloneVNode(root, fallthroughAttrs);\r\n                }\r\n                else if ((process.env.NODE_ENV !== 'production') && !accessedAttrs && root.type !== Comment) {\r\n                    const allAttrs = Object.keys(attrs);\r\n                    const eventAttrs = [];\r\n                    const extraAttrs = [];\r\n                    for (let i = 0, l = allAttrs.length; i < l; i++) {\r\n                        const key = allAttrs[i];\r\n                        if (isOn(key)) {\r\n                            // ignore v-model handlers when they fail to fallthrough\r\n                            if (!isModelListener(key)) {\r\n                                // remove `on`, lowercase first letter to reflect event casing\r\n                                // accurately\r\n                                eventAttrs.push(key[2].toLowerCase() + key.slice(3));\r\n                            }\r\n                        }\r\n                        else {\r\n                            extraAttrs.push(key);\r\n                        }\r\n                    }\r\n                    if (extraAttrs.length) {\r\n                        warn(`Extraneous non-props attributes (` +\r\n                            `${extraAttrs.join(', ')}) ` +\r\n                            `were passed to component but could not be automatically inherited ` +\r\n                            `because component renders fragment or text root nodes.`);\r\n                    }\r\n                    if (eventAttrs.length) {\r\n                        warn(`Extraneous non-emits event listeners (` +\r\n                            `${eventAttrs.join(', ')}) ` +\r\n                            `were passed to component but could not be automatically inherited ` +\r\n                            `because component renders fragment or text root nodes. ` +\r\n                            `If the listener is intended to be a component custom event listener only, ` +\r\n                            `declare it using the \"emits\" option.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // inherit directives\r\n        if (vnode.dirs) {\r\n            if ((process.env.NODE_ENV !== 'production') && !isElementRoot(root)) {\r\n                warn(`Runtime directive used on component with non-element root node. ` +\r\n                    `The directives will not function as intended.`);\r\n            }\r\n            root.dirs = root.dirs ? root.dirs.concat(vnode.dirs) : vnode.dirs;\r\n        }\r\n        // inherit transition data\r\n        if (vnode.transition) {\r\n            if ((process.env.NODE_ENV !== 'production') && !isElementRoot(root)) {\r\n                warn(`Component inside <Transition> renders non-element root node ` +\r\n                    `that cannot be animated.`);\r\n            }\r\n            root.transition = vnode.transition;\r\n        }\r\n        if ((process.env.NODE_ENV !== 'production') && setRoot) {\r\n            setRoot(root);\r\n        }\r\n        else {\r\n            result = root;\r\n        }\r\n    }\r\n    catch (err) {\r\n        blockStack.length = 0;\r\n        handleError(err, instance, 1 /* RENDER_FUNCTION */);\r\n        result = createVNode(Comment);\r\n    }\r\n    setCurrentRenderingInstance(prev);\r\n    return result;\r\n}\r\n/**\r\n * dev only\r\n * In dev mode, template root level comments are rendered, which turns the\r\n * template into a fragment root, but we need to locate the single element\r\n * root for attrs and scope id processing.\r\n */\r\nconst getChildRoot = (vnode) => {\r\n    const rawChildren = vnode.children;\r\n    const dynamicChildren = vnode.dynamicChildren;\r\n    const childRoot = filterSingleRoot(rawChildren);\r\n    if (!childRoot) {\r\n        return [vnode, undefined];\r\n    }\r\n    const index = rawChildren.indexOf(childRoot);\r\n    const dynamicIndex = dynamicChildren ? dynamicChildren.indexOf(childRoot) : -1;\r\n    const setRoot = (updatedRoot) => {\r\n        rawChildren[index] = updatedRoot;\r\n        if (dynamicChildren) {\r\n            if (dynamicIndex > -1) {\r\n                dynamicChildren[dynamicIndex] = updatedRoot;\r\n            }\r\n            else if (updatedRoot.patchFlag > 0) {\r\n                vnode.dynamicChildren = [...dynamicChildren, updatedRoot];\r\n            }\r\n        }\r\n    };\r\n    return [normalizeVNode(childRoot), setRoot];\r\n};\r\nfunction filterSingleRoot(children) {\r\n    let singleRoot;\r\n    for (let i = 0; i < children.length; i++) {\r\n        const child = children[i];\r\n        if (isVNode(child)) {\r\n            // ignore user comment\r\n            if (child.type !== Comment || child.children === 'v-if') {\r\n                if (singleRoot) {\r\n                    // has more than 1 non-comment child, return now\r\n                    return;\r\n                }\r\n                else {\r\n                    singleRoot = child;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            return;\r\n        }\r\n    }\r\n    return singleRoot;\r\n}\r\nconst getFunctionalFallthrough = (attrs) => {\r\n    let res;\r\n    for (const key in attrs) {\r\n        if (key === 'class' || key === 'style' || isOn(key)) {\r\n            (res || (res = {}))[key] = attrs[key];\r\n        }\r\n    }\r\n    return res;\r\n};\r\nconst filterModelListeners = (attrs, props) => {\r\n    const res = {};\r\n    for (const key in attrs) {\r\n        if (!isModelListener(key) || !(key.slice(9) in props)) {\r\n            res[key] = attrs[key];\r\n        }\r\n    }\r\n    return res;\r\n};\r\nconst isElementRoot = (vnode) => {\r\n    return (vnode.shapeFlag & 6 /* COMPONENT */ ||\r\n        vnode.shapeFlag & 1 /* ELEMENT */ ||\r\n        vnode.type === Comment // potential v-if branch switch\r\n    );\r\n};\r\nfunction shouldUpdateComponent(prevVNode, nextVNode, optimized) {\r\n    const { props: prevProps, children: prevChildren, component } = prevVNode;\r\n    const { props: nextProps, children: nextChildren, patchFlag } = nextVNode;\r\n    const emits = component.emitsOptions;\r\n    // Parent component's render function was hot-updated. Since this may have\r\n    // caused the child component's slots content to have changed, we need to\r\n    // force the child to update as well.\r\n    if ((process.env.NODE_ENV !== 'production') && (prevChildren || nextChildren) && isHmrUpdating) {\r\n        return true;\r\n    }\r\n    // force child update for runtime directive or transition on component vnode.\r\n    if (nextVNode.dirs || nextVNode.transition) {\r\n        return true;\r\n    }\r\n    if (optimized && patchFlag >= 0) {\r\n        if (patchFlag & 1024 /* DYNAMIC_SLOTS */) {\r\n            // slot content that references values that might have changed,\r\n            // e.g. in a v-for\r\n            return true;\r\n        }\r\n        if (patchFlag & 16 /* FULL_PROPS */) {\r\n            if (!prevProps) {\r\n                return !!nextProps;\r\n            }\r\n            // presence of this flag indicates props are always non-null\r\n            return hasPropsChanged(prevProps, nextProps, emits);\r\n        }\r\n        else if (patchFlag & 8 /* PROPS */) {\r\n            const dynamicProps = nextVNode.dynamicProps;\r\n            for (let i = 0; i < dynamicProps.length; i++) {\r\n                const key = dynamicProps[i];\r\n                if (nextProps[key] !== prevProps[key] &&\r\n                    !isEmitListener(emits, key)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // this path is only taken by manually written render functions\r\n        // so presence of any children leads to a forced update\r\n        if (prevChildren || nextChildren) {\r\n            if (!nextChildren || !nextChildren.$stable) {\r\n                return true;\r\n            }\r\n        }\r\n        if (prevProps === nextProps) {\r\n            return false;\r\n        }\r\n        if (!prevProps) {\r\n            return !!nextProps;\r\n        }\r\n        if (!nextProps) {\r\n            return true;\r\n        }\r\n        return hasPropsChanged(prevProps, nextProps, emits);\r\n    }\r\n    return false;\r\n}\r\nfunction hasPropsChanged(prevProps, nextProps, emitsOptions) {\r\n    const nextKeys = Object.keys(nextProps);\r\n    if (nextKeys.length !== Object.keys(prevProps).length) {\r\n        return true;\r\n    }\r\n    for (let i = 0; i < nextKeys.length; i++) {\r\n        const key = nextKeys[i];\r\n        if (nextProps[key] !== prevProps[key] &&\r\n            !isEmitListener(emitsOptions, key)) {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nfunction updateHOCHostEl({ vnode, parent }, el // HostNode\r\n) {\r\n    while (parent && parent.subTree === vnode) {\r\n        (vnode = parent.vnode).el = el;\r\n        parent = parent.parent;\r\n    }\r\n}\n\nconst isSuspense = (type) => type.__isSuspense;\r\n// Suspense exposes a component-like API, and is treated like a component\r\n// in the compiler, but internally it's a special built-in type that hooks\r\n// directly into the renderer.\r\nconst SuspenseImpl = {\r\n    name: 'Suspense',\r\n    // In order to make Suspense tree-shakable, we need to avoid importing it\r\n    // directly in the renderer. The renderer checks for the __isSuspense flag\r\n    // on a vnode's type and calls the `process` method, passing in renderer\r\n    // internals.\r\n    __isSuspense: true,\r\n    process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, \r\n    // platform-specific impl passed from renderer\r\n    rendererInternals) {\r\n        if (n1 == null) {\r\n            mountSuspense(n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, rendererInternals);\r\n        }\r\n        else {\r\n            patchSuspense(n1, n2, container, anchor, parentComponent, isSVG, slotScopeIds, optimized, rendererInternals);\r\n        }\r\n    },\r\n    hydrate: hydrateSuspense,\r\n    create: createSuspenseBoundary\r\n};\r\n// Force-casted public typing for h and TSX props inference\r\nconst Suspense = (SuspenseImpl\r\n    );\r\nfunction mountSuspense(vnode, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, rendererInternals) {\r\n    const { p: patch, o: { createElement } } = rendererInternals;\r\n    const hiddenContainer = createElement('div');\r\n    const suspense = (vnode.suspense = createSuspenseBoundary(vnode, parentSuspense, parentComponent, container, hiddenContainer, anchor, isSVG, slotScopeIds, optimized, rendererInternals));\r\n    // start mounting the content subtree in an off-dom container\r\n    patch(null, (suspense.pendingBranch = vnode.ssContent), hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds);\r\n    // now check if we have encountered any async deps\r\n    if (suspense.deps > 0) {\r\n        // has async\r\n        // mount the fallback tree\r\n        patch(null, vnode.ssFallback, container, anchor, parentComponent, null, // fallback tree will not have suspense context\r\n        isSVG, slotScopeIds);\r\n        setActiveBranch(suspense, vnode.ssFallback);\r\n    }\r\n    else {\r\n        // Suspense has no async deps. Just resolve.\r\n        suspense.resolve();\r\n    }\r\n}\r\nfunction patchSuspense(n1, n2, container, anchor, parentComponent, isSVG, slotScopeIds, optimized, { p: patch, um: unmount, o: { createElement } }) {\r\n    const suspense = (n2.suspense = n1.suspense);\r\n    suspense.vnode = n2;\r\n    n2.el = n1.el;\r\n    const newBranch = n2.ssContent;\r\n    const newFallback = n2.ssFallback;\r\n    const { activeBranch, pendingBranch, isInFallback, isHydrating } = suspense;\r\n    if (pendingBranch) {\r\n        suspense.pendingBranch = newBranch;\r\n        if (isSameVNodeType(newBranch, pendingBranch)) {\r\n            // same root type but content may have changed.\r\n            patch(pendingBranch, newBranch, suspense.hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds, optimized);\r\n            if (suspense.deps <= 0) {\r\n                suspense.resolve();\r\n            }\r\n            else if (isInFallback) {\r\n                patch(activeBranch, newFallback, container, anchor, parentComponent, null, // fallback tree will not have suspense context\r\n                isSVG, slotScopeIds, optimized);\r\n                setActiveBranch(suspense, newFallback);\r\n            }\r\n        }\r\n        else {\r\n            // toggled before pending tree is resolved\r\n            suspense.pendingId++;\r\n            if (isHydrating) {\r\n                // if toggled before hydration is finished, the current DOM tree is\r\n                // no longer valid. set it as the active branch so it will be unmounted\r\n                // when resolved\r\n                suspense.isHydrating = false;\r\n                suspense.activeBranch = pendingBranch;\r\n            }\r\n            else {\r\n                unmount(pendingBranch, parentComponent, suspense);\r\n            }\r\n            // increment pending ID. this is used to invalidate async callbacks\r\n            // reset suspense state\r\n            suspense.deps = 0;\r\n            // discard effects from pending branch\r\n            suspense.effects.length = 0;\r\n            // discard previous container\r\n            suspense.hiddenContainer = createElement('div');\r\n            if (isInFallback) {\r\n                // already in fallback state\r\n                patch(null, newBranch, suspense.hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds, optimized);\r\n                if (suspense.deps <= 0) {\r\n                    suspense.resolve();\r\n                }\r\n                else {\r\n                    patch(activeBranch, newFallback, container, anchor, parentComponent, null, // fallback tree will not have suspense context\r\n                    isSVG, slotScopeIds, optimized);\r\n                    setActiveBranch(suspense, newFallback);\r\n                }\r\n            }\r\n            else if (activeBranch && isSameVNodeType(newBranch, activeBranch)) {\r\n                // toggled \"back\" to current active branch\r\n                patch(activeBranch, newBranch, container, anchor, parentComponent, suspense, isSVG, slotScopeIds, optimized);\r\n                // force resolve\r\n                suspense.resolve(true);\r\n            }\r\n            else {\r\n                // switched to a 3rd branch\r\n                patch(null, newBranch, suspense.hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds, optimized);\r\n                if (suspense.deps <= 0) {\r\n                    suspense.resolve();\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        if (activeBranch && isSameVNodeType(newBranch, activeBranch)) {\r\n            // root did not change, just normal patch\r\n            patch(activeBranch, newBranch, container, anchor, parentComponent, suspense, isSVG, slotScopeIds, optimized);\r\n            setActiveBranch(suspense, newBranch);\r\n        }\r\n        else {\r\n            // root node toggled\r\n            // invoke @pending event\r\n            const onPending = n2.props && n2.props.onPending;\r\n            if (isFunction(onPending)) {\r\n                onPending();\r\n            }\r\n            // mount pending branch in off-dom container\r\n            suspense.pendingBranch = newBranch;\r\n            suspense.pendingId++;\r\n            patch(null, newBranch, suspense.hiddenContainer, null, parentComponent, suspense, isSVG, slotScopeIds, optimized);\r\n            if (suspense.deps <= 0) {\r\n                // incoming branch has no async deps, resolve now.\r\n                suspense.resolve();\r\n            }\r\n            else {\r\n                const { timeout, pendingId } = suspense;\r\n                if (timeout > 0) {\r\n                    setTimeout(() => {\r\n                        if (suspense.pendingId === pendingId) {\r\n                            suspense.fallback(newFallback);\r\n                        }\r\n                    }, timeout);\r\n                }\r\n                else if (timeout === 0) {\r\n                    suspense.fallback(newFallback);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nlet hasWarned = false;\r\nfunction createSuspenseBoundary(vnode, parent, parentComponent, container, hiddenContainer, anchor, isSVG, slotScopeIds, optimized, rendererInternals, isHydrating = false) {\r\n    /* istanbul ignore if */\r\n    if ((process.env.NODE_ENV !== 'production') && !false && !hasWarned) {\r\n        hasWarned = true;\r\n        // @ts-ignore `console.info` cannot be null error\r\n        console[console.info ? 'info' : 'log'](`<Suspense> is an experimental feature and its API will likely change.`);\r\n    }\r\n    const { p: patch, m: move, um: unmount, n: next, o: { parentNode, remove } } = rendererInternals;\r\n    const timeout = toNumber(vnode.props && vnode.props.timeout);\r\n    const suspense = {\r\n        vnode,\r\n        parent,\r\n        parentComponent,\r\n        isSVG,\r\n        container,\r\n        hiddenContainer,\r\n        anchor,\r\n        deps: 0,\r\n        pendingId: 0,\r\n        timeout: typeof timeout === 'number' ? timeout : -1,\r\n        activeBranch: null,\r\n        pendingBranch: null,\r\n        isInFallback: true,\r\n        isHydrating,\r\n        isUnmounted: false,\r\n        effects: [],\r\n        resolve(resume = false) {\r\n            if ((process.env.NODE_ENV !== 'production')) {\r\n                if (!resume && !suspense.pendingBranch) {\r\n                    throw new Error(`suspense.resolve() is called without a pending branch.`);\r\n                }\r\n                if (suspense.isUnmounted) {\r\n                    throw new Error(`suspense.resolve() is called on an already unmounted suspense boundary.`);\r\n                }\r\n            }\r\n            const { vnode, activeBranch, pendingBranch, pendingId, effects, parentComponent, container } = suspense;\r\n            if (suspense.isHydrating) {\r\n                suspense.isHydrating = false;\r\n            }\r\n            else if (!resume) {\r\n                const delayEnter = activeBranch &&\r\n                    pendingBranch.transition &&\r\n                    pendingBranch.transition.mode === 'out-in';\r\n                if (delayEnter) {\r\n                    activeBranch.transition.afterLeave = () => {\r\n                        if (pendingId === suspense.pendingId) {\r\n                            move(pendingBranch, container, anchor, 0 /* ENTER */);\r\n                        }\r\n                    };\r\n                }\r\n                // this is initial anchor on mount\r\n                let { anchor } = suspense;\r\n                // unmount current active tree\r\n                if (activeBranch) {\r\n                    // if the fallback tree was mounted, it may have been moved\r\n                    // as part of a parent suspense. get the latest anchor for insertion\r\n                    anchor = next(activeBranch);\r\n                    unmount(activeBranch, parentComponent, suspense, true);\r\n                }\r\n                if (!delayEnter) {\r\n                    // move content from off-dom container to actual container\r\n                    move(pendingBranch, container, anchor, 0 /* ENTER */);\r\n                }\r\n            }\r\n            setActiveBranch(suspense, pendingBranch);\r\n            suspense.pendingBranch = null;\r\n            suspense.isInFallback = false;\r\n            // flush buffered effects\r\n            // check if there is a pending parent suspense\r\n            let parent = suspense.parent;\r\n            let hasUnresolvedAncestor = false;\r\n            while (parent) {\r\n                if (parent.pendingBranch) {\r\n                    // found a pending parent suspense, merge buffered post jobs\r\n                    // into that parent\r\n                    parent.effects.push(...effects);\r\n                    hasUnresolvedAncestor = true;\r\n                    break;\r\n                }\r\n                parent = parent.parent;\r\n            }\r\n            // no pending parent suspense, flush all jobs\r\n            if (!hasUnresolvedAncestor) {\r\n                queuePostFlushCb(effects);\r\n            }\r\n            suspense.effects = [];\r\n            // invoke @resolve event\r\n            const onResolve = vnode.props && vnode.props.onResolve;\r\n            if (isFunction(onResolve)) {\r\n                onResolve();\r\n            }\r\n        },\r\n        fallback(fallbackVNode) {\r\n            if (!suspense.pendingBranch) {\r\n                return;\r\n            }\r\n            const { vnode, activeBranch, parentComponent, container, isSVG } = suspense;\r\n            // invoke @fallback event\r\n            const onFallback = vnode.props && vnode.props.onFallback;\r\n            if (isFunction(onFallback)) {\r\n                onFallback();\r\n            }\r\n            const anchor = next(activeBranch);\r\n            const mountFallback = () => {\r\n                if (!suspense.isInFallback) {\r\n                    return;\r\n                }\r\n                // mount the fallback tree\r\n                patch(null, fallbackVNode, container, anchor, parentComponent, null, // fallback tree will not have suspense context\r\n                isSVG, slotScopeIds, optimized);\r\n                setActiveBranch(suspense, fallbackVNode);\r\n            };\r\n            const delayEnter = fallbackVNode.transition && fallbackVNode.transition.mode === 'out-in';\r\n            if (delayEnter) {\r\n                activeBranch.transition.afterLeave = mountFallback;\r\n            }\r\n            // unmount current active branch\r\n            unmount(activeBranch, parentComponent, null, // no suspense so unmount hooks fire now\r\n            true // shouldRemove\r\n            );\r\n            suspense.isInFallback = true;\r\n            if (!delayEnter) {\r\n                mountFallback();\r\n            }\r\n        },\r\n        move(container, anchor, type) {\r\n            suspense.activeBranch &&\r\n                move(suspense.activeBranch, container, anchor, type);\r\n            suspense.container = container;\r\n        },\r\n        next() {\r\n            return suspense.activeBranch && next(suspense.activeBranch);\r\n        },\r\n        registerDep(instance, setupRenderEffect) {\r\n            const isInPendingSuspense = !!suspense.pendingBranch;\r\n            if (isInPendingSuspense) {\r\n                suspense.deps++;\r\n            }\r\n            const hydratedEl = instance.vnode.el;\r\n            instance\r\n                .asyncDep.catch(err => {\r\n                handleError(err, instance, 0 /* SETUP_FUNCTION */);\r\n            })\r\n                .then(asyncSetupResult => {\r\n                // retry when the setup() promise resolves.\r\n                // component may have been unmounted before resolve.\r\n                if (instance.isUnmounted ||\r\n                    suspense.isUnmounted ||\r\n                    suspense.pendingId !== instance.suspenseId) {\r\n                    return;\r\n                }\r\n                // retry from this component\r\n                instance.asyncResolved = true;\r\n                const { vnode } = instance;\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    pushWarningContext(vnode);\r\n                }\r\n                handleSetupResult(instance, asyncSetupResult, false);\r\n                if (hydratedEl) {\r\n                    // vnode may have been replaced if an update happened before the\r\n                    // async dep is resolved.\r\n                    vnode.el = hydratedEl;\r\n                }\r\n                const placeholder = !hydratedEl && instance.subTree.el;\r\n                setupRenderEffect(instance, vnode, \r\n                // component may have been moved before resolve.\r\n                // if this is not a hydration, instance.subTree will be the comment\r\n                // placeholder.\r\n                parentNode(hydratedEl || instance.subTree.el), \r\n                // anchor will not be used if this is hydration, so only need to\r\n                // consider the comment placeholder case.\r\n                hydratedEl ? null : next(instance.subTree), suspense, isSVG, optimized);\r\n                if (placeholder) {\r\n                    remove(placeholder);\r\n                }\r\n                updateHOCHostEl(instance, vnode.el);\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    popWarningContext();\r\n                }\r\n                // only decrease deps count if suspense is not already resolved\r\n                if (isInPendingSuspense && --suspense.deps === 0) {\r\n                    suspense.resolve();\r\n                }\r\n            });\r\n        },\r\n        unmount(parentSuspense, doRemove) {\r\n            suspense.isUnmounted = true;\r\n            if (suspense.activeBranch) {\r\n                unmount(suspense.activeBranch, parentComponent, parentSuspense, doRemove);\r\n            }\r\n            if (suspense.pendingBranch) {\r\n                unmount(suspense.pendingBranch, parentComponent, parentSuspense, doRemove);\r\n            }\r\n        }\r\n    };\r\n    return suspense;\r\n}\r\nfunction hydrateSuspense(node, vnode, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, rendererInternals, hydrateNode) {\r\n    /* eslint-disable no-restricted-globals */\r\n    const suspense = (vnode.suspense = createSuspenseBoundary(vnode, parentSuspense, parentComponent, node.parentNode, document.createElement('div'), null, isSVG, slotScopeIds, optimized, rendererInternals, true /* hydrating */));\r\n    // there are two possible scenarios for server-rendered suspense:\r\n    // - success: ssr content should be fully resolved\r\n    // - failure: ssr content should be the fallback branch.\r\n    // however, on the client we don't really know if it has failed or not\r\n    // attempt to hydrate the DOM assuming it has succeeded, but we still\r\n    // need to construct a suspense boundary first\r\n    const result = hydrateNode(node, (suspense.pendingBranch = vnode.ssContent), parentComponent, suspense, slotScopeIds, optimized);\r\n    if (suspense.deps === 0) {\r\n        suspense.resolve();\r\n    }\r\n    return result;\r\n    /* eslint-enable no-restricted-globals */\r\n}\r\nfunction normalizeSuspenseChildren(vnode) {\r\n    const { shapeFlag, children } = vnode;\r\n    let content;\r\n    let fallback;\r\n    if (shapeFlag & 32 /* SLOTS_CHILDREN */) {\r\n        content = normalizeSuspenseSlot(children.default);\r\n        fallback = normalizeSuspenseSlot(children.fallback);\r\n    }\r\n    else {\r\n        content = normalizeSuspenseSlot(children);\r\n        fallback = normalizeVNode(null);\r\n    }\r\n    return {\r\n        content,\r\n        fallback\r\n    };\r\n}\r\nfunction normalizeSuspenseSlot(s) {\r\n    if (isFunction(s)) {\r\n        s = s();\r\n    }\r\n    if (isArray(s)) {\r\n        const singleChild = filterSingleRoot(s);\r\n        if ((process.env.NODE_ENV !== 'production') && !singleChild) {\r\n            warn(`<Suspense> slots expect a single root node.`);\r\n        }\r\n        s = singleChild;\r\n    }\r\n    return normalizeVNode(s);\r\n}\r\nfunction queueEffectWithSuspense(fn, suspense) {\r\n    if (suspense && suspense.pendingBranch) {\r\n        if (isArray(fn)) {\r\n            suspense.effects.push(...fn);\r\n        }\r\n        else {\r\n            suspense.effects.push(fn);\r\n        }\r\n    }\r\n    else {\r\n        queuePostFlushCb(fn);\r\n    }\r\n}\r\nfunction setActiveBranch(suspense, branch) {\r\n    suspense.activeBranch = branch;\r\n    const { vnode, parentComponent } = suspense;\r\n    const el = (vnode.el = branch.el);\r\n    // in case suspense is the root node of a component,\r\n    // recursively update the HOC el\r\n    if (parentComponent && parentComponent.subTree === vnode) {\r\n        parentComponent.vnode.el = el;\r\n        updateHOCHostEl(parentComponent, el);\r\n    }\r\n}\n\nfunction initProps(instance, rawProps, isStateful, // result of bitwise flag comparison\r\nisSSR = false) {\r\n    const props = {};\r\n    const attrs = {};\r\n    def(attrs, InternalObjectKey, 1);\r\n    instance.propsDefaults = Object.create(null);\r\n    setFullProps(instance, rawProps, props, attrs);\r\n    // validation\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        validateProps(rawProps || {}, props, instance);\r\n    }\r\n    if (isStateful) {\r\n        // stateful\r\n        instance.props = isSSR ? props : shallowReactive(props);\r\n    }\r\n    else {\r\n        if (!instance.type.props) {\r\n            // functional w/ optional props, props === attrs\r\n            instance.props = attrs;\r\n        }\r\n        else {\r\n            // functional w/ declared props\r\n            instance.props = props;\r\n        }\r\n    }\r\n    instance.attrs = attrs;\r\n}\r\nfunction updateProps(instance, rawProps, rawPrevProps, optimized) {\r\n    const { props, attrs, vnode: { patchFlag } } = instance;\r\n    const rawCurrentProps = toRaw(props);\r\n    const [options] = instance.propsOptions;\r\n    if (\r\n    // always force full diff in dev\r\n    // - #1942 if hmr is enabled with sfc component\r\n    // - vite#872 non-sfc component used by sfc component\r\n    !((process.env.NODE_ENV !== 'production') &&\r\n        (instance.type.__hmrId ||\r\n            (instance.parent && instance.parent.type.__hmrId))) &&\r\n        (optimized || patchFlag > 0) &&\r\n        !(patchFlag & 16 /* FULL_PROPS */)) {\r\n        if (patchFlag & 8 /* PROPS */) {\r\n            // Compiler-generated props & no keys change, just set the updated\r\n            // the props.\r\n            const propsToUpdate = instance.vnode.dynamicProps;\r\n            for (let i = 0; i < propsToUpdate.length; i++) {\r\n                const key = propsToUpdate[i];\r\n                // PROPS flag guarantees rawProps to be non-null\r\n                const value = rawProps[key];\r\n                if (options) {\r\n                    // attr / props separation was done on init and will be consistent\r\n                    // in this code path, so just check if attrs have it.\r\n                    if (hasOwn(attrs, key)) {\r\n                        attrs[key] = value;\r\n                    }\r\n                    else {\r\n                        const camelizedKey = camelize(key);\r\n                        props[camelizedKey] = resolvePropValue(options, rawCurrentProps, camelizedKey, value, instance);\r\n                    }\r\n                }\r\n                else {\r\n                    attrs[key] = value;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        // full props update.\r\n        setFullProps(instance, rawProps, props, attrs);\r\n        // in case of dynamic props, check if we need to delete keys from\r\n        // the props object\r\n        let kebabKey;\r\n        for (const key in rawCurrentProps) {\r\n            if (!rawProps ||\r\n                // for camelCase\r\n                (!hasOwn(rawProps, key) &&\r\n                    // it's possible the original props was passed in as kebab-case\r\n                    // and converted to camelCase (#955)\r\n                    ((kebabKey = hyphenate(key)) === key || !hasOwn(rawProps, kebabKey)))) {\r\n                if (options) {\r\n                    if (rawPrevProps &&\r\n                        // for camelCase\r\n                        (rawPrevProps[key] !== undefined ||\r\n                            // for kebab-case\r\n                            rawPrevProps[kebabKey] !== undefined)) {\r\n                        props[key] = resolvePropValue(options, rawProps || EMPTY_OBJ, key, undefined, instance);\r\n                    }\r\n                }\r\n                else {\r\n                    delete props[key];\r\n                }\r\n            }\r\n        }\r\n        // in the case of functional component w/o props declaration, props and\r\n        // attrs point to the same object so it should already have been updated.\r\n        if (attrs !== rawCurrentProps) {\r\n            for (const key in attrs) {\r\n                if (!rawProps || !hasOwn(rawProps, key)) {\r\n                    delete attrs[key];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    // trigger updates for $attrs in case it's used in component slots\r\n    trigger(instance, \"set\" /* SET */, '$attrs');\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        validateProps(rawProps || {}, props, instance);\r\n    }\r\n}\r\nfunction setFullProps(instance, rawProps, props, attrs) {\r\n    const [options, needCastKeys] = instance.propsOptions;\r\n    if (rawProps) {\r\n        for (const key in rawProps) {\r\n            const value = rawProps[key];\r\n            // key, ref are reserved and never passed down\r\n            if (isReservedProp(key)) {\r\n                continue;\r\n            }\r\n            // prop option names are camelized during normalization, so to support\r\n            // kebab -> camel conversion here we need to camelize the key.\r\n            let camelKey;\r\n            if (options && hasOwn(options, (camelKey = camelize(key)))) {\r\n                props[camelKey] = value;\r\n            }\r\n            else if (!isEmitListener(instance.emitsOptions, key)) {\r\n                // Any non-declared (either as a prop or an emitted event) props are put\r\n                // into a separate `attrs` object for spreading. Make sure to preserve\r\n                // original key casing\r\n                attrs[key] = value;\r\n            }\r\n        }\r\n    }\r\n    if (needCastKeys) {\r\n        const rawCurrentProps = toRaw(props);\r\n        for (let i = 0; i < needCastKeys.length; i++) {\r\n            const key = needCastKeys[i];\r\n            props[key] = resolvePropValue(options, rawCurrentProps, key, rawCurrentProps[key], instance);\r\n        }\r\n    }\r\n}\r\nfunction resolvePropValue(options, props, key, value, instance) {\r\n    const opt = options[key];\r\n    if (opt != null) {\r\n        const hasDefault = hasOwn(opt, 'default');\r\n        // default values\r\n        if (hasDefault && value === undefined) {\r\n            const defaultValue = opt.default;\r\n            if (opt.type !== Function && isFunction(defaultValue)) {\r\n                const { propsDefaults } = instance;\r\n                if (key in propsDefaults) {\r\n                    value = propsDefaults[key];\r\n                }\r\n                else {\r\n                    setCurrentInstance(instance);\r\n                    value = propsDefaults[key] = defaultValue(props);\r\n                    setCurrentInstance(null);\r\n                }\r\n            }\r\n            else {\r\n                value = defaultValue;\r\n            }\r\n        }\r\n        // boolean casting\r\n        if (opt[0 /* shouldCast */]) {\r\n            if (!hasOwn(props, key) && !hasDefault) {\r\n                value = false;\r\n            }\r\n            else if (opt[1 /* shouldCastTrue */] &&\r\n                (value === '' || value === hyphenate(key))) {\r\n                value = true;\r\n            }\r\n        }\r\n    }\r\n    return value;\r\n}\r\nfunction normalizePropsOptions(comp, appContext, asMixin = false) {\r\n    if (!appContext.deopt && comp.__props) {\r\n        return comp.__props;\r\n    }\r\n    const raw = comp.props;\r\n    const normalized = {};\r\n    const needCastKeys = [];\r\n    // apply mixin/extends props\r\n    let hasExtends = false;\r\n    if (__VUE_OPTIONS_API__ && !isFunction(comp)) {\r\n        const extendProps = (raw) => {\r\n            hasExtends = true;\r\n            const [props, keys] = normalizePropsOptions(raw, appContext, true);\r\n            extend(normalized, props);\r\n            if (keys)\r\n                needCastKeys.push(...keys);\r\n        };\r\n        if (!asMixin && appContext.mixins.length) {\r\n            appContext.mixins.forEach(extendProps);\r\n        }\r\n        if (comp.extends) {\r\n            extendProps(comp.extends);\r\n        }\r\n        if (comp.mixins) {\r\n            comp.mixins.forEach(extendProps);\r\n        }\r\n    }\r\n    if (!raw && !hasExtends) {\r\n        return (comp.__props = EMPTY_ARR);\r\n    }\r\n    if (isArray(raw)) {\r\n        for (let i = 0; i < raw.length; i++) {\r\n            if ((process.env.NODE_ENV !== 'production') && !isString(raw[i])) {\r\n                warn(`props must be strings when using array syntax.`, raw[i]);\r\n            }\r\n            const normalizedKey = camelize(raw[i]);\r\n            if (validatePropName(normalizedKey)) {\r\n                normalized[normalizedKey] = EMPTY_OBJ;\r\n            }\r\n        }\r\n    }\r\n    else if (raw) {\r\n        if ((process.env.NODE_ENV !== 'production') && !isObject(raw)) {\r\n            warn(`invalid props options`, raw);\r\n        }\r\n        for (const key in raw) {\r\n            const normalizedKey = camelize(key);\r\n            if (validatePropName(normalizedKey)) {\r\n                const opt = raw[key];\r\n                const prop = (normalized[normalizedKey] =\r\n                    isArray(opt) || isFunction(opt) ? { type: opt } : opt);\r\n                if (prop) {\r\n                    const booleanIndex = getTypeIndex(Boolean, prop.type);\r\n                    const stringIndex = getTypeIndex(String, prop.type);\r\n                    prop[0 /* shouldCast */] = booleanIndex > -1;\r\n                    prop[1 /* shouldCastTrue */] =\r\n                        stringIndex < 0 || booleanIndex < stringIndex;\r\n                    // if the prop needs boolean casting or default value\r\n                    if (booleanIndex > -1 || hasOwn(prop, 'default')) {\r\n                        needCastKeys.push(normalizedKey);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return (comp.__props = [normalized, needCastKeys]);\r\n}\r\nfunction validatePropName(key) {\r\n    if (key[0] !== '$') {\r\n        return true;\r\n    }\r\n    else if ((process.env.NODE_ENV !== 'production')) {\r\n        warn(`Invalid prop name: \"${key}\" is a reserved property.`);\r\n    }\r\n    return false;\r\n}\r\n// use function string name to check type constructors\r\n// so that it works across vms / iframes.\r\nfunction getType(ctor) {\r\n    const match = ctor && ctor.toString().match(/^\\s*function (\\w+)/);\r\n    return match ? match[1] : '';\r\n}\r\nfunction isSameType(a, b) {\r\n    return getType(a) === getType(b);\r\n}\r\nfunction getTypeIndex(type, expectedTypes) {\r\n    if (isArray(expectedTypes)) {\r\n        return expectedTypes.findIndex(t => isSameType(t, type));\r\n    }\r\n    else if (isFunction(expectedTypes)) {\r\n        return isSameType(expectedTypes, type) ? 0 : -1;\r\n    }\r\n    return -1;\r\n}\r\n/**\r\n * dev only\r\n */\r\nfunction validateProps(rawProps, props, instance) {\r\n    const resolvedValues = toRaw(props);\r\n    const options = instance.propsOptions[0];\r\n    for (const key in options) {\r\n        let opt = options[key];\r\n        if (opt == null)\r\n            continue;\r\n        validateProp(key, resolvedValues[key], opt, !hasOwn(rawProps, key) && !hasOwn(rawProps, hyphenate(key)));\r\n    }\r\n}\r\n/**\r\n * dev only\r\n */\r\nfunction validateProp(name, value, prop, isAbsent) {\r\n    const { type, required, validator } = prop;\r\n    // required!\r\n    if (required && isAbsent) {\r\n        warn('Missing required prop: \"' + name + '\"');\r\n        return;\r\n    }\r\n    // missing but optional\r\n    if (value == null && !prop.required) {\r\n        return;\r\n    }\r\n    // type check\r\n    if (type != null && type !== true) {\r\n        let isValid = false;\r\n        const types = isArray(type) ? type : [type];\r\n        const expectedTypes = [];\r\n        // value is valid as long as one of the specified types match\r\n        for (let i = 0; i < types.length && !isValid; i++) {\r\n            const { valid, expectedType } = assertType(value, types[i]);\r\n            expectedTypes.push(expectedType || '');\r\n            isValid = valid;\r\n        }\r\n        if (!isValid) {\r\n            warn(getInvalidTypeMessage(name, value, expectedTypes));\r\n            return;\r\n        }\r\n    }\r\n    // custom validator\r\n    if (validator && !validator(value)) {\r\n        warn('Invalid prop: custom validator check failed for prop \"' + name + '\".');\r\n    }\r\n}\r\nconst isSimpleType = /*#__PURE__*/ makeMap('String,Number,Boolean,Function,Symbol,BigInt');\r\n/**\r\n * dev only\r\n */\r\nfunction assertType(value, type) {\r\n    let valid;\r\n    const expectedType = getType(type);\r\n    if (isSimpleType(expectedType)) {\r\n        const t = typeof value;\r\n        valid = t === expectedType.toLowerCase();\r\n        // for primitive wrapper objects\r\n        if (!valid && t === 'object') {\r\n            valid = value instanceof type;\r\n        }\r\n    }\r\n    else if (expectedType === 'Object') {\r\n        valid = isObject(value);\r\n    }\r\n    else if (expectedType === 'Array') {\r\n        valid = isArray(value);\r\n    }\r\n    else {\r\n        valid = value instanceof type;\r\n    }\r\n    return {\r\n        valid,\r\n        expectedType\r\n    };\r\n}\r\n/**\r\n * dev only\r\n */\r\nfunction getInvalidTypeMessage(name, value, expectedTypes) {\r\n    let message = `Invalid prop: type check failed for prop \"${name}\".` +\r\n        ` Expected ${expectedTypes.map(capitalize).join(', ')}`;\r\n    const expectedType = expectedTypes[0];\r\n    const receivedType = toRawType(value);\r\n    const expectedValue = styleValue(value, expectedType);\r\n    const receivedValue = styleValue(value, receivedType);\r\n    // check if we need to specify expected value\r\n    if (expectedTypes.length === 1 &&\r\n        isExplicable(expectedType) &&\r\n        !isBoolean(expectedType, receivedType)) {\r\n        message += ` with value ${expectedValue}`;\r\n    }\r\n    message += `, got ${receivedType} `;\r\n    // check if we need to specify received value\r\n    if (isExplicable(receivedType)) {\r\n        message += `with value ${receivedValue}.`;\r\n    }\r\n    return message;\r\n}\r\n/**\r\n * dev only\r\n */\r\nfunction styleValue(value, type) {\r\n    if (type === 'String') {\r\n        return `\"${value}\"`;\r\n    }\r\n    else if (type === 'Number') {\r\n        return `${Number(value)}`;\r\n    }\r\n    else {\r\n        return `${value}`;\r\n    }\r\n}\r\n/**\r\n * dev only\r\n */\r\nfunction isExplicable(type) {\r\n    const explicitTypes = ['string', 'number', 'boolean'];\r\n    return explicitTypes.some(elem => type.toLowerCase() === elem);\r\n}\r\n/**\r\n * dev only\r\n */\r\nfunction isBoolean(...args) {\r\n    return args.some(elem => elem.toLowerCase() === 'boolean');\r\n}\n\nfunction injectHook(type, hook, target = currentInstance, prepend = false) {\r\n    if (target) {\r\n        const hooks = target[type] || (target[type] = []);\r\n        // cache the error handling wrapper for injected hooks so the same hook\r\n        // can be properly deduped by the scheduler. \"__weh\" stands for \"with error\r\n        // handling\".\r\n        const wrappedHook = hook.__weh ||\r\n            (hook.__weh = (...args) => {\r\n                if (target.isUnmounted) {\r\n                    return;\r\n                }\r\n                // disable tracking inside all lifecycle hooks\r\n                // since they can potentially be called inside effects.\r\n                pauseTracking();\r\n                // Set currentInstance during hook invocation.\r\n                // This assumes the hook does not synchronously trigger other hooks, which\r\n                // can only be false when the user does something really funky.\r\n                setCurrentInstance(target);\r\n                const res = callWithAsyncErrorHandling(hook, target, type, args);\r\n                setCurrentInstance(null);\r\n                resetTracking();\r\n                return res;\r\n            });\r\n        if (prepend) {\r\n            hooks.unshift(wrappedHook);\r\n        }\r\n        else {\r\n            hooks.push(wrappedHook);\r\n        }\r\n        return wrappedHook;\r\n    }\r\n    else if ((process.env.NODE_ENV !== 'production')) {\r\n        const apiName = toHandlerKey(ErrorTypeStrings[type].replace(/ hook$/, ''));\r\n        warn(`${apiName} is called when there is no active component instance to be ` +\r\n            `associated with. ` +\r\n            `Lifecycle injection APIs can only be used during execution of setup().` +\r\n            (` If you are using async setup(), make sure to register lifecycle ` +\r\n                    `hooks before the first await statement.`\r\n                ));\r\n    }\r\n}\r\nconst createHook = (lifecycle) => (hook, target = currentInstance) => \r\n// post-create lifecycle registrations are noops during SSR\r\n!isInSSRComponentSetup && injectHook(lifecycle, hook, target);\r\nconst onBeforeMount = createHook(\"bm\" /* BEFORE_MOUNT */);\r\nconst onMounted = createHook(\"m\" /* MOUNTED */);\r\nconst onBeforeUpdate = createHook(\"bu\" /* BEFORE_UPDATE */);\r\nconst onUpdated = createHook(\"u\" /* UPDATED */);\r\nconst onBeforeUnmount = createHook(\"bum\" /* BEFORE_UNMOUNT */);\r\nconst onUnmounted = createHook(\"um\" /* UNMOUNTED */);\r\nconst onRenderTriggered = createHook(\"rtg\" /* RENDER_TRIGGERED */);\r\nconst onRenderTracked = createHook(\"rtc\" /* RENDER_TRACKED */);\r\nconst onErrorCaptured = (hook, target = currentInstance) => {\r\n    injectHook(\"ec\" /* ERROR_CAPTURED */, hook, target);\r\n};\n\n// Simple effect.\r\nfunction watchEffect(effect, options) {\r\n    return doWatch(effect, null, options);\r\n}\r\n// initial value for watchers to trigger on undefined initial values\r\nconst INITIAL_WATCHER_VALUE = {};\r\n// implementation\r\nfunction watch(source, cb, options) {\r\n    if ((process.env.NODE_ENV !== 'production') && !isFunction(cb)) {\r\n        warn(`\\`watch(fn, options?)\\` signature has been moved to a separate API. ` +\r\n            `Use \\`watchEffect(fn, options?)\\` instead. \\`watch\\` now only ` +\r\n            `supports \\`watch(source, cb, options?) signature.`);\r\n    }\r\n    return doWatch(source, cb, options);\r\n}\r\nfunction doWatch(source, cb, { immediate, deep, flush, onTrack, onTrigger } = EMPTY_OBJ, instance = currentInstance) {\r\n    if ((process.env.NODE_ENV !== 'production') && !cb) {\r\n        if (immediate !== undefined) {\r\n            warn(`watch() \"immediate\" option is only respected when using the ` +\r\n                `watch(source, callback, options?) signature.`);\r\n        }\r\n        if (deep !== undefined) {\r\n            warn(`watch() \"deep\" option is only respected when using the ` +\r\n                `watch(source, callback, options?) signature.`);\r\n        }\r\n    }\r\n    const warnInvalidSource = (s) => {\r\n        warn(`Invalid watch source: `, s, `A watch source can only be a getter/effect function, a ref, ` +\r\n            `a reactive object, or an array of these types.`);\r\n    };\r\n    let getter;\r\n    let forceTrigger = false;\r\n    if (isRef(source)) {\r\n        getter = () => source.value;\r\n        forceTrigger = !!source._shallow;\r\n    }\r\n    else if (isReactive(source)) {\r\n        getter = () => source;\r\n        deep = true;\r\n    }\r\n    else if (isArray(source)) {\r\n        getter = () => source.map(s => {\r\n            if (isRef(s)) {\r\n                return s.value;\r\n            }\r\n            else if (isReactive(s)) {\r\n                return traverse(s);\r\n            }\r\n            else if (isFunction(s)) {\r\n                return callWithErrorHandling(s, instance, 2 /* WATCH_GETTER */, [\r\n                    instance && instance.proxy\r\n                ]);\r\n            }\r\n            else {\r\n                (process.env.NODE_ENV !== 'production') && warnInvalidSource(s);\r\n            }\r\n        });\r\n    }\r\n    else if (isFunction(source)) {\r\n        if (cb) {\r\n            // getter with cb\r\n            getter = () => callWithErrorHandling(source, instance, 2 /* WATCH_GETTER */, [\r\n                instance && instance.proxy\r\n            ]);\r\n        }\r\n        else {\r\n            // no cb -> simple effect\r\n            getter = () => {\r\n                if (instance && instance.isUnmounted) {\r\n                    return;\r\n                }\r\n                if (cleanup) {\r\n                    cleanup();\r\n                }\r\n                return callWithAsyncErrorHandling(source, instance, 3 /* WATCH_CALLBACK */, [onInvalidate]);\r\n            };\r\n        }\r\n    }\r\n    else {\r\n        getter = NOOP;\r\n        (process.env.NODE_ENV !== 'production') && warnInvalidSource(source);\r\n    }\r\n    if (cb && deep) {\r\n        const baseGetter = getter;\r\n        getter = () => traverse(baseGetter());\r\n    }\r\n    let cleanup;\r\n    let onInvalidate = (fn) => {\r\n        cleanup = runner.options.onStop = () => {\r\n            callWithErrorHandling(fn, instance, 4 /* WATCH_CLEANUP */);\r\n        };\r\n    };\r\n    let oldValue = isArray(source) ? [] : INITIAL_WATCHER_VALUE;\r\n    const job = () => {\r\n        if (!runner.active) {\r\n            return;\r\n        }\r\n        if (cb) {\r\n            // watch(source, cb)\r\n            const newValue = runner();\r\n            if (deep || forceTrigger || hasChanged(newValue, oldValue)) {\r\n                // cleanup before running cb again\r\n                if (cleanup) {\r\n                    cleanup();\r\n                }\r\n                callWithAsyncErrorHandling(cb, instance, 3 /* WATCH_CALLBACK */, [\r\n                    newValue,\r\n                    // pass undefined as the old value when it's changed for the first time\r\n                    oldValue === INITIAL_WATCHER_VALUE ? undefined : oldValue,\r\n                    onInvalidate\r\n                ]);\r\n                oldValue = newValue;\r\n            }\r\n        }\r\n        else {\r\n            // watchEffect\r\n            runner();\r\n        }\r\n    };\r\n    // important: mark the job as a watcher callback so that scheduler knows\r\n    // it is allowed to self-trigger (#1727)\r\n    job.allowRecurse = !!cb;\r\n    let scheduler;\r\n    if (flush === 'sync') {\r\n        scheduler = job;\r\n    }\r\n    else if (flush === 'post') {\r\n        scheduler = () => queuePostRenderEffect(job, instance && instance.suspense);\r\n    }\r\n    else {\r\n        // default: 'pre'\r\n        scheduler = () => {\r\n            if (!instance || instance.isMounted) {\r\n                queuePreFlushCb(job);\r\n            }\r\n            else {\r\n                // with 'pre' option, the first call must happen before\r\n                // the component is mounted so it is called synchronously.\r\n                job();\r\n            }\r\n        };\r\n    }\r\n    const runner = effect(getter, {\r\n        lazy: true,\r\n        onTrack,\r\n        onTrigger,\r\n        scheduler\r\n    });\r\n    recordInstanceBoundEffect(runner, instance);\r\n    // initial run\r\n    if (cb) {\r\n        if (immediate) {\r\n            job();\r\n        }\r\n        else {\r\n            oldValue = runner();\r\n        }\r\n    }\r\n    else if (flush === 'post') {\r\n        queuePostRenderEffect(runner, instance && instance.suspense);\r\n    }\r\n    else {\r\n        runner();\r\n    }\r\n    return () => {\r\n        stop(runner);\r\n        if (instance) {\r\n            remove(instance.effects, runner);\r\n        }\r\n    };\r\n}\r\n// this.$watch\r\nfunction instanceWatch(source, cb, options) {\r\n    const publicThis = this.proxy;\r\n    const getter = isString(source)\r\n        ? () => publicThis[source]\r\n        : source.bind(publicThis);\r\n    return doWatch(getter, cb.bind(publicThis), options, this);\r\n}\r\nfunction traverse(value, seen = new Set()) {\r\n    if (!isObject(value) || seen.has(value)) {\r\n        return value;\r\n    }\r\n    seen.add(value);\r\n    if (isRef(value)) {\r\n        traverse(value.value, seen);\r\n    }\r\n    else if (isArray(value)) {\r\n        for (let i = 0; i < value.length; i++) {\r\n            traverse(value[i], seen);\r\n        }\r\n    }\r\n    else if (isSet(value) || isMap(value)) {\r\n        value.forEach((v) => {\r\n            traverse(v, seen);\r\n        });\r\n    }\r\n    else {\r\n        for (const key in value) {\r\n            traverse(value[key], seen);\r\n        }\r\n    }\r\n    return value;\r\n}\n\nfunction useTransitionState() {\r\n    const state = {\r\n        isMounted: false,\r\n        isLeaving: false,\r\n        isUnmounting: false,\r\n        leavingVNodes: new Map()\r\n    };\r\n    onMounted(() => {\r\n        state.isMounted = true;\r\n    });\r\n    onBeforeUnmount(() => {\r\n        state.isUnmounting = true;\r\n    });\r\n    return state;\r\n}\r\nconst TransitionHookValidator = [Function, Array];\r\nconst BaseTransitionImpl = {\r\n    name: `BaseTransition`,\r\n    props: {\r\n        mode: String,\r\n        appear: Boolean,\r\n        persisted: Boolean,\r\n        // enter\r\n        onBeforeEnter: TransitionHookValidator,\r\n        onEnter: TransitionHookValidator,\r\n        onAfterEnter: TransitionHookValidator,\r\n        onEnterCancelled: TransitionHookValidator,\r\n        // leave\r\n        onBeforeLeave: TransitionHookValidator,\r\n        onLeave: TransitionHookValidator,\r\n        onAfterLeave: TransitionHookValidator,\r\n        onLeaveCancelled: TransitionHookValidator,\r\n        // appear\r\n        onBeforeAppear: TransitionHookValidator,\r\n        onAppear: TransitionHookValidator,\r\n        onAfterAppear: TransitionHookValidator,\r\n        onAppearCancelled: TransitionHookValidator\r\n    },\r\n    setup(props, { slots }) {\r\n        const instance = getCurrentInstance();\r\n        const state = useTransitionState();\r\n        let prevTransitionKey;\r\n        return () => {\r\n            const children = slots.default && getTransitionRawChildren(slots.default(), true);\r\n            if (!children || !children.length) {\r\n                return;\r\n            }\r\n            // warn multiple elements\r\n            if ((process.env.NODE_ENV !== 'production') && children.length > 1) {\r\n                warn('<transition> can only be used on a single element or component. Use ' +\r\n                    '<transition-group> for lists.');\r\n            }\r\n            // there's no need to track reactivity for these props so use the raw\r\n            // props for a bit better perf\r\n            const rawProps = toRaw(props);\r\n            const { mode } = rawProps;\r\n            // check mode\r\n            if ((process.env.NODE_ENV !== 'production') && mode && !['in-out', 'out-in', 'default'].includes(mode)) {\r\n                warn(`invalid <transition> mode: ${mode}`);\r\n            }\r\n            // at this point children has a guaranteed length of 1.\r\n            const child = children[0];\r\n            if (state.isLeaving) {\r\n                return emptyPlaceholder(child);\r\n            }\r\n            // in the case of <transition><keep-alive/></transition>, we need to\r\n            // compare the type of the kept-alive children.\r\n            const innerChild = getKeepAliveChild(child);\r\n            if (!innerChild) {\r\n                return emptyPlaceholder(child);\r\n            }\r\n            const enterHooks = resolveTransitionHooks(innerChild, rawProps, state, instance);\r\n            setTransitionHooks(innerChild, enterHooks);\r\n            const oldChild = instance.subTree;\r\n            const oldInnerChild = oldChild && getKeepAliveChild(oldChild);\r\n            let transitionKeyChanged = false;\r\n            const { getTransitionKey } = innerChild.type;\r\n            if (getTransitionKey) {\r\n                const key = getTransitionKey();\r\n                if (prevTransitionKey === undefined) {\r\n                    prevTransitionKey = key;\r\n                }\r\n                else if (key !== prevTransitionKey) {\r\n                    prevTransitionKey = key;\r\n                    transitionKeyChanged = true;\r\n                }\r\n            }\r\n            // handle mode\r\n            if (oldInnerChild &&\r\n                oldInnerChild.type !== Comment &&\r\n                (!isSameVNodeType(innerChild, oldInnerChild) || transitionKeyChanged)) {\r\n                const leavingHooks = resolveTransitionHooks(oldInnerChild, rawProps, state, instance);\r\n                // update old tree's hooks in case of dynamic transition\r\n                setTransitionHooks(oldInnerChild, leavingHooks);\r\n                // switching between different views\r\n                if (mode === 'out-in') {\r\n                    state.isLeaving = true;\r\n                    // return placeholder node and queue update when leave finishes\r\n                    leavingHooks.afterLeave = () => {\r\n                        state.isLeaving = false;\r\n                        instance.update();\r\n                    };\r\n                    return emptyPlaceholder(child);\r\n                }\r\n                else if (mode === 'in-out' && innerChild.type !== Comment) {\r\n                    leavingHooks.delayLeave = (el, earlyRemove, delayedLeave) => {\r\n                        const leavingVNodesCache = getLeavingNodesForType(state, oldInnerChild);\r\n                        leavingVNodesCache[String(oldInnerChild.key)] = oldInnerChild;\r\n                        // early removal callback\r\n                        el._leaveCb = () => {\r\n                            earlyRemove();\r\n                            el._leaveCb = undefined;\r\n                            delete enterHooks.delayedLeave;\r\n                        };\r\n                        enterHooks.delayedLeave = delayedLeave;\r\n                    };\r\n                }\r\n            }\r\n            return child;\r\n        };\r\n    }\r\n};\r\n// export the public type for h/tsx inference\r\n// also to avoid inline import() in generated d.ts files\r\nconst BaseTransition = BaseTransitionImpl;\r\nfunction getLeavingNodesForType(state, vnode) {\r\n    const { leavingVNodes } = state;\r\n    let leavingVNodesCache = leavingVNodes.get(vnode.type);\r\n    if (!leavingVNodesCache) {\r\n        leavingVNodesCache = Object.create(null);\r\n        leavingVNodes.set(vnode.type, leavingVNodesCache);\r\n    }\r\n    return leavingVNodesCache;\r\n}\r\n// The transition hooks are attached to the vnode as vnode.transition\r\n// and will be called at appropriate timing in the renderer.\r\nfunction resolveTransitionHooks(vnode, props, state, instance) {\r\n    const { appear, mode, persisted = false, onBeforeEnter, onEnter, onAfterEnter, onEnterCancelled, onBeforeLeave, onLeave, onAfterLeave, onLeaveCancelled, onBeforeAppear, onAppear, onAfterAppear, onAppearCancelled } = props;\r\n    const key = String(vnode.key);\r\n    const leavingVNodesCache = getLeavingNodesForType(state, vnode);\r\n    const callHook = (hook, args) => {\r\n        hook &&\r\n            callWithAsyncErrorHandling(hook, instance, 9 /* TRANSITION_HOOK */, args);\r\n    };\r\n    const hooks = {\r\n        mode,\r\n        persisted,\r\n        beforeEnter(el) {\r\n            let hook = onBeforeEnter;\r\n            if (!state.isMounted) {\r\n                if (appear) {\r\n                    hook = onBeforeAppear || onBeforeEnter;\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n            }\r\n            // for same element (v-show)\r\n            if (el._leaveCb) {\r\n                el._leaveCb(true /* cancelled */);\r\n            }\r\n            // for toggled element with same key (v-if)\r\n            const leavingVNode = leavingVNodesCache[key];\r\n            if (leavingVNode &&\r\n                isSameVNodeType(vnode, leavingVNode) &&\r\n                leavingVNode.el._leaveCb) {\r\n                // force early removal (not cancelled)\r\n                leavingVNode.el._leaveCb();\r\n            }\r\n            callHook(hook, [el]);\r\n        },\r\n        enter(el) {\r\n            let hook = onEnter;\r\n            let afterHook = onAfterEnter;\r\n            let cancelHook = onEnterCancelled;\r\n            if (!state.isMounted) {\r\n                if (appear) {\r\n                    hook = onAppear || onEnter;\r\n                    afterHook = onAfterAppear || onAfterEnter;\r\n                    cancelHook = onAppearCancelled || onEnterCancelled;\r\n                }\r\n                else {\r\n                    return;\r\n                }\r\n            }\r\n            let called = false;\r\n            const done = (el._enterCb = (cancelled) => {\r\n                if (called)\r\n                    return;\r\n                called = true;\r\n                if (cancelled) {\r\n                    callHook(cancelHook, [el]);\r\n                }\r\n                else {\r\n                    callHook(afterHook, [el]);\r\n                }\r\n                if (hooks.delayedLeave) {\r\n                    hooks.delayedLeave();\r\n                }\r\n                el._enterCb = undefined;\r\n            });\r\n            if (hook) {\r\n                hook(el, done);\r\n                if (hook.length <= 1) {\r\n                    done();\r\n                }\r\n            }\r\n            else {\r\n                done();\r\n            }\r\n        },\r\n        leave(el, remove) {\r\n            const key = String(vnode.key);\r\n            if (el._enterCb) {\r\n                el._enterCb(true /* cancelled */);\r\n            }\r\n            if (state.isUnmounting) {\r\n                return remove();\r\n            }\r\n            callHook(onBeforeLeave, [el]);\r\n            let called = false;\r\n            const done = (el._leaveCb = (cancelled) => {\r\n                if (called)\r\n                    return;\r\n                called = true;\r\n                remove();\r\n                if (cancelled) {\r\n                    callHook(onLeaveCancelled, [el]);\r\n                }\r\n                else {\r\n                    callHook(onAfterLeave, [el]);\r\n                }\r\n                el._leaveCb = undefined;\r\n                if (leavingVNodesCache[key] === vnode) {\r\n                    delete leavingVNodesCache[key];\r\n                }\r\n            });\r\n            leavingVNodesCache[key] = vnode;\r\n            if (onLeave) {\r\n                onLeave(el, done);\r\n                if (onLeave.length <= 1) {\r\n                    done();\r\n                }\r\n            }\r\n            else {\r\n                done();\r\n            }\r\n        },\r\n        clone(vnode) {\r\n            return resolveTransitionHooks(vnode, props, state, instance);\r\n        }\r\n    };\r\n    return hooks;\r\n}\r\n// the placeholder really only handles one special case: KeepAlive\r\n// in the case of a KeepAlive in a leave phase we need to return a KeepAlive\r\n// placeholder with empty content to avoid the KeepAlive instance from being\r\n// unmounted.\r\nfunction emptyPlaceholder(vnode) {\r\n    if (isKeepAlive(vnode)) {\r\n        vnode = cloneVNode(vnode);\r\n        vnode.children = null;\r\n        return vnode;\r\n    }\r\n}\r\nfunction getKeepAliveChild(vnode) {\r\n    return isKeepAlive(vnode)\r\n        ? vnode.children\r\n            ? vnode.children[0]\r\n            : undefined\r\n        : vnode;\r\n}\r\nfunction setTransitionHooks(vnode, hooks) {\r\n    if (vnode.shapeFlag & 6 /* COMPONENT */ && vnode.component) {\r\n        setTransitionHooks(vnode.component.subTree, hooks);\r\n    }\r\n    else if (vnode.shapeFlag & 128 /* SUSPENSE */) {\r\n        vnode.ssContent.transition = hooks.clone(vnode.ssContent);\r\n        vnode.ssFallback.transition = hooks.clone(vnode.ssFallback);\r\n    }\r\n    else {\r\n        vnode.transition = hooks;\r\n    }\r\n}\r\nfunction getTransitionRawChildren(children, keepComment = false) {\r\n    let ret = [];\r\n    let keyedFragmentCount = 0;\r\n    for (let i = 0; i < children.length; i++) {\r\n        const child = children[i];\r\n        // handle fragment children case, e.g. v-for\r\n        if (child.type === Fragment) {\r\n            if (child.patchFlag & 128 /* KEYED_FRAGMENT */)\r\n                keyedFragmentCount++;\r\n            ret = ret.concat(getTransitionRawChildren(child.children, keepComment));\r\n        }\r\n        // comment placeholders should be skipped, e.g. v-if\r\n        else if (keepComment || child.type !== Comment) {\r\n            ret.push(child);\r\n        }\r\n    }\r\n    // #1126 if a transition children list contains multiple sub fragments, these\r\n    // fragments will be merged into a flat children array. Since each v-for\r\n    // fragment may contain different static bindings inside, we need to de-op\r\n    // these children to force full diffs to ensure correct behavior.\r\n    if (keyedFragmentCount > 1) {\r\n        for (let i = 0; i < ret.length; i++) {\r\n            ret[i].patchFlag = -2 /* BAIL */;\r\n        }\r\n    }\r\n    return ret;\r\n}\n\nconst isKeepAlive = (vnode) => vnode.type.__isKeepAlive;\r\nconst KeepAliveImpl = {\r\n    name: `KeepAlive`,\r\n    // Marker for special handling inside the renderer. We are not using a ===\r\n    // check directly on KeepAlive in the renderer, because importing it directly\r\n    // would prevent it from being tree-shaken.\r\n    __isKeepAlive: true,\r\n    props: {\r\n        include: [String, RegExp, Array],\r\n        exclude: [String, RegExp, Array],\r\n        max: [String, Number]\r\n    },\r\n    setup(props, { slots }) {\r\n        const instance = getCurrentInstance();\r\n        // KeepAlive communicates with the instantiated renderer via the\r\n        // ctx where the renderer passes in its internals,\r\n        // and the KeepAlive instance exposes activate/deactivate implementations.\r\n        // The whole point of this is to avoid importing KeepAlive directly in the\r\n        // renderer to facilitate tree-shaking.\r\n        const sharedContext = instance.ctx;\r\n        // if the internal renderer is not registered, it indicates that this is server-side rendering,\r\n        // for KeepAlive, we just need to render its children\r\n        if (!sharedContext.renderer) {\r\n            return slots.default;\r\n        }\r\n        const cache = new Map();\r\n        const keys = new Set();\r\n        let current = null;\r\n        const parentSuspense = instance.suspense;\r\n        const { renderer: { p: patch, m: move, um: _unmount, o: { createElement } } } = sharedContext;\r\n        const storageContainer = createElement('div');\r\n        sharedContext.activate = (vnode, container, anchor, isSVG, optimized) => {\r\n            const instance = vnode.component;\r\n            move(vnode, container, anchor, 0 /* ENTER */, parentSuspense);\r\n            // in case props have changed\r\n            patch(instance.vnode, vnode, container, anchor, instance, parentSuspense, isSVG, vnode.slotScopeIds, optimized);\r\n            queuePostRenderEffect(() => {\r\n                instance.isDeactivated = false;\r\n                if (instance.a) {\r\n                    invokeArrayFns(instance.a);\r\n                }\r\n                const vnodeHook = vnode.props && vnode.props.onVnodeMounted;\r\n                if (vnodeHook) {\r\n                    invokeVNodeHook(vnodeHook, instance.parent, vnode);\r\n                }\r\n            }, parentSuspense);\r\n        };\r\n        sharedContext.deactivate = (vnode) => {\r\n            const instance = vnode.component;\r\n            move(vnode, storageContainer, null, 1 /* LEAVE */, parentSuspense);\r\n            queuePostRenderEffect(() => {\r\n                if (instance.da) {\r\n                    invokeArrayFns(instance.da);\r\n                }\r\n                const vnodeHook = vnode.props && vnode.props.onVnodeUnmounted;\r\n                if (vnodeHook) {\r\n                    invokeVNodeHook(vnodeHook, instance.parent, vnode);\r\n                }\r\n                instance.isDeactivated = true;\r\n            }, parentSuspense);\r\n        };\r\n        function unmount(vnode) {\r\n            // reset the shapeFlag so it can be properly unmounted\r\n            resetShapeFlag(vnode);\r\n            _unmount(vnode, instance, parentSuspense);\r\n        }\r\n        function pruneCache(filter) {\r\n            cache.forEach((vnode, key) => {\r\n                const name = getComponentName(vnode.type);\r\n                if (name && (!filter || !filter(name))) {\r\n                    pruneCacheEntry(key);\r\n                }\r\n            });\r\n        }\r\n        function pruneCacheEntry(key) {\r\n            const cached = cache.get(key);\r\n            if (!current || cached.type !== current.type) {\r\n                unmount(cached);\r\n            }\r\n            else if (current) {\r\n                // current active instance should no longer be kept-alive.\r\n                // we can't unmount it now but it might be later, so reset its flag now.\r\n                resetShapeFlag(current);\r\n            }\r\n            cache.delete(key);\r\n            keys.delete(key);\r\n        }\r\n        // prune cache on include/exclude prop change\r\n        watch(() => [props.include, props.exclude], ([include, exclude]) => {\r\n            include && pruneCache(name => matches(include, name));\r\n            exclude && pruneCache(name => !matches(exclude, name));\r\n        }, \r\n        // prune post-render after `current` has been updated\r\n        { flush: 'post', deep: true });\r\n        // cache sub tree after render\r\n        let pendingCacheKey = null;\r\n        const cacheSubtree = () => {\r\n            // fix #1621, the pendingCacheKey could be 0\r\n            if (pendingCacheKey != null) {\r\n                cache.set(pendingCacheKey, getInnerChild(instance.subTree));\r\n            }\r\n        };\r\n        onMounted(cacheSubtree);\r\n        onUpdated(cacheSubtree);\r\n        onBeforeUnmount(() => {\r\n            cache.forEach(cached => {\r\n                const { subTree, suspense } = instance;\r\n                const vnode = getInnerChild(subTree);\r\n                if (cached.type === vnode.type) {\r\n                    // current instance will be unmounted as part of keep-alive's unmount\r\n                    resetShapeFlag(vnode);\r\n                    // but invoke its deactivated hook here\r\n                    const da = vnode.component.da;\r\n                    da && queuePostRenderEffect(da, suspense);\r\n                    return;\r\n                }\r\n                unmount(cached);\r\n            });\r\n        });\r\n        return () => {\r\n            pendingCacheKey = null;\r\n            if (!slots.default) {\r\n                return null;\r\n            }\r\n            const children = slots.default();\r\n            const rawVNode = children[0];\r\n            if (children.length > 1) {\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    warn(`KeepAlive should contain exactly one component child.`);\r\n                }\r\n                current = null;\r\n                return children;\r\n            }\r\n            else if (!isVNode(rawVNode) ||\r\n                (!(rawVNode.shapeFlag & 4 /* STATEFUL_COMPONENT */) &&\r\n                    !(rawVNode.shapeFlag & 128 /* SUSPENSE */))) {\r\n                current = null;\r\n                return rawVNode;\r\n            }\r\n            let vnode = getInnerChild(rawVNode);\r\n            const comp = vnode.type;\r\n            const name = getComponentName(comp);\r\n            const { include, exclude, max } = props;\r\n            if ((include && (!name || !matches(include, name))) ||\r\n                (exclude && name && matches(exclude, name))) {\r\n                current = vnode;\r\n                return rawVNode;\r\n            }\r\n            const key = vnode.key == null ? comp : vnode.key;\r\n            const cachedVNode = cache.get(key);\r\n            // clone vnode if it's reused because we are going to mutate it\r\n            if (vnode.el) {\r\n                vnode = cloneVNode(vnode);\r\n                if (rawVNode.shapeFlag & 128 /* SUSPENSE */) {\r\n                    rawVNode.ssContent = vnode;\r\n                }\r\n            }\r\n            // #1513 it's possible for the returned vnode to be cloned due to attr\r\n            // fallthrough or scopeId, so the vnode here may not be the final vnode\r\n            // that is mounted. Instead of caching it directly, we store the pending\r\n            // key and cache `instance.subTree` (the normalized vnode) in\r\n            // beforeMount/beforeUpdate hooks.\r\n            pendingCacheKey = key;\r\n            if (cachedVNode) {\r\n                // copy over mounted state\r\n                vnode.el = cachedVNode.el;\r\n                vnode.component = cachedVNode.component;\r\n                if (vnode.transition) {\r\n                    // recursively update transition hooks on subTree\r\n                    setTransitionHooks(vnode, vnode.transition);\r\n                }\r\n                // avoid vnode being mounted as fresh\r\n                vnode.shapeFlag |= 512 /* COMPONENT_KEPT_ALIVE */;\r\n                // make this key the freshest\r\n                keys.delete(key);\r\n                keys.add(key);\r\n            }\r\n            else {\r\n                keys.add(key);\r\n                // prune oldest entry\r\n                if (max && keys.size > parseInt(max, 10)) {\r\n                    pruneCacheEntry(keys.values().next().value);\r\n                }\r\n            }\r\n            // avoid vnode being unmounted\r\n            vnode.shapeFlag |= 256 /* COMPONENT_SHOULD_KEEP_ALIVE */;\r\n            current = vnode;\r\n            return rawVNode;\r\n        };\r\n    }\r\n};\r\n// export the public type for h/tsx inference\r\n// also to avoid inline import() in generated d.ts files\r\nconst KeepAlive = KeepAliveImpl;\r\nfunction matches(pattern, name) {\r\n    if (isArray(pattern)) {\r\n        return pattern.some((p) => matches(p, name));\r\n    }\r\n    else if (isString(pattern)) {\r\n        return pattern.split(',').indexOf(name) > -1;\r\n    }\r\n    else if (pattern.test) {\r\n        return pattern.test(name);\r\n    }\r\n    /* istanbul ignore next */\r\n    return false;\r\n}\r\nfunction onActivated(hook, target) {\r\n    registerKeepAliveHook(hook, \"a\" /* ACTIVATED */, target);\r\n}\r\nfunction onDeactivated(hook, target) {\r\n    registerKeepAliveHook(hook, \"da\" /* DEACTIVATED */, target);\r\n}\r\nfunction registerKeepAliveHook(hook, type, target = currentInstance) {\r\n    // cache the deactivate branch check wrapper for injected hooks so the same\r\n    // hook can be properly deduped by the scheduler. \"__wdc\" stands for \"with\r\n    // deactivation check\".\r\n    const wrappedHook = hook.__wdc ||\r\n        (hook.__wdc = () => {\r\n            // only fire the hook if the target instance is NOT in a deactivated branch.\r\n            let current = target;\r\n            while (current) {\r\n                if (current.isDeactivated) {\r\n                    return;\r\n                }\r\n                current = current.parent;\r\n            }\r\n            hook();\r\n        });\r\n    injectHook(type, wrappedHook, target);\r\n    // In addition to registering it on the target instance, we walk up the parent\r\n    // chain and register it on all ancestor instances that are keep-alive roots.\r\n    // This avoids the need to walk the entire component tree when invoking these\r\n    // hooks, and more importantly, avoids the need to track child components in\r\n    // arrays.\r\n    if (target) {\r\n        let current = target.parent;\r\n        while (current && current.parent) {\r\n            if (isKeepAlive(current.parent.vnode)) {\r\n                injectToKeepAliveRoot(wrappedHook, type, target, current);\r\n            }\r\n            current = current.parent;\r\n        }\r\n    }\r\n}\r\nfunction injectToKeepAliveRoot(hook, type, target, keepAliveRoot) {\r\n    // injectHook wraps the original for error handling, so make sure to remove\r\n    // the wrapped version.\r\n    const injected = injectHook(type, hook, keepAliveRoot, true /* prepend */);\r\n    onUnmounted(() => {\r\n        remove(keepAliveRoot[type], injected);\r\n    }, target);\r\n}\r\nfunction resetShapeFlag(vnode) {\r\n    let shapeFlag = vnode.shapeFlag;\r\n    if (shapeFlag & 256 /* COMPONENT_SHOULD_KEEP_ALIVE */) {\r\n        shapeFlag -= 256 /* COMPONENT_SHOULD_KEEP_ALIVE */;\r\n    }\r\n    if (shapeFlag & 512 /* COMPONENT_KEPT_ALIVE */) {\r\n        shapeFlag -= 512 /* COMPONENT_KEPT_ALIVE */;\r\n    }\r\n    vnode.shapeFlag = shapeFlag;\r\n}\r\nfunction getInnerChild(vnode) {\r\n    return vnode.shapeFlag & 128 /* SUSPENSE */ ? vnode.ssContent : vnode;\r\n}\n\nconst isInternalKey = (key) => key[0] === '_' || key === '$stable';\r\nconst normalizeSlotValue = (value) => isArray(value)\r\n    ? value.map(normalizeVNode)\r\n    : [normalizeVNode(value)];\r\nconst normalizeSlot = (key, rawSlot, ctx) => withCtx((props) => {\r\n    if ((process.env.NODE_ENV !== 'production') && currentInstance) {\r\n        warn(`Slot \"${key}\" invoked outside of the render function: ` +\r\n            `this will not track dependencies used in the slot. ` +\r\n            `Invoke the slot function inside the render function instead.`);\r\n    }\r\n    return normalizeSlotValue(rawSlot(props));\r\n}, ctx);\r\nconst normalizeObjectSlots = (rawSlots, slots) => {\r\n    const ctx = rawSlots._ctx;\r\n    for (const key in rawSlots) {\r\n        if (isInternalKey(key))\r\n            continue;\r\n        const value = rawSlots[key];\r\n        if (isFunction(value)) {\r\n            slots[key] = normalizeSlot(key, value, ctx);\r\n        }\r\n        else if (value != null) {\r\n            if ((process.env.NODE_ENV !== 'production')) {\r\n                warn(`Non-function value encountered for slot \"${key}\". ` +\r\n                    `Prefer function slots for better performance.`);\r\n            }\r\n            const normalized = normalizeSlotValue(value);\r\n            slots[key] = () => normalized;\r\n        }\r\n    }\r\n};\r\nconst normalizeVNodeSlots = (instance, children) => {\r\n    if ((process.env.NODE_ENV !== 'production') && !isKeepAlive(instance.vnode)) {\r\n        warn(`Non-function value encountered for default slot. ` +\r\n            `Prefer function slots for better performance.`);\r\n    }\r\n    const normalized = normalizeSlotValue(children);\r\n    instance.slots.default = () => normalized;\r\n};\r\nconst initSlots = (instance, children) => {\r\n    if (instance.vnode.shapeFlag & 32 /* SLOTS_CHILDREN */) {\r\n        const type = children._;\r\n        if (type) {\r\n            instance.slots = children;\r\n            // make compiler marker non-enumerable\r\n            def(children, '_', type);\r\n        }\r\n        else {\r\n            normalizeObjectSlots(children, (instance.slots = {}));\r\n        }\r\n    }\r\n    else {\r\n        instance.slots = {};\r\n        if (children) {\r\n            normalizeVNodeSlots(instance, children);\r\n        }\r\n    }\r\n    def(instance.slots, InternalObjectKey, 1);\r\n};\r\nconst updateSlots = (instance, children, optimized) => {\r\n    const { vnode, slots } = instance;\r\n    let needDeletionCheck = true;\r\n    let deletionComparisonTarget = EMPTY_OBJ;\r\n    if (vnode.shapeFlag & 32 /* SLOTS_CHILDREN */) {\r\n        const type = children._;\r\n        if (type) {\r\n            // compiled slots.\r\n            if ((process.env.NODE_ENV !== 'production') && isHmrUpdating) {\r\n                // Parent was HMR updated so slot content may have changed.\r\n                // force update slots and mark instance for hmr as well\r\n                extend(slots, children);\r\n            }\r\n            else if (optimized && type === 1 /* STABLE */) {\r\n                // compiled AND stable.\r\n                // no need to update, and skip stale slots removal.\r\n                needDeletionCheck = false;\r\n            }\r\n            else {\r\n                // compiled but dynamic (v-if/v-for on slots) - update slots, but skip\r\n                // normalization.\r\n                extend(slots, children);\r\n                // #2893\r\n                // when rendering the optimized slots by manually written render function,\r\n                // we need to delete the `slots._` flag if necessary to make subsequent updates reliable,\r\n                // i.e. let the `renderSlot` create the bailed Fragment\r\n                if (!optimized && type === 1 /* STABLE */) {\r\n                    delete slots._;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            needDeletionCheck = !children.$stable;\r\n            normalizeObjectSlots(children, slots);\r\n        }\r\n        deletionComparisonTarget = children;\r\n    }\r\n    else if (children) {\r\n        // non slot object children (direct value) passed to a component\r\n        normalizeVNodeSlots(instance, children);\r\n        deletionComparisonTarget = { default: 1 };\r\n    }\r\n    // delete stale slots\r\n    if (needDeletionCheck) {\r\n        for (const key in slots) {\r\n            if (!isInternalKey(key) && !(key in deletionComparisonTarget)) {\r\n                delete slots[key];\r\n            }\r\n        }\r\n    }\r\n};\n\n/**\r\nRuntime helper for applying directives to a vnode. Example usage:\r\n\nconst comp = resolveComponent('comp')\r\nconst foo = resolveDirective('foo')\r\nconst bar = resolveDirective('bar')\r\n\nreturn withDirectives(h(comp), [\r\n  [foo, this.x],\r\n  [bar, this.y]\r\n])\r\n*/\r\nconst isBuiltInDirective = /*#__PURE__*/ makeMap('bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text');\r\nfunction validateDirectiveName(name) {\r\n    if (isBuiltInDirective(name)) {\r\n        warn('Do not use built-in directive ids as custom directive id: ' + name);\r\n    }\r\n}\r\n/**\r\n * Adds directives to a VNode.\r\n */\r\nfunction withDirectives(vnode, directives) {\r\n    const internalInstance = currentRenderingInstance;\r\n    if (internalInstance === null) {\r\n        (process.env.NODE_ENV !== 'production') && warn(`withDirectives can only be used inside render functions.`);\r\n        return vnode;\r\n    }\r\n    const instance = internalInstance.proxy;\r\n    const bindings = vnode.dirs || (vnode.dirs = []);\r\n    for (let i = 0; i < directives.length; i++) {\r\n        let [dir, value, arg, modifiers = EMPTY_OBJ] = directives[i];\r\n        if (isFunction(dir)) {\r\n            dir = {\r\n                mounted: dir,\r\n                updated: dir\r\n            };\r\n        }\r\n        bindings.push({\r\n            dir,\r\n            instance,\r\n            value,\r\n            oldValue: void 0,\r\n            arg,\r\n            modifiers\r\n        });\r\n    }\r\n    return vnode;\r\n}\r\nfunction invokeDirectiveHook(vnode, prevVNode, instance, name) {\r\n    const bindings = vnode.dirs;\r\n    const oldBindings = prevVNode && prevVNode.dirs;\r\n    for (let i = 0; i < bindings.length; i++) {\r\n        const binding = bindings[i];\r\n        if (oldBindings) {\r\n            binding.oldValue = oldBindings[i].value;\r\n        }\r\n        const hook = binding.dir[name];\r\n        if (hook) {\r\n            callWithAsyncErrorHandling(hook, instance, 8 /* DIRECTIVE_HOOK */, [\r\n                vnode.el,\r\n                binding,\r\n                vnode,\r\n                prevVNode\r\n            ]);\r\n        }\r\n    }\r\n}\n\nfunction createAppContext() {\r\n    return {\r\n        app: null,\r\n        config: {\r\n            isNativeTag: NO,\r\n            performance: false,\r\n            globalProperties: {},\r\n            optionMergeStrategies: {},\r\n            isCustomElement: NO,\r\n            errorHandler: undefined,\r\n            warnHandler: undefined\r\n        },\r\n        mixins: [],\r\n        components: {},\r\n        directives: {},\r\n        provides: Object.create(null)\r\n    };\r\n}\r\nlet uid = 0;\r\nfunction createAppAPI(render, hydrate) {\r\n    return function createApp(rootComponent, rootProps = null) {\r\n        if (rootProps != null && !isObject(rootProps)) {\r\n            (process.env.NODE_ENV !== 'production') && warn(`root props passed to app.mount() must be an object.`);\r\n            rootProps = null;\r\n        }\r\n        const context = createAppContext();\r\n        const installedPlugins = new Set();\r\n        let isMounted = false;\r\n        const app = (context.app = {\r\n            _uid: uid++,\r\n            _component: rootComponent,\r\n            _props: rootProps,\r\n            _container: null,\r\n            _context: context,\r\n            version,\r\n            get config() {\r\n                return context.config;\r\n            },\r\n            set config(v) {\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    warn(`app.config cannot be replaced. Modify individual options instead.`);\r\n                }\r\n            },\r\n            use(plugin, ...options) {\r\n                if (installedPlugins.has(plugin)) {\r\n                    (process.env.NODE_ENV !== 'production') && warn(`Plugin has already been applied to target app.`);\r\n                }\r\n                else if (plugin && isFunction(plugin.install)) {\r\n                    installedPlugins.add(plugin);\r\n                    plugin.install(app, ...options);\r\n                }\r\n                else if (isFunction(plugin)) {\r\n                    installedPlugins.add(plugin);\r\n                    plugin(app, ...options);\r\n                }\r\n                else if ((process.env.NODE_ENV !== 'production')) {\r\n                    warn(`A plugin must either be a function or an object with an \"install\" ` +\r\n                        `function.`);\r\n                }\r\n                return app;\r\n            },\r\n            mixin(mixin) {\r\n                if (__VUE_OPTIONS_API__) {\r\n                    if (!context.mixins.includes(mixin)) {\r\n                        context.mixins.push(mixin);\r\n                        // global mixin with props/emits de-optimizes props/emits\r\n                        // normalization caching.\r\n                        if (mixin.props || mixin.emits) {\r\n                            context.deopt = true;\r\n                        }\r\n                    }\r\n                    else if ((process.env.NODE_ENV !== 'production')) {\r\n                        warn('Mixin has already been applied to target app' +\r\n                            (mixin.name ? `: ${mixin.name}` : ''));\r\n                    }\r\n                }\r\n                else if ((process.env.NODE_ENV !== 'production')) {\r\n                    warn('Mixins are only available in builds supporting Options API');\r\n                }\r\n                return app;\r\n            },\r\n            component(name, component) {\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    validateComponentName(name, context.config);\r\n                }\r\n                if (!component) {\r\n                    return context.components[name];\r\n                }\r\n                if ((process.env.NODE_ENV !== 'production') && context.components[name]) {\r\n                    warn(`Component \"${name}\" has already been registered in target app.`);\r\n                }\r\n                context.components[name] = component;\r\n                return app;\r\n            },\r\n            directive(name, directive) {\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    validateDirectiveName(name);\r\n                }\r\n                if (!directive) {\r\n                    return context.directives[name];\r\n                }\r\n                if ((process.env.NODE_ENV !== 'production') && context.directives[name]) {\r\n                    warn(`Directive \"${name}\" has already been registered in target app.`);\r\n                }\r\n                context.directives[name] = directive;\r\n                return app;\r\n            },\r\n            mount(rootContainer, isHydrate, isSVG) {\r\n                if (!isMounted) {\r\n                    const vnode = createVNode(rootComponent, rootProps);\r\n                    // store app context on the root VNode.\r\n                    // this will be set on the root instance on initial mount.\r\n                    vnode.appContext = context;\r\n                    // HMR root reload\r\n                    if ((process.env.NODE_ENV !== 'production')) {\r\n                        context.reload = () => {\r\n                            render(cloneVNode(vnode), rootContainer, isSVG);\r\n                        };\r\n                    }\r\n                    if (isHydrate && hydrate) {\r\n                        hydrate(vnode, rootContainer);\r\n                    }\r\n                    else {\r\n                        render(vnode, rootContainer, isSVG);\r\n                    }\r\n                    isMounted = true;\r\n                    app._container = rootContainer;\r\n                    rootContainer.__vue_app__ = app;\r\n                    if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\r\n                        devtoolsInitApp(app, version);\r\n                    }\r\n                    return vnode.component.proxy;\r\n                }\r\n                else if ((process.env.NODE_ENV !== 'production')) {\r\n                    warn(`App has already been mounted.\\n` +\r\n                        `If you want to remount the same app, move your app creation logic ` +\r\n                        `into a factory function and create fresh app instances for each ` +\r\n                        `mount - e.g. \\`const createMyApp = () => createApp(App)\\``);\r\n                }\r\n            },\r\n            unmount() {\r\n                if (isMounted) {\r\n                    render(null, app._container);\r\n                    if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\r\n                        devtoolsUnmountApp(app);\r\n                    }\r\n                    delete app._container.__vue_app__;\r\n                }\r\n                else if ((process.env.NODE_ENV !== 'production')) {\r\n                    warn(`Cannot unmount an app that is not mounted.`);\r\n                }\r\n            },\r\n            provide(key, value) {\r\n                if ((process.env.NODE_ENV !== 'production') && key in context.provides) {\r\n                    warn(`App already provides property with key \"${String(key)}\". ` +\r\n                        `It will be overwritten with the new value.`);\r\n                }\r\n                // TypeScript doesn't allow symbols as index type\r\n                // https://github.com/Microsoft/TypeScript/issues/24587\r\n                context.provides[key] = value;\r\n                return app;\r\n            }\r\n        });\r\n        return app;\r\n    };\r\n}\n\nlet hasMismatch = false;\r\nconst isSVGContainer = (container) => /svg/.test(container.namespaceURI) && container.tagName !== 'foreignObject';\r\nconst isComment = (node) => node.nodeType === 8 /* COMMENT */;\r\n// Note: hydration is DOM-specific\r\n// But we have to place it in core due to tight coupling with core - splitting\r\n// it out creates a ton of unnecessary complexity.\r\n// Hydration also depends on some renderer internal logic which needs to be\r\n// passed in via arguments.\r\nfunction createHydrationFunctions(rendererInternals) {\r\n    const { mt: mountComponent, p: patch, o: { patchProp, nextSibling, parentNode, remove, insert, createComment } } = rendererInternals;\r\n    const hydrate = (vnode, container) => {\r\n        if ((process.env.NODE_ENV !== 'production') && !container.hasChildNodes()) {\r\n            warn(`Attempting to hydrate existing markup but container is empty. ` +\r\n                `Performing full mount instead.`);\r\n            patch(null, vnode, container);\r\n            return;\r\n        }\r\n        hasMismatch = false;\r\n        hydrateNode(container.firstChild, vnode, null, null, null);\r\n        flushPostFlushCbs();\r\n        if (hasMismatch && !false) {\r\n            // this error should show up in production\r\n            console.error(`Hydration completed but contains mismatches.`);\r\n        }\r\n    };\r\n    const hydrateNode = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized = false) => {\r\n        const isFragmentStart = isComment(node) && node.data === '[';\r\n        const onMismatch = () => handleMismatch(node, vnode, parentComponent, parentSuspense, slotScopeIds, isFragmentStart);\r\n        const { type, ref, shapeFlag } = vnode;\r\n        const domType = node.nodeType;\r\n        vnode.el = node;\r\n        let nextNode = null;\r\n        switch (type) {\r\n            case Text:\r\n                if (domType !== 3 /* TEXT */) {\r\n                    nextNode = onMismatch();\r\n                }\r\n                else {\r\n                    if (node.data !== vnode.children) {\r\n                        hasMismatch = true;\r\n                        (process.env.NODE_ENV !== 'production') &&\r\n                            warn(`Hydration text mismatch:` +\r\n                                `\\n- Client: ${JSON.stringify(node.data)}` +\r\n                                `\\n- Server: ${JSON.stringify(vnode.children)}`);\r\n                        node.data = vnode.children;\r\n                    }\r\n                    nextNode = nextSibling(node);\r\n                }\r\n                break;\r\n            case Comment:\r\n                if (domType !== 8 /* COMMENT */ || isFragmentStart) {\r\n                    nextNode = onMismatch();\r\n                }\r\n                else {\r\n                    nextNode = nextSibling(node);\r\n                }\r\n                break;\r\n            case Static:\r\n                if (domType !== 1 /* ELEMENT */) {\r\n                    nextNode = onMismatch();\r\n                }\r\n                else {\r\n                    // determine anchor, adopt content\r\n                    nextNode = node;\r\n                    // if the static vnode has its content stripped during build,\r\n                    // adopt it from the server-rendered HTML.\r\n                    const needToAdoptContent = !vnode.children.length;\r\n                    for (let i = 0; i < vnode.staticCount; i++) {\r\n                        if (needToAdoptContent)\r\n                            vnode.children += nextNode.outerHTML;\r\n                        if (i === vnode.staticCount - 1) {\r\n                            vnode.anchor = nextNode;\r\n                        }\r\n                        nextNode = nextSibling(nextNode);\r\n                    }\r\n                    return nextNode;\r\n                }\r\n                break;\r\n            case Fragment:\r\n                if (!isFragmentStart) {\r\n                    nextNode = onMismatch();\r\n                }\r\n                else {\r\n                    nextNode = hydrateFragment(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized);\r\n                }\r\n                break;\r\n            default:\r\n                if (shapeFlag & 1 /* ELEMENT */) {\r\n                    if (domType !== 1 /* ELEMENT */ ||\r\n                        vnode.type.toLowerCase() !==\r\n                            node.tagName.toLowerCase()) {\r\n                        nextNode = onMismatch();\r\n                    }\r\n                    else {\r\n                        nextNode = hydrateElement(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized);\r\n                    }\r\n                }\r\n                else if (shapeFlag & 6 /* COMPONENT */) {\r\n                    // when setting up the render effect, if the initial vnode already\r\n                    // has .el set, the component will perform hydration instead of mount\r\n                    // on its sub-tree.\r\n                    vnode.slotScopeIds = slotScopeIds;\r\n                    const container = parentNode(node);\r\n                    const hydrateComponent = () => {\r\n                        mountComponent(vnode, container, null, parentComponent, parentSuspense, isSVGContainer(container), optimized);\r\n                    };\r\n                    // async component\r\n                    const loadAsync = vnode.type.__asyncLoader;\r\n                    if (loadAsync) {\r\n                        loadAsync().then(hydrateComponent);\r\n                    }\r\n                    else {\r\n                        hydrateComponent();\r\n                    }\r\n                    // component may be async, so in the case of fragments we cannot rely\r\n                    // on component's rendered output to determine the end of the fragment\r\n                    // instead, we do a lookahead to find the end anchor node.\r\n                    nextNode = isFragmentStart\r\n                        ? locateClosingAsyncAnchor(node)\r\n                        : nextSibling(node);\r\n                }\r\n                else if (shapeFlag & 64 /* TELEPORT */) {\r\n                    if (domType !== 8 /* COMMENT */) {\r\n                        nextNode = onMismatch();\r\n                    }\r\n                    else {\r\n                        nextNode = vnode.type.hydrate(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized, rendererInternals, hydrateChildren);\r\n                    }\r\n                }\r\n                else if (shapeFlag & 128 /* SUSPENSE */) {\r\n                    nextNode = vnode.type.hydrate(node, vnode, parentComponent, parentSuspense, isSVGContainer(parentNode(node)), slotScopeIds, optimized, rendererInternals, hydrateNode);\r\n                }\r\n                else if ((process.env.NODE_ENV !== 'production')) {\r\n                    warn('Invalid HostVNode type:', type, `(${typeof type})`);\r\n                }\r\n        }\r\n        if (ref != null) {\r\n            setRef(ref, null, parentSuspense, vnode);\r\n        }\r\n        return nextNode;\r\n    };\r\n    const hydrateElement = (el, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {\r\n        optimized = optimized || !!vnode.dynamicChildren;\r\n        const { props, patchFlag, shapeFlag, dirs } = vnode;\r\n        // skip props & children if this is hoisted static nodes\r\n        if (patchFlag !== -1 /* HOISTED */) {\r\n            if (dirs) {\r\n                invokeDirectiveHook(vnode, null, parentComponent, 'created');\r\n            }\r\n            // props\r\n            if (props) {\r\n                if (!optimized ||\r\n                    (patchFlag & 16 /* FULL_PROPS */ ||\r\n                        patchFlag & 32 /* HYDRATE_EVENTS */)) {\r\n                    for (const key in props) {\r\n                        if (!isReservedProp(key) && isOn(key)) {\r\n                            patchProp(el, key, null, props[key]);\r\n                        }\r\n                    }\r\n                }\r\n                else if (props.onClick) {\r\n                    // Fast path for click listeners (which is most often) to avoid\r\n                    // iterating through props.\r\n                    patchProp(el, 'onClick', null, props.onClick);\r\n                }\r\n            }\r\n            // vnode / directive hooks\r\n            let vnodeHooks;\r\n            if ((vnodeHooks = props && props.onVnodeBeforeMount)) {\r\n                invokeVNodeHook(vnodeHooks, parentComponent, vnode);\r\n            }\r\n            if (dirs) {\r\n                invokeDirectiveHook(vnode, null, parentComponent, 'beforeMount');\r\n            }\r\n            if ((vnodeHooks = props && props.onVnodeMounted) || dirs) {\r\n                queueEffectWithSuspense(() => {\r\n                    vnodeHooks && invokeVNodeHook(vnodeHooks, parentComponent, vnode);\r\n                    dirs && invokeDirectiveHook(vnode, null, parentComponent, 'mounted');\r\n                }, parentSuspense);\r\n            }\r\n            // children\r\n            if (shapeFlag & 16 /* ARRAY_CHILDREN */ &&\r\n                // skip if element has innerHTML / textContent\r\n                !(props && (props.innerHTML || props.textContent))) {\r\n                let next = hydrateChildren(el.firstChild, vnode, el, parentComponent, parentSuspense, slotScopeIds, optimized);\r\n                let hasWarned = false;\r\n                while (next) {\r\n                    hasMismatch = true;\r\n                    if ((process.env.NODE_ENV !== 'production') && !hasWarned) {\r\n                        warn(`Hydration children mismatch in <${vnode.type}>: ` +\r\n                            `server rendered element contains more child nodes than client vdom.`);\r\n                        hasWarned = true;\r\n                    }\r\n                    // The SSRed DOM contains more nodes than it should. Remove them.\r\n                    const cur = next;\r\n                    next = next.nextSibling;\r\n                    remove(cur);\r\n                }\r\n            }\r\n            else if (shapeFlag & 8 /* TEXT_CHILDREN */) {\r\n                if (el.textContent !== vnode.children) {\r\n                    hasMismatch = true;\r\n                    (process.env.NODE_ENV !== 'production') &&\r\n                        warn(`Hydration text content mismatch in <${vnode.type}>:\\n` +\r\n                            `- Client: ${el.textContent}\\n` +\r\n                            `- Server: ${vnode.children}`);\r\n                    el.textContent = vnode.children;\r\n                }\r\n            }\r\n        }\r\n        return el.nextSibling;\r\n    };\r\n    const hydrateChildren = (node, parentVNode, container, parentComponent, parentSuspense, slotScopeIds, optimized) => {\r\n        optimized = optimized || !!parentVNode.dynamicChildren;\r\n        const children = parentVNode.children;\r\n        const l = children.length;\r\n        let hasWarned = false;\r\n        for (let i = 0; i < l; i++) {\r\n            const vnode = optimized\r\n                ? children[i]\r\n                : (children[i] = normalizeVNode(children[i]));\r\n            if (node) {\r\n                node = hydrateNode(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized);\r\n            }\r\n            else if (vnode.type === Text && !vnode.children) {\r\n                continue;\r\n            }\r\n            else {\r\n                hasMismatch = true;\r\n                if ((process.env.NODE_ENV !== 'production') && !hasWarned) {\r\n                    warn(`Hydration children mismatch in <${container.tagName.toLowerCase()}>: ` +\r\n                        `server rendered element contains fewer child nodes than client vdom.`);\r\n                    hasWarned = true;\r\n                }\r\n                // the SSRed DOM didn't contain enough nodes. Mount the missing ones.\r\n                patch(null, vnode, container, null, parentComponent, parentSuspense, isSVGContainer(container), slotScopeIds);\r\n            }\r\n        }\r\n        return node;\r\n    };\r\n    const hydrateFragment = (node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized) => {\r\n        const { slotScopeIds: fragmentSlotScopeIds } = vnode;\r\n        if (fragmentSlotScopeIds) {\r\n            slotScopeIds = slotScopeIds\r\n                ? slotScopeIds.concat(fragmentSlotScopeIds)\r\n                : fragmentSlotScopeIds;\r\n        }\r\n        const container = parentNode(node);\r\n        const next = hydrateChildren(nextSibling(node), vnode, container, parentComponent, parentSuspense, slotScopeIds, optimized);\r\n        if (next && isComment(next) && next.data === ']') {\r\n            return nextSibling((vnode.anchor = next));\r\n        }\r\n        else {\r\n            // fragment didn't hydrate successfully, since we didn't get a end anchor\r\n            // back. This should have led to node/children mismatch warnings.\r\n            hasMismatch = true;\r\n            // since the anchor is missing, we need to create one and insert it\r\n            insert((vnode.anchor = createComment(`]`)), container, next);\r\n            return next;\r\n        }\r\n    };\r\n    const handleMismatch = (node, vnode, parentComponent, parentSuspense, slotScopeIds, isFragment) => {\r\n        hasMismatch = true;\r\n        (process.env.NODE_ENV !== 'production') &&\r\n            warn(`Hydration node mismatch:\\n- Client vnode:`, vnode.type, `\\n- Server rendered DOM:`, node, node.nodeType === 3 /* TEXT */\r\n                ? `(text)`\r\n                : isComment(node) && node.data === '['\r\n                    ? `(start of fragment)`\r\n                    : ``);\r\n        vnode.el = null;\r\n        if (isFragment) {\r\n            // remove excessive fragment nodes\r\n            const end = locateClosingAsyncAnchor(node);\r\n            while (true) {\r\n                const next = nextSibling(node);\r\n                if (next && next !== end) {\r\n                    remove(next);\r\n                }\r\n                else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        const next = nextSibling(node);\r\n        const container = parentNode(node);\r\n        remove(node);\r\n        patch(null, vnode, container, next, parentComponent, parentSuspense, isSVGContainer(container), slotScopeIds);\r\n        return next;\r\n    };\r\n    const locateClosingAsyncAnchor = (node) => {\r\n        let match = 0;\r\n        while (node) {\r\n            node = nextSibling(node);\r\n            if (node && isComment(node)) {\r\n                if (node.data === '[')\r\n                    match++;\r\n                if (node.data === ']') {\r\n                    if (match === 0) {\r\n                        return nextSibling(node);\r\n                    }\r\n                    else {\r\n                        match--;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return node;\r\n    };\r\n    return [hydrate, hydrateNode];\r\n}\n\nlet supported;\r\nlet perf;\r\nfunction startMeasure(instance, type) {\r\n    if (instance.appContext.config.performance && isSupported()) {\r\n        perf.mark(`vue-${type}-${instance.uid}`);\r\n    }\r\n}\r\nfunction endMeasure(instance, type) {\r\n    if (instance.appContext.config.performance && isSupported()) {\r\n        const startTag = `vue-${type}-${instance.uid}`;\r\n        const endTag = startTag + `:end`;\r\n        perf.mark(endTag);\r\n        perf.measure(`<${formatComponentName(instance, instance.type)}> ${type}`, startTag, endTag);\r\n        perf.clearMarks(startTag);\r\n        perf.clearMarks(endTag);\r\n    }\r\n}\r\nfunction isSupported() {\r\n    if (supported !== undefined) {\r\n        return supported;\r\n    }\r\n    /* eslint-disable no-restricted-globals */\r\n    if (typeof window !== 'undefined' && window.performance) {\r\n        supported = true;\r\n        perf = window.performance;\r\n    }\r\n    else {\r\n        supported = false;\r\n    }\r\n    /* eslint-enable no-restricted-globals */\r\n    return supported;\r\n}\n\n/**\r\n * This is only called in esm-bundler builds.\r\n * It is called when a renderer is created, in `baseCreateRenderer` so that\r\n * importing runtime-core is side-effects free.\r\n *\r\n * istanbul-ignore-next\r\n */\r\nfunction initFeatureFlags() {\r\n    let needWarn = false;\r\n    if (typeof __VUE_OPTIONS_API__ !== 'boolean') {\r\n        needWarn = true;\r\n        getGlobalThis().__VUE_OPTIONS_API__ = true;\r\n    }\r\n    if (typeof __VUE_PROD_DEVTOOLS__ !== 'boolean') {\r\n        needWarn = true;\r\n        getGlobalThis().__VUE_PROD_DEVTOOLS__ = false;\r\n    }\r\n    if ((process.env.NODE_ENV !== 'production') && needWarn) {\r\n        console.warn(`You are running the esm-bundler build of Vue. It is recommended to ` +\r\n            `configure your bundler to explicitly replace feature flag globals ` +\r\n            `with boolean literals to get proper tree-shaking in the final bundle. ` +\r\n            `See http://link.vuejs.org/feature-flags for more details.`);\r\n    }\r\n}\n\n// implementation, close to no-op\r\nfunction defineComponent(options) {\r\n    return isFunction(options) ? { setup: options, name: options.name } : options;\r\n}\n\nconst isAsyncWrapper = (i) => !!i.type.__asyncLoader;\r\nfunction defineAsyncComponent(source) {\r\n    if (isFunction(source)) {\r\n        source = { loader: source };\r\n    }\r\n    const { loader, loadingComponent, errorComponent, delay = 200, timeout, // undefined = never times out\r\n    suspensible = true, onError: userOnError } = source;\r\n    let pendingRequest = null;\r\n    let resolvedComp;\r\n    let retries = 0;\r\n    const retry = () => {\r\n        retries++;\r\n        pendingRequest = null;\r\n        return load();\r\n    };\r\n    const load = () => {\r\n        let thisRequest;\r\n        return (pendingRequest ||\r\n            (thisRequest = pendingRequest = loader()\r\n                .catch(err => {\r\n                err = err instanceof Error ? err : new Error(String(err));\r\n                if (userOnError) {\r\n                    return new Promise((resolve, reject) => {\r\n                        const userRetry = () => resolve(retry());\r\n                        const userFail = () => reject(err);\r\n                        userOnError(err, userRetry, userFail, retries + 1);\r\n                    });\r\n                }\r\n                else {\r\n                    throw err;\r\n                }\r\n            })\r\n                .then((comp) => {\r\n                if (thisRequest !== pendingRequest && pendingRequest) {\r\n                    return pendingRequest;\r\n                }\r\n                if ((process.env.NODE_ENV !== 'production') && !comp) {\r\n                    warn(`Async component loader resolved to undefined. ` +\r\n                        `If you are using retry(), make sure to return its return value.`);\r\n                }\r\n                // interop module default\r\n                if (comp &&\r\n                    (comp.__esModule || comp[Symbol.toStringTag] === 'Module')) {\r\n                    comp = comp.default;\r\n                }\r\n                if ((process.env.NODE_ENV !== 'production') && comp && !isObject(comp) && !isFunction(comp)) {\r\n                    throw new Error(`Invalid async component load result: ${comp}`);\r\n                }\r\n                resolvedComp = comp;\r\n                return comp;\r\n            })));\r\n    };\r\n    return defineComponent({\r\n        __asyncLoader: load,\r\n        name: 'AsyncComponentWrapper',\r\n        setup() {\r\n            const instance = currentInstance;\r\n            // already resolved\r\n            if (resolvedComp) {\r\n                return () => createInnerComp(resolvedComp, instance);\r\n            }\r\n            const onError = (err) => {\r\n                pendingRequest = null;\r\n                handleError(err, instance, 13 /* ASYNC_COMPONENT_LOADER */, !errorComponent /* do not throw in dev if user provided error component */);\r\n            };\r\n            // suspense-controlled or SSR.\r\n            if ((suspensible && instance.suspense) ||\r\n                (false )) {\r\n                return load()\r\n                    .then(comp => {\r\n                    return () => createInnerComp(comp, instance);\r\n                })\r\n                    .catch(err => {\r\n                    onError(err);\r\n                    return () => errorComponent\r\n                        ? createVNode(errorComponent, {\r\n                            error: err\r\n                        })\r\n                        : null;\r\n                });\r\n            }\r\n            const loaded = ref(false);\r\n            const error = ref();\r\n            const delayed = ref(!!delay);\r\n            if (delay) {\r\n                setTimeout(() => {\r\n                    delayed.value = false;\r\n                }, delay);\r\n            }\r\n            if (timeout != null) {\r\n                setTimeout(() => {\r\n                    if (!loaded.value && !error.value) {\r\n                        const err = new Error(`Async component timed out after ${timeout}ms.`);\r\n                        onError(err);\r\n                        error.value = err;\r\n                    }\r\n                }, timeout);\r\n            }\r\n            load()\r\n                .then(() => {\r\n                loaded.value = true;\r\n            })\r\n                .catch(err => {\r\n                onError(err);\r\n                error.value = err;\r\n            });\r\n            return () => {\r\n                if (loaded.value && resolvedComp) {\r\n                    return createInnerComp(resolvedComp, instance);\r\n                }\r\n                else if (error.value && errorComponent) {\r\n                    return createVNode(errorComponent, {\r\n                        error: error.value\r\n                    });\r\n                }\r\n                else if (loadingComponent && !delayed.value) {\r\n                    return createVNode(loadingComponent);\r\n                }\r\n            };\r\n        }\r\n    });\r\n}\r\nfunction createInnerComp(comp, { vnode: { ref, props, children } }) {\r\n    const vnode = createVNode(comp, props, children);\r\n    // ensure inner component inherits the async wrapper's ref owner\r\n    vnode.ref = ref;\r\n    return vnode;\r\n}\n\nconst prodEffectOptions = {\r\n    scheduler: queueJob,\r\n    // #1801, #2043 component render effects should allow recursive updates\r\n    allowRecurse: true\r\n};\r\nfunction createDevEffectOptions(instance) {\r\n    return {\r\n        scheduler: queueJob,\r\n        allowRecurse: true,\r\n        onTrack: instance.rtc ? e => invokeArrayFns(instance.rtc, e) : void 0,\r\n        onTrigger: instance.rtg ? e => invokeArrayFns(instance.rtg, e) : void 0\r\n    };\r\n}\r\nconst queuePostRenderEffect = queueEffectWithSuspense\r\n    ;\r\nconst setRef = (rawRef, oldRawRef, parentSuspense, vnode) => {\r\n    if (isArray(rawRef)) {\r\n        rawRef.forEach((r, i) => setRef(r, oldRawRef && (isArray(oldRawRef) ? oldRawRef[i] : oldRawRef), parentSuspense, vnode));\r\n        return;\r\n    }\r\n    let value;\r\n    if (!vnode) {\r\n        // means unmount\r\n        value = null;\r\n    }\r\n    else if (isAsyncWrapper(vnode)) {\r\n        // when mounting async components, nothing needs to be done,\r\n        // because the template ref is forwarded to inner component\r\n        return;\r\n    }\r\n    else if (vnode.shapeFlag & 4 /* STATEFUL_COMPONENT */) {\r\n        value = vnode.component.exposed || vnode.component.proxy;\r\n    }\r\n    else {\r\n        value = vnode.el;\r\n    }\r\n    const { i: owner, r: ref } = rawRef;\r\n    if ((process.env.NODE_ENV !== 'production') && !owner) {\r\n        warn(`Missing ref owner context. ref cannot be used on hoisted vnodes. ` +\r\n            `A vnode with ref must be created inside the render function.`);\r\n        return;\r\n    }\r\n    const oldRef = oldRawRef && oldRawRef.r;\r\n    const refs = owner.refs === EMPTY_OBJ ? (owner.refs = {}) : owner.refs;\r\n    const setupState = owner.setupState;\r\n    // unset old ref\r\n    if (oldRef != null && oldRef !== ref) {\r\n        if (isString(oldRef)) {\r\n            refs[oldRef] = null;\r\n            if (hasOwn(setupState, oldRef)) {\r\n                setupState[oldRef] = null;\r\n            }\r\n        }\r\n        else if (isRef(oldRef)) {\r\n            oldRef.value = null;\r\n        }\r\n    }\r\n    if (isString(ref)) {\r\n        const doSet = () => {\r\n            refs[ref] = value;\r\n            if (hasOwn(setupState, ref)) {\r\n                setupState[ref] = value;\r\n            }\r\n        };\r\n        // #1789: for non-null values, set them after render\r\n        // null values means this is unmount and it should not overwrite another\r\n        // ref with the same key\r\n        if (value) {\r\n            doSet.id = -1;\r\n            queuePostRenderEffect(doSet, parentSuspense);\r\n        }\r\n        else {\r\n            doSet();\r\n        }\r\n    }\r\n    else if (isRef(ref)) {\r\n        const doSet = () => {\r\n            ref.value = value;\r\n        };\r\n        if (value) {\r\n            doSet.id = -1;\r\n            queuePostRenderEffect(doSet, parentSuspense);\r\n        }\r\n        else {\r\n            doSet();\r\n        }\r\n    }\r\n    else if (isFunction(ref)) {\r\n        callWithErrorHandling(ref, owner, 12 /* FUNCTION_REF */, [value, refs]);\r\n    }\r\n    else if ((process.env.NODE_ENV !== 'production')) {\r\n        warn('Invalid template ref type:', value, `(${typeof value})`);\r\n    }\r\n};\r\n/**\r\n * The createRenderer function accepts two generic arguments:\r\n * HostNode and HostElement, corresponding to Node and Element types in the\r\n * host environment. For example, for runtime-dom, HostNode would be the DOM\r\n * `Node` interface and HostElement would be the DOM `Element` interface.\r\n *\r\n * Custom renderers can pass in the platform specific types like this:\r\n *\r\n * ``` js\r\n * const { render, createApp } = createRenderer<Node, Element>({\r\n *   patchProp,\r\n *   ...nodeOps\r\n * })\r\n * ```\r\n */\r\nfunction createRenderer(options) {\r\n    return baseCreateRenderer(options);\r\n}\r\n// Separate API for creating hydration-enabled renderer.\r\n// Hydration logic is only used when calling this function, making it\r\n// tree-shakable.\r\nfunction createHydrationRenderer(options) {\r\n    return baseCreateRenderer(options, createHydrationFunctions);\r\n}\r\n// implementation\r\nfunction baseCreateRenderer(options, createHydrationFns) {\r\n    // compile-time feature flags check\r\n    {\r\n        initFeatureFlags();\r\n    }\r\n    if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\r\n        const target = getGlobalThis();\r\n        target.__VUE__ = true;\r\n        setDevtoolsHook(target.__VUE_DEVTOOLS_GLOBAL_HOOK__);\r\n    }\r\n    const { insert: hostInsert, remove: hostRemove, patchProp: hostPatchProp, forcePatchProp: hostForcePatchProp, createElement: hostCreateElement, createText: hostCreateText, createComment: hostCreateComment, setText: hostSetText, setElementText: hostSetElementText, parentNode: hostParentNode, nextSibling: hostNextSibling, setScopeId: hostSetScopeId = NOOP, cloneNode: hostCloneNode, insertStaticContent: hostInsertStaticContent } = options;\r\n    // Note: functions inside this closure should use `const xxx = () => {}`\r\n    // style in order to prevent being inlined by minifiers.\r\n    const patch = (n1, n2, container, anchor = null, parentComponent = null, parentSuspense = null, isSVG = false, slotScopeIds = null, optimized = false) => {\r\n        // patching & not same type, unmount old tree\r\n        if (n1 && !isSameVNodeType(n1, n2)) {\r\n            anchor = getNextHostNode(n1);\r\n            unmount(n1, parentComponent, parentSuspense, true);\r\n            n1 = null;\r\n        }\r\n        if (n2.patchFlag === -2 /* BAIL */) {\r\n            optimized = false;\r\n            n2.dynamicChildren = null;\r\n        }\r\n        const { type, ref, shapeFlag } = n2;\r\n        switch (type) {\r\n            case Text:\r\n                processText(n1, n2, container, anchor);\r\n                break;\r\n            case Comment:\r\n                processCommentNode(n1, n2, container, anchor);\r\n                break;\r\n            case Static:\r\n                if (n1 == null) {\r\n                    mountStaticNode(n2, container, anchor, isSVG);\r\n                }\r\n                else if ((process.env.NODE_ENV !== 'production')) {\r\n                    patchStaticNode(n1, n2, container, isSVG);\r\n                }\r\n                break;\r\n            case Fragment:\r\n                processFragment(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n                break;\r\n            default:\r\n                if (shapeFlag & 1 /* ELEMENT */) {\r\n                    processElement(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n                }\r\n                else if (shapeFlag & 6 /* COMPONENT */) {\r\n                    processComponent(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n                }\r\n                else if (shapeFlag & 64 /* TELEPORT */) {\r\n                    type.process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals);\r\n                }\r\n                else if (shapeFlag & 128 /* SUSPENSE */) {\r\n                    type.process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals);\r\n                }\r\n                else if ((process.env.NODE_ENV !== 'production')) {\r\n                    warn('Invalid VNode type:', type, `(${typeof type})`);\r\n                }\r\n        }\r\n        // set ref\r\n        if (ref != null && parentComponent) {\r\n            setRef(ref, n1 && n1.ref, parentSuspense, n2);\r\n        }\r\n    };\r\n    const processText = (n1, n2, container, anchor) => {\r\n        if (n1 == null) {\r\n            hostInsert((n2.el = hostCreateText(n2.children)), container, anchor);\r\n        }\r\n        else {\r\n            const el = (n2.el = n1.el);\r\n            if (n2.children !== n1.children) {\r\n                hostSetText(el, n2.children);\r\n            }\r\n        }\r\n    };\r\n    const processCommentNode = (n1, n2, container, anchor) => {\r\n        if (n1 == null) {\r\n            hostInsert((n2.el = hostCreateComment(n2.children || '')), container, anchor);\r\n        }\r\n        else {\r\n            // there's no support for dynamic comments\r\n            n2.el = n1.el;\r\n        }\r\n    };\r\n    const mountStaticNode = (n2, container, anchor, isSVG) => {\r\n        [n2.el, n2.anchor] = hostInsertStaticContent(n2.children, container, anchor, isSVG);\r\n    };\r\n    /**\r\n     * Dev / HMR only\r\n     */\r\n    const patchStaticNode = (n1, n2, container, isSVG) => {\r\n        // static nodes are only patched during dev for HMR\r\n        if (n2.children !== n1.children) {\r\n            const anchor = hostNextSibling(n1.anchor);\r\n            // remove existing\r\n            removeStaticNode(n1);\r\n            [n2.el, n2.anchor] = hostInsertStaticContent(n2.children, container, anchor, isSVG);\r\n        }\r\n        else {\r\n            n2.el = n1.el;\r\n            n2.anchor = n1.anchor;\r\n        }\r\n    };\r\n    const moveStaticNode = ({ el, anchor }, container, nextSibling) => {\r\n        let next;\r\n        while (el && el !== anchor) {\r\n            next = hostNextSibling(el);\r\n            hostInsert(el, container, nextSibling);\r\n            el = next;\r\n        }\r\n        hostInsert(anchor, container, nextSibling);\r\n    };\r\n    const removeStaticNode = ({ el, anchor }) => {\r\n        let next;\r\n        while (el && el !== anchor) {\r\n            next = hostNextSibling(el);\r\n            hostRemove(el);\r\n            el = next;\r\n        }\r\n        hostRemove(anchor);\r\n    };\r\n    const processElement = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {\r\n        isSVG = isSVG || n2.type === 'svg';\r\n        if (n1 == null) {\r\n            mountElement(n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n        }\r\n        else {\r\n            patchElement(n1, n2, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n        }\r\n    };\r\n    const mountElement = (vnode, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {\r\n        let el;\r\n        let vnodeHook;\r\n        const { type, props, shapeFlag, transition, patchFlag, dirs } = vnode;\r\n        if (!(process.env.NODE_ENV !== 'production') &&\r\n            vnode.el &&\r\n            hostCloneNode !== undefined &&\r\n            patchFlag === -1 /* HOISTED */) {\r\n            // If a vnode has non-null el, it means it's being reused.\r\n            // Only static vnodes can be reused, so its mounted DOM nodes should be\r\n            // exactly the same, and we can simply do a clone here.\r\n            // only do this in production since cloned trees cannot be HMR updated.\r\n            el = vnode.el = hostCloneNode(vnode.el);\r\n        }\r\n        else {\r\n            el = vnode.el = hostCreateElement(vnode.type, isSVG, props && props.is, props);\r\n            // mount children first, since some props may rely on child content\r\n            // being already rendered, e.g. `<select value>`\r\n            if (shapeFlag & 8 /* TEXT_CHILDREN */) {\r\n                hostSetElementText(el, vnode.children);\r\n            }\r\n            else if (shapeFlag & 16 /* ARRAY_CHILDREN */) {\r\n                mountChildren(vnode.children, el, null, parentComponent, parentSuspense, isSVG && type !== 'foreignObject', slotScopeIds, optimized || !!vnode.dynamicChildren);\r\n            }\r\n            if (dirs) {\r\n                invokeDirectiveHook(vnode, null, parentComponent, 'created');\r\n            }\r\n            // props\r\n            if (props) {\r\n                for (const key in props) {\r\n                    if (!isReservedProp(key)) {\r\n                        hostPatchProp(el, key, null, props[key], isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);\r\n                    }\r\n                }\r\n                if ((vnodeHook = props.onVnodeBeforeMount)) {\r\n                    invokeVNodeHook(vnodeHook, parentComponent, vnode);\r\n                }\r\n            }\r\n            // scopeId\r\n            setScopeId(el, vnode, vnode.scopeId, slotScopeIds, parentComponent);\r\n        }\r\n        if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\r\n            Object.defineProperty(el, '__vnode', {\r\n                value: vnode,\r\n                enumerable: false\r\n            });\r\n            Object.defineProperty(el, '__vueParentComponent', {\r\n                value: parentComponent,\r\n                enumerable: false\r\n            });\r\n        }\r\n        if (dirs) {\r\n            invokeDirectiveHook(vnode, null, parentComponent, 'beforeMount');\r\n        }\r\n        // #1583 For inside suspense + suspense not resolved case, enter hook should call when suspense resolved\r\n        // #1689 For inside suspense + suspense resolved case, just call it\r\n        const needCallTransitionHooks = (!parentSuspense || (parentSuspense && !parentSuspense.pendingBranch)) &&\r\n            transition &&\r\n            !transition.persisted;\r\n        if (needCallTransitionHooks) {\r\n            transition.beforeEnter(el);\r\n        }\r\n        hostInsert(el, container, anchor);\r\n        if ((vnodeHook = props && props.onVnodeMounted) ||\r\n            needCallTransitionHooks ||\r\n            dirs) {\r\n            queuePostRenderEffect(() => {\r\n                vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);\r\n                needCallTransitionHooks && transition.enter(el);\r\n                dirs && invokeDirectiveHook(vnode, null, parentComponent, 'mounted');\r\n            }, parentSuspense);\r\n        }\r\n    };\r\n    const setScopeId = (el, vnode, scopeId, slotScopeIds, parentComponent) => {\r\n        if (scopeId) {\r\n            hostSetScopeId(el, scopeId);\r\n        }\r\n        if (slotScopeIds) {\r\n            for (let i = 0; i < slotScopeIds.length; i++) {\r\n                hostSetScopeId(el, slotScopeIds[i]);\r\n            }\r\n        }\r\n        if (parentComponent) {\r\n            let subTree = parentComponent.subTree;\r\n            if ((process.env.NODE_ENV !== 'production') &&\r\n                subTree.patchFlag > 0 &&\r\n                subTree.patchFlag & 2048 /* DEV_ROOT_FRAGMENT */) {\r\n                subTree =\r\n                    filterSingleRoot(subTree.children) || subTree;\r\n            }\r\n            if (vnode === subTree) {\r\n                const parentVNode = parentComponent.vnode;\r\n                setScopeId(el, parentVNode, parentVNode.scopeId, parentVNode.slotScopeIds, parentComponent.parent);\r\n            }\r\n        }\r\n    };\r\n    const mountChildren = (children, container, anchor, parentComponent, parentSuspense, isSVG, optimized, slotScopeIds, start = 0) => {\r\n        for (let i = start; i < children.length; i++) {\r\n            const child = (children[i] = optimized\r\n                ? cloneIfMounted(children[i])\r\n                : normalizeVNode(children[i]));\r\n            patch(null, child, container, anchor, parentComponent, parentSuspense, isSVG, optimized, slotScopeIds);\r\n        }\r\n    };\r\n    const patchElement = (n1, n2, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {\r\n        const el = (n2.el = n1.el);\r\n        let { patchFlag, dynamicChildren, dirs } = n2;\r\n        // #1426 take the old vnode's patch flag into account since user may clone a\r\n        // compiler-generated vnode, which de-opts to FULL_PROPS\r\n        patchFlag |= n1.patchFlag & 16 /* FULL_PROPS */;\r\n        const oldProps = n1.props || EMPTY_OBJ;\r\n        const newProps = n2.props || EMPTY_OBJ;\r\n        let vnodeHook;\r\n        if ((vnodeHook = newProps.onVnodeBeforeUpdate)) {\r\n            invokeVNodeHook(vnodeHook, parentComponent, n2, n1);\r\n        }\r\n        if (dirs) {\r\n            invokeDirectiveHook(n2, n1, parentComponent, 'beforeUpdate');\r\n        }\r\n        if ((process.env.NODE_ENV !== 'production') && isHmrUpdating) {\r\n            // HMR updated, force full diff\r\n            patchFlag = 0;\r\n            optimized = false;\r\n            dynamicChildren = null;\r\n        }\r\n        if (patchFlag > 0) {\r\n            // the presence of a patchFlag means this element's render code was\r\n            // generated by the compiler and can take the fast path.\r\n            // in this path old node and new node are guaranteed to have the same shape\r\n            // (i.e. at the exact same position in the source template)\r\n            if (patchFlag & 16 /* FULL_PROPS */) {\r\n                // element props contain dynamic keys, full diff needed\r\n                patchProps(el, n2, oldProps, newProps, parentComponent, parentSuspense, isSVG);\r\n            }\r\n            else {\r\n                // class\r\n                // this flag is matched when the element has dynamic class bindings.\r\n                if (patchFlag & 2 /* CLASS */) {\r\n                    if (oldProps.class !== newProps.class) {\r\n                        hostPatchProp(el, 'class', null, newProps.class, isSVG);\r\n                    }\r\n                }\r\n                // style\r\n                // this flag is matched when the element has dynamic style bindings\r\n                if (patchFlag & 4 /* STYLE */) {\r\n                    hostPatchProp(el, 'style', oldProps.style, newProps.style, isSVG);\r\n                }\r\n                // props\r\n                // This flag is matched when the element has dynamic prop/attr bindings\r\n                // other than class and style. The keys of dynamic prop/attrs are saved for\r\n                // faster iteration.\r\n                // Note dynamic keys like :[foo]=\"bar\" will cause this optimization to\r\n                // bail out and go through a full diff because we need to unset the old key\r\n                if (patchFlag & 8 /* PROPS */) {\r\n                    // if the flag is present then dynamicProps must be non-null\r\n                    const propsToUpdate = n2.dynamicProps;\r\n                    for (let i = 0; i < propsToUpdate.length; i++) {\r\n                        const key = propsToUpdate[i];\r\n                        const prev = oldProps[key];\r\n                        const next = newProps[key];\r\n                        if (next !== prev ||\r\n                            (hostForcePatchProp && hostForcePatchProp(el, key))) {\r\n                            hostPatchProp(el, key, prev, next, isSVG, n1.children, parentComponent, parentSuspense, unmountChildren);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            // text\r\n            // This flag is matched when the element has only dynamic text children.\r\n            if (patchFlag & 1 /* TEXT */) {\r\n                if (n1.children !== n2.children) {\r\n                    hostSetElementText(el, n2.children);\r\n                }\r\n            }\r\n        }\r\n        else if (!optimized && dynamicChildren == null) {\r\n            // unoptimized, full diff\r\n            patchProps(el, n2, oldProps, newProps, parentComponent, parentSuspense, isSVG);\r\n        }\r\n        const areChildrenSVG = isSVG && n2.type !== 'foreignObject';\r\n        if (dynamicChildren) {\r\n            patchBlockChildren(n1.dynamicChildren, dynamicChildren, el, parentComponent, parentSuspense, areChildrenSVG, slotScopeIds);\r\n            if ((process.env.NODE_ENV !== 'production') && parentComponent && parentComponent.type.__hmrId) {\r\n                traverseStaticChildren(n1, n2);\r\n            }\r\n        }\r\n        else if (!optimized) {\r\n            // full diff\r\n            patchChildren(n1, n2, el, null, parentComponent, parentSuspense, areChildrenSVG, slotScopeIds, false);\r\n        }\r\n        if ((vnodeHook = newProps.onVnodeUpdated) || dirs) {\r\n            queuePostRenderEffect(() => {\r\n                vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, n2, n1);\r\n                dirs && invokeDirectiveHook(n2, n1, parentComponent, 'updated');\r\n            }, parentSuspense);\r\n        }\r\n    };\r\n    // The fast path for blocks.\r\n    const patchBlockChildren = (oldChildren, newChildren, fallbackContainer, parentComponent, parentSuspense, isSVG, slotScopeIds) => {\r\n        for (let i = 0; i < newChildren.length; i++) {\r\n            const oldVNode = oldChildren[i];\r\n            const newVNode = newChildren[i];\r\n            // Determine the container (parent element) for the patch.\r\n            const container = \r\n            // - In the case of a Fragment, we need to provide the actual parent\r\n            // of the Fragment itself so it can move its children.\r\n            oldVNode.type === Fragment ||\r\n                // - In the case of different nodes, there is going to be a replacement\r\n                // which also requires the correct parent container\r\n                !isSameVNodeType(oldVNode, newVNode) ||\r\n                // - In the case of a component, it could contain anything.\r\n                oldVNode.shapeFlag & 6 /* COMPONENT */ ||\r\n                oldVNode.shapeFlag & 64 /* TELEPORT */\r\n                ? hostParentNode(oldVNode.el)\r\n                : // In other cases, the parent container is not actually used so we\r\n                    // just pass the block element here to avoid a DOM parentNode call.\r\n                    fallbackContainer;\r\n            patch(oldVNode, newVNode, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, true);\r\n        }\r\n    };\r\n    const patchProps = (el, vnode, oldProps, newProps, parentComponent, parentSuspense, isSVG) => {\r\n        if (oldProps !== newProps) {\r\n            for (const key in newProps) {\r\n                // empty string is not valid prop\r\n                if (isReservedProp(key))\r\n                    continue;\r\n                const next = newProps[key];\r\n                const prev = oldProps[key];\r\n                if (next !== prev ||\r\n                    (hostForcePatchProp && hostForcePatchProp(el, key))) {\r\n                    hostPatchProp(el, key, prev, next, isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);\r\n                }\r\n            }\r\n            if (oldProps !== EMPTY_OBJ) {\r\n                for (const key in oldProps) {\r\n                    if (!isReservedProp(key) && !(key in newProps)) {\r\n                        hostPatchProp(el, key, oldProps[key], null, isSVG, vnode.children, parentComponent, parentSuspense, unmountChildren);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    const processFragment = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {\r\n        const fragmentStartAnchor = (n2.el = n1 ? n1.el : hostCreateText(''));\r\n        const fragmentEndAnchor = (n2.anchor = n1 ? n1.anchor : hostCreateText(''));\r\n        let { patchFlag, dynamicChildren, slotScopeIds: fragmentSlotScopeIds } = n2;\r\n        if (patchFlag > 0) {\r\n            optimized = true;\r\n        }\r\n        // check if this is a slot fragment with :slotted scope ids\r\n        if (fragmentSlotScopeIds) {\r\n            slotScopeIds = slotScopeIds\r\n                ? slotScopeIds.concat(fragmentSlotScopeIds)\r\n                : fragmentSlotScopeIds;\r\n        }\r\n        if ((process.env.NODE_ENV !== 'production') && isHmrUpdating) {\r\n            // HMR updated, force full diff\r\n            patchFlag = 0;\r\n            optimized = false;\r\n            dynamicChildren = null;\r\n        }\r\n        if (n1 == null) {\r\n            hostInsert(fragmentStartAnchor, container, anchor);\r\n            hostInsert(fragmentEndAnchor, container, anchor);\r\n            // a fragment can only have array children\r\n            // since they are either generated by the compiler, or implicitly created\r\n            // from arrays.\r\n            mountChildren(n2.children, container, fragmentEndAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n        }\r\n        else {\r\n            if (patchFlag > 0 &&\r\n                patchFlag & 64 /* STABLE_FRAGMENT */ &&\r\n                dynamicChildren &&\r\n                // #2715 the previous fragment could've been a BAILed one as a result\r\n                // of renderSlot() with no valid children\r\n                n1.dynamicChildren) {\r\n                // a stable fragment (template root or <template v-for>) doesn't need to\r\n                // patch children order, but it may contain dynamicChildren.\r\n                patchBlockChildren(n1.dynamicChildren, dynamicChildren, container, parentComponent, parentSuspense, isSVG, slotScopeIds);\r\n                if ((process.env.NODE_ENV !== 'production') && parentComponent && parentComponent.type.__hmrId) {\r\n                    traverseStaticChildren(n1, n2);\r\n                }\r\n                else if (\r\n                // #2080 if the stable fragment has a key, it's a <template v-for> that may\r\n                //  get moved around. Make sure all root level vnodes inherit el.\r\n                // #2134 or if it's a component root, it may also get moved around\r\n                // as the component is being moved.\r\n                n2.key != null ||\r\n                    (parentComponent && n2 === parentComponent.subTree)) {\r\n                    traverseStaticChildren(n1, n2, true /* shallow */);\r\n                }\r\n            }\r\n            else {\r\n                // keyed / unkeyed, or manual fragments.\r\n                // for keyed & unkeyed, since they are compiler generated from v-for,\r\n                // each child is guaranteed to be a block so the fragment will never\r\n                // have dynamicChildren.\r\n                patchChildren(n1, n2, container, fragmentEndAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n            }\r\n        }\r\n    };\r\n    const processComponent = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {\r\n        n2.slotScopeIds = slotScopeIds;\r\n        if (n1 == null) {\r\n            if (n2.shapeFlag & 512 /* COMPONENT_KEPT_ALIVE */) {\r\n                parentComponent.ctx.activate(n2, container, anchor, isSVG, optimized);\r\n            }\r\n            else {\r\n                mountComponent(n2, container, anchor, parentComponent, parentSuspense, isSVG, optimized);\r\n            }\r\n        }\r\n        else {\r\n            updateComponent(n1, n2, optimized);\r\n        }\r\n    };\r\n    const mountComponent = (initialVNode, container, anchor, parentComponent, parentSuspense, isSVG, optimized) => {\r\n        const instance = (initialVNode.component = createComponentInstance(initialVNode, parentComponent, parentSuspense));\r\n        if ((process.env.NODE_ENV !== 'production') && instance.type.__hmrId) {\r\n            registerHMR(instance);\r\n        }\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            pushWarningContext(initialVNode);\r\n            startMeasure(instance, `mount`);\r\n        }\r\n        // inject renderer internals for keepAlive\r\n        if (isKeepAlive(initialVNode)) {\r\n            instance.ctx.renderer = internals;\r\n        }\r\n        // resolve props and slots for setup context\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            startMeasure(instance, `init`);\r\n        }\r\n        setupComponent(instance);\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            endMeasure(instance, `init`);\r\n        }\r\n        // setup() is async. This component relies on async logic to be resolved\r\n        // before proceeding\r\n        if (instance.asyncDep) {\r\n            parentSuspense && parentSuspense.registerDep(instance, setupRenderEffect);\r\n            // Give it a placeholder if this is not hydration\r\n            // TODO handle self-defined fallback\r\n            if (!initialVNode.el) {\r\n                const placeholder = (instance.subTree = createVNode(Comment));\r\n                processCommentNode(null, placeholder, container, anchor);\r\n            }\r\n            return;\r\n        }\r\n        setupRenderEffect(instance, initialVNode, container, anchor, parentSuspense, isSVG, optimized);\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            popWarningContext();\r\n            endMeasure(instance, `mount`);\r\n        }\r\n    };\r\n    const updateComponent = (n1, n2, optimized) => {\r\n        const instance = (n2.component = n1.component);\r\n        if (shouldUpdateComponent(n1, n2, optimized)) {\r\n            if (instance.asyncDep &&\r\n                !instance.asyncResolved) {\r\n                // async & still pending - just update props and slots\r\n                // since the component's reactive effect for render isn't set-up yet\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    pushWarningContext(n2);\r\n                }\r\n                updateComponentPreRender(instance, n2, optimized);\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    popWarningContext();\r\n                }\r\n                return;\r\n            }\r\n            else {\r\n                // normal update\r\n                instance.next = n2;\r\n                // in case the child component is also queued, remove it to avoid\r\n                // double updating the same child component in the same flush.\r\n                invalidateJob(instance.update);\r\n                // instance.update is the reactive effect runner.\r\n                instance.update();\r\n            }\r\n        }\r\n        else {\r\n            // no update needed. just copy over properties\r\n            n2.component = n1.component;\r\n            n2.el = n1.el;\r\n            instance.vnode = n2;\r\n        }\r\n    };\r\n    const setupRenderEffect = (instance, initialVNode, container, anchor, parentSuspense, isSVG, optimized) => {\r\n        // create reactive effect for rendering\r\n        instance.update = effect(function componentEffect() {\r\n            if (!instance.isMounted) {\r\n                let vnodeHook;\r\n                const { el, props } = initialVNode;\r\n                const { bm, m, parent } = instance;\r\n                // beforeMount hook\r\n                if (bm) {\r\n                    invokeArrayFns(bm);\r\n                }\r\n                // onVnodeBeforeMount\r\n                if ((vnodeHook = props && props.onVnodeBeforeMount)) {\r\n                    invokeVNodeHook(vnodeHook, parent, initialVNode);\r\n                }\r\n                // render\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    startMeasure(instance, `render`);\r\n                }\r\n                const subTree = (instance.subTree = renderComponentRoot(instance));\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    endMeasure(instance, `render`);\r\n                }\r\n                if (el && hydrateNode) {\r\n                    if ((process.env.NODE_ENV !== 'production')) {\r\n                        startMeasure(instance, `hydrate`);\r\n                    }\r\n                    // vnode has adopted host node - perform hydration instead of mount.\r\n                    hydrateNode(initialVNode.el, subTree, instance, parentSuspense, null);\r\n                    if ((process.env.NODE_ENV !== 'production')) {\r\n                        endMeasure(instance, `hydrate`);\r\n                    }\r\n                }\r\n                else {\r\n                    if ((process.env.NODE_ENV !== 'production')) {\r\n                        startMeasure(instance, `patch`);\r\n                    }\r\n                    patch(null, subTree, container, anchor, instance, parentSuspense, isSVG);\r\n                    if ((process.env.NODE_ENV !== 'production')) {\r\n                        endMeasure(instance, `patch`);\r\n                    }\r\n                    initialVNode.el = subTree.el;\r\n                }\r\n                // mounted hook\r\n                if (m) {\r\n                    queuePostRenderEffect(m, parentSuspense);\r\n                }\r\n                // onVnodeMounted\r\n                if ((vnodeHook = props && props.onVnodeMounted)) {\r\n                    const scopedInitialVNode = initialVNode;\r\n                    queuePostRenderEffect(() => {\r\n                        invokeVNodeHook(vnodeHook, parent, scopedInitialVNode);\r\n                    }, parentSuspense);\r\n                }\r\n                // activated hook for keep-alive roots.\r\n                // #1742 activated hook must be accessed after first render\r\n                // since the hook may be injected by a child keep-alive\r\n                const { a } = instance;\r\n                if (a &&\r\n                    initialVNode.shapeFlag & 256 /* COMPONENT_SHOULD_KEEP_ALIVE */) {\r\n                    queuePostRenderEffect(a, parentSuspense);\r\n                }\r\n                instance.isMounted = true;\r\n                if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\r\n                    devtoolsComponentAdded(instance);\r\n                }\r\n                // #2458: deference mount-only object parameters to prevent memleaks\r\n                initialVNode = container = anchor = null;\r\n            }\r\n            else {\r\n                // updateComponent\r\n                // This is triggered by mutation of component's own state (next: null)\r\n                // OR parent calling processComponent (next: VNode)\r\n                let { next, bu, u, parent, vnode } = instance;\r\n                let originNext = next;\r\n                let vnodeHook;\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    pushWarningContext(next || instance.vnode);\r\n                }\r\n                if (next) {\r\n                    next.el = vnode.el;\r\n                    updateComponentPreRender(instance, next, optimized);\r\n                }\r\n                else {\r\n                    next = vnode;\r\n                }\r\n                // beforeUpdate hook\r\n                if (bu) {\r\n                    invokeArrayFns(bu);\r\n                }\r\n                // onVnodeBeforeUpdate\r\n                if ((vnodeHook = next.props && next.props.onVnodeBeforeUpdate)) {\r\n                    invokeVNodeHook(vnodeHook, parent, next, vnode);\r\n                }\r\n                // render\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    startMeasure(instance, `render`);\r\n                }\r\n                const nextTree = renderComponentRoot(instance);\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    endMeasure(instance, `render`);\r\n                }\r\n                const prevTree = instance.subTree;\r\n                instance.subTree = nextTree;\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    startMeasure(instance, `patch`);\r\n                }\r\n                patch(prevTree, nextTree, \r\n                // parent may have changed if it's in a teleport\r\n                hostParentNode(prevTree.el), \r\n                // anchor may have changed if it's in a fragment\r\n                getNextHostNode(prevTree), instance, parentSuspense, isSVG);\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    endMeasure(instance, `patch`);\r\n                }\r\n                next.el = nextTree.el;\r\n                if (originNext === null) {\r\n                    // self-triggered update. In case of HOC, update parent component\r\n                    // vnode el. HOC is indicated by parent instance's subTree pointing\r\n                    // to child component's vnode\r\n                    updateHOCHostEl(instance, nextTree.el);\r\n                }\r\n                // updated hook\r\n                if (u) {\r\n                    queuePostRenderEffect(u, parentSuspense);\r\n                }\r\n                // onVnodeUpdated\r\n                if ((vnodeHook = next.props && next.props.onVnodeUpdated)) {\r\n                    queuePostRenderEffect(() => {\r\n                        invokeVNodeHook(vnodeHook, parent, next, vnode);\r\n                    }, parentSuspense);\r\n                }\r\n                if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\r\n                    devtoolsComponentUpdated(instance);\r\n                }\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    popWarningContext();\r\n                }\r\n            }\r\n        }, (process.env.NODE_ENV !== 'production') ? createDevEffectOptions(instance) : prodEffectOptions);\r\n    };\r\n    const updateComponentPreRender = (instance, nextVNode, optimized) => {\r\n        nextVNode.component = instance;\r\n        const prevProps = instance.vnode.props;\r\n        instance.vnode = nextVNode;\r\n        instance.next = null;\r\n        updateProps(instance, nextVNode.props, prevProps, optimized);\r\n        updateSlots(instance, nextVNode.children, optimized);\r\n        pauseTracking();\r\n        // props update may have triggered pre-flush watchers.\r\n        // flush them before the render update.\r\n        flushPreFlushCbs(undefined, instance.update);\r\n        resetTracking();\r\n    };\r\n    const patchChildren = (n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized = false) => {\r\n        const c1 = n1 && n1.children;\r\n        const prevShapeFlag = n1 ? n1.shapeFlag : 0;\r\n        const c2 = n2.children;\r\n        const { patchFlag, shapeFlag } = n2;\r\n        // fast path\r\n        if (patchFlag > 0) {\r\n            if (patchFlag & 128 /* KEYED_FRAGMENT */) {\r\n                // this could be either fully-keyed or mixed (some keyed some not)\r\n                // presence of patchFlag means children are guaranteed to be arrays\r\n                patchKeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n                return;\r\n            }\r\n            else if (patchFlag & 256 /* UNKEYED_FRAGMENT */) {\r\n                // unkeyed\r\n                patchUnkeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n                return;\r\n            }\r\n        }\r\n        // children has 3 possibilities: text, array or no children.\r\n        if (shapeFlag & 8 /* TEXT_CHILDREN */) {\r\n            // text children fast path\r\n            if (prevShapeFlag & 16 /* ARRAY_CHILDREN */) {\r\n                unmountChildren(c1, parentComponent, parentSuspense);\r\n            }\r\n            if (c2 !== c1) {\r\n                hostSetElementText(container, c2);\r\n            }\r\n        }\r\n        else {\r\n            if (prevShapeFlag & 16 /* ARRAY_CHILDREN */) {\r\n                // prev children was array\r\n                if (shapeFlag & 16 /* ARRAY_CHILDREN */) {\r\n                    // two arrays, cannot assume anything, do full diff\r\n                    patchKeyedChildren(c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n                }\r\n                else {\r\n                    // no new children, just unmount old\r\n                    unmountChildren(c1, parentComponent, parentSuspense, true);\r\n                }\r\n            }\r\n            else {\r\n                // prev children was text OR null\r\n                // new children is array OR null\r\n                if (prevShapeFlag & 8 /* TEXT_CHILDREN */) {\r\n                    hostSetElementText(container, '');\r\n                }\r\n                // mount new if array\r\n                if (shapeFlag & 16 /* ARRAY_CHILDREN */) {\r\n                    mountChildren(c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    const patchUnkeyedChildren = (c1, c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {\r\n        c1 = c1 || EMPTY_ARR;\r\n        c2 = c2 || EMPTY_ARR;\r\n        const oldLength = c1.length;\r\n        const newLength = c2.length;\r\n        const commonLength = Math.min(oldLength, newLength);\r\n        let i;\r\n        for (i = 0; i < commonLength; i++) {\r\n            const nextChild = (c2[i] = optimized\r\n                ? cloneIfMounted(c2[i])\r\n                : normalizeVNode(c2[i]));\r\n            patch(c1[i], nextChild, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n        }\r\n        if (oldLength > newLength) {\r\n            // remove old\r\n            unmountChildren(c1, parentComponent, parentSuspense, true, false, commonLength);\r\n        }\r\n        else {\r\n            // mount new\r\n            mountChildren(c2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, commonLength);\r\n        }\r\n    };\r\n    // can be all-keyed or mixed\r\n    const patchKeyedChildren = (c1, c2, container, parentAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized) => {\r\n        let i = 0;\r\n        const l2 = c2.length;\r\n        let e1 = c1.length - 1; // prev ending index\r\n        let e2 = l2 - 1; // next ending index\r\n        // 1. sync from start\r\n        // (a b) c\r\n        // (a b) d e\r\n        while (i <= e1 && i <= e2) {\r\n            const n1 = c1[i];\r\n            const n2 = (c2[i] = optimized\r\n                ? cloneIfMounted(c2[i])\r\n                : normalizeVNode(c2[i]));\r\n            if (isSameVNodeType(n1, n2)) {\r\n                patch(n1, n2, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n            i++;\r\n        }\r\n        // 2. sync from end\r\n        // a (b c)\r\n        // d e (b c)\r\n        while (i <= e1 && i <= e2) {\r\n            const n1 = c1[e1];\r\n            const n2 = (c2[e2] = optimized\r\n                ? cloneIfMounted(c2[e2])\r\n                : normalizeVNode(c2[e2]));\r\n            if (isSameVNodeType(n1, n2)) {\r\n                patch(n1, n2, container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n            }\r\n            else {\r\n                break;\r\n            }\r\n            e1--;\r\n            e2--;\r\n        }\r\n        // 3. common sequence + mount\r\n        // (a b)\r\n        // (a b) c\r\n        // i = 2, e1 = 1, e2 = 2\r\n        // (a b)\r\n        // c (a b)\r\n        // i = 0, e1 = -1, e2 = 0\r\n        if (i > e1) {\r\n            if (i <= e2) {\r\n                const nextPos = e2 + 1;\r\n                const anchor = nextPos < l2 ? c2[nextPos].el : parentAnchor;\r\n                while (i <= e2) {\r\n                    patch(null, (c2[i] = optimized\r\n                        ? cloneIfMounted(c2[i])\r\n                        : normalizeVNode(c2[i])), container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n                    i++;\r\n                }\r\n            }\r\n        }\r\n        // 4. common sequence + unmount\r\n        // (a b) c\r\n        // (a b)\r\n        // i = 2, e1 = 2, e2 = 1\r\n        // a (b c)\r\n        // (b c)\r\n        // i = 0, e1 = 0, e2 = -1\r\n        else if (i > e2) {\r\n            while (i <= e1) {\r\n                unmount(c1[i], parentComponent, parentSuspense, true);\r\n                i++;\r\n            }\r\n        }\r\n        // 5. unknown sequence\r\n        // [i ... e1 + 1]: a b [c d e] f g\r\n        // [i ... e2 + 1]: a b [e d c h] f g\r\n        // i = 2, e1 = 4, e2 = 5\r\n        else {\r\n            const s1 = i; // prev starting index\r\n            const s2 = i; // next starting index\r\n            // 5.1 build key:index map for newChildren\r\n            const keyToNewIndexMap = new Map();\r\n            for (i = s2; i <= e2; i++) {\r\n                const nextChild = (c2[i] = optimized\r\n                    ? cloneIfMounted(c2[i])\r\n                    : normalizeVNode(c2[i]));\r\n                if (nextChild.key != null) {\r\n                    if ((process.env.NODE_ENV !== 'production') && keyToNewIndexMap.has(nextChild.key)) {\r\n                        warn(`Duplicate keys found during update:`, JSON.stringify(nextChild.key), `Make sure keys are unique.`);\r\n                    }\r\n                    keyToNewIndexMap.set(nextChild.key, i);\r\n                }\r\n            }\r\n            // 5.2 loop through old children left to be patched and try to patch\r\n            // matching nodes & remove nodes that are no longer present\r\n            let j;\r\n            let patched = 0;\r\n            const toBePatched = e2 - s2 + 1;\r\n            let moved = false;\r\n            // used to track whether any node has moved\r\n            let maxNewIndexSoFar = 0;\r\n            // works as Map<newIndex, oldIndex>\r\n            // Note that oldIndex is offset by +1\r\n            // and oldIndex = 0 is a special value indicating the new node has\r\n            // no corresponding old node.\r\n            // used for determining longest stable subsequence\r\n            const newIndexToOldIndexMap = new Array(toBePatched);\r\n            for (i = 0; i < toBePatched; i++)\r\n                newIndexToOldIndexMap[i] = 0;\r\n            for (i = s1; i <= e1; i++) {\r\n                const prevChild = c1[i];\r\n                if (patched >= toBePatched) {\r\n                    // all new children have been patched so this can only be a removal\r\n                    unmount(prevChild, parentComponent, parentSuspense, true);\r\n                    continue;\r\n                }\r\n                let newIndex;\r\n                if (prevChild.key != null) {\r\n                    newIndex = keyToNewIndexMap.get(prevChild.key);\r\n                }\r\n                else {\r\n                    // key-less node, try to locate a key-less node of the same type\r\n                    for (j = s2; j <= e2; j++) {\r\n                        if (newIndexToOldIndexMap[j - s2] === 0 &&\r\n                            isSameVNodeType(prevChild, c2[j])) {\r\n                            newIndex = j;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if (newIndex === undefined) {\r\n                    unmount(prevChild, parentComponent, parentSuspense, true);\r\n                }\r\n                else {\r\n                    newIndexToOldIndexMap[newIndex - s2] = i + 1;\r\n                    if (newIndex >= maxNewIndexSoFar) {\r\n                        maxNewIndexSoFar = newIndex;\r\n                    }\r\n                    else {\r\n                        moved = true;\r\n                    }\r\n                    patch(prevChild, c2[newIndex], container, null, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n                    patched++;\r\n                }\r\n            }\r\n            // 5.3 move and mount\r\n            // generate longest stable subsequence only when nodes have moved\r\n            const increasingNewIndexSequence = moved\r\n                ? getSequence(newIndexToOldIndexMap)\r\n                : EMPTY_ARR;\r\n            j = increasingNewIndexSequence.length - 1;\r\n            // looping backwards so that we can use last patched node as anchor\r\n            for (i = toBePatched - 1; i >= 0; i--) {\r\n                const nextIndex = s2 + i;\r\n                const nextChild = c2[nextIndex];\r\n                const anchor = nextIndex + 1 < l2 ? c2[nextIndex + 1].el : parentAnchor;\r\n                if (newIndexToOldIndexMap[i] === 0) {\r\n                    // mount new\r\n                    patch(null, nextChild, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n                }\r\n                else if (moved) {\r\n                    // move if:\r\n                    // There is no stable subsequence (e.g. a reverse)\r\n                    // OR current node is not among the stable sequence\r\n                    if (j < 0 || i !== increasingNewIndexSequence[j]) {\r\n                        move(nextChild, container, anchor, 2 /* REORDER */);\r\n                    }\r\n                    else {\r\n                        j--;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    const move = (vnode, container, anchor, moveType, parentSuspense = null) => {\r\n        const { el, type, transition, children, shapeFlag } = vnode;\r\n        if (shapeFlag & 6 /* COMPONENT */) {\r\n            move(vnode.component.subTree, container, anchor, moveType);\r\n            return;\r\n        }\r\n        if (shapeFlag & 128 /* SUSPENSE */) {\r\n            vnode.suspense.move(container, anchor, moveType);\r\n            return;\r\n        }\r\n        if (shapeFlag & 64 /* TELEPORT */) {\r\n            type.move(vnode, container, anchor, internals);\r\n            return;\r\n        }\r\n        if (type === Fragment) {\r\n            hostInsert(el, container, anchor);\r\n            for (let i = 0; i < children.length; i++) {\r\n                move(children[i], container, anchor, moveType);\r\n            }\r\n            hostInsert(vnode.anchor, container, anchor);\r\n            return;\r\n        }\r\n        if (type === Static) {\r\n            moveStaticNode(vnode, container, anchor);\r\n            return;\r\n        }\r\n        // single nodes\r\n        const needTransition = moveType !== 2 /* REORDER */ &&\r\n            shapeFlag & 1 /* ELEMENT */ &&\r\n            transition;\r\n        if (needTransition) {\r\n            if (moveType === 0 /* ENTER */) {\r\n                transition.beforeEnter(el);\r\n                hostInsert(el, container, anchor);\r\n                queuePostRenderEffect(() => transition.enter(el), parentSuspense);\r\n            }\r\n            else {\r\n                const { leave, delayLeave, afterLeave } = transition;\r\n                const remove = () => hostInsert(el, container, anchor);\r\n                const performLeave = () => {\r\n                    leave(el, () => {\r\n                        remove();\r\n                        afterLeave && afterLeave();\r\n                    });\r\n                };\r\n                if (delayLeave) {\r\n                    delayLeave(el, remove, performLeave);\r\n                }\r\n                else {\r\n                    performLeave();\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            hostInsert(el, container, anchor);\r\n        }\r\n    };\r\n    const unmount = (vnode, parentComponent, parentSuspense, doRemove = false, optimized = false) => {\r\n        const { type, props, ref, children, dynamicChildren, shapeFlag, patchFlag, dirs } = vnode;\r\n        // unset ref\r\n        if (ref != null) {\r\n            setRef(ref, null, parentSuspense, null);\r\n        }\r\n        if (shapeFlag & 256 /* COMPONENT_SHOULD_KEEP_ALIVE */) {\r\n            parentComponent.ctx.deactivate(vnode);\r\n            return;\r\n        }\r\n        const shouldInvokeDirs = shapeFlag & 1 /* ELEMENT */ && dirs;\r\n        let vnodeHook;\r\n        if ((vnodeHook = props && props.onVnodeBeforeUnmount)) {\r\n            invokeVNodeHook(vnodeHook, parentComponent, vnode);\r\n        }\r\n        if (shapeFlag & 6 /* COMPONENT */) {\r\n            unmountComponent(vnode.component, parentSuspense, doRemove);\r\n        }\r\n        else {\r\n            if (shapeFlag & 128 /* SUSPENSE */) {\r\n                vnode.suspense.unmount(parentSuspense, doRemove);\r\n                return;\r\n            }\r\n            if (shouldInvokeDirs) {\r\n                invokeDirectiveHook(vnode, null, parentComponent, 'beforeUnmount');\r\n            }\r\n            if (shapeFlag & 64 /* TELEPORT */) {\r\n                vnode.type.remove(vnode, parentComponent, parentSuspense, optimized, internals, doRemove);\r\n            }\r\n            else if (dynamicChildren &&\r\n                // #1153: fast path should not be taken for non-stable (v-for) fragments\r\n                (type !== Fragment ||\r\n                    (patchFlag > 0 && patchFlag & 64 /* STABLE_FRAGMENT */))) {\r\n                // fast path for block nodes: only need to unmount dynamic children.\r\n                unmountChildren(dynamicChildren, parentComponent, parentSuspense, false, true);\r\n            }\r\n            else if ((type === Fragment &&\r\n                (patchFlag & 128 /* KEYED_FRAGMENT */ ||\r\n                    patchFlag & 256 /* UNKEYED_FRAGMENT */)) ||\r\n                (!optimized && shapeFlag & 16 /* ARRAY_CHILDREN */)) {\r\n                unmountChildren(children, parentComponent, parentSuspense);\r\n            }\r\n            if (doRemove) {\r\n                remove(vnode);\r\n            }\r\n        }\r\n        if ((vnodeHook = props && props.onVnodeUnmounted) || shouldInvokeDirs) {\r\n            queuePostRenderEffect(() => {\r\n                vnodeHook && invokeVNodeHook(vnodeHook, parentComponent, vnode);\r\n                shouldInvokeDirs &&\r\n                    invokeDirectiveHook(vnode, null, parentComponent, 'unmounted');\r\n            }, parentSuspense);\r\n        }\r\n    };\r\n    const remove = vnode => {\r\n        const { type, el, anchor, transition } = vnode;\r\n        if (type === Fragment) {\r\n            removeFragment(el, anchor);\r\n            return;\r\n        }\r\n        if (type === Static) {\r\n            removeStaticNode(vnode);\r\n            return;\r\n        }\r\n        const performRemove = () => {\r\n            hostRemove(el);\r\n            if (transition && !transition.persisted && transition.afterLeave) {\r\n                transition.afterLeave();\r\n            }\r\n        };\r\n        if (vnode.shapeFlag & 1 /* ELEMENT */ &&\r\n            transition &&\r\n            !transition.persisted) {\r\n            const { leave, delayLeave } = transition;\r\n            const performLeave = () => leave(el, performRemove);\r\n            if (delayLeave) {\r\n                delayLeave(vnode.el, performRemove, performLeave);\r\n            }\r\n            else {\r\n                performLeave();\r\n            }\r\n        }\r\n        else {\r\n            performRemove();\r\n        }\r\n    };\r\n    const removeFragment = (cur, end) => {\r\n        // For fragments, directly remove all contained DOM nodes.\r\n        // (fragment child nodes cannot have transition)\r\n        let next;\r\n        while (cur !== end) {\r\n            next = hostNextSibling(cur);\r\n            hostRemove(cur);\r\n            cur = next;\r\n        }\r\n        hostRemove(end);\r\n    };\r\n    const unmountComponent = (instance, parentSuspense, doRemove) => {\r\n        if ((process.env.NODE_ENV !== 'production') && instance.type.__hmrId) {\r\n            unregisterHMR(instance);\r\n        }\r\n        const { bum, effects, update, subTree, um } = instance;\r\n        // beforeUnmount hook\r\n        if (bum) {\r\n            invokeArrayFns(bum);\r\n        }\r\n        if (effects) {\r\n            for (let i = 0; i < effects.length; i++) {\r\n                stop(effects[i]);\r\n            }\r\n        }\r\n        // update may be null if a component is unmounted before its async\r\n        // setup has resolved.\r\n        if (update) {\r\n            stop(update);\r\n            unmount(subTree, instance, parentSuspense, doRemove);\r\n        }\r\n        // unmounted hook\r\n        if (um) {\r\n            queuePostRenderEffect(um, parentSuspense);\r\n        }\r\n        queuePostRenderEffect(() => {\r\n            instance.isUnmounted = true;\r\n        }, parentSuspense);\r\n        // A component with async dep inside a pending suspense is unmounted before\r\n        // its async dep resolves. This should remove the dep from the suspense, and\r\n        // cause the suspense to resolve immediately if that was the last dep.\r\n        if (parentSuspense &&\r\n            parentSuspense.pendingBranch &&\r\n            !parentSuspense.isUnmounted &&\r\n            instance.asyncDep &&\r\n            !instance.asyncResolved &&\r\n            instance.suspenseId === parentSuspense.pendingId) {\r\n            parentSuspense.deps--;\r\n            if (parentSuspense.deps === 0) {\r\n                parentSuspense.resolve();\r\n            }\r\n        }\r\n        if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\r\n            devtoolsComponentRemoved(instance);\r\n        }\r\n    };\r\n    const unmountChildren = (children, parentComponent, parentSuspense, doRemove = false, optimized = false, start = 0) => {\r\n        for (let i = start; i < children.length; i++) {\r\n            unmount(children[i], parentComponent, parentSuspense, doRemove, optimized);\r\n        }\r\n    };\r\n    const getNextHostNode = vnode => {\r\n        if (vnode.shapeFlag & 6 /* COMPONENT */) {\r\n            return getNextHostNode(vnode.component.subTree);\r\n        }\r\n        if (vnode.shapeFlag & 128 /* SUSPENSE */) {\r\n            return vnode.suspense.next();\r\n        }\r\n        return hostNextSibling((vnode.anchor || vnode.el));\r\n    };\r\n    const render = (vnode, container, isSVG) => {\r\n        if (vnode == null) {\r\n            if (container._vnode) {\r\n                unmount(container._vnode, null, null, true);\r\n            }\r\n        }\r\n        else {\r\n            patch(container._vnode || null, vnode, container, null, null, null, isSVG);\r\n        }\r\n        flushPostFlushCbs();\r\n        container._vnode = vnode;\r\n    };\r\n    const internals = {\r\n        p: patch,\r\n        um: unmount,\r\n        m: move,\r\n        r: remove,\r\n        mt: mountComponent,\r\n        mc: mountChildren,\r\n        pc: patchChildren,\r\n        pbc: patchBlockChildren,\r\n        n: getNextHostNode,\r\n        o: options\r\n    };\r\n    let hydrate;\r\n    let hydrateNode;\r\n    if (createHydrationFns) {\r\n        [hydrate, hydrateNode] = createHydrationFns(internals);\r\n    }\r\n    return {\r\n        render,\r\n        hydrate,\r\n        createApp: createAppAPI(render, hydrate)\r\n    };\r\n}\r\nfunction invokeVNodeHook(hook, instance, vnode, prevVNode = null) {\r\n    callWithAsyncErrorHandling(hook, instance, 7 /* VNODE_HOOK */, [\r\n        vnode,\r\n        prevVNode\r\n    ]);\r\n}\r\n/**\r\n * #1156\r\n * When a component is HMR-enabled, we need to make sure that all static nodes\r\n * inside a block also inherit the DOM element from the previous tree so that\r\n * HMR updates (which are full updates) can retrieve the element for patching.\r\n *\r\n * #2080\r\n * Inside keyed `template` fragment static children, if a fragment is moved,\r\n * the children will always moved so that need inherit el form previous nodes\r\n * to ensure correct moved position.\r\n */\r\nfunction traverseStaticChildren(n1, n2, shallow = false) {\r\n    const ch1 = n1.children;\r\n    const ch2 = n2.children;\r\n    if (isArray(ch1) && isArray(ch2)) {\r\n        for (let i = 0; i < ch1.length; i++) {\r\n            // this is only called in the optimized path so array children are\r\n            // guaranteed to be vnodes\r\n            const c1 = ch1[i];\r\n            let c2 = ch2[i];\r\n            if (c2.shapeFlag & 1 /* ELEMENT */ && !c2.dynamicChildren) {\r\n                if (c2.patchFlag <= 0 || c2.patchFlag === 32 /* HYDRATE_EVENTS */) {\r\n                    c2 = ch2[i] = cloneIfMounted(ch2[i]);\r\n                    c2.el = c1.el;\r\n                }\r\n                if (!shallow)\r\n                    traverseStaticChildren(c1, c2);\r\n            }\r\n            // also inherit for comment nodes, but not placeholders (e.g. v-if which\r\n            // would have received .el during block patch)\r\n            if ((process.env.NODE_ENV !== 'production') && c2.type === Comment && !c2.el) {\r\n                c2.el = c1.el;\r\n            }\r\n        }\r\n    }\r\n}\r\n// https://en.wikipedia.org/wiki/Longest_increasing_subsequence\r\nfunction getSequence(arr) {\r\n    const p = arr.slice();\r\n    const result = [0];\r\n    let i, j, u, v, c;\r\n    const len = arr.length;\r\n    for (i = 0; i < len; i++) {\r\n        const arrI = arr[i];\r\n        if (arrI !== 0) {\r\n            j = result[result.length - 1];\r\n            if (arr[j] < arrI) {\r\n                p[i] = j;\r\n                result.push(i);\r\n                continue;\r\n            }\r\n            u = 0;\r\n            v = result.length - 1;\r\n            while (u < v) {\r\n                c = ((u + v) / 2) | 0;\r\n                if (arr[result[c]] < arrI) {\r\n                    u = c + 1;\r\n                }\r\n                else {\r\n                    v = c;\r\n                }\r\n            }\r\n            if (arrI < arr[result[u]]) {\r\n                if (u > 0) {\r\n                    p[i] = result[u - 1];\r\n                }\r\n                result[u] = i;\r\n            }\r\n        }\r\n    }\r\n    u = result.length;\r\n    v = result[u - 1];\r\n    while (u-- > 0) {\r\n        result[u] = v;\r\n        v = p[v];\r\n    }\r\n    return result;\r\n}\n\nconst isTeleport = (type) => type.__isTeleport;\r\nconst isTeleportDisabled = (props) => props && (props.disabled || props.disabled === '');\r\nconst isTargetSVG = (target) => typeof SVGElement !== 'undefined' && target instanceof SVGElement;\r\nconst resolveTarget = (props, select) => {\r\n    const targetSelector = props && props.to;\r\n    if (isString(targetSelector)) {\r\n        if (!select) {\r\n            (process.env.NODE_ENV !== 'production') &&\r\n                warn(`Current renderer does not support string target for Teleports. ` +\r\n                    `(missing querySelector renderer option)`);\r\n            return null;\r\n        }\r\n        else {\r\n            const target = select(targetSelector);\r\n            if (!target) {\r\n                (process.env.NODE_ENV !== 'production') &&\r\n                    warn(`Failed to locate Teleport target with selector \"${targetSelector}\". ` +\r\n                        `Note the target element must exist before the component is mounted - ` +\r\n                        `i.e. the target cannot be rendered by the component itself, and ` +\r\n                        `ideally should be outside of the entire Vue component tree.`);\r\n            }\r\n            return target;\r\n        }\r\n    }\r\n    else {\r\n        if ((process.env.NODE_ENV !== 'production') && !targetSelector && !isTeleportDisabled(props)) {\r\n            warn(`Invalid Teleport target: ${targetSelector}`);\r\n        }\r\n        return targetSelector;\r\n    }\r\n};\r\nconst TeleportImpl = {\r\n    __isTeleport: true,\r\n    process(n1, n2, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized, internals) {\r\n        const { mc: mountChildren, pc: patchChildren, pbc: patchBlockChildren, o: { insert, querySelector, createText, createComment } } = internals;\r\n        const disabled = isTeleportDisabled(n2.props);\r\n        const { shapeFlag, children } = n2;\r\n        // #3302\r\n        // HMR updated, force full diff\r\n        if ((process.env.NODE_ENV !== 'production') && isHmrUpdating) {\r\n            optimized = false;\r\n            n2.dynamicChildren = null;\r\n        }\r\n        if (n1 == null) {\r\n            // insert anchors in the main view\r\n            const placeholder = (n2.el = (process.env.NODE_ENV !== 'production')\r\n                ? createComment('teleport start')\r\n                : createText(''));\r\n            const mainAnchor = (n2.anchor = (process.env.NODE_ENV !== 'production')\r\n                ? createComment('teleport end')\r\n                : createText(''));\r\n            insert(placeholder, container, anchor);\r\n            insert(mainAnchor, container, anchor);\r\n            const target = (n2.target = resolveTarget(n2.props, querySelector));\r\n            const targetAnchor = (n2.targetAnchor = createText(''));\r\n            if (target) {\r\n                insert(targetAnchor, target);\r\n                // #2652 we could be teleporting from a non-SVG tree into an SVG tree\r\n                isSVG = isSVG || isTargetSVG(target);\r\n            }\r\n            else if ((process.env.NODE_ENV !== 'production') && !disabled) {\r\n                warn('Invalid Teleport target on mount:', target, `(${typeof target})`);\r\n            }\r\n            const mount = (container, anchor) => {\r\n                // Teleport *always* has Array children. This is enforced in both the\r\n                // compiler and vnode children normalization.\r\n                if (shapeFlag & 16 /* ARRAY_CHILDREN */) {\r\n                    mountChildren(children, container, anchor, parentComponent, parentSuspense, isSVG, slotScopeIds, optimized);\r\n                }\r\n            };\r\n            if (disabled) {\r\n                mount(container, mainAnchor);\r\n            }\r\n            else if (target) {\r\n                mount(target, targetAnchor);\r\n            }\r\n        }\r\n        else {\r\n            // update content\r\n            n2.el = n1.el;\r\n            const mainAnchor = (n2.anchor = n1.anchor);\r\n            const target = (n2.target = n1.target);\r\n            const targetAnchor = (n2.targetAnchor = n1.targetAnchor);\r\n            const wasDisabled = isTeleportDisabled(n1.props);\r\n            const currentContainer = wasDisabled ? container : target;\r\n            const currentAnchor = wasDisabled ? mainAnchor : targetAnchor;\r\n            isSVG = isSVG || isTargetSVG(target);\r\n            if (n2.dynamicChildren) {\r\n                // fast path when the teleport happens to be a block root\r\n                patchBlockChildren(n1.dynamicChildren, n2.dynamicChildren, currentContainer, parentComponent, parentSuspense, isSVG, slotScopeIds);\r\n                // even in block tree mode we need to make sure all root-level nodes\r\n                // in the teleport inherit previous DOM references so that they can\r\n                // be moved in future patches.\r\n                traverseStaticChildren(n1, n2, true);\r\n            }\r\n            else if (!optimized) {\r\n                patchChildren(n1, n2, currentContainer, currentAnchor, parentComponent, parentSuspense, isSVG, slotScopeIds, false);\r\n            }\r\n            if (disabled) {\r\n                if (!wasDisabled) {\r\n                    // enabled -> disabled\r\n                    // move into main container\r\n                    moveTeleport(n2, container, mainAnchor, internals, 1 /* TOGGLE */);\r\n                }\r\n            }\r\n            else {\r\n                // target changed\r\n                if ((n2.props && n2.props.to) !== (n1.props && n1.props.to)) {\r\n                    const nextTarget = (n2.target = resolveTarget(n2.props, querySelector));\r\n                    if (nextTarget) {\r\n                        moveTeleport(n2, nextTarget, null, internals, 0 /* TARGET_CHANGE */);\r\n                    }\r\n                    else if ((process.env.NODE_ENV !== 'production')) {\r\n                        warn('Invalid Teleport target on update:', target, `(${typeof target})`);\r\n                    }\r\n                }\r\n                else if (wasDisabled) {\r\n                    // disabled -> enabled\r\n                    // move into teleport target\r\n                    moveTeleport(n2, target, targetAnchor, internals, 1 /* TOGGLE */);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    remove(vnode, parentComponent, parentSuspense, optimized, { um: unmount, o: { remove: hostRemove } }, doRemove) {\r\n        const { shapeFlag, children, anchor, targetAnchor, target, props } = vnode;\r\n        if (target) {\r\n            hostRemove(targetAnchor);\r\n        }\r\n        // an unmounted teleport should always remove its children if not disabled\r\n        if (doRemove || !isTeleportDisabled(props)) {\r\n            hostRemove(anchor);\r\n            if (shapeFlag & 16 /* ARRAY_CHILDREN */) {\r\n                for (let i = 0; i < children.length; i++) {\r\n                    unmount(children[i], parentComponent, parentSuspense, true, optimized);\r\n                }\r\n            }\r\n        }\r\n    },\r\n    move: moveTeleport,\r\n    hydrate: hydrateTeleport\r\n};\r\nfunction moveTeleport(vnode, container, parentAnchor, { o: { insert }, m: move }, moveType = 2 /* REORDER */) {\r\n    // move target anchor if this is a target change.\r\n    if (moveType === 0 /* TARGET_CHANGE */) {\r\n        insert(vnode.targetAnchor, container, parentAnchor);\r\n    }\r\n    const { el, anchor, shapeFlag, children, props } = vnode;\r\n    const isReorder = moveType === 2 /* REORDER */;\r\n    // move main view anchor if this is a re-order.\r\n    if (isReorder) {\r\n        insert(el, container, parentAnchor);\r\n    }\r\n    // if this is a re-order and teleport is enabled (content is in target)\r\n    // do not move children. So the opposite is: only move children if this\r\n    // is not a reorder, or the teleport is disabled\r\n    if (!isReorder || isTeleportDisabled(props)) {\r\n        // Teleport has either Array children or no children.\r\n        if (shapeFlag & 16 /* ARRAY_CHILDREN */) {\r\n            for (let i = 0; i < children.length; i++) {\r\n                move(children[i], container, parentAnchor, 2 /* REORDER */);\r\n            }\r\n        }\r\n    }\r\n    // move main view anchor if this is a re-order.\r\n    if (isReorder) {\r\n        insert(anchor, container, parentAnchor);\r\n    }\r\n}\r\nfunction hydrateTeleport(node, vnode, parentComponent, parentSuspense, slotScopeIds, optimized, { o: { nextSibling, parentNode, querySelector } }, hydrateChildren) {\r\n    const target = (vnode.target = resolveTarget(vnode.props, querySelector));\r\n    if (target) {\r\n        // if multiple teleports rendered to the same target element, we need to\r\n        // pick up from where the last teleport finished instead of the first node\r\n        const targetNode = target._lpa || target.firstChild;\r\n        if (vnode.shapeFlag & 16 /* ARRAY_CHILDREN */) {\r\n            if (isTeleportDisabled(vnode.props)) {\r\n                vnode.anchor = hydrateChildren(nextSibling(node), vnode, parentNode(node), parentComponent, parentSuspense, slotScopeIds, optimized);\r\n                vnode.targetAnchor = targetNode;\r\n            }\r\n            else {\r\n                vnode.anchor = nextSibling(node);\r\n                vnode.targetAnchor = hydrateChildren(targetNode, vnode, target, parentComponent, parentSuspense, slotScopeIds, optimized);\r\n            }\r\n            target._lpa =\r\n                vnode.targetAnchor && nextSibling(vnode.targetAnchor);\r\n        }\r\n    }\r\n    return vnode.anchor && nextSibling(vnode.anchor);\r\n}\r\n// Force-casted public typing for h and TSX props inference\r\nconst Teleport = TeleportImpl;\n\nconst COMPONENTS = 'components';\r\nconst DIRECTIVES = 'directives';\r\n/**\r\n * @private\r\n */\r\nfunction resolveComponent(name, maybeSelfReference) {\r\n    return resolveAsset(COMPONENTS, name, true, maybeSelfReference) || name;\r\n}\r\nconst NULL_DYNAMIC_COMPONENT = Symbol();\r\n/**\r\n * @private\r\n */\r\nfunction resolveDynamicComponent(component) {\r\n    if (isString(component)) {\r\n        return resolveAsset(COMPONENTS, component, false) || component;\r\n    }\r\n    else {\r\n        // invalid types will fallthrough to createVNode and raise warning\r\n        return (component || NULL_DYNAMIC_COMPONENT);\r\n    }\r\n}\r\n/**\r\n * @private\r\n */\r\nfunction resolveDirective(name) {\r\n    return resolveAsset(DIRECTIVES, name);\r\n}\r\n// implementation\r\nfunction resolveAsset(type, name, warnMissing = true, maybeSelfReference = false) {\r\n    const instance = currentRenderingInstance || currentInstance;\r\n    if (instance) {\r\n        const Component = instance.type;\r\n        // explicit self name has highest priority\r\n        if (type === COMPONENTS) {\r\n            const selfName = getComponentName(Component);\r\n            if (selfName &&\r\n                (selfName === name ||\r\n                    selfName === camelize(name) ||\r\n                    selfName === capitalize(camelize(name)))) {\r\n                return Component;\r\n            }\r\n        }\r\n        const res = \r\n        // local registration\r\n        // check instance[type] first for components with mixin or extends.\r\n        resolve(instance[type] || Component[type], name) ||\r\n            // global registration\r\n            resolve(instance.appContext[type], name);\r\n        if (!res && maybeSelfReference) {\r\n            // fallback to implicit self-reference\r\n            return Component;\r\n        }\r\n        if ((process.env.NODE_ENV !== 'production') && warnMissing && !res) {\r\n            warn(`Failed to resolve ${type.slice(0, -1)}: ${name}`);\r\n        }\r\n        return res;\r\n    }\r\n    else if ((process.env.NODE_ENV !== 'production')) {\r\n        warn(`resolve${capitalize(type.slice(0, -1))} ` +\r\n            `can only be used in render() or setup().`);\r\n    }\r\n}\r\nfunction resolve(registry, name) {\r\n    return (registry &&\r\n        (registry[name] ||\r\n            registry[camelize(name)] ||\r\n            registry[capitalize(camelize(name))]));\r\n}\n\nconst Fragment = Symbol((process.env.NODE_ENV !== 'production') ? 'Fragment' : undefined);\r\nconst Text = Symbol((process.env.NODE_ENV !== 'production') ? 'Text' : undefined);\r\nconst Comment = Symbol((process.env.NODE_ENV !== 'production') ? 'Comment' : undefined);\r\nconst Static = Symbol((process.env.NODE_ENV !== 'production') ? 'Static' : undefined);\r\n// Since v-if and v-for are the two possible ways node structure can dynamically\r\n// change, once we consider v-if branches and each v-for fragment a block, we\r\n// can divide a template into nested blocks, and within each block the node\r\n// structure would be stable. This allows us to skip most children diffing\r\n// and only worry about the dynamic nodes (indicated by patch flags).\r\nconst blockStack = [];\r\nlet currentBlock = null;\r\n/**\r\n * Open a block.\r\n * This must be called before `createBlock`. It cannot be part of `createBlock`\r\n * because the children of the block are evaluated before `createBlock` itself\r\n * is called. The generated code typically looks like this:\r\n *\r\n * ```js\r\n * function render() {\r\n *   return (openBlock(),createBlock('div', null, [...]))\r\n * }\r\n * ```\r\n * disableTracking is true when creating a v-for fragment block, since a v-for\r\n * fragment always diffs its children.\r\n *\r\n * @private\r\n */\r\nfunction openBlock(disableTracking = false) {\r\n    blockStack.push((currentBlock = disableTracking ? null : []));\r\n}\r\nfunction closeBlock() {\r\n    blockStack.pop();\r\n    currentBlock = blockStack[blockStack.length - 1] || null;\r\n}\r\n// Whether we should be tracking dynamic child nodes inside a block.\r\n// Only tracks when this value is > 0\r\n// We are not using a simple boolean because this value may need to be\r\n// incremented/decremented by nested usage of v-once (see below)\r\nlet shouldTrack = 1;\r\n/**\r\n * Block tracking sometimes needs to be disabled, for example during the\r\n * creation of a tree that needs to be cached by v-once. The compiler generates\r\n * code like this:\r\n *\r\n * ``` js\r\n * _cache[1] || (\r\n *   setBlockTracking(-1),\r\n *   _cache[1] = createVNode(...),\r\n *   setBlockTracking(1),\r\n *   _cache[1]\r\n * )\r\n * ```\r\n *\r\n * @private\r\n */\r\nfunction setBlockTracking(value) {\r\n    shouldTrack += value;\r\n}\r\n/**\r\n * Create a block root vnode. Takes the same exact arguments as `createVNode`.\r\n * A block root keeps track of dynamic nodes within the block in the\r\n * `dynamicChildren` array.\r\n *\r\n * @private\r\n */\r\nfunction createBlock(type, props, children, patchFlag, dynamicProps) {\r\n    const vnode = createVNode(type, props, children, patchFlag, dynamicProps, true /* isBlock: prevent a block from tracking itself */);\r\n    // save current block children on the block vnode\r\n    vnode.dynamicChildren = currentBlock || EMPTY_ARR;\r\n    // close block\r\n    closeBlock();\r\n    // a block is always going to be patched, so track it as a child of its\r\n    // parent block\r\n    if (shouldTrack > 0 && currentBlock) {\r\n        currentBlock.push(vnode);\r\n    }\r\n    return vnode;\r\n}\r\nfunction isVNode(value) {\r\n    return value ? value.__v_isVNode === true : false;\r\n}\r\nfunction isSameVNodeType(n1, n2) {\r\n    if ((process.env.NODE_ENV !== 'production') &&\r\n        n2.shapeFlag & 6 /* COMPONENT */ &&\r\n        hmrDirtyComponents.has(n2.type)) {\r\n        // HMR only: if the component has been hot-updated, force a reload.\r\n        return false;\r\n    }\r\n    return n1.type === n2.type && n1.key === n2.key;\r\n}\r\nlet vnodeArgsTransformer;\r\n/**\r\n * Internal API for registering an arguments transform for createVNode\r\n * used for creating stubs in the test-utils\r\n * It is *internal* but needs to be exposed for test-utils to pick up proper\r\n * typings\r\n */\r\nfunction transformVNodeArgs(transformer) {\r\n    vnodeArgsTransformer = transformer;\r\n}\r\nconst createVNodeWithArgsTransform = (...args) => {\r\n    return _createVNode(...(vnodeArgsTransformer\r\n        ? vnodeArgsTransformer(args, currentRenderingInstance)\r\n        : args));\r\n};\r\nconst InternalObjectKey = `__vInternal`;\r\nconst normalizeKey = ({ key }) => key != null ? key : null;\r\nconst normalizeRef = ({ ref }) => {\r\n    return (ref != null\r\n        ? isString(ref) || isRef(ref) || isFunction(ref)\r\n            ? { i: currentRenderingInstance, r: ref }\r\n            : ref\r\n        : null);\r\n};\r\nconst createVNode = ((process.env.NODE_ENV !== 'production')\r\n    ? createVNodeWithArgsTransform\r\n    : _createVNode);\r\nfunction _createVNode(type, props = null, children = null, patchFlag = 0, dynamicProps = null, isBlockNode = false) {\r\n    if (!type || type === NULL_DYNAMIC_COMPONENT) {\r\n        if ((process.env.NODE_ENV !== 'production') && !type) {\r\n            warn(`Invalid vnode type when creating vnode: ${type}.`);\r\n        }\r\n        type = Comment;\r\n    }\r\n    if (isVNode(type)) {\r\n        // createVNode receiving an existing vnode. This happens in cases like\r\n        // <component :is=\"vnode\"/>\r\n        // #2078 make sure to merge refs during the clone instead of overwriting it\r\n        const cloned = cloneVNode(type, props, true /* mergeRef: true */);\r\n        if (children) {\r\n            normalizeChildren(cloned, children);\r\n        }\r\n        return cloned;\r\n    }\r\n    // class component normalization.\r\n    if (isClassComponent(type)) {\r\n        type = type.__vccOpts;\r\n    }\r\n    // class & style normalization.\r\n    if (props) {\r\n        // for reactive or proxy objects, we need to clone it to enable mutation.\r\n        if (isProxy(props) || InternalObjectKey in props) {\r\n            props = extend({}, props);\r\n        }\r\n        let { class: klass, style } = props;\r\n        if (klass && !isString(klass)) {\r\n            props.class = normalizeClass(klass);\r\n        }\r\n        if (isObject(style)) {\r\n            // reactive state objects need to be cloned since they are likely to be\r\n            // mutated\r\n            if (isProxy(style) && !isArray(style)) {\r\n                style = extend({}, style);\r\n            }\r\n            props.style = normalizeStyle(style);\r\n        }\r\n    }\r\n    // encode the vnode type information into a bitmap\r\n    const shapeFlag = isString(type)\r\n        ? 1 /* ELEMENT */\r\n        : isSuspense(type)\r\n            ? 128 /* SUSPENSE */\r\n            : isTeleport(type)\r\n                ? 64 /* TELEPORT */\r\n                : isObject(type)\r\n                    ? 4 /* STATEFUL_COMPONENT */\r\n                    : isFunction(type)\r\n                        ? 2 /* FUNCTIONAL_COMPONENT */\r\n                        : 0;\r\n    if ((process.env.NODE_ENV !== 'production') && shapeFlag & 4 /* STATEFUL_COMPONENT */ && isProxy(type)) {\r\n        type = toRaw(type);\r\n        warn(`Vue received a Component which was made a reactive object. This can ` +\r\n            `lead to unnecessary performance overhead, and should be avoided by ` +\r\n            `marking the component with \\`markRaw\\` or using \\`shallowRef\\` ` +\r\n            `instead of \\`ref\\`.`, `\\nComponent that was made reactive: `, type);\r\n    }\r\n    const vnode = {\r\n        __v_isVNode: true,\r\n        [\"__v_skip\" /* SKIP */]: true,\r\n        type,\r\n        props,\r\n        key: props && normalizeKey(props),\r\n        ref: props && normalizeRef(props),\r\n        scopeId: currentScopeId,\r\n        slotScopeIds: null,\r\n        children: null,\r\n        component: null,\r\n        suspense: null,\r\n        ssContent: null,\r\n        ssFallback: null,\r\n        dirs: null,\r\n        transition: null,\r\n        el: null,\r\n        anchor: null,\r\n        target: null,\r\n        targetAnchor: null,\r\n        staticCount: 0,\r\n        shapeFlag,\r\n        patchFlag,\r\n        dynamicProps,\r\n        dynamicChildren: null,\r\n        appContext: null\r\n    };\r\n    // validate key\r\n    if ((process.env.NODE_ENV !== 'production') && vnode.key !== vnode.key) {\r\n        warn(`VNode created with invalid key (NaN). VNode type:`, vnode.type);\r\n    }\r\n    normalizeChildren(vnode, children);\r\n    // normalize suspense children\r\n    if (shapeFlag & 128 /* SUSPENSE */) {\r\n        const { content, fallback } = normalizeSuspenseChildren(vnode);\r\n        vnode.ssContent = content;\r\n        vnode.ssFallback = fallback;\r\n    }\r\n    if (shouldTrack > 0 &&\r\n        // avoid a block node from tracking itself\r\n        !isBlockNode &&\r\n        // has current parent block\r\n        currentBlock &&\r\n        // presence of a patch flag indicates this node needs patching on updates.\r\n        // component nodes also should always be patched, because even if the\r\n        // component doesn't need to update, it needs to persist the instance on to\r\n        // the next vnode so that it can be properly unmounted later.\r\n        (patchFlag > 0 || shapeFlag & 6 /* COMPONENT */) &&\r\n        // the EVENTS flag is only for hydration and if it is the only flag, the\r\n        // vnode should not be considered dynamic due to handler caching.\r\n        patchFlag !== 32 /* HYDRATE_EVENTS */) {\r\n        currentBlock.push(vnode);\r\n    }\r\n    return vnode;\r\n}\r\nfunction cloneVNode(vnode, extraProps, mergeRef = false) {\r\n    // This is intentionally NOT using spread or extend to avoid the runtime\r\n    // key enumeration cost.\r\n    const { props, ref, patchFlag, children } = vnode;\r\n    const mergedProps = extraProps ? mergeProps(props || {}, extraProps) : props;\r\n    return {\r\n        __v_isVNode: true,\r\n        [\"__v_skip\" /* SKIP */]: true,\r\n        type: vnode.type,\r\n        props: mergedProps,\r\n        key: mergedProps && normalizeKey(mergedProps),\r\n        ref: extraProps && extraProps.ref\r\n            ? // #2078 in the case of <component :is=\"vnode\" ref=\"extra\"/>\r\n                // if the vnode itself already has a ref, cloneVNode will need to merge\r\n                // the refs so the single vnode can be set on multiple refs\r\n                mergeRef && ref\r\n                    ? isArray(ref)\r\n                        ? ref.concat(normalizeRef(extraProps))\r\n                        : [ref, normalizeRef(extraProps)]\r\n                    : normalizeRef(extraProps)\r\n            : ref,\r\n        scopeId: vnode.scopeId,\r\n        slotScopeIds: vnode.slotScopeIds,\r\n        children: (process.env.NODE_ENV !== 'production') && patchFlag === -1 /* HOISTED */ && isArray(children)\r\n            ? children.map(deepCloneVNode)\r\n            : children,\r\n        target: vnode.target,\r\n        targetAnchor: vnode.targetAnchor,\r\n        staticCount: vnode.staticCount,\r\n        shapeFlag: vnode.shapeFlag,\r\n        // if the vnode is cloned with extra props, we can no longer assume its\r\n        // existing patch flag to be reliable and need to add the FULL_PROPS flag.\r\n        // note: perserve flag for fragments since they use the flag for children\r\n        // fast paths only.\r\n        patchFlag: extraProps && vnode.type !== Fragment\r\n            ? patchFlag === -1 // hoisted node\r\n                ? 16 /* FULL_PROPS */\r\n                : patchFlag | 16 /* FULL_PROPS */\r\n            : patchFlag,\r\n        dynamicProps: vnode.dynamicProps,\r\n        dynamicChildren: vnode.dynamicChildren,\r\n        appContext: vnode.appContext,\r\n        dirs: vnode.dirs,\r\n        transition: vnode.transition,\r\n        // These should technically only be non-null on mounted VNodes. However,\r\n        // they *should* be copied for kept-alive vnodes. So we just always copy\r\n        // them since them being non-null during a mount doesn't affect the logic as\r\n        // they will simply be overwritten.\r\n        component: vnode.component,\r\n        suspense: vnode.suspense,\r\n        ssContent: vnode.ssContent && cloneVNode(vnode.ssContent),\r\n        ssFallback: vnode.ssFallback && cloneVNode(vnode.ssFallback),\r\n        el: vnode.el,\r\n        anchor: vnode.anchor\r\n    };\r\n}\r\n/**\r\n * Dev only, for HMR of hoisted vnodes reused in v-for\r\n * https://github.com/vitejs/vite/issues/2022\r\n */\r\nfunction deepCloneVNode(vnode) {\r\n    const cloned = cloneVNode(vnode);\r\n    if (isArray(vnode.children)) {\r\n        cloned.children = vnode.children.map(deepCloneVNode);\r\n    }\r\n    return cloned;\r\n}\r\n/**\r\n * @private\r\n */\r\nfunction createTextVNode(text = ' ', flag = 0) {\r\n    return createVNode(Text, null, text, flag);\r\n}\r\n/**\r\n * @private\r\n */\r\nfunction createStaticVNode(content, numberOfNodes) {\r\n    // A static vnode can contain multiple stringified elements, and the number\r\n    // of elements is necessary for hydration.\r\n    const vnode = createVNode(Static, null, content);\r\n    vnode.staticCount = numberOfNodes;\r\n    return vnode;\r\n}\r\n/**\r\n * @private\r\n */\r\nfunction createCommentVNode(text = '', \r\n// when used as the v-else branch, the comment node must be created as a\r\n// block to ensure correct updates.\r\nasBlock = false) {\r\n    return asBlock\r\n        ? (openBlock(), createBlock(Comment, null, text))\r\n        : createVNode(Comment, null, text);\r\n}\r\nfunction normalizeVNode(child) {\r\n    if (child == null || typeof child === 'boolean') {\r\n        // empty placeholder\r\n        return createVNode(Comment);\r\n    }\r\n    else if (isArray(child)) {\r\n        // fragment\r\n        return createVNode(Fragment, null, child);\r\n    }\r\n    else if (typeof child === 'object') {\r\n        // already vnode, this should be the most common since compiled templates\r\n        // always produce all-vnode children arrays\r\n        return child.el === null ? child : cloneVNode(child);\r\n    }\r\n    else {\r\n        // strings and numbers\r\n        return createVNode(Text, null, String(child));\r\n    }\r\n}\r\n// optimized normalization for template-compiled render fns\r\nfunction cloneIfMounted(child) {\r\n    return child.el === null ? child : cloneVNode(child);\r\n}\r\nfunction normalizeChildren(vnode, children) {\r\n    let type = 0;\r\n    const { shapeFlag } = vnode;\r\n    if (children == null) {\r\n        children = null;\r\n    }\r\n    else if (isArray(children)) {\r\n        type = 16 /* ARRAY_CHILDREN */;\r\n    }\r\n    else if (typeof children === 'object') {\r\n        if (shapeFlag & 1 /* ELEMENT */ || shapeFlag & 64 /* TELEPORT */) {\r\n            // Normalize slot to plain children for plain element and Teleport\r\n            const slot = children.default;\r\n            if (slot) {\r\n                // _c marker is added by withCtx() indicating this is a compiled slot\r\n                slot._c && setCompiledSlotRendering(1);\r\n                normalizeChildren(vnode, slot());\r\n                slot._c && setCompiledSlotRendering(-1);\r\n            }\r\n            return;\r\n        }\r\n        else {\r\n            type = 32 /* SLOTS_CHILDREN */;\r\n            const slotFlag = children._;\r\n            if (!slotFlag && !(InternalObjectKey in children)) {\r\n                children._ctx = currentRenderingInstance;\r\n            }\r\n            else if (slotFlag === 3 /* FORWARDED */ && currentRenderingInstance) {\r\n                // a child component receives forwarded slots from the parent.\r\n                // its slot type is determined by its parent's slot type.\r\n                if (currentRenderingInstance.vnode.patchFlag & 1024 /* DYNAMIC_SLOTS */) {\r\n                    children._ = 2 /* DYNAMIC */;\r\n                    vnode.patchFlag |= 1024 /* DYNAMIC_SLOTS */;\r\n                }\r\n                else {\r\n                    children._ = 1 /* STABLE */;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else if (isFunction(children)) {\r\n        children = { default: children, _ctx: currentRenderingInstance };\r\n        type = 32 /* SLOTS_CHILDREN */;\r\n    }\r\n    else {\r\n        children = String(children);\r\n        // force teleport children to array so it can be moved around\r\n        if (shapeFlag & 64 /* TELEPORT */) {\r\n            type = 16 /* ARRAY_CHILDREN */;\r\n            children = [createTextVNode(children)];\r\n        }\r\n        else {\r\n            type = 8 /* TEXT_CHILDREN */;\r\n        }\r\n    }\r\n    vnode.children = children;\r\n    vnode.shapeFlag |= type;\r\n}\r\nfunction mergeProps(...args) {\r\n    const ret = extend({}, args[0]);\r\n    for (let i = 1; i < args.length; i++) {\r\n        const toMerge = args[i];\r\n        for (const key in toMerge) {\r\n            if (key === 'class') {\r\n                if (ret.class !== toMerge.class) {\r\n                    ret.class = normalizeClass([ret.class, toMerge.class]);\r\n                }\r\n            }\r\n            else if (key === 'style') {\r\n                ret.style = normalizeStyle([ret.style, toMerge.style]);\r\n            }\r\n            else if (isOn(key)) {\r\n                const existing = ret[key];\r\n                const incoming = toMerge[key];\r\n                if (existing !== incoming) {\r\n                    ret[key] = existing\r\n                        ? [].concat(existing, toMerge[key])\r\n                        : incoming;\r\n                }\r\n            }\r\n            else if (key !== '') {\r\n                ret[key] = toMerge[key];\r\n            }\r\n        }\r\n    }\r\n    return ret;\r\n}\n\nfunction provide(key, value) {\r\n    if (!currentInstance) {\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            warn(`provide() can only be used inside setup().`);\r\n        }\r\n    }\r\n    else {\r\n        let provides = currentInstance.provides;\r\n        // by default an instance inherits its parent's provides object\r\n        // but when it needs to provide values of its own, it creates its\r\n        // own provides object using parent provides object as prototype.\r\n        // this way in `inject` we can simply look up injections from direct\r\n        // parent and let the prototype chain do the work.\r\n        const parentProvides = currentInstance.parent && currentInstance.parent.provides;\r\n        if (parentProvides === provides) {\r\n            provides = currentInstance.provides = Object.create(parentProvides);\r\n        }\r\n        // TS doesn't allow symbol as index type\r\n        provides[key] = value;\r\n    }\r\n}\r\nfunction inject(key, defaultValue, treatDefaultAsFactory = false) {\r\n    // fallback to `currentRenderingInstance` so that this can be called in\r\n    // a functional component\r\n    const instance = currentInstance || currentRenderingInstance;\r\n    if (instance) {\r\n        // #2400\r\n        // to support `app.use` plugins,\r\n        // fallback to appContext's `provides` if the intance is at root\r\n        const provides = instance.parent == null\r\n            ? instance.vnode.appContext && instance.vnode.appContext.provides\r\n            : instance.parent.provides;\r\n        if (provides && key in provides) {\r\n            // TS doesn't allow symbol as index type\r\n            return provides[key];\r\n        }\r\n        else if (arguments.length > 1) {\r\n            return treatDefaultAsFactory && isFunction(defaultValue)\r\n                ? defaultValue()\r\n                : defaultValue;\r\n        }\r\n        else if ((process.env.NODE_ENV !== 'production')) {\r\n            warn(`injection \"${String(key)}\" not found.`);\r\n        }\r\n    }\r\n    else if ((process.env.NODE_ENV !== 'production')) {\r\n        warn(`inject() can only be used inside setup() or functional components.`);\r\n    }\r\n}\n\nfunction createDuplicateChecker() {\r\n    const cache = Object.create(null);\r\n    return (type, key) => {\r\n        if (cache[key]) {\r\n            warn(`${type} property \"${key}\" is already defined in ${cache[key]}.`);\r\n        }\r\n        else {\r\n            cache[key] = type;\r\n        }\r\n    };\r\n}\r\nlet shouldCacheAccess = true;\r\nfunction applyOptions(instance, options, deferredData = [], deferredWatch = [], deferredProvide = [], asMixin = false) {\r\n    const { \r\n    // composition\r\n    mixins, extends: extendsOptions, \r\n    // state\r\n    data: dataOptions, computed: computedOptions, methods, watch: watchOptions, provide: provideOptions, inject: injectOptions, \r\n    // assets\r\n    components, directives, \r\n    // lifecycle\r\n    beforeMount, mounted, beforeUpdate, updated, activated, deactivated, beforeDestroy, beforeUnmount, destroyed, unmounted, render, renderTracked, renderTriggered, errorCaptured, \r\n    // public API\r\n    expose } = options;\r\n    const publicThis = instance.proxy;\r\n    const ctx = instance.ctx;\r\n    const globalMixins = instance.appContext.mixins;\r\n    if (asMixin && render && instance.render === NOOP) {\r\n        instance.render = render;\r\n    }\r\n    // applyOptions is called non-as-mixin once per instance\r\n    if (!asMixin) {\r\n        shouldCacheAccess = false;\r\n        callSyncHook('beforeCreate', \"bc\" /* BEFORE_CREATE */, options, instance, globalMixins);\r\n        shouldCacheAccess = true;\r\n        // global mixins are applied first\r\n        applyMixins(instance, globalMixins, deferredData, deferredWatch, deferredProvide);\r\n    }\r\n    // extending a base component...\r\n    if (extendsOptions) {\r\n        applyOptions(instance, extendsOptions, deferredData, deferredWatch, deferredProvide, true);\r\n    }\r\n    // local mixins\r\n    if (mixins) {\r\n        applyMixins(instance, mixins, deferredData, deferredWatch, deferredProvide);\r\n    }\r\n    const checkDuplicateProperties = (process.env.NODE_ENV !== 'production') ? createDuplicateChecker() : null;\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        const [propsOptions] = instance.propsOptions;\r\n        if (propsOptions) {\r\n            for (const key in propsOptions) {\r\n                checkDuplicateProperties(\"Props\" /* PROPS */, key);\r\n            }\r\n        }\r\n    }\r\n    // options initialization order (to be consistent with Vue 2):\r\n    // - props (already done outside of this function)\r\n    // - inject\r\n    // - methods\r\n    // - data (deferred since it relies on `this` access)\r\n    // - computed\r\n    // - watch (deferred since it relies on `this` access)\r\n    if (injectOptions) {\r\n        if (isArray(injectOptions)) {\r\n            for (let i = 0; i < injectOptions.length; i++) {\r\n                const key = injectOptions[i];\r\n                ctx[key] = inject(key);\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    checkDuplicateProperties(\"Inject\" /* INJECT */, key);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (const key in injectOptions) {\r\n                const opt = injectOptions[key];\r\n                if (isObject(opt)) {\r\n                    ctx[key] = inject(opt.from || key, opt.default, true /* treat default function as factory */);\r\n                }\r\n                else {\r\n                    ctx[key] = inject(opt);\r\n                }\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    checkDuplicateProperties(\"Inject\" /* INJECT */, key);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    if (methods) {\r\n        for (const key in methods) {\r\n            const methodHandler = methods[key];\r\n            if (isFunction(methodHandler)) {\r\n                // In dev mode, we use the `createRenderContext` function to define methods to the proxy target,\r\n                // and those are read-only but reconfigurable, so it needs to be redefined here\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    Object.defineProperty(ctx, key, {\r\n                        value: methodHandler.bind(publicThis),\r\n                        configurable: true,\r\n                        enumerable: true,\r\n                        writable: true\r\n                    });\r\n                }\r\n                else {\r\n                    ctx[key] = methodHandler.bind(publicThis);\r\n                }\r\n                if ((process.env.NODE_ENV !== 'production')) {\r\n                    checkDuplicateProperties(\"Methods\" /* METHODS */, key);\r\n                }\r\n            }\r\n            else if ((process.env.NODE_ENV !== 'production')) {\r\n                warn(`Method \"${key}\" has type \"${typeof methodHandler}\" in the component definition. ` +\r\n                    `Did you reference the function correctly?`);\r\n            }\r\n        }\r\n    }\r\n    if (!asMixin) {\r\n        if (deferredData.length) {\r\n            deferredData.forEach(dataFn => resolveData(instance, dataFn, publicThis));\r\n        }\r\n        if (dataOptions) {\r\n            // @ts-ignore dataOptions is not fully type safe\r\n            resolveData(instance, dataOptions, publicThis);\r\n        }\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            const rawData = toRaw(instance.data);\r\n            for (const key in rawData) {\r\n                checkDuplicateProperties(\"Data\" /* DATA */, key);\r\n                // expose data on ctx during dev\r\n                if (key[0] !== '$' && key[0] !== '_') {\r\n                    Object.defineProperty(ctx, key, {\r\n                        configurable: true,\r\n                        enumerable: true,\r\n                        get: () => rawData[key],\r\n                        set: NOOP\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else if (dataOptions) {\r\n        deferredData.push(dataOptions);\r\n    }\r\n    if (computedOptions) {\r\n        for (const key in computedOptions) {\r\n            const opt = computedOptions[key];\r\n            const get = isFunction(opt)\r\n                ? opt.bind(publicThis, publicThis)\r\n                : isFunction(opt.get)\r\n                    ? opt.get.bind(publicThis, publicThis)\r\n                    : NOOP;\r\n            if ((process.env.NODE_ENV !== 'production') && get === NOOP) {\r\n                warn(`Computed property \"${key}\" has no getter.`);\r\n            }\r\n            const set = !isFunction(opt) && isFunction(opt.set)\r\n                ? opt.set.bind(publicThis)\r\n                : (process.env.NODE_ENV !== 'production')\r\n                    ? () => {\r\n                        warn(`Write operation failed: computed property \"${key}\" is readonly.`);\r\n                    }\r\n                    : NOOP;\r\n            const c = computed({\r\n                get,\r\n                set\r\n            });\r\n            Object.defineProperty(ctx, key, {\r\n                enumerable: true,\r\n                configurable: true,\r\n                get: () => c.value,\r\n                set: v => (c.value = v)\r\n            });\r\n            if ((process.env.NODE_ENV !== 'production')) {\r\n                checkDuplicateProperties(\"Computed\" /* COMPUTED */, key);\r\n            }\r\n        }\r\n    }\r\n    if (watchOptions) {\r\n        deferredWatch.push(watchOptions);\r\n    }\r\n    if (!asMixin && deferredWatch.length) {\r\n        deferredWatch.forEach(watchOptions => {\r\n            for (const key in watchOptions) {\r\n                createWatcher(watchOptions[key], ctx, publicThis, key);\r\n            }\r\n        });\r\n    }\r\n    if (provideOptions) {\r\n        deferredProvide.push(provideOptions);\r\n    }\r\n    if (!asMixin && deferredProvide.length) {\r\n        deferredProvide.forEach(provideOptions => {\r\n            const provides = isFunction(provideOptions)\r\n                ? provideOptions.call(publicThis)\r\n                : provideOptions;\r\n            Reflect.ownKeys(provides).forEach(key => {\r\n                provide(key, provides[key]);\r\n            });\r\n        });\r\n    }\r\n    // asset options.\r\n    // To reduce memory usage, only components with mixins or extends will have\r\n    // resolved asset registry attached to instance.\r\n    if (asMixin) {\r\n        if (components) {\r\n            extend(instance.components ||\r\n                (instance.components = extend({}, instance.type.components)), components);\r\n        }\r\n        if (directives) {\r\n            extend(instance.directives ||\r\n                (instance.directives = extend({}, instance.type.directives)), directives);\r\n        }\r\n    }\r\n    // lifecycle options\r\n    if (!asMixin) {\r\n        callSyncHook('created', \"c\" /* CREATED */, options, instance, globalMixins);\r\n    }\r\n    if (beforeMount) {\r\n        onBeforeMount(beforeMount.bind(publicThis));\r\n    }\r\n    if (mounted) {\r\n        onMounted(mounted.bind(publicThis));\r\n    }\r\n    if (beforeUpdate) {\r\n        onBeforeUpdate(beforeUpdate.bind(publicThis));\r\n    }\r\n    if (updated) {\r\n        onUpdated(updated.bind(publicThis));\r\n    }\r\n    if (activated) {\r\n        onActivated(activated.bind(publicThis));\r\n    }\r\n    if (deactivated) {\r\n        onDeactivated(deactivated.bind(publicThis));\r\n    }\r\n    if (errorCaptured) {\r\n        onErrorCaptured(errorCaptured.bind(publicThis));\r\n    }\r\n    if (renderTracked) {\r\n        onRenderTracked(renderTracked.bind(publicThis));\r\n    }\r\n    if (renderTriggered) {\r\n        onRenderTriggered(renderTriggered.bind(publicThis));\r\n    }\r\n    if ((process.env.NODE_ENV !== 'production') && beforeDestroy) {\r\n        warn(`\\`beforeDestroy\\` has been renamed to \\`beforeUnmount\\`.`);\r\n    }\r\n    if (beforeUnmount) {\r\n        onBeforeUnmount(beforeUnmount.bind(publicThis));\r\n    }\r\n    if ((process.env.NODE_ENV !== 'production') && destroyed) {\r\n        warn(`\\`destroyed\\` has been renamed to \\`unmounted\\`.`);\r\n    }\r\n    if (unmounted) {\r\n        onUnmounted(unmounted.bind(publicThis));\r\n    }\r\n    if (isArray(expose)) {\r\n        if (!asMixin) {\r\n            if (expose.length) {\r\n                const exposed = instance.exposed || (instance.exposed = proxyRefs({}));\r\n                expose.forEach(key => {\r\n                    exposed[key] = toRef(publicThis, key);\r\n                });\r\n            }\r\n            else if (!instance.exposed) {\r\n                instance.exposed = EMPTY_OBJ;\r\n            }\r\n        }\r\n        else if ((process.env.NODE_ENV !== 'production')) {\r\n            warn(`The \\`expose\\` option is ignored when used in mixins.`);\r\n        }\r\n    }\r\n}\r\nfunction callSyncHook(name, type, options, instance, globalMixins) {\r\n    for (let i = 0; i < globalMixins.length; i++) {\r\n        callHookWithMixinAndExtends(name, type, globalMixins[i], instance);\r\n    }\r\n    callHookWithMixinAndExtends(name, type, options, instance);\r\n}\r\nfunction callHookWithMixinAndExtends(name, type, options, instance) {\r\n    const { extends: base, mixins } = options;\r\n    const selfHook = options[name];\r\n    if (base) {\r\n        callHookWithMixinAndExtends(name, type, base, instance);\r\n    }\r\n    if (mixins) {\r\n        for (let i = 0; i < mixins.length; i++) {\r\n            callHookWithMixinAndExtends(name, type, mixins[i], instance);\r\n        }\r\n    }\r\n    if (selfHook) {\r\n        callWithAsyncErrorHandling(selfHook.bind(instance.proxy), instance, type);\r\n    }\r\n}\r\nfunction applyMixins(instance, mixins, deferredData, deferredWatch, deferredProvide) {\r\n    for (let i = 0; i < mixins.length; i++) {\r\n        applyOptions(instance, mixins[i], deferredData, deferredWatch, deferredProvide, true);\r\n    }\r\n}\r\nfunction resolveData(instance, dataFn, publicThis) {\r\n    if ((process.env.NODE_ENV !== 'production') && !isFunction(dataFn)) {\r\n        warn(`The data option must be a function. ` +\r\n            `Plain object usage is no longer supported.`);\r\n    }\r\n    shouldCacheAccess = false;\r\n    const data = dataFn.call(publicThis, publicThis);\r\n    shouldCacheAccess = true;\r\n    if ((process.env.NODE_ENV !== 'production') && isPromise(data)) {\r\n        warn(`data() returned a Promise - note data() cannot be async; If you ` +\r\n            `intend to perform data fetching before component renders, use ` +\r\n            `async setup() + <Suspense>.`);\r\n    }\r\n    if (!isObject(data)) {\r\n        (process.env.NODE_ENV !== 'production') && warn(`data() should return an object.`);\r\n    }\r\n    else if (instance.data === EMPTY_OBJ) {\r\n        instance.data = reactive(data);\r\n    }\r\n    else {\r\n        // existing data: this is a mixin or extends.\r\n        extend(instance.data, data);\r\n    }\r\n}\r\nfunction createWatcher(raw, ctx, publicThis, key) {\r\n    const getter = key.includes('.')\r\n        ? createPathGetter(publicThis, key)\r\n        : () => publicThis[key];\r\n    if (isString(raw)) {\r\n        const handler = ctx[raw];\r\n        if (isFunction(handler)) {\r\n            watch(getter, handler);\r\n        }\r\n        else if ((process.env.NODE_ENV !== 'production')) {\r\n            warn(`Invalid watch handler specified by key \"${raw}\"`, handler);\r\n        }\r\n    }\r\n    else if (isFunction(raw)) {\r\n        watch(getter, raw.bind(publicThis));\r\n    }\r\n    else if (isObject(raw)) {\r\n        if (isArray(raw)) {\r\n            raw.forEach(r => createWatcher(r, ctx, publicThis, key));\r\n        }\r\n        else {\r\n            const handler = isFunction(raw.handler)\r\n                ? raw.handler.bind(publicThis)\r\n                : ctx[raw.handler];\r\n            if (isFunction(handler)) {\r\n                watch(getter, handler, raw);\r\n            }\r\n            else if ((process.env.NODE_ENV !== 'production')) {\r\n                warn(`Invalid watch handler specified by key \"${raw.handler}\"`, handler);\r\n            }\r\n        }\r\n    }\r\n    else if ((process.env.NODE_ENV !== 'production')) {\r\n        warn(`Invalid watch option: \"${key}\"`, raw);\r\n    }\r\n}\r\nfunction createPathGetter(ctx, path) {\r\n    const segments = path.split('.');\r\n    return () => {\r\n        let cur = ctx;\r\n        for (let i = 0; i < segments.length && cur; i++) {\r\n            cur = cur[segments[i]];\r\n        }\r\n        return cur;\r\n    };\r\n}\r\nfunction resolveMergedOptions(instance) {\r\n    const raw = instance.type;\r\n    const { __merged, mixins, extends: extendsOptions } = raw;\r\n    if (__merged)\r\n        return __merged;\r\n    const globalMixins = instance.appContext.mixins;\r\n    if (!globalMixins.length && !mixins && !extendsOptions)\r\n        return raw;\r\n    const options = {};\r\n    globalMixins.forEach(m => mergeOptions(options, m, instance));\r\n    mergeOptions(options, raw, instance);\r\n    return (raw.__merged = options);\r\n}\r\nfunction mergeOptions(to, from, instance) {\r\n    const strats = instance.appContext.config.optionMergeStrategies;\r\n    const { mixins, extends: extendsOptions } = from;\r\n    extendsOptions && mergeOptions(to, extendsOptions, instance);\r\n    mixins &&\r\n        mixins.forEach((m) => mergeOptions(to, m, instance));\r\n    for (const key in from) {\r\n        if (strats && hasOwn(strats, key)) {\r\n            to[key] = strats[key](to[key], from[key], instance.proxy, key);\r\n        }\r\n        else {\r\n            to[key] = from[key];\r\n        }\r\n    }\r\n}\n\n/**\r\n * #2437 In Vue 3, functional components do not have a public instance proxy but\r\n * they exist in the internal parent chain. For code that relies on traversing\r\n * public $parent chains, skip functional ones and go to the parent instead.\r\n */\r\nconst getPublicInstance = (i) => {\r\n    if (!i)\r\n        return null;\r\n    if (isStatefulComponent(i))\r\n        return i.exposed ? i.exposed : i.proxy;\r\n    return getPublicInstance(i.parent);\r\n};\r\nconst publicPropertiesMap = extend(Object.create(null), {\r\n    $: i => i,\r\n    $el: i => i.vnode.el,\r\n    $data: i => i.data,\r\n    $props: i => ((process.env.NODE_ENV !== 'production') ? shallowReadonly(i.props) : i.props),\r\n    $attrs: i => ((process.env.NODE_ENV !== 'production') ? shallowReadonly(i.attrs) : i.attrs),\r\n    $slots: i => ((process.env.NODE_ENV !== 'production') ? shallowReadonly(i.slots) : i.slots),\r\n    $refs: i => ((process.env.NODE_ENV !== 'production') ? shallowReadonly(i.refs) : i.refs),\r\n    $parent: i => getPublicInstance(i.parent),\r\n    $root: i => getPublicInstance(i.root),\r\n    $emit: i => i.emit,\r\n    $options: i => (__VUE_OPTIONS_API__ ? resolveMergedOptions(i) : i.type),\r\n    $forceUpdate: i => () => queueJob(i.update),\r\n    $nextTick: i => nextTick.bind(i.proxy),\r\n    $watch: i => (__VUE_OPTIONS_API__ ? instanceWatch.bind(i) : NOOP)\r\n});\r\nconst PublicInstanceProxyHandlers = {\r\n    get({ _: instance }, key) {\r\n        const { ctx, setupState, data, props, accessCache, type, appContext } = instance;\r\n        // let @vue/reactivity know it should never observe Vue public instances.\r\n        if (key === \"__v_skip\" /* SKIP */) {\r\n            return true;\r\n        }\r\n        // for internal formatters to know that this is a Vue instance\r\n        if ((process.env.NODE_ENV !== 'production') && key === '__isVue') {\r\n            return true;\r\n        }\r\n        // data / props / ctx\r\n        // This getter gets called for every property access on the render context\r\n        // during render and is a major hotspot. The most expensive part of this\r\n        // is the multiple hasOwn() calls. It's much faster to do a simple property\r\n        // access on a plain object, so we use an accessCache object (with null\r\n        // prototype) to memoize what access type a key corresponds to.\r\n        let normalizedProps;\r\n        if (key[0] !== '$') {\r\n            const n = accessCache[key];\r\n            if (n !== undefined) {\r\n                switch (n) {\r\n                    case 0 /* SETUP */:\r\n                        return setupState[key];\r\n                    case 1 /* DATA */:\r\n                        return data[key];\r\n                    case 3 /* CONTEXT */:\r\n                        return ctx[key];\r\n                    case 2 /* PROPS */:\r\n                        return props[key];\r\n                    // default: just fallthrough\r\n                }\r\n            }\r\n            else if (setupState !== EMPTY_OBJ && hasOwn(setupState, key)) {\r\n                accessCache[key] = 0 /* SETUP */;\r\n                return setupState[key];\r\n            }\r\n            else if (data !== EMPTY_OBJ && hasOwn(data, key)) {\r\n                accessCache[key] = 1 /* DATA */;\r\n                return data[key];\r\n            }\r\n            else if (\r\n            // only cache other properties when instance has declared (thus stable)\r\n            // props\r\n            (normalizedProps = instance.propsOptions[0]) &&\r\n                hasOwn(normalizedProps, key)) {\r\n                accessCache[key] = 2 /* PROPS */;\r\n                return props[key];\r\n            }\r\n            else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {\r\n                accessCache[key] = 3 /* CONTEXT */;\r\n                return ctx[key];\r\n            }\r\n            else if (!__VUE_OPTIONS_API__ || shouldCacheAccess) {\r\n                accessCache[key] = 4 /* OTHER */;\r\n            }\r\n        }\r\n        const publicGetter = publicPropertiesMap[key];\r\n        let cssModule, globalProperties;\r\n        // public $xxx properties\r\n        if (publicGetter) {\r\n            if (key === '$attrs') {\r\n                track(instance, \"get\" /* GET */, key);\r\n                (process.env.NODE_ENV !== 'production') && markAttrsAccessed();\r\n            }\r\n            return publicGetter(instance);\r\n        }\r\n        else if (\r\n        // css module (injected by vue-loader)\r\n        (cssModule = type.__cssModules) &&\r\n            (cssModule = cssModule[key])) {\r\n            return cssModule;\r\n        }\r\n        else if (ctx !== EMPTY_OBJ && hasOwn(ctx, key)) {\r\n            // user may set custom properties to `this` that start with `$`\r\n            accessCache[key] = 3 /* CONTEXT */;\r\n            return ctx[key];\r\n        }\r\n        else if (\r\n        // global properties\r\n        ((globalProperties = appContext.config.globalProperties),\r\n            hasOwn(globalProperties, key))) {\r\n            return globalProperties[key];\r\n        }\r\n        else if ((process.env.NODE_ENV !== 'production') &&\r\n            currentRenderingInstance &&\r\n            (!isString(key) ||\r\n                // #1091 avoid internal isRef/isVNode checks on component instance leading\r\n                // to infinite warning loop\r\n                key.indexOf('__v') !== 0)) {\r\n            if (data !== EMPTY_OBJ &&\r\n                (key[0] === '$' || key[0] === '_') &&\r\n                hasOwn(data, key)) {\r\n                warn(`Property ${JSON.stringify(key)} must be accessed via $data because it starts with a reserved ` +\r\n                    `character (\"$\" or \"_\") and is not proxied on the render context.`);\r\n            }\r\n            else if (instance === currentRenderingInstance) {\r\n                warn(`Property ${JSON.stringify(key)} was accessed during render ` +\r\n                    `but is not defined on instance.`);\r\n            }\r\n        }\r\n    },\r\n    set({ _: instance }, key, value) {\r\n        const { data, setupState, ctx } = instance;\r\n        if (setupState !== EMPTY_OBJ && hasOwn(setupState, key)) {\r\n            setupState[key] = value;\r\n        }\r\n        else if (data !== EMPTY_OBJ && hasOwn(data, key)) {\r\n            data[key] = value;\r\n        }\r\n        else if (hasOwn(instance.props, key)) {\r\n            (process.env.NODE_ENV !== 'production') &&\r\n                warn(`Attempting to mutate prop \"${key}\". Props are readonly.`, instance);\r\n            return false;\r\n        }\r\n        if (key[0] === '$' && key.slice(1) in instance) {\r\n            (process.env.NODE_ENV !== 'production') &&\r\n                warn(`Attempting to mutate public property \"${key}\". ` +\r\n                    `Properties starting with $ are reserved and readonly.`, instance);\r\n            return false;\r\n        }\r\n        else {\r\n            if ((process.env.NODE_ENV !== 'production') && key in instance.appContext.config.globalProperties) {\r\n                Object.defineProperty(ctx, key, {\r\n                    enumerable: true,\r\n                    configurable: true,\r\n                    value\r\n                });\r\n            }\r\n            else {\r\n                ctx[key] = value;\r\n            }\r\n        }\r\n        return true;\r\n    },\r\n    has({ _: { data, setupState, accessCache, ctx, appContext, propsOptions } }, key) {\r\n        let normalizedProps;\r\n        return (accessCache[key] !== undefined ||\r\n            (data !== EMPTY_OBJ && hasOwn(data, key)) ||\r\n            (setupState !== EMPTY_OBJ && hasOwn(setupState, key)) ||\r\n            ((normalizedProps = propsOptions[0]) && hasOwn(normalizedProps, key)) ||\r\n            hasOwn(ctx, key) ||\r\n            hasOwn(publicPropertiesMap, key) ||\r\n            hasOwn(appContext.config.globalProperties, key));\r\n    }\r\n};\r\nif ((process.env.NODE_ENV !== 'production') && !false) {\r\n    PublicInstanceProxyHandlers.ownKeys = (target) => {\r\n        warn(`Avoid app logic that relies on enumerating keys on a component instance. ` +\r\n            `The keys will be empty in production mode to avoid performance overhead.`);\r\n        return Reflect.ownKeys(target);\r\n    };\r\n}\r\nconst RuntimeCompiledPublicInstanceProxyHandlers = extend({}, PublicInstanceProxyHandlers, {\r\n    get(target, key) {\r\n        // fast path for unscopables when using `with` block\r\n        if (key === Symbol.unscopables) {\r\n            return;\r\n        }\r\n        return PublicInstanceProxyHandlers.get(target, key, target);\r\n    },\r\n    has(_, key) {\r\n        const has = key[0] !== '_' && !isGloballyWhitelisted(key);\r\n        if ((process.env.NODE_ENV !== 'production') && !has && PublicInstanceProxyHandlers.has(_, key)) {\r\n            warn(`Property ${JSON.stringify(key)} should not start with _ which is a reserved prefix for Vue internals.`);\r\n        }\r\n        return has;\r\n    }\r\n});\r\n// In dev mode, the proxy target exposes the same properties as seen on `this`\r\n// for easier console inspection. In prod mode it will be an empty object so\r\n// these properties definitions can be skipped.\r\nfunction createRenderContext(instance) {\r\n    const target = {};\r\n    // expose internal instance for proxy handlers\r\n    Object.defineProperty(target, `_`, {\r\n        configurable: true,\r\n        enumerable: false,\r\n        get: () => instance\r\n    });\r\n    // expose public properties\r\n    Object.keys(publicPropertiesMap).forEach(key => {\r\n        Object.defineProperty(target, key, {\r\n            configurable: true,\r\n            enumerable: false,\r\n            get: () => publicPropertiesMap[key](instance),\r\n            // intercepted by the proxy so no need for implementation,\r\n            // but needed to prevent set errors\r\n            set: NOOP\r\n        });\r\n    });\r\n    // expose global properties\r\n    const { globalProperties } = instance.appContext.config;\r\n    Object.keys(globalProperties).forEach(key => {\r\n        Object.defineProperty(target, key, {\r\n            configurable: true,\r\n            enumerable: false,\r\n            get: () => globalProperties[key],\r\n            set: NOOP\r\n        });\r\n    });\r\n    return target;\r\n}\r\n// dev only\r\nfunction exposePropsOnRenderContext(instance) {\r\n    const { ctx, propsOptions: [propsOptions] } = instance;\r\n    if (propsOptions) {\r\n        Object.keys(propsOptions).forEach(key => {\r\n            Object.defineProperty(ctx, key, {\r\n                enumerable: true,\r\n                configurable: true,\r\n                get: () => instance.props[key],\r\n                set: NOOP\r\n            });\r\n        });\r\n    }\r\n}\r\n// dev only\r\nfunction exposeSetupStateOnRenderContext(instance) {\r\n    const { ctx, setupState } = instance;\r\n    Object.keys(toRaw(setupState)).forEach(key => {\r\n        if (key[0] === '$' || key[0] === '_') {\r\n            warn(`setup() return property ${JSON.stringify(key)} should not start with \"$\" or \"_\" ` +\r\n                `which are reserved prefixes for Vue internals.`);\r\n            return;\r\n        }\r\n        Object.defineProperty(ctx, key, {\r\n            enumerable: true,\r\n            configurable: true,\r\n            get: () => setupState[key],\r\n            set: NOOP\r\n        });\r\n    });\r\n}\n\nconst emptyAppContext = createAppContext();\r\nlet uid$1 = 0;\r\nfunction createComponentInstance(vnode, parent, suspense) {\r\n    const type = vnode.type;\r\n    // inherit parent app context - or - if root, adopt from root vnode\r\n    const appContext = (parent ? parent.appContext : vnode.appContext) || emptyAppContext;\r\n    const instance = {\r\n        uid: uid$1++,\r\n        vnode,\r\n        type,\r\n        parent,\r\n        appContext,\r\n        root: null,\r\n        next: null,\r\n        subTree: null,\r\n        update: null,\r\n        render: null,\r\n        proxy: null,\r\n        exposed: null,\r\n        withProxy: null,\r\n        effects: null,\r\n        provides: parent ? parent.provides : Object.create(appContext.provides),\r\n        accessCache: null,\r\n        renderCache: [],\r\n        // local resovled assets\r\n        components: null,\r\n        directives: null,\r\n        // resolved props and emits options\r\n        propsOptions: normalizePropsOptions(type, appContext),\r\n        emitsOptions: normalizeEmitsOptions(type, appContext),\r\n        // emit\r\n        emit: null,\r\n        emitted: null,\r\n        // props default value\r\n        propsDefaults: EMPTY_OBJ,\r\n        // state\r\n        ctx: EMPTY_OBJ,\r\n        data: EMPTY_OBJ,\r\n        props: EMPTY_OBJ,\r\n        attrs: EMPTY_OBJ,\r\n        slots: EMPTY_OBJ,\r\n        refs: EMPTY_OBJ,\r\n        setupState: EMPTY_OBJ,\r\n        setupContext: null,\r\n        // suspense related\r\n        suspense,\r\n        suspenseId: suspense ? suspense.pendingId : 0,\r\n        asyncDep: null,\r\n        asyncResolved: false,\r\n        // lifecycle hooks\r\n        // not using enums here because it results in computed properties\r\n        isMounted: false,\r\n        isUnmounted: false,\r\n        isDeactivated: false,\r\n        bc: null,\r\n        c: null,\r\n        bm: null,\r\n        m: null,\r\n        bu: null,\r\n        u: null,\r\n        um: null,\r\n        bum: null,\r\n        da: null,\r\n        a: null,\r\n        rtg: null,\r\n        rtc: null,\r\n        ec: null\r\n    };\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        instance.ctx = createRenderContext(instance);\r\n    }\r\n    else {\r\n        instance.ctx = { _: instance };\r\n    }\r\n    instance.root = parent ? parent.root : instance;\r\n    instance.emit = emit.bind(null, instance);\r\n    return instance;\r\n}\r\nlet currentInstance = null;\r\nconst getCurrentInstance = () => currentInstance || currentRenderingInstance;\r\nconst setCurrentInstance = (instance) => {\r\n    currentInstance = instance;\r\n};\r\nconst isBuiltInTag = /*#__PURE__*/ makeMap('slot,component');\r\nfunction validateComponentName(name, config) {\r\n    const appIsNativeTag = config.isNativeTag || NO;\r\n    if (isBuiltInTag(name) || appIsNativeTag(name)) {\r\n        warn('Do not use built-in or reserved HTML elements as component id: ' + name);\r\n    }\r\n}\r\nfunction isStatefulComponent(instance) {\r\n    return instance.vnode.shapeFlag & 4 /* STATEFUL_COMPONENT */;\r\n}\r\nlet isInSSRComponentSetup = false;\r\nfunction setupComponent(instance, isSSR = false) {\r\n    isInSSRComponentSetup = isSSR;\r\n    const { props, children } = instance.vnode;\r\n    const isStateful = isStatefulComponent(instance);\r\n    initProps(instance, props, isStateful, isSSR);\r\n    initSlots(instance, children);\r\n    const setupResult = isStateful\r\n        ? setupStatefulComponent(instance, isSSR)\r\n        : undefined;\r\n    isInSSRComponentSetup = false;\r\n    return setupResult;\r\n}\r\nfunction setupStatefulComponent(instance, isSSR) {\r\n    const Component = instance.type;\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        if (Component.name) {\r\n            validateComponentName(Component.name, instance.appContext.config);\r\n        }\r\n        if (Component.components) {\r\n            const names = Object.keys(Component.components);\r\n            for (let i = 0; i < names.length; i++) {\r\n                validateComponentName(names[i], instance.appContext.config);\r\n            }\r\n        }\r\n        if (Component.directives) {\r\n            const names = Object.keys(Component.directives);\r\n            for (let i = 0; i < names.length; i++) {\r\n                validateDirectiveName(names[i]);\r\n            }\r\n        }\r\n    }\r\n    // 0. create render proxy property access cache\r\n    instance.accessCache = Object.create(null);\r\n    // 1. create public instance / render proxy\r\n    // also mark it raw so it's never observed\r\n    instance.proxy = new Proxy(instance.ctx, PublicInstanceProxyHandlers);\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        exposePropsOnRenderContext(instance);\r\n    }\r\n    // 2. call setup()\r\n    const { setup } = Component;\r\n    if (setup) {\r\n        const setupContext = (instance.setupContext =\r\n            setup.length > 1 ? createSetupContext(instance) : null);\r\n        currentInstance = instance;\r\n        pauseTracking();\r\n        const setupResult = callWithErrorHandling(setup, instance, 0 /* SETUP_FUNCTION */, [(process.env.NODE_ENV !== 'production') ? shallowReadonly(instance.props) : instance.props, setupContext]);\r\n        resetTracking();\r\n        currentInstance = null;\r\n        if (isPromise(setupResult)) {\r\n            if (isSSR) {\r\n                // return the promise so server-renderer can wait on it\r\n                return setupResult\r\n                    .then((resolvedResult) => {\r\n                    handleSetupResult(instance, resolvedResult, isSSR);\r\n                })\r\n                    .catch(e => {\r\n                    handleError(e, instance, 0 /* SETUP_FUNCTION */);\r\n                });\r\n            }\r\n            else {\r\n                // async setup returned Promise.\r\n                // bail here and wait for re-entry.\r\n                instance.asyncDep = setupResult;\r\n            }\r\n        }\r\n        else {\r\n            handleSetupResult(instance, setupResult, isSSR);\r\n        }\r\n    }\r\n    else {\r\n        finishComponentSetup(instance, isSSR);\r\n    }\r\n}\r\nfunction handleSetupResult(instance, setupResult, isSSR) {\r\n    if (isFunction(setupResult)) {\r\n        // setup returned an inline render function\r\n        {\r\n            instance.render = setupResult;\r\n        }\r\n    }\r\n    else if (isObject(setupResult)) {\r\n        if ((process.env.NODE_ENV !== 'production') && isVNode(setupResult)) {\r\n            warn(`setup() should not return VNodes directly - ` +\r\n                `return a render function instead.`);\r\n        }\r\n        // setup returned bindings.\r\n        // assuming a render function compiled from template is present.\r\n        if ((process.env.NODE_ENV !== 'production') || __VUE_PROD_DEVTOOLS__) {\r\n            instance.devtoolsRawSetupState = setupResult;\r\n        }\r\n        instance.setupState = proxyRefs(setupResult);\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            exposeSetupStateOnRenderContext(instance);\r\n        }\r\n    }\r\n    else if ((process.env.NODE_ENV !== 'production') && setupResult !== undefined) {\r\n        warn(`setup() should return an object. Received: ${setupResult === null ? 'null' : typeof setupResult}`);\r\n    }\r\n    finishComponentSetup(instance, isSSR);\r\n}\r\nlet compile;\r\n// dev only\r\nconst isRuntimeOnly = () => !compile;\r\n/**\r\n * For runtime-dom to register the compiler.\r\n * Note the exported method uses any to avoid d.ts relying on the compiler types.\r\n */\r\nfunction registerRuntimeCompiler(_compile) {\r\n    compile = _compile;\r\n}\r\nfunction finishComponentSetup(instance, isSSR) {\r\n    const Component = instance.type;\r\n    // template / render function normalization\r\n    if (!instance.render) {\r\n        // could be set from setup()\r\n        if (compile && Component.template && !Component.render) {\r\n            if ((process.env.NODE_ENV !== 'production')) {\r\n                startMeasure(instance, `compile`);\r\n            }\r\n            Component.render = compile(Component.template, {\r\n                isCustomElement: instance.appContext.config.isCustomElement,\r\n                delimiters: Component.delimiters\r\n            });\r\n            if ((process.env.NODE_ENV !== 'production')) {\r\n                endMeasure(instance, `compile`);\r\n            }\r\n        }\r\n        instance.render = (Component.render || NOOP);\r\n        // for runtime-compiled render functions using `with` blocks, the render\r\n        // proxy used needs a different `has` handler which is more performant and\r\n        // also only allows a whitelist of globals to fallthrough.\r\n        if (instance.render._rc) {\r\n            instance.withProxy = new Proxy(instance.ctx, RuntimeCompiledPublicInstanceProxyHandlers);\r\n        }\r\n    }\r\n    // support for 2.x options\r\n    if (__VUE_OPTIONS_API__) {\r\n        currentInstance = instance;\r\n        pauseTracking();\r\n        applyOptions(instance, Component);\r\n        resetTracking();\r\n        currentInstance = null;\r\n    }\r\n    // warn missing template/render\r\n    // the runtime compilation of template in SSR is done by server-render\r\n    if ((process.env.NODE_ENV !== 'production') && !Component.render && instance.render === NOOP && !isSSR) {\r\n        /* istanbul ignore if */\r\n        if (!compile && Component.template) {\r\n            warn(`Component provided template option but ` +\r\n                `runtime compilation is not supported in this build of Vue.` +\r\n                (` Configure your bundler to alias \"vue\" to \"vue/dist/vue.esm-bundler.js\".`\r\n                    ) /* should not happen */);\r\n        }\r\n        else {\r\n            warn(`Component is missing template or render function.`);\r\n        }\r\n    }\r\n}\r\nconst attrHandlers = {\r\n    get: (target, key) => {\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            markAttrsAccessed();\r\n        }\r\n        return target[key];\r\n    },\r\n    set: () => {\r\n        warn(`setupContext.attrs is readonly.`);\r\n        return false;\r\n    },\r\n    deleteProperty: () => {\r\n        warn(`setupContext.attrs is readonly.`);\r\n        return false;\r\n    }\r\n};\r\nfunction createSetupContext(instance) {\r\n    const expose = exposed => {\r\n        if ((process.env.NODE_ENV !== 'production') && instance.exposed) {\r\n            warn(`expose() should be called only once per setup().`);\r\n        }\r\n        instance.exposed = proxyRefs(exposed);\r\n    };\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        // We use getters in dev in case libs like test-utils overwrite instance\r\n        // properties (overwrites should not be done in prod)\r\n        return Object.freeze({\r\n            get attrs() {\r\n                return new Proxy(instance.attrs, attrHandlers);\r\n            },\r\n            get slots() {\r\n                return shallowReadonly(instance.slots);\r\n            },\r\n            get emit() {\r\n                return (event, ...args) => instance.emit(event, ...args);\r\n            },\r\n            expose\r\n        });\r\n    }\r\n    else {\r\n        return {\r\n            attrs: instance.attrs,\r\n            slots: instance.slots,\r\n            emit: instance.emit,\r\n            expose\r\n        };\r\n    }\r\n}\r\n// record effects created during a component's setup() so that they can be\r\n// stopped when the component unmounts\r\nfunction recordInstanceBoundEffect(effect, instance = currentInstance) {\r\n    if (instance) {\r\n        (instance.effects || (instance.effects = [])).push(effect);\r\n    }\r\n}\r\nconst classifyRE = /(?:^|[-_])(\\w)/g;\r\nconst classify = (str) => str.replace(classifyRE, c => c.toUpperCase()).replace(/[-_]/g, '');\r\nfunction getComponentName(Component) {\r\n    return isFunction(Component)\r\n        ? Component.displayName || Component.name\r\n        : Component.name;\r\n}\r\n/* istanbul ignore next */\r\nfunction formatComponentName(instance, Component, isRoot = false) {\r\n    let name = getComponentName(Component);\r\n    if (!name && Component.__file) {\r\n        const match = Component.__file.match(/([^/\\\\]+)\\.\\w+$/);\r\n        if (match) {\r\n            name = match[1];\r\n        }\r\n    }\r\n    if (!name && instance && instance.parent) {\r\n        // try to infer the name based on reverse resolution\r\n        const inferFromRegistry = (registry) => {\r\n            for (const key in registry) {\r\n                if (registry[key] === Component) {\r\n                    return key;\r\n                }\r\n            }\r\n        };\r\n        name =\r\n            inferFromRegistry(instance.components ||\r\n                instance.parent.type.components) || inferFromRegistry(instance.appContext.components);\r\n    }\r\n    return name ? classify(name) : isRoot ? `App` : `Anonymous`;\r\n}\r\nfunction isClassComponent(value) {\r\n    return isFunction(value) && '__vccOpts' in value;\r\n}\n\nfunction computed(getterOrOptions) {\r\n    const c = computed$1(getterOrOptions);\r\n    recordInstanceBoundEffect(c.effect);\r\n    return c;\r\n}\n\n// implementation\r\nfunction defineProps() {\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        warn(`defineProps() is a compiler-hint helper that is only usable inside ` +\r\n            `<script setup> of a single file component. Its arguments should be ` +\r\n            `compiled away and passing it at runtime has no effect.`);\r\n    }\r\n    return null;\r\n}\r\n// implementation\r\nfunction defineEmit() {\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        warn(`defineEmit() is a compiler-hint helper that is only usable inside ` +\r\n            `<script setup> of a single file component. Its arguments should be ` +\r\n            `compiled away and passing it at runtime has no effect.`);\r\n    }\r\n    return null;\r\n}\r\nfunction useContext() {\r\n    const i = getCurrentInstance();\r\n    if ((process.env.NODE_ENV !== 'production') && !i) {\r\n        warn(`useContext() called without active instance.`);\r\n    }\r\n    return i.setupContext || (i.setupContext = createSetupContext(i));\r\n}\n\n// Actual implementation\r\nfunction h(type, propsOrChildren, children) {\r\n    const l = arguments.length;\r\n    if (l === 2) {\r\n        if (isObject(propsOrChildren) && !isArray(propsOrChildren)) {\r\n            // single vnode without props\r\n            if (isVNode(propsOrChildren)) {\r\n                return createVNode(type, null, [propsOrChildren]);\r\n            }\r\n            // props without children\r\n            return createVNode(type, propsOrChildren);\r\n        }\r\n        else {\r\n            // omit props\r\n            return createVNode(type, null, propsOrChildren);\r\n        }\r\n    }\r\n    else {\r\n        if (l > 3) {\r\n            children = Array.prototype.slice.call(arguments, 2);\r\n        }\r\n        else if (l === 3 && isVNode(children)) {\r\n            children = [children];\r\n        }\r\n        return createVNode(type, propsOrChildren, children);\r\n    }\r\n}\n\nconst ssrContextKey = Symbol((process.env.NODE_ENV !== 'production') ? `ssrContext` : ``);\r\nconst useSSRContext = () => {\r\n    {\r\n        const ctx = inject(ssrContextKey);\r\n        if (!ctx) {\r\n            warn(`Server rendering context not provided. Make sure to only call ` +\r\n                `useSSRContext() conditionally in the server build.`);\r\n        }\r\n        return ctx;\r\n    }\r\n};\n\nfunction initCustomFormatter() {\r\n    /* eslint-disable no-restricted-globals */\r\n    if (!(process.env.NODE_ENV !== 'production') || typeof window === 'undefined') {\r\n        return;\r\n    }\r\n    const vueStyle = { style: 'color:#3ba776' };\r\n    const numberStyle = { style: 'color:#0b1bc9' };\r\n    const stringStyle = { style: 'color:#b62e24' };\r\n    const keywordStyle = { style: 'color:#9d288c' };\r\n    // custom formatter for Chrome\r\n    // https://www.mattzeunert.com/2016/02/19/custom-chrome-devtools-object-formatters.html\r\n    const formatter = {\r\n        header(obj) {\r\n            // TODO also format ComponentPublicInstance & ctx.slots/attrs in setup\r\n            if (!isObject(obj)) {\r\n                return null;\r\n            }\r\n            if (obj.__isVue) {\r\n                return ['div', vueStyle, `VueInstance`];\r\n            }\r\n            else if (isRef(obj)) {\r\n                return [\r\n                    'div',\r\n                    {},\r\n                    ['span', vueStyle, genRefFlag(obj)],\r\n                    '<',\r\n                    formatValue(obj.value),\r\n                    `>`\r\n                ];\r\n            }\r\n            else if (isReactive(obj)) {\r\n                return [\r\n                    'div',\r\n                    {},\r\n                    ['span', vueStyle, 'Reactive'],\r\n                    '<',\r\n                    formatValue(obj),\r\n                    `>${isReadonly(obj) ? ` (readonly)` : ``}`\r\n                ];\r\n            }\r\n            else if (isReadonly(obj)) {\r\n                return [\r\n                    'div',\r\n                    {},\r\n                    ['span', vueStyle, 'Readonly'],\r\n                    '<',\r\n                    formatValue(obj),\r\n                    '>'\r\n                ];\r\n            }\r\n            return null;\r\n        },\r\n        hasBody(obj) {\r\n            return obj && obj.__isVue;\r\n        },\r\n        body(obj) {\r\n            if (obj && obj.__isVue) {\r\n                return [\r\n                    'div',\r\n                    {},\r\n                    ...formatInstance(obj.$)\r\n                ];\r\n            }\r\n        }\r\n    };\r\n    function formatInstance(instance) {\r\n        const blocks = [];\r\n        if (instance.type.props && instance.props) {\r\n            blocks.push(createInstanceBlock('props', toRaw(instance.props)));\r\n        }\r\n        if (instance.setupState !== EMPTY_OBJ) {\r\n            blocks.push(createInstanceBlock('setup', instance.setupState));\r\n        }\r\n        if (instance.data !== EMPTY_OBJ) {\r\n            blocks.push(createInstanceBlock('data', toRaw(instance.data)));\r\n        }\r\n        const computed = extractKeys(instance, 'computed');\r\n        if (computed) {\r\n            blocks.push(createInstanceBlock('computed', computed));\r\n        }\r\n        const injected = extractKeys(instance, 'inject');\r\n        if (injected) {\r\n            blocks.push(createInstanceBlock('injected', injected));\r\n        }\r\n        blocks.push([\r\n            'div',\r\n            {},\r\n            [\r\n                'span',\r\n                {\r\n                    style: keywordStyle.style + ';opacity:0.66'\r\n                },\r\n                '$ (internal): '\r\n            ],\r\n            ['object', { object: instance }]\r\n        ]);\r\n        return blocks;\r\n    }\r\n    function createInstanceBlock(type, target) {\r\n        target = extend({}, target);\r\n        if (!Object.keys(target).length) {\r\n            return ['span', {}];\r\n        }\r\n        return [\r\n            'div',\r\n            { style: 'line-height:1.25em;margin-bottom:0.6em' },\r\n            [\r\n                'div',\r\n                {\r\n                    style: 'color:#476582'\r\n                },\r\n                type\r\n            ],\r\n            [\r\n                'div',\r\n                {\r\n                    style: 'padding-left:1.25em'\r\n                },\r\n                ...Object.keys(target).map(key => {\r\n                    return [\r\n                        'div',\r\n                        {},\r\n                        ['span', keywordStyle, key + ': '],\r\n                        formatValue(target[key], false)\r\n                    ];\r\n                })\r\n            ]\r\n        ];\r\n    }\r\n    function formatValue(v, asRaw = true) {\r\n        if (typeof v === 'number') {\r\n            return ['span', numberStyle, v];\r\n        }\r\n        else if (typeof v === 'string') {\r\n            return ['span', stringStyle, JSON.stringify(v)];\r\n        }\r\n        else if (typeof v === 'boolean') {\r\n            return ['span', keywordStyle, v];\r\n        }\r\n        else if (isObject(v)) {\r\n            return ['object', { object: asRaw ? toRaw(v) : v }];\r\n        }\r\n        else {\r\n            return ['span', stringStyle, String(v)];\r\n        }\r\n    }\r\n    function extractKeys(instance, type) {\r\n        const Comp = instance.type;\r\n        if (isFunction(Comp)) {\r\n            return;\r\n        }\r\n        const extracted = {};\r\n        for (const key in instance.ctx) {\r\n            if (isKeyOfType(Comp, key, type)) {\r\n                extracted[key] = instance.ctx[key];\r\n            }\r\n        }\r\n        return extracted;\r\n    }\r\n    function isKeyOfType(Comp, key, type) {\r\n        const opts = Comp[type];\r\n        if ((isArray(opts) && opts.includes(key)) ||\r\n            (isObject(opts) && key in opts)) {\r\n            return true;\r\n        }\r\n        if (Comp.extends && isKeyOfType(Comp.extends, key, type)) {\r\n            return true;\r\n        }\r\n        if (Comp.mixins && Comp.mixins.some(m => isKeyOfType(m, key, type))) {\r\n            return true;\r\n        }\r\n    }\r\n    function genRefFlag(v) {\r\n        if (v._shallow) {\r\n            return `ShallowRef`;\r\n        }\r\n        if (v.effect) {\r\n            return `ComputedRef`;\r\n        }\r\n        return `Ref`;\r\n    }\r\n    if (window.devtoolsFormatters) {\r\n        window.devtoolsFormatters.push(formatter);\r\n    }\r\n    else {\r\n        window.devtoolsFormatters = [formatter];\r\n    }\r\n}\n\n/**\r\n * Actual implementation\r\n */\r\nfunction renderList(source, renderItem) {\r\n    let ret;\r\n    if (isArray(source) || isString(source)) {\r\n        ret = new Array(source.length);\r\n        for (let i = 0, l = source.length; i < l; i++) {\r\n            ret[i] = renderItem(source[i], i);\r\n        }\r\n    }\r\n    else if (typeof source === 'number') {\r\n        if ((process.env.NODE_ENV !== 'production') && !Number.isInteger(source)) {\r\n            warn(`The v-for range expect an integer value but got ${source}.`);\r\n            return [];\r\n        }\r\n        ret = new Array(source);\r\n        for (let i = 0; i < source; i++) {\r\n            ret[i] = renderItem(i + 1, i);\r\n        }\r\n    }\r\n    else if (isObject(source)) {\r\n        if (source[Symbol.iterator]) {\r\n            ret = Array.from(source, renderItem);\r\n        }\r\n        else {\r\n            const keys = Object.keys(source);\r\n            ret = new Array(keys.length);\r\n            for (let i = 0, l = keys.length; i < l; i++) {\r\n                const key = keys[i];\r\n                ret[i] = renderItem(source[key], key, i);\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        ret = [];\r\n    }\r\n    return ret;\r\n}\n\n/**\r\n * For prefixing keys in v-on=\"obj\" with \"on\"\r\n * @private\r\n */\r\nfunction toHandlers(obj) {\r\n    const ret = {};\r\n    if ((process.env.NODE_ENV !== 'production') && !isObject(obj)) {\r\n        warn(`v-on with no argument expects an object value.`);\r\n        return ret;\r\n    }\r\n    for (const key in obj) {\r\n        ret[toHandlerKey(key)] = obj[key];\r\n    }\r\n    return ret;\r\n}\n\n/**\r\n * Compiler runtime helper for creating dynamic slots object\r\n * @private\r\n */\r\nfunction createSlots(slots, dynamicSlots) {\r\n    for (let i = 0; i < dynamicSlots.length; i++) {\r\n        const slot = dynamicSlots[i];\r\n        // array of dynamic slot generated by <template v-for=\"...\" #[...]>\r\n        if (isArray(slot)) {\r\n            for (let j = 0; j < slot.length; j++) {\r\n                slots[slot[j].name] = slot[j].fn;\r\n            }\r\n        }\r\n        else if (slot) {\r\n            // conditional single slot generated by <template v-if=\"...\" #foo>\r\n            slots[slot.name] = slot.fn;\r\n        }\r\n    }\r\n    return slots;\r\n}\n\n// Core API ------------------------------------------------------------------\r\nconst version = \"3.0.11\";\r\n/**\r\n * SSR utils for \\@vue/server-renderer. Only exposed in cjs builds.\r\n * @internal\r\n */\r\nconst ssrUtils = (null);\n\nexport { BaseTransition, Comment, Fragment, KeepAlive, Static, Suspense, Teleport, Text, callWithAsyncErrorHandling, callWithErrorHandling, cloneVNode, computed, createBlock, createCommentVNode, createHydrationRenderer, createRenderer, createSlots, createStaticVNode, createTextVNode, createVNode, defineAsyncComponent, defineComponent, defineEmit, defineProps, devtools, getCurrentInstance, getTransitionRawChildren, h, handleError, initCustomFormatter, inject, isRuntimeOnly, isVNode, mergeProps, nextTick, onActivated, onBeforeMount, onBeforeUnmount, onBeforeUpdate, onDeactivated, onErrorCaptured, onMounted, onRenderTracked, onRenderTriggered, onUnmounted, onUpdated, openBlock, popScopeId, provide, pushScopeId, queuePostFlushCb, registerRuntimeCompiler, renderList, renderSlot, resolveComponent, resolveDirective, resolveDynamicComponent, resolveTransitionHooks, setBlockTracking, setDevtoolsHook, setTransitionHooks, ssrContextKey, ssrUtils, toHandlers, transformVNodeArgs, useContext, useSSRContext, useTransitionState, version, warn, watch, watchEffect, withCtx, withDirectives, withScopeId };\n","import { camelize, warn, callWithAsyncErrorHandling, getCurrentInstance, onMounted, watchEffect, onUpdated, Fragment, h, BaseTransition, useTransitionState, toRaw, getTransitionRawChildren, setTransitionHooks, resolveTransitionHooks, createVNode, createRenderer, isRuntimeOnly, createHydrationRenderer } from '@vue/runtime-core';\nexport * from '@vue/runtime-core';\nimport { isString, isArray, hyphenate, capitalize, isSpecialBooleanAttr, isOn, isModelListener, isFunction, EMPTY_OBJ, extend, isObject, toNumber, invokeArrayFns, looseIndexOf, isSet, looseEqual, isHTMLTag, isSVGTag } from '@vue/shared';\n\nconst svgNS = 'http://www.w3.org/2000/svg';\r\nconst doc = (typeof document !== 'undefined' ? document : null);\r\nlet tempContainer;\r\nlet tempSVGContainer;\r\nconst nodeOps = {\r\n    insert: (child, parent, anchor) => {\r\n        parent.insertBefore(child, anchor || null);\r\n    },\r\n    remove: child => {\r\n        const parent = child.parentNode;\r\n        if (parent) {\r\n            parent.removeChild(child);\r\n        }\r\n    },\r\n    createElement: (tag, isSVG, is, props) => {\r\n        const el = isSVG\r\n            ? doc.createElementNS(svgNS, tag)\r\n            : doc.createElement(tag, is ? { is } : undefined);\r\n        if (tag === 'select' && props && props.multiple != null) {\r\n            el.setAttribute('multiple', props.multiple);\r\n        }\r\n        return el;\r\n    },\r\n    createText: text => doc.createTextNode(text),\r\n    createComment: text => doc.createComment(text),\r\n    setText: (node, text) => {\r\n        node.nodeValue = text;\r\n    },\r\n    setElementText: (el, text) => {\r\n        el.textContent = text;\r\n    },\r\n    parentNode: node => node.parentNode,\r\n    nextSibling: node => node.nextSibling,\r\n    querySelector: selector => doc.querySelector(selector),\r\n    setScopeId(el, id) {\r\n        el.setAttribute(id, '');\r\n    },\r\n    cloneNode(el) {\r\n        const cloned = el.cloneNode(true);\r\n        // #3072\r\n        // - in `patchDOMProp`, we store the actual value in the `el._value` property.\r\n        // - normally, elements using `:value` bindings will not be hoisted, but if\r\n        //   the bound value is a constant, e.g. `:value=\"true\"` - they do get\r\n        //   hoisted.\r\n        // - in production, hoisted nodes are cloned when subsequent inserts, but\r\n        //   cloneNode() does not copy the custom property we attached.\r\n        // - This may need to account for other custom DOM properties we attach to\r\n        //   elements in addition to `_value` in the future.\r\n        if (`_value` in el) {\r\n            cloned._value = el._value;\r\n        }\r\n        return cloned;\r\n    },\r\n    // __UNSAFE__\r\n    // Reason: innerHTML.\r\n    // Static content here can only come from compiled templates.\r\n    // As long as the user only uses trusted templates, this is safe.\r\n    insertStaticContent(content, parent, anchor, isSVG) {\r\n        const temp = isSVG\r\n            ? tempSVGContainer ||\r\n                (tempSVGContainer = doc.createElementNS(svgNS, 'svg'))\r\n            : tempContainer || (tempContainer = doc.createElement('div'));\r\n        temp.innerHTML = content;\r\n        const first = temp.firstChild;\r\n        let node = first;\r\n        let last = node;\r\n        while (node) {\r\n            last = node;\r\n            nodeOps.insert(node, parent, anchor);\r\n            node = temp.firstChild;\r\n        }\r\n        return [first, last];\r\n    }\r\n};\n\n// compiler should normalize class + :class bindings on the same element\r\n// into a single binding ['staticClass', dynamic]\r\nfunction patchClass(el, value, isSVG) {\r\n    if (value == null) {\r\n        value = '';\r\n    }\r\n    if (isSVG) {\r\n        el.setAttribute('class', value);\r\n    }\r\n    else {\r\n        // directly setting className should be faster than setAttribute in theory\r\n        // if this is an element during a transition, take the temporary transition\r\n        // classes into account.\r\n        const transitionClasses = el._vtc;\r\n        if (transitionClasses) {\r\n            value = (value\r\n                ? [value, ...transitionClasses]\r\n                : [...transitionClasses]).join(' ');\r\n        }\r\n        el.className = value;\r\n    }\r\n}\n\nfunction patchStyle(el, prev, next) {\r\n    const style = el.style;\r\n    if (!next) {\r\n        el.removeAttribute('style');\r\n    }\r\n    else if (isString(next)) {\r\n        if (prev !== next) {\r\n            const current = style.display;\r\n            style.cssText = next;\r\n            // indicates that the `display` of the element is controlled by `v-show`,\r\n            // so we always keep the current `display` value regardless of the `style` value,\r\n            // thus handing over control to `v-show`.\r\n            if ('_vod' in el) {\r\n                style.display = current;\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        for (const key in next) {\r\n            setStyle(style, key, next[key]);\r\n        }\r\n        if (prev && !isString(prev)) {\r\n            for (const key in prev) {\r\n                if (next[key] == null) {\r\n                    setStyle(style, key, '');\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nconst importantRE = /\\s*!important$/;\r\nfunction setStyle(style, name, val) {\r\n    if (isArray(val)) {\r\n        val.forEach(v => setStyle(style, name, v));\r\n    }\r\n    else {\r\n        if (name.startsWith('--')) {\r\n            // custom property definition\r\n            style.setProperty(name, val);\r\n        }\r\n        else {\r\n            const prefixed = autoPrefix(style, name);\r\n            if (importantRE.test(val)) {\r\n                // !important\r\n                style.setProperty(hyphenate(prefixed), val.replace(importantRE, ''), 'important');\r\n            }\r\n            else {\r\n                style[prefixed] = val;\r\n            }\r\n        }\r\n    }\r\n}\r\nconst prefixes = ['Webkit', 'Moz', 'ms'];\r\nconst prefixCache = {};\r\nfunction autoPrefix(style, rawName) {\r\n    const cached = prefixCache[rawName];\r\n    if (cached) {\r\n        return cached;\r\n    }\r\n    let name = camelize(rawName);\r\n    if (name !== 'filter' && name in style) {\r\n        return (prefixCache[rawName] = name);\r\n    }\r\n    name = capitalize(name);\r\n    for (let i = 0; i < prefixes.length; i++) {\r\n        const prefixed = prefixes[i] + name;\r\n        if (prefixed in style) {\r\n            return (prefixCache[rawName] = prefixed);\r\n        }\r\n    }\r\n    return rawName;\r\n}\n\nconst xlinkNS = 'http://www.w3.org/1999/xlink';\r\nfunction patchAttr(el, key, value, isSVG) {\r\n    if (isSVG && key.startsWith('xlink:')) {\r\n        if (value == null) {\r\n            el.removeAttributeNS(xlinkNS, key.slice(6, key.length));\r\n        }\r\n        else {\r\n            el.setAttributeNS(xlinkNS, key, value);\r\n        }\r\n    }\r\n    else {\r\n        // note we are only checking boolean attributes that don't have a\r\n        // corresponding dom prop of the same name here.\r\n        const isBoolean = isSpecialBooleanAttr(key);\r\n        if (value == null || (isBoolean && value === false)) {\r\n            el.removeAttribute(key);\r\n        }\r\n        else {\r\n            el.setAttribute(key, isBoolean ? '' : value);\r\n        }\r\n    }\r\n}\n\n// __UNSAFE__\r\n// functions. The user is responsible for using them with only trusted content.\r\nfunction patchDOMProp(el, key, value, \r\n// the following args are passed only due to potential innerHTML/textContent\r\n// overriding existing VNodes, in which case the old tree must be properly\r\n// unmounted.\r\nprevChildren, parentComponent, parentSuspense, unmountChildren) {\r\n    if (key === 'innerHTML' || key === 'textContent') {\r\n        if (prevChildren) {\r\n            unmountChildren(prevChildren, parentComponent, parentSuspense);\r\n        }\r\n        el[key] = value == null ? '' : value;\r\n        return;\r\n    }\r\n    if (key === 'value' && el.tagName !== 'PROGRESS') {\r\n        // store value as _value as well since\r\n        // non-string values will be stringified.\r\n        el._value = value;\r\n        const newValue = value == null ? '' : value;\r\n        if (el.value !== newValue) {\r\n            el.value = newValue;\r\n        }\r\n        return;\r\n    }\r\n    if (value === '' || value == null) {\r\n        const type = typeof el[key];\r\n        if (value === '' && type === 'boolean') {\r\n            // e.g. <select multiple> compiles to { multiple: '' }\r\n            el[key] = true;\r\n            return;\r\n        }\r\n        else if (value == null && type === 'string') {\r\n            // e.g. <div :id=\"null\">\r\n            el[key] = '';\r\n            el.removeAttribute(key);\r\n            return;\r\n        }\r\n        else if (type === 'number') {\r\n            // e.g. <img :width=\"null\">\r\n            el[key] = 0;\r\n            el.removeAttribute(key);\r\n            return;\r\n        }\r\n    }\r\n    // some properties perform value validation and throw\r\n    try {\r\n        el[key] = value;\r\n    }\r\n    catch (e) {\r\n        if ((process.env.NODE_ENV !== 'production')) {\r\n            warn(`Failed setting prop \"${key}\" on <${el.tagName.toLowerCase()}>: ` +\r\n                `value ${value} is invalid.`, e);\r\n        }\r\n    }\r\n}\n\n// Async edge case fix requires storing an event listener's attach timestamp.\r\nlet _getNow = Date.now;\r\nlet skipTimestampCheck = false;\r\nif (typeof window !== 'undefined') {\r\n    // Determine what event timestamp the browser is using. Annoyingly, the\r\n    // timestamp can either be hi-res (relative to page load) or low-res\r\n    // (relative to UNIX epoch), so in order to compare time we have to use the\r\n    // same timestamp type when saving the flush timestamp.\r\n    if (_getNow() > document.createEvent('Event').timeStamp) {\r\n        // if the low-res timestamp which is bigger than the event timestamp\r\n        // (which is evaluated AFTER) it means the event is using a hi-res timestamp,\r\n        // and we need to use the hi-res version for event listeners as well.\r\n        _getNow = () => performance.now();\r\n    }\r\n    // #3485: Firefox <= 53 has incorrect Event.timeStamp implementation\r\n    // and does not fire microtasks in between event propagation, so safe to exclude.\r\n    const ffMatch = navigator.userAgent.match(/firefox\\/(\\d+)/i);\r\n    skipTimestampCheck = !!(ffMatch && Number(ffMatch[1]) <= 53);\r\n}\r\n// To avoid the overhead of repeatedly calling performance.now(), we cache\r\n// and use the same timestamp for all event listeners attached in the same tick.\r\nlet cachedNow = 0;\r\nconst p = Promise.resolve();\r\nconst reset = () => {\r\n    cachedNow = 0;\r\n};\r\nconst getNow = () => cachedNow || (p.then(reset), (cachedNow = _getNow()));\r\nfunction addEventListener(el, event, handler, options) {\r\n    el.addEventListener(event, handler, options);\r\n}\r\nfunction removeEventListener(el, event, handler, options) {\r\n    el.removeEventListener(event, handler, options);\r\n}\r\nfunction patchEvent(el, rawName, prevValue, nextValue, instance = null) {\r\n    // vei = vue event invokers\r\n    const invokers = el._vei || (el._vei = {});\r\n    const existingInvoker = invokers[rawName];\r\n    if (nextValue && existingInvoker) {\r\n        // patch\r\n        existingInvoker.value = nextValue;\r\n    }\r\n    else {\r\n        const [name, options] = parseName(rawName);\r\n        if (nextValue) {\r\n            // add\r\n            const invoker = (invokers[rawName] = createInvoker(nextValue, instance));\r\n            addEventListener(el, name, invoker, options);\r\n        }\r\n        else if (existingInvoker) {\r\n            // remove\r\n            removeEventListener(el, name, existingInvoker, options);\r\n            invokers[rawName] = undefined;\r\n        }\r\n    }\r\n}\r\nconst optionsModifierRE = /(?:Once|Passive|Capture)$/;\r\nfunction parseName(name) {\r\n    let options;\r\n    if (optionsModifierRE.test(name)) {\r\n        options = {};\r\n        let m;\r\n        while ((m = name.match(optionsModifierRE))) {\r\n            name = name.slice(0, name.length - m[0].length);\r\n            options[m[0].toLowerCase()] = true;\r\n        }\r\n    }\r\n    return [hyphenate(name.slice(2)), options];\r\n}\r\nfunction createInvoker(initialValue, instance) {\r\n    const invoker = (e) => {\r\n        // async edge case #6566: inner click event triggers patch, event handler\r\n        // attached to outer element during patch, and triggered again. This\r\n        // happens because browsers fire microtask ticks between event propagation.\r\n        // the solution is simple: we save the timestamp when a handler is attached,\r\n        // and the handler would only fire if the event passed to it was fired\r\n        // AFTER it was attached.\r\n        const timeStamp = e.timeStamp || _getNow();\r\n        if (skipTimestampCheck || timeStamp >= invoker.attached - 1) {\r\n            callWithAsyncErrorHandling(patchStopImmediatePropagation(e, invoker.value), instance, 5 /* NATIVE_EVENT_HANDLER */, [e]);\r\n        }\r\n    };\r\n    invoker.value = initialValue;\r\n    invoker.attached = getNow();\r\n    return invoker;\r\n}\r\nfunction patchStopImmediatePropagation(e, value) {\r\n    if (isArray(value)) {\r\n        const originalStop = e.stopImmediatePropagation;\r\n        e.stopImmediatePropagation = () => {\r\n            originalStop.call(e);\r\n            e._stopped = true;\r\n        };\r\n        return value.map(fn => (e) => !e._stopped && fn(e));\r\n    }\r\n    else {\r\n        return value;\r\n    }\r\n}\n\nconst nativeOnRE = /^on[a-z]/;\r\nconst forcePatchProp = (_, key) => key === 'value';\r\nconst patchProp = (el, key, prevValue, nextValue, isSVG = false, prevChildren, parentComponent, parentSuspense, unmountChildren) => {\r\n    switch (key) {\r\n        // special\r\n        case 'class':\r\n            patchClass(el, nextValue, isSVG);\r\n            break;\r\n        case 'style':\r\n            patchStyle(el, prevValue, nextValue);\r\n            break;\r\n        default:\r\n            if (isOn(key)) {\r\n                // ignore v-model listeners\r\n                if (!isModelListener(key)) {\r\n                    patchEvent(el, key, prevValue, nextValue, parentComponent);\r\n                }\r\n            }\r\n            else if (shouldSetAsProp(el, key, nextValue, isSVG)) {\r\n                patchDOMProp(el, key, nextValue, prevChildren, parentComponent, parentSuspense, unmountChildren);\r\n            }\r\n            else {\r\n                // special case for <input v-model type=\"checkbox\"> with\r\n                // :true-value & :false-value\r\n                // store value as dom properties since non-string values will be\r\n                // stringified.\r\n                if (key === 'true-value') {\r\n                    el._trueValue = nextValue;\r\n                }\r\n                else if (key === 'false-value') {\r\n                    el._falseValue = nextValue;\r\n                }\r\n                patchAttr(el, key, nextValue, isSVG);\r\n            }\r\n            break;\r\n    }\r\n};\r\nfunction shouldSetAsProp(el, key, value, isSVG) {\r\n    if (isSVG) {\r\n        // most keys must be set as attribute on svg elements to work\r\n        // ...except innerHTML\r\n        if (key === 'innerHTML') {\r\n            return true;\r\n        }\r\n        // or native onclick with function values\r\n        if (key in el && nativeOnRE.test(key) && isFunction(value)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    // spellcheck and draggable are numerated attrs, however their\r\n    // corresponding DOM properties are actually booleans - this leads to\r\n    // setting it with a string \"false\" value leading it to be coerced to\r\n    // `true`, so we need to always treat them as attributes.\r\n    // Note that `contentEditable` doesn't have this problem: its DOM\r\n    // property is also enumerated string values.\r\n    if (key === 'spellcheck' || key === 'draggable') {\r\n        return false;\r\n    }\r\n    // #1787, #2840 form property on form elements is readonly and must be set as\r\n    // attribute.\r\n    if (key === 'form') {\r\n        return false;\r\n    }\r\n    // #1526 <input list> must be set as attribute\r\n    if (key === 'list' && el.tagName === 'INPUT') {\r\n        return false;\r\n    }\r\n    // #2766 <textarea type> must be set as attribute\r\n    if (key === 'type' && el.tagName === 'TEXTAREA') {\r\n        return false;\r\n    }\r\n    // native onclick with string value, must be set as attribute\r\n    if (nativeOnRE.test(key) && isString(value)) {\r\n        return false;\r\n    }\r\n    return key in el;\r\n}\n\nfunction useCssModule(name = '$style') {\r\n    /* istanbul ignore else */\r\n    {\r\n        const instance = getCurrentInstance();\r\n        if (!instance) {\r\n            (process.env.NODE_ENV !== 'production') && warn(`useCssModule must be called inside setup()`);\r\n            return EMPTY_OBJ;\r\n        }\r\n        const modules = instance.type.__cssModules;\r\n        if (!modules) {\r\n            (process.env.NODE_ENV !== 'production') && warn(`Current instance does not have CSS modules injected.`);\r\n            return EMPTY_OBJ;\r\n        }\r\n        const mod = modules[name];\r\n        if (!mod) {\r\n            (process.env.NODE_ENV !== 'production') &&\r\n                warn(`Current instance does not have CSS module named \"${name}\".`);\r\n            return EMPTY_OBJ;\r\n        }\r\n        return mod;\r\n    }\r\n}\n\n/**\r\n * Runtime helper for SFC's CSS variable injection feature.\r\n * @private\r\n */\r\nfunction useCssVars(getter) {\r\n    const instance = getCurrentInstance();\r\n    /* istanbul ignore next */\r\n    if (!instance) {\r\n        (process.env.NODE_ENV !== 'production') &&\r\n            warn(`useCssVars is called without current active component instance.`);\r\n        return;\r\n    }\r\n    const setVars = () => setVarsOnVNode(instance.subTree, getter(instance.proxy));\r\n    onMounted(() => watchEffect(setVars, { flush: 'post' }));\r\n    onUpdated(setVars);\r\n}\r\nfunction setVarsOnVNode(vnode, vars) {\r\n    if (vnode.shapeFlag & 128 /* SUSPENSE */) {\r\n        const suspense = vnode.suspense;\r\n        vnode = suspense.activeBranch;\r\n        if (suspense.pendingBranch && !suspense.isHydrating) {\r\n            suspense.effects.push(() => {\r\n                setVarsOnVNode(suspense.activeBranch, vars);\r\n            });\r\n        }\r\n    }\r\n    // drill down HOCs until it's a non-component vnode\r\n    while (vnode.component) {\r\n        vnode = vnode.component.subTree;\r\n    }\r\n    if (vnode.shapeFlag & 1 /* ELEMENT */ && vnode.el) {\r\n        const style = vnode.el.style;\r\n        for (const key in vars) {\r\n            style.setProperty(`--${key}`, vars[key]);\r\n        }\r\n    }\r\n    else if (vnode.type === Fragment) {\r\n        vnode.children.forEach(c => setVarsOnVNode(c, vars));\r\n    }\r\n}\n\nconst TRANSITION = 'transition';\r\nconst ANIMATION = 'animation';\r\n// DOM Transition is a higher-order-component based on the platform-agnostic\r\n// base Transition component, with DOM-specific logic.\r\nconst Transition = (props, { slots }) => h(BaseTransition, resolveTransitionProps(props), slots);\r\nTransition.displayName = 'Transition';\r\nconst DOMTransitionPropsValidators = {\r\n    name: String,\r\n    type: String,\r\n    css: {\r\n        type: Boolean,\r\n        default: true\r\n    },\r\n    duration: [String, Number, Object],\r\n    enterFromClass: String,\r\n    enterActiveClass: String,\r\n    enterToClass: String,\r\n    appearFromClass: String,\r\n    appearActiveClass: String,\r\n    appearToClass: String,\r\n    leaveFromClass: String,\r\n    leaveActiveClass: String,\r\n    leaveToClass: String\r\n};\r\nconst TransitionPropsValidators = (Transition.props = /*#__PURE__*/ extend({}, BaseTransition.props, DOMTransitionPropsValidators));\r\nfunction resolveTransitionProps(rawProps) {\r\n    let { name = 'v', type, css = true, duration, enterFromClass = `${name}-enter-from`, enterActiveClass = `${name}-enter-active`, enterToClass = `${name}-enter-to`, appearFromClass = enterFromClass, appearActiveClass = enterActiveClass, appearToClass = enterToClass, leaveFromClass = `${name}-leave-from`, leaveActiveClass = `${name}-leave-active`, leaveToClass = `${name}-leave-to` } = rawProps;\r\n    const baseProps = {};\r\n    for (const key in rawProps) {\r\n        if (!(key in DOMTransitionPropsValidators)) {\r\n            baseProps[key] = rawProps[key];\r\n        }\r\n    }\r\n    if (!css) {\r\n        return baseProps;\r\n    }\r\n    const durations = normalizeDuration(duration);\r\n    const enterDuration = durations && durations[0];\r\n    const leaveDuration = durations && durations[1];\r\n    const { onBeforeEnter, onEnter, onEnterCancelled, onLeave, onLeaveCancelled, onBeforeAppear = onBeforeEnter, onAppear = onEnter, onAppearCancelled = onEnterCancelled } = baseProps;\r\n    const finishEnter = (el, isAppear, done) => {\r\n        removeTransitionClass(el, isAppear ? appearToClass : enterToClass);\r\n        removeTransitionClass(el, isAppear ? appearActiveClass : enterActiveClass);\r\n        done && done();\r\n    };\r\n    const finishLeave = (el, done) => {\r\n        removeTransitionClass(el, leaveToClass);\r\n        removeTransitionClass(el, leaveActiveClass);\r\n        done && done();\r\n    };\r\n    const makeEnterHook = (isAppear) => {\r\n        return (el, done) => {\r\n            const hook = isAppear ? onAppear : onEnter;\r\n            const resolve = () => finishEnter(el, isAppear, done);\r\n            hook && hook(el, resolve);\r\n            nextFrame(() => {\r\n                removeTransitionClass(el, isAppear ? appearFromClass : enterFromClass);\r\n                addTransitionClass(el, isAppear ? appearToClass : enterToClass);\r\n                if (!(hook && hook.length > 1)) {\r\n                    whenTransitionEnds(el, type, enterDuration, resolve);\r\n                }\r\n            });\r\n        };\r\n    };\r\n    return extend(baseProps, {\r\n        onBeforeEnter(el) {\r\n            onBeforeEnter && onBeforeEnter(el);\r\n            addTransitionClass(el, enterFromClass);\r\n            addTransitionClass(el, enterActiveClass);\r\n        },\r\n        onBeforeAppear(el) {\r\n            onBeforeAppear && onBeforeAppear(el);\r\n            addTransitionClass(el, appearFromClass);\r\n            addTransitionClass(el, appearActiveClass);\r\n        },\r\n        onEnter: makeEnterHook(false),\r\n        onAppear: makeEnterHook(true),\r\n        onLeave(el, done) {\r\n            const resolve = () => finishLeave(el, done);\r\n            addTransitionClass(el, leaveFromClass);\r\n            // force reflow so *-leave-from classes immediately take effect (#2593)\r\n            forceReflow();\r\n            addTransitionClass(el, leaveActiveClass);\r\n            nextFrame(() => {\r\n                removeTransitionClass(el, leaveFromClass);\r\n                addTransitionClass(el, leaveToClass);\r\n                if (!(onLeave && onLeave.length > 1)) {\r\n                    whenTransitionEnds(el, type, leaveDuration, resolve);\r\n                }\r\n            });\r\n            onLeave && onLeave(el, resolve);\r\n        },\r\n        onEnterCancelled(el) {\r\n            finishEnter(el, false);\r\n            onEnterCancelled && onEnterCancelled(el);\r\n        },\r\n        onAppearCancelled(el) {\r\n            finishEnter(el, true);\r\n            onAppearCancelled && onAppearCancelled(el);\r\n        },\r\n        onLeaveCancelled(el) {\r\n            finishLeave(el);\r\n            onLeaveCancelled && onLeaveCancelled(el);\r\n        }\r\n    });\r\n}\r\nfunction normalizeDuration(duration) {\r\n    if (duration == null) {\r\n        return null;\r\n    }\r\n    else if (isObject(duration)) {\r\n        return [NumberOf(duration.enter), NumberOf(duration.leave)];\r\n    }\r\n    else {\r\n        const n = NumberOf(duration);\r\n        return [n, n];\r\n    }\r\n}\r\nfunction NumberOf(val) {\r\n    const res = toNumber(val);\r\n    if ((process.env.NODE_ENV !== 'production'))\r\n        validateDuration(res);\r\n    return res;\r\n}\r\nfunction validateDuration(val) {\r\n    if (typeof val !== 'number') {\r\n        warn(`<transition> explicit duration is not a valid number - ` +\r\n            `got ${JSON.stringify(val)}.`);\r\n    }\r\n    else if (isNaN(val)) {\r\n        warn(`<transition> explicit duration is NaN - ` +\r\n            'the duration expression might be incorrect.');\r\n    }\r\n}\r\nfunction addTransitionClass(el, cls) {\r\n    cls.split(/\\s+/).forEach(c => c && el.classList.add(c));\r\n    (el._vtc ||\r\n        (el._vtc = new Set())).add(cls);\r\n}\r\nfunction removeTransitionClass(el, cls) {\r\n    cls.split(/\\s+/).forEach(c => c && el.classList.remove(c));\r\n    const { _vtc } = el;\r\n    if (_vtc) {\r\n        _vtc.delete(cls);\r\n        if (!_vtc.size) {\r\n            el._vtc = undefined;\r\n        }\r\n    }\r\n}\r\nfunction nextFrame(cb) {\r\n    requestAnimationFrame(() => {\r\n        requestAnimationFrame(cb);\r\n    });\r\n}\r\nlet endId = 0;\r\nfunction whenTransitionEnds(el, expectedType, explicitTimeout, resolve) {\r\n    const id = (el._endId = ++endId);\r\n    const resolveIfNotStale = () => {\r\n        if (id === el._endId) {\r\n            resolve();\r\n        }\r\n    };\r\n    if (explicitTimeout) {\r\n        return setTimeout(resolveIfNotStale, explicitTimeout);\r\n    }\r\n    const { type, timeout, propCount } = getTransitionInfo(el, expectedType);\r\n    if (!type) {\r\n        return resolve();\r\n    }\r\n    const endEvent = type + 'end';\r\n    let ended = 0;\r\n    const end = () => {\r\n        el.removeEventListener(endEvent, onEnd);\r\n        resolveIfNotStale();\r\n    };\r\n    const onEnd = (e) => {\r\n        if (e.target === el && ++ended >= propCount) {\r\n            end();\r\n        }\r\n    };\r\n    setTimeout(() => {\r\n        if (ended < propCount) {\r\n            end();\r\n        }\r\n    }, timeout + 1);\r\n    el.addEventListener(endEvent, onEnd);\r\n}\r\nfunction getTransitionInfo(el, expectedType) {\r\n    const styles = window.getComputedStyle(el);\r\n    // JSDOM may return undefined for transition properties\r\n    const getStyleProperties = (key) => (styles[key] || '').split(', ');\r\n    const transitionDelays = getStyleProperties(TRANSITION + 'Delay');\r\n    const transitionDurations = getStyleProperties(TRANSITION + 'Duration');\r\n    const transitionTimeout = getTimeout(transitionDelays, transitionDurations);\r\n    const animationDelays = getStyleProperties(ANIMATION + 'Delay');\r\n    const animationDurations = getStyleProperties(ANIMATION + 'Duration');\r\n    const animationTimeout = getTimeout(animationDelays, animationDurations);\r\n    let type = null;\r\n    let timeout = 0;\r\n    let propCount = 0;\r\n    /* istanbul ignore if */\r\n    if (expectedType === TRANSITION) {\r\n        if (transitionTimeout > 0) {\r\n            type = TRANSITION;\r\n            timeout = transitionTimeout;\r\n            propCount = transitionDurations.length;\r\n        }\r\n    }\r\n    else if (expectedType === ANIMATION) {\r\n        if (animationTimeout > 0) {\r\n            type = ANIMATION;\r\n            timeout = animationTimeout;\r\n            propCount = animationDurations.length;\r\n        }\r\n    }\r\n    else {\r\n        timeout = Math.max(transitionTimeout, animationTimeout);\r\n        type =\r\n            timeout > 0\r\n                ? transitionTimeout > animationTimeout\r\n                    ? TRANSITION\r\n                    : ANIMATION\r\n                : null;\r\n        propCount = type\r\n            ? type === TRANSITION\r\n                ? transitionDurations.length\r\n                : animationDurations.length\r\n            : 0;\r\n    }\r\n    const hasTransform = type === TRANSITION &&\r\n        /\\b(transform|all)(,|$)/.test(styles[TRANSITION + 'Property']);\r\n    return {\r\n        type,\r\n        timeout,\r\n        propCount,\r\n        hasTransform\r\n    };\r\n}\r\nfunction getTimeout(delays, durations) {\r\n    while (delays.length < durations.length) {\r\n        delays = delays.concat(delays);\r\n    }\r\n    return Math.max(...durations.map((d, i) => toMs(d) + toMs(delays[i])));\r\n}\r\n// Old versions of Chromium (below 61.0.3163.100) formats floating pointer\r\n// numbers in a locale-dependent way, using a comma instead of a dot.\r\n// If comma is not replaced with a dot, the input will be rounded down\r\n// (i.e. acting as a floor function) causing unexpected behaviors\r\nfunction toMs(s) {\r\n    return Number(s.slice(0, -1).replace(',', '.')) * 1000;\r\n}\r\n// synchronously force layout to put elements into a certain state\r\nfunction forceReflow() {\r\n    return document.body.offsetHeight;\r\n}\n\nconst positionMap = new WeakMap();\r\nconst newPositionMap = new WeakMap();\r\nconst TransitionGroupImpl = {\r\n    name: 'TransitionGroup',\r\n    props: /*#__PURE__*/ extend({}, TransitionPropsValidators, {\r\n        tag: String,\r\n        moveClass: String\r\n    }),\r\n    setup(props, { slots }) {\r\n        const instance = getCurrentInstance();\r\n        const state = useTransitionState();\r\n        let prevChildren;\r\n        let children;\r\n        onUpdated(() => {\r\n            // children is guaranteed to exist after initial render\r\n            if (!prevChildren.length) {\r\n                return;\r\n            }\r\n            const moveClass = props.moveClass || `${props.name || 'v'}-move`;\r\n            if (!hasCSSTransform(prevChildren[0].el, instance.vnode.el, moveClass)) {\r\n                return;\r\n            }\r\n            // we divide the work into three loops to avoid mixing DOM reads and writes\r\n            // in each iteration - which helps prevent layout thrashing.\r\n            prevChildren.forEach(callPendingCbs);\r\n            prevChildren.forEach(recordPosition);\r\n            const movedChildren = prevChildren.filter(applyTranslation);\r\n            // force reflow to put everything in position\r\n            forceReflow();\r\n            movedChildren.forEach(c => {\r\n                const el = c.el;\r\n                const style = el.style;\r\n                addTransitionClass(el, moveClass);\r\n                style.transform = style.webkitTransform = style.transitionDuration = '';\r\n                const cb = (el._moveCb = (e) => {\r\n                    if (e && e.target !== el) {\r\n                        return;\r\n                    }\r\n                    if (!e || /transform$/.test(e.propertyName)) {\r\n                        el.removeEventListener('transitionend', cb);\r\n                        el._moveCb = null;\r\n                        removeTransitionClass(el, moveClass);\r\n                    }\r\n                });\r\n                el.addEventListener('transitionend', cb);\r\n            });\r\n        });\r\n        return () => {\r\n            const rawProps = toRaw(props);\r\n            const cssTransitionProps = resolveTransitionProps(rawProps);\r\n            const tag = rawProps.tag || Fragment;\r\n            prevChildren = children;\r\n            children = slots.default ? getTransitionRawChildren(slots.default()) : [];\r\n            for (let i = 0; i < children.length; i++) {\r\n                const child = children[i];\r\n                if (child.key != null) {\r\n                    setTransitionHooks(child, resolveTransitionHooks(child, cssTransitionProps, state, instance));\r\n                }\r\n                else if ((process.env.NODE_ENV !== 'production')) {\r\n                    warn(`<TransitionGroup> children must be keyed.`);\r\n                }\r\n            }\r\n            if (prevChildren) {\r\n                for (let i = 0; i < prevChildren.length; i++) {\r\n                    const child = prevChildren[i];\r\n                    setTransitionHooks(child, resolveTransitionHooks(child, cssTransitionProps, state, instance));\r\n                    positionMap.set(child, child.el.getBoundingClientRect());\r\n                }\r\n            }\r\n            return createVNode(tag, null, children);\r\n        };\r\n    }\r\n};\r\nconst TransitionGroup = TransitionGroupImpl;\r\nfunction callPendingCbs(c) {\r\n    const el = c.el;\r\n    if (el._moveCb) {\r\n        el._moveCb();\r\n    }\r\n    if (el._enterCb) {\r\n        el._enterCb();\r\n    }\r\n}\r\nfunction recordPosition(c) {\r\n    newPositionMap.set(c, c.el.getBoundingClientRect());\r\n}\r\nfunction applyTranslation(c) {\r\n    const oldPos = positionMap.get(c);\r\n    const newPos = newPositionMap.get(c);\r\n    const dx = oldPos.left - newPos.left;\r\n    const dy = oldPos.top - newPos.top;\r\n    if (dx || dy) {\r\n        const s = c.el.style;\r\n        s.transform = s.webkitTransform = `translate(${dx}px,${dy}px)`;\r\n        s.transitionDuration = '0s';\r\n        return c;\r\n    }\r\n}\r\nfunction hasCSSTransform(el, root, moveClass) {\r\n    // Detect whether an element with the move class applied has\r\n    // CSS transitions. Since the element may be inside an entering\r\n    // transition at this very moment, we make a clone of it and remove\r\n    // all other transition classes applied to ensure only the move class\r\n    // is applied.\r\n    const clone = el.cloneNode();\r\n    if (el._vtc) {\r\n        el._vtc.forEach(cls => {\r\n            cls.split(/\\s+/).forEach(c => c && clone.classList.remove(c));\r\n        });\r\n    }\r\n    moveClass.split(/\\s+/).forEach(c => c && clone.classList.add(c));\r\n    clone.style.display = 'none';\r\n    const container = (root.nodeType === 1\r\n        ? root\r\n        : root.parentNode);\r\n    container.appendChild(clone);\r\n    const { hasTransform } = getTransitionInfo(clone);\r\n    container.removeChild(clone);\r\n    return hasTransform;\r\n}\n\nconst getModelAssigner = (vnode) => {\r\n    const fn = vnode.props['onUpdate:modelValue'];\r\n    return isArray(fn) ? value => invokeArrayFns(fn, value) : fn;\r\n};\r\nfunction onCompositionStart(e) {\r\n    e.target.composing = true;\r\n}\r\nfunction onCompositionEnd(e) {\r\n    const target = e.target;\r\n    if (target.composing) {\r\n        target.composing = false;\r\n        trigger(target, 'input');\r\n    }\r\n}\r\nfunction trigger(el, type) {\r\n    const e = document.createEvent('HTMLEvents');\r\n    e.initEvent(type, true, true);\r\n    el.dispatchEvent(e);\r\n}\r\n// We are exporting the v-model runtime directly as vnode hooks so that it can\r\n// be tree-shaken in case v-model is never used.\r\nconst vModelText = {\r\n    created(el, { modifiers: { lazy, trim, number } }, vnode) {\r\n        el._assign = getModelAssigner(vnode);\r\n        const castToNumber = number || el.type === 'number';\r\n        addEventListener(el, lazy ? 'change' : 'input', e => {\r\n            if (e.target.composing)\r\n                return;\r\n            let domValue = el.value;\r\n            if (trim) {\r\n                domValue = domValue.trim();\r\n            }\r\n            else if (castToNumber) {\r\n                domValue = toNumber(domValue);\r\n            }\r\n            el._assign(domValue);\r\n        });\r\n        if (trim) {\r\n            addEventListener(el, 'change', () => {\r\n                el.value = el.value.trim();\r\n            });\r\n        }\r\n        if (!lazy) {\r\n            addEventListener(el, 'compositionstart', onCompositionStart);\r\n            addEventListener(el, 'compositionend', onCompositionEnd);\r\n            // Safari < 10.2 & UIWebView doesn't fire compositionend when\r\n            // switching focus before confirming composition choice\r\n            // this also fixes the issue where some browsers e.g. iOS Chrome\r\n            // fires \"change\" instead of \"input\" on autocomplete.\r\n            addEventListener(el, 'change', onCompositionEnd);\r\n        }\r\n    },\r\n    // set value on mounted so it's after min/max for type=\"range\"\r\n    mounted(el, { value }) {\r\n        el.value = value == null ? '' : value;\r\n    },\r\n    beforeUpdate(el, { value, modifiers: { trim, number } }, vnode) {\r\n        el._assign = getModelAssigner(vnode);\r\n        // avoid clearing unresolved text. #2302\r\n        if (el.composing)\r\n            return;\r\n        if (document.activeElement === el) {\r\n            if (trim && el.value.trim() === value) {\r\n                return;\r\n            }\r\n            if ((number || el.type === 'number') && toNumber(el.value) === value) {\r\n                return;\r\n            }\r\n        }\r\n        const newValue = value == null ? '' : value;\r\n        if (el.value !== newValue) {\r\n            el.value = newValue;\r\n        }\r\n    }\r\n};\r\nconst vModelCheckbox = {\r\n    created(el, _, vnode) {\r\n        el._assign = getModelAssigner(vnode);\r\n        addEventListener(el, 'change', () => {\r\n            const modelValue = el._modelValue;\r\n            const elementValue = getValue(el);\r\n            const checked = el.checked;\r\n            const assign = el._assign;\r\n            if (isArray(modelValue)) {\r\n                const index = looseIndexOf(modelValue, elementValue);\r\n                const found = index !== -1;\r\n                if (checked && !found) {\r\n                    assign(modelValue.concat(elementValue));\r\n                }\r\n                else if (!checked && found) {\r\n                    const filtered = [...modelValue];\r\n                    filtered.splice(index, 1);\r\n                    assign(filtered);\r\n                }\r\n            }\r\n            else if (isSet(modelValue)) {\r\n                const cloned = new Set(modelValue);\r\n                if (checked) {\r\n                    cloned.add(elementValue);\r\n                }\r\n                else {\r\n                    cloned.delete(elementValue);\r\n                }\r\n                assign(cloned);\r\n            }\r\n            else {\r\n                assign(getCheckboxValue(el, checked));\r\n            }\r\n        });\r\n    },\r\n    // set initial checked on mount to wait for true-value/false-value\r\n    mounted: setChecked,\r\n    beforeUpdate(el, binding, vnode) {\r\n        el._assign = getModelAssigner(vnode);\r\n        setChecked(el, binding, vnode);\r\n    }\r\n};\r\nfunction setChecked(el, { value, oldValue }, vnode) {\r\n    el._modelValue = value;\r\n    if (isArray(value)) {\r\n        el.checked = looseIndexOf(value, vnode.props.value) > -1;\r\n    }\r\n    else if (isSet(value)) {\r\n        el.checked = value.has(vnode.props.value);\r\n    }\r\n    else if (value !== oldValue) {\r\n        el.checked = looseEqual(value, getCheckboxValue(el, true));\r\n    }\r\n}\r\nconst vModelRadio = {\r\n    created(el, { value }, vnode) {\r\n        el.checked = looseEqual(value, vnode.props.value);\r\n        el._assign = getModelAssigner(vnode);\r\n        addEventListener(el, 'change', () => {\r\n            el._assign(getValue(el));\r\n        });\r\n    },\r\n    beforeUpdate(el, { value, oldValue }, vnode) {\r\n        el._assign = getModelAssigner(vnode);\r\n        if (value !== oldValue) {\r\n            el.checked = looseEqual(value, vnode.props.value);\r\n        }\r\n    }\r\n};\r\nconst vModelSelect = {\r\n    created(el, { value, modifiers: { number } }, vnode) {\r\n        const isSetModel = isSet(value);\r\n        addEventListener(el, 'change', () => {\r\n            const selectedVal = Array.prototype.filter\r\n                .call(el.options, (o) => o.selected)\r\n                .map((o) => number ? toNumber(getValue(o)) : getValue(o));\r\n            el._assign(el.multiple\r\n                ? isSetModel\r\n                    ? new Set(selectedVal)\r\n                    : selectedVal\r\n                : selectedVal[0]);\r\n        });\r\n        el._assign = getModelAssigner(vnode);\r\n    },\r\n    // set value in mounted & updated because <select> relies on its children\r\n    // <option>s.\r\n    mounted(el, { value }) {\r\n        setSelected(el, value);\r\n    },\r\n    beforeUpdate(el, _binding, vnode) {\r\n        el._assign = getModelAssigner(vnode);\r\n    },\r\n    updated(el, { value }) {\r\n        setSelected(el, value);\r\n    }\r\n};\r\nfunction setSelected(el, value) {\r\n    const isMultiple = el.multiple;\r\n    if (isMultiple && !isArray(value) && !isSet(value)) {\r\n        (process.env.NODE_ENV !== 'production') &&\r\n            warn(`<select multiple v-model> expects an Array or Set value for its binding, ` +\r\n                `but got ${Object.prototype.toString.call(value).slice(8, -1)}.`);\r\n        return;\r\n    }\r\n    for (let i = 0, l = el.options.length; i < l; i++) {\r\n        const option = el.options[i];\r\n        const optionValue = getValue(option);\r\n        if (isMultiple) {\r\n            if (isArray(value)) {\r\n                option.selected = looseIndexOf(value, optionValue) > -1;\r\n            }\r\n            else {\r\n                option.selected = value.has(optionValue);\r\n            }\r\n        }\r\n        else {\r\n            if (looseEqual(getValue(option), value)) {\r\n                el.selectedIndex = i;\r\n                return;\r\n            }\r\n        }\r\n    }\r\n    if (!isMultiple) {\r\n        el.selectedIndex = -1;\r\n    }\r\n}\r\n// retrieve raw value set via :value bindings\r\nfunction getValue(el) {\r\n    return '_value' in el ? el._value : el.value;\r\n}\r\n// retrieve raw value for true-value and false-value set via :true-value or :false-value bindings\r\nfunction getCheckboxValue(el, checked) {\r\n    const key = checked ? '_trueValue' : '_falseValue';\r\n    return key in el ? el[key] : checked;\r\n}\r\nconst vModelDynamic = {\r\n    created(el, binding, vnode) {\r\n        callModelHook(el, binding, vnode, null, 'created');\r\n    },\r\n    mounted(el, binding, vnode) {\r\n        callModelHook(el, binding, vnode, null, 'mounted');\r\n    },\r\n    beforeUpdate(el, binding, vnode, prevVNode) {\r\n        callModelHook(el, binding, vnode, prevVNode, 'beforeUpdate');\r\n    },\r\n    updated(el, binding, vnode, prevVNode) {\r\n        callModelHook(el, binding, vnode, prevVNode, 'updated');\r\n    }\r\n};\r\nfunction callModelHook(el, binding, vnode, prevVNode, hook) {\r\n    let modelToUse;\r\n    switch (el.tagName) {\r\n        case 'SELECT':\r\n            modelToUse = vModelSelect;\r\n            break;\r\n        case 'TEXTAREA':\r\n            modelToUse = vModelText;\r\n            break;\r\n        default:\r\n            switch (vnode.props && vnode.props.type) {\r\n                case 'checkbox':\r\n                    modelToUse = vModelCheckbox;\r\n                    break;\r\n                case 'radio':\r\n                    modelToUse = vModelRadio;\r\n                    break;\r\n                default:\r\n                    modelToUse = vModelText;\r\n            }\r\n    }\r\n    const fn = modelToUse[hook];\r\n    fn && fn(el, binding, vnode, prevVNode);\r\n}\n\nconst systemModifiers = ['ctrl', 'shift', 'alt', 'meta'];\r\nconst modifierGuards = {\r\n    stop: e => e.stopPropagation(),\r\n    prevent: e => e.preventDefault(),\r\n    self: e => e.target !== e.currentTarget,\r\n    ctrl: e => !e.ctrlKey,\r\n    shift: e => !e.shiftKey,\r\n    alt: e => !e.altKey,\r\n    meta: e => !e.metaKey,\r\n    left: e => 'button' in e && e.button !== 0,\r\n    middle: e => 'button' in e && e.button !== 1,\r\n    right: e => 'button' in e && e.button !== 2,\r\n    exact: (e, modifiers) => systemModifiers.some(m => e[`${m}Key`] && !modifiers.includes(m))\r\n};\r\n/**\r\n * @private\r\n */\r\nconst withModifiers = (fn, modifiers) => {\r\n    return (event, ...args) => {\r\n        for (let i = 0; i < modifiers.length; i++) {\r\n            const guard = modifierGuards[modifiers[i]];\r\n            if (guard && guard(event, modifiers))\r\n                return;\r\n        }\r\n        return fn(event, ...args);\r\n    };\r\n};\r\n// Kept for 2.x compat.\r\n// Note: IE11 compat for `spacebar` and `del` is removed for now.\r\nconst keyNames = {\r\n    esc: 'escape',\r\n    space: ' ',\r\n    up: 'arrow-up',\r\n    left: 'arrow-left',\r\n    right: 'arrow-right',\r\n    down: 'arrow-down',\r\n    delete: 'backspace'\r\n};\r\n/**\r\n * @private\r\n */\r\nconst withKeys = (fn, modifiers) => {\r\n    return (event) => {\r\n        if (!('key' in event))\r\n            return;\r\n        const eventKey = hyphenate(event.key);\r\n        if (\r\n        // None of the provided key modifiers match the current event key\r\n        !modifiers.some(k => k === eventKey || keyNames[k] === eventKey)) {\r\n            return;\r\n        }\r\n        return fn(event);\r\n    };\r\n};\n\nconst vShow = {\r\n    beforeMount(el, { value }, { transition }) {\r\n        el._vod = el.style.display === 'none' ? '' : el.style.display;\r\n        if (transition && value) {\r\n            transition.beforeEnter(el);\r\n        }\r\n        else {\r\n            setDisplay(el, value);\r\n        }\r\n    },\r\n    mounted(el, { value }, { transition }) {\r\n        if (transition && value) {\r\n            transition.enter(el);\r\n        }\r\n    },\r\n    updated(el, { value, oldValue }, { transition }) {\r\n        if (!value === !oldValue)\r\n            return;\r\n        if (transition) {\r\n            if (value) {\r\n                transition.beforeEnter(el);\r\n                setDisplay(el, true);\r\n                transition.enter(el);\r\n            }\r\n            else {\r\n                transition.leave(el, () => {\r\n                    setDisplay(el, false);\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            setDisplay(el, value);\r\n        }\r\n    },\r\n    beforeUnmount(el, { value }) {\r\n        setDisplay(el, value);\r\n    }\r\n};\r\nfunction setDisplay(el, value) {\r\n    el.style.display = value ? el._vod : 'none';\r\n}\n\nconst rendererOptions = extend({ patchProp, forcePatchProp }, nodeOps);\r\n// lazy create the renderer - this makes core renderer logic tree-shakable\r\n// in case the user only imports reactivity utilities from Vue.\r\nlet renderer;\r\nlet enabledHydration = false;\r\nfunction ensureRenderer() {\r\n    return renderer || (renderer = createRenderer(rendererOptions));\r\n}\r\nfunction ensureHydrationRenderer() {\r\n    renderer = enabledHydration\r\n        ? renderer\r\n        : createHydrationRenderer(rendererOptions);\r\n    enabledHydration = true;\r\n    return renderer;\r\n}\r\n// use explicit type casts here to avoid import() calls in rolled-up d.ts\r\nconst render = ((...args) => {\r\n    ensureRenderer().render(...args);\r\n});\r\nconst hydrate = ((...args) => {\r\n    ensureHydrationRenderer().hydrate(...args);\r\n});\r\nconst createApp = ((...args) => {\r\n    const app = ensureRenderer().createApp(...args);\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        injectNativeTagCheck(app);\r\n        injectCustomElementCheck(app);\r\n    }\r\n    const { mount } = app;\r\n    app.mount = (containerOrSelector) => {\r\n        const container = normalizeContainer(containerOrSelector);\r\n        if (!container)\r\n            return;\r\n        const component = app._component;\r\n        if (!isFunction(component) && !component.render && !component.template) {\r\n            component.template = container.innerHTML;\r\n        }\r\n        // clear content before mounting\r\n        container.innerHTML = '';\r\n        const proxy = mount(container, false, container instanceof SVGElement);\r\n        if (container instanceof Element) {\r\n            container.removeAttribute('v-cloak');\r\n            container.setAttribute('data-v-app', '');\r\n        }\r\n        return proxy;\r\n    };\r\n    return app;\r\n});\r\nconst createSSRApp = ((...args) => {\r\n    const app = ensureHydrationRenderer().createApp(...args);\r\n    if ((process.env.NODE_ENV !== 'production')) {\r\n        injectNativeTagCheck(app);\r\n        injectCustomElementCheck(app);\r\n    }\r\n    const { mount } = app;\r\n    app.mount = (containerOrSelector) => {\r\n        const container = normalizeContainer(containerOrSelector);\r\n        if (container) {\r\n            return mount(container, true, container instanceof SVGElement);\r\n        }\r\n    };\r\n    return app;\r\n});\r\nfunction injectNativeTagCheck(app) {\r\n    // Inject `isNativeTag`\r\n    // this is used for component name validation (dev only)\r\n    Object.defineProperty(app.config, 'isNativeTag', {\r\n        value: (tag) => isHTMLTag(tag) || isSVGTag(tag),\r\n        writable: false\r\n    });\r\n}\r\n// dev only\r\nfunction injectCustomElementCheck(app) {\r\n    if (isRuntimeOnly()) {\r\n        const value = app.config.isCustomElement;\r\n        Object.defineProperty(app.config, 'isCustomElement', {\r\n            get() {\r\n                return value;\r\n            },\r\n            set() {\r\n                warn(`The \\`isCustomElement\\` config option is only respected when using the runtime compiler.` +\r\n                    `If you are using the runtime-only build, \\`isCustomElement\\` must be passed to \\`@vue/compiler-dom\\` in the build setup instead` +\r\n                    `- for example, via the \\`compilerOptions\\` option in vue-loader: https://vue-loader.vuejs.org/options.html#compileroptions.`);\r\n            }\r\n        });\r\n    }\r\n}\r\nfunction normalizeContainer(container) {\r\n    if (isString(container)) {\r\n        const res = document.querySelector(container);\r\n        if ((process.env.NODE_ENV !== 'production') && !res) {\r\n            warn(`Failed to mount app: mount target selector \"${container}\" returned null.`);\r\n        }\r\n        return res;\r\n    }\r\n    if ((process.env.NODE_ENV !== 'production') &&\r\n        container instanceof window.ShadowRoot &&\r\n        container.mode === 'closed') {\r\n        warn(`mounting on a ShadowRoot with \\`{mode: \"closed\"}\\` may lead to unpredictable bugs`);\r\n    }\r\n    return container;\r\n}\n\nexport { Transition, TransitionGroup, createApp, createSSRApp, hydrate, render, useCssModule, useCssVars, vModelCheckbox, vModelDynamic, vModelRadio, vModelSelect, vModelText, vShow, withKeys, withModifiers };\n","<template>\n  <button @click=\"fabric.addLine\">Line</button>\n  <button @click=\"() => fabric.addRect({ fill: state.color })\">Rect</button>\n  <button @click=\"fabric.addCircle\">Circle</button>\n  <button @click=\"fabric.addTextBox\">TextBox</button>\n  <button @click=\"save\">Save</button>\n  <button @click=\"remove\">remove</button>\n  <input type=\"color\" v-model=\"state.color\" />\n  {{ state.color }}\n  <div class=\"wrapper\" :style=\"{ width: '600px', height: '600px', border: '1px solid' }\">\n    <canvas id=\"canvas\" width=\"600\" height=\"600\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { reactive, watch, defineComponent, onMounted } from 'vue'\nimport useFabric from './compositions/useFabric'\nimport { THEME_COLOR } from './compositions/useFabric'\n\nexport default defineComponent({\n  props: {\n    url: {\n      type: String,\n      required: true\n    },\n    onSave: {\n      type: Function,\n      required: true\n    }\n  },\n  setup(props) {\n    const fabric = useFabric('canvas')\n    const state = reactive({\n      color: THEME_COLOR.ORANGE as string\n    })\n\n    onMounted(() => {\n      fabric.init(props.url)\n    })\n\n    watch(\n      () => state.color,\n      newColor => {\n        if (fabric.state.selectedObject) {\n          fabric.state.selectedObject.setOptions({ fill: newColor })\n          fabric.canvas.value.renderAndReset()\n        }\n      }\n    )\n\n    watch(\n      () => fabric.state.selectedObject,\n      newObject => {\n        if (typeof newObject?.fill === 'string') {\n          state.color = newObject.fill\n        }\n      }\n    )\n\n    const save = () => {\n      props.onSave(fabric.toBase64())\n    }\n\n    const remove = () => {\n      fabric.removeSelectedObject()\n    }\n\n    return { state, fabric, save, remove }\n  }\n})\n</script>\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import { fabric } from 'fabric'\nimport { ICircleOptions, ILineOptions, IObjectOptions, IRectOptions, ITextOptions } from 'fabric/fabric-impl'\nimport { computed, reactive } from 'vue'\n\nexport const THEME_COLOR = {\n  WHITE: '#ffffff',\n  ORANGE: '#f6aa00'\n} as const\n\nexport default function useFabric(canvasId: string) {\n  const canvas = computed<fabric.Canvas>(() => new fabric.Canvas(canvasId))\n  const state = reactive({\n    selectedObject: null as fabric.Object | null\n  })\n\n  const defaultObjectOption = computed<IObjectOptions>(() => ({\n    width: canvas.value.getWidth() / 2,\n    height: canvas.value.getHeight() / 2,\n    radius: canvas.value.getWidth() / 4,\n    fill: THEME_COLOR.ORANGE,\n    stroke: THEME_COLOR.WHITE,\n    strokeWidth: 5\n  }))\n\n  const init = (backGroundUrl: string) => {\n    fabric.Image.fromURL(backGroundUrl, image => {\n      image.scaleToWidth(canvas.value.getWidth())\n      canvas.value.setBackgroundImage(image, canvas.value.renderAll.bind(canvas.value))\n    })\n\n    canvas.value.on('selection:created', () => updateSelectedObject())\n    canvas.value.on('selection:updated', () => updateSelectedObject())\n    canvas.value.on('selection:cleared', () => clearSelectedObject())\n  }\n\n  const updateSelectedObject = () => {\n    state.selectedObject = canvas.value.getActiveObject()\n  }\n\n  const clearSelectedObject = () => {\n    state.selectedObject = null\n  }\n\n  const addObject = (object: fabric.Object) => {\n    canvas.value.add(object)\n  }\n\n  const removeObject = (object: fabric.Object) => {\n    canvas.value.remove(object)\n  }\n\n  const removeSelectedObject = () => {\n    removeObject(canvas.value.getActiveObject())\n    clearSelectedObject()\n  }\n\n  const addLine = (options: ILineOptions = {}) => {\n    const line = new fabric.Line([100, 200, 400, 600], {\n      ...defaultObjectOption.value,\n      ...options\n    })\n    addObject(line)\n  }\n\n  const addRect = (options: IRectOptions = {}) => {\n    const rect = new fabric.Rect({\n      ...defaultObjectOption.value,\n      ...options\n    })\n    addObject(rect)\n  }\n\n  const addCircle = (options: ICircleOptions = {}) => {\n    const circle = new fabric.Circle({\n      ...defaultObjectOption.value,\n      ...options\n    })\n    addObject(circle)\n  }\n\n  const addTextBox = (options: ITextOptions = {}) => {\n    const textBox = new fabric.Textbox('new text', {\n      ...defaultObjectOption.value,\n      strokeWidth: 1,\n      ...options\n    })\n    addObject(textBox)\n  }\n\n  const toBase64 = () => {\n    return canvas.value.toDataURL({ format: 'png' })\n  }\n\n  return {\n    state,\n    canvas,\n    init,\n    addLine,\n    addRect,\n    addCircle,\n    addTextBox,\n    removeSelectedObject,\n    toBase64\n  }\n}\n","\nimport { reactive, watch, defineComponent, onMounted } from 'vue'\nimport useFabric from './compositions/useFabric'\nimport { THEME_COLOR } from './compositions/useFabric'\n\nexport default defineComponent({\n  props: {\n    url: {\n      type: String,\n      required: true\n    },\n    onSave: {\n      type: Function,\n      required: true\n    }\n  },\n  setup(props) {\n    const fabric = useFabric('canvas')\n    const state = reactive({\n      color: THEME_COLOR.ORANGE as string\n    })\n\n    onMounted(() => {\n      fabric.init(props.url)\n    })\n\n    watch(\n      () => state.color,\n      newColor => {\n        if (fabric.state.selectedObject) {\n          fabric.state.selectedObject.setOptions({ fill: newColor })\n          fabric.canvas.value.renderAndReset()\n        }\n      }\n    )\n\n    watch(\n      () => fabric.state.selectedObject,\n      newObject => {\n        if (typeof newObject?.fill === 'string') {\n          state.color = newObject.fill\n        }\n      }\n    )\n\n    const save = () => {\n      props.onSave(fabric.toBase64())\n    }\n\n    const remove = () => {\n      fabric.removeSelectedObject()\n    }\n\n    return { state, fabric, save, remove }\n  }\n})\n","import { render } from \"./App.vue?vue&type=template&id=b3d3f3d0\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue'\nimport App from './App.vue'\n\nclass AppElement extends HTMLElement {\n  private rootDiv?: HTMLDivElement\n  private url: string\n\n  constructor() {\n    super()\n    this.url = this.getAttribute('url') as string\n  }\n\n  connectedCallback() {\n    if (!this.rootDiv) {\n      this.rootDiv = document.createElement('div')\n      // this.attachShadow({ mode: 'open' })\n      // this.shadowRoot?.append(this.div)\n      this.append(this.rootDiv)\n      createApp(App, {\n        url: this.url,\n        onSave: (data: string) => {\n          this.dispatchEvent(new CustomEvent('onSave', { detail: data }))\n        }\n      }).mount(this.rootDiv)\n    }\n  }\n}\n\ncustomElements.define('markee-service', AppElement)\n","var anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar newPromiseCapability = require('../internals/new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","module.exports = {};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.iterator` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.iterator\ndefineWellKnownSymbol('iterator');\n","/* eslint-disable no-proto -- safe */\nvar anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;\n    setter.call(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter.call(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar redefine = require('../internals/redefine');\nvar toString = require('../internals/object-to-string');\n\n// `Object.prototype.toString` method\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nif (!TO_STRING_TAG_SUPPORT) {\n  redefine(Object.prototype, 'toString', toString, { unsafe: true });\n}\n","var defineProperty = require('../internals/object-define-property').f;\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (it, TAG, STATIC) {\n  if (it && !has(it = STATIC ? it : it.prototype, TO_STRING_TAG)) {\n    defineProperty(it, TO_STRING_TAG, { configurable: true, value: TAG });\n  }\n};\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar ArrayIteratorMethods = require('../modules/es.array.iterator');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {\n      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR] = ArrayValues;\n    }\n    if (!CollectionPrototype[TO_STRING_TAG]) {\n      createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n    }\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n}\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","// `Symbol.prototype.description` getter\n// https://tc39.es/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar has = require('../internals/has');\nvar isObject = require('../internals/is-object');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\n\nif (DESCRIPTORS && typeof NativeSymbol == 'function' && (!('description' in NativeSymbol.prototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var result = this instanceof SymbolWrapper\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  var symbolPrototype = SymbolWrapper.prototype = NativeSymbol.prototype;\n  symbolPrototype.constructor = SymbolWrapper;\n\n  var symbolToString = symbolPrototype.toString;\n  var native = String(NativeSymbol('test')) == 'Symbol(test)';\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  defineProperty(symbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = isObject(this) ? this.valueOf() : this;\n      var string = symbolToString.call(symbol);\n      if (has(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = native ? string.slice(7, -1) : string.replace(regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n","var has = require('../internals/has');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar ObjectPrototype = Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es/no-object-getprototypeof -- safe\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectPrototype : null;\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar Iterators = require('../internals/iterators');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.es/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.es/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.es/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.es/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.es/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.es/ecma262/#sec-createmappedargumentsobject\nIterators.Arguments = Iterators.Array;\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","var redefine = require('../internals/redefine');\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) redefine(target, key, src[key], options);\n  return target;\n};\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nexports.f = wellKnownSymbol;\n","module.exports = function (exec) {\n  try {\n    return { error: false, value: exec() };\n  } catch (error) {\n    return { error: true, value: error };\n  }\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar redefine = require('../internals/redefine');\nvar redefineAll = require('../internals/redefine-all');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar setSpecies = require('../internals/set-species');\nvar isObject = require('../internals/is-object');\nvar aFunction = require('../internals/a-function');\nvar anInstance = require('../internals/an-instance');\nvar inspectSource = require('../internals/inspect-source');\nvar iterate = require('../internals/iterate');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar speciesConstructor = require('../internals/species-constructor');\nvar task = require('../internals/task').set;\nvar microtask = require('../internals/microtask');\nvar promiseResolve = require('../internals/promise-resolve');\nvar hostReportErrors = require('../internals/host-report-errors');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\nvar InternalStateModule = require('../internals/internal-state');\nvar isForced = require('../internals/is-forced');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_NODE = require('../internals/engine-is-node');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\nvar PROMISE = 'Promise';\nvar getInternalState = InternalStateModule.get;\nvar setInternalState = InternalStateModule.set;\nvar getInternalPromiseState = InternalStateModule.getterFor(PROMISE);\nvar PromiseConstructor = NativePromise;\nvar TypeError = global.TypeError;\nvar document = global.document;\nvar process = global.process;\nvar $fetch = getBuiltIn('fetch');\nvar newPromiseCapability = newPromiseCapabilityModule.f;\nvar newGenericPromiseCapability = newPromiseCapability;\nvar DISPATCH_EVENT = !!(document && document.createEvent && global.dispatchEvent);\nvar NATIVE_REJECTION_EVENT = typeof PromiseRejectionEvent == 'function';\nvar UNHANDLED_REJECTION = 'unhandledrejection';\nvar REJECTION_HANDLED = 'rejectionhandled';\nvar PENDING = 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\nvar HANDLED = 1;\nvar UNHANDLED = 2;\nvar Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;\n\nvar FORCED = isForced(PROMISE, function () {\n  var GLOBAL_CORE_JS_PROMISE = inspectSource(PromiseConstructor) !== String(PromiseConstructor);\n  if (!GLOBAL_CORE_JS_PROMISE) {\n    // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n    // We can't detect it synchronously, so just check versions\n    if (V8_VERSION === 66) return true;\n    // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    if (!IS_NODE && !NATIVE_REJECTION_EVENT) return true;\n  }\n  // We need Promise#finally in the pure version for preventing prototype pollution\n  if (IS_PURE && !PromiseConstructor.prototype['finally']) return true;\n  // We can't use @@species feature detection in V8 since it causes\n  // deoptimization and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if (V8_VERSION >= 51 && /native code/.test(PromiseConstructor)) return false;\n  // Detect correctness of subclassing with @@species support\n  var promise = PromiseConstructor.resolve(1);\n  var FakePromise = function (exec) {\n    exec(function () { /* empty */ }, function () { /* empty */ });\n  };\n  var constructor = promise.constructor = {};\n  constructor[SPECIES] = FakePromise;\n  return !(promise.then(function () { /* empty */ }) instanceof FakePromise);\n});\n\nvar INCORRECT_ITERATION = FORCED || !checkCorrectnessOfIteration(function (iterable) {\n  PromiseConstructor.all(iterable)['catch'](function () { /* empty */ });\n});\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\n\nvar notify = function (state, isReject) {\n  if (state.notified) return;\n  state.notified = true;\n  var chain = state.reactions;\n  microtask(function () {\n    var value = state.value;\n    var ok = state.state == FULFILLED;\n    var index = 0;\n    // variable length - can't use forEach\n    while (chain.length > index) {\n      var reaction = chain[index++];\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (state.rejection === UNHANDLED) onHandleUnhandled(state);\n            state.rejection = HANDLED;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // can throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (error) {\n        if (domain && !exited) domain.exit();\n        reject(error);\n      }\n    }\n    state.reactions = [];\n    state.notified = false;\n    if (isReject && !state.rejection) onUnhandled(state);\n  });\n};\n\nvar dispatchEvent = function (name, promise, reason) {\n  var event, handler;\n  if (DISPATCH_EVENT) {\n    event = document.createEvent('Event');\n    event.promise = promise;\n    event.reason = reason;\n    event.initEvent(name, false, true);\n    global.dispatchEvent(event);\n  } else event = { promise: promise, reason: reason };\n  if (!NATIVE_REJECTION_EVENT && (handler = global['on' + name])) handler(event);\n  else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);\n};\n\nvar onUnhandled = function (state) {\n  task.call(global, function () {\n    var promise = state.facade;\n    var value = state.value;\n    var IS_UNHANDLED = isUnhandled(state);\n    var result;\n    if (IS_UNHANDLED) {\n      result = perform(function () {\n        if (IS_NODE) {\n          process.emit('unhandledRejection', value, promise);\n        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;\n      if (result.error) throw result.value;\n    }\n  });\n};\n\nvar isUnhandled = function (state) {\n  return state.rejection !== HANDLED && !state.parent;\n};\n\nvar onHandleUnhandled = function (state) {\n  task.call(global, function () {\n    var promise = state.facade;\n    if (IS_NODE) {\n      process.emit('rejectionHandled', promise);\n    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);\n  });\n};\n\nvar bind = function (fn, state, unwrap) {\n  return function (value) {\n    fn(state, value, unwrap);\n  };\n};\n\nvar internalReject = function (state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  state.value = value;\n  state.state = REJECTED;\n  notify(state, true);\n};\n\nvar internalResolve = function (state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  try {\n    if (state.facade === value) throw TypeError(\"Promise can't be resolved itself\");\n    var then = isThenable(value);\n    if (then) {\n      microtask(function () {\n        var wrapper = { done: false };\n        try {\n          then.call(value,\n            bind(internalResolve, wrapper, state),\n            bind(internalReject, wrapper, state)\n          );\n        } catch (error) {\n          internalReject(wrapper, error, state);\n        }\n      });\n    } else {\n      state.value = value;\n      state.state = FULFILLED;\n      notify(state, false);\n    }\n  } catch (error) {\n    internalReject({ done: false }, error, state);\n  }\n};\n\n// constructor polyfill\nif (FORCED) {\n  // 25.4.3.1 Promise(executor)\n  PromiseConstructor = function Promise(executor) {\n    anInstance(this, PromiseConstructor, PROMISE);\n    aFunction(executor);\n    Internal.call(this);\n    var state = getInternalState(this);\n    try {\n      executor(bind(internalResolve, state), bind(internalReject, state));\n    } catch (error) {\n      internalReject(state, error);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  Internal = function Promise(executor) {\n    setInternalState(this, {\n      type: PROMISE,\n      done: false,\n      notified: false,\n      parent: false,\n      reactions: [],\n      rejection: false,\n      state: PENDING,\n      value: undefined\n    });\n  };\n  Internal.prototype = redefineAll(PromiseConstructor.prototype, {\n    // `Promise.prototype.then` method\n    // https://tc39.es/ecma262/#sec-promise.prototype.then\n    then: function then(onFulfilled, onRejected) {\n      var state = getInternalPromiseState(this);\n      var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = IS_NODE ? process.domain : undefined;\n      state.parent = true;\n      state.reactions.push(reaction);\n      if (state.state != PENDING) notify(state, false);\n      return reaction.promise;\n    },\n    // `Promise.prototype.catch` method\n    // https://tc39.es/ecma262/#sec-promise.prototype.catch\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    var state = getInternalState(promise);\n    this.promise = promise;\n    this.resolve = bind(internalResolve, state);\n    this.reject = bind(internalReject, state);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === PromiseConstructor || C === PromiseWrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n\n  if (!IS_PURE && typeof NativePromise == 'function') {\n    nativeThen = NativePromise.prototype.then;\n\n    // wrap native Promise#then for native async functions\n    redefine(NativePromise.prototype, 'then', function then(onFulfilled, onRejected) {\n      var that = this;\n      return new PromiseConstructor(function (resolve, reject) {\n        nativeThen.call(that, resolve, reject);\n      }).then(onFulfilled, onRejected);\n    // https://github.com/zloirock/core-js/issues/640\n    }, { unsafe: true });\n\n    // wrap fetch result\n    if (typeof $fetch == 'function') $({ global: true, enumerable: true, forced: true }, {\n      // eslint-disable-next-line no-unused-vars -- required for `.length`\n      fetch: function fetch(input /* , init */) {\n        return promiseResolve(PromiseConstructor, $fetch.apply(global, arguments));\n      }\n    });\n  }\n}\n\n$({ global: true, wrap: true, forced: FORCED }, {\n  Promise: PromiseConstructor\n});\n\nsetToStringTag(PromiseConstructor, PROMISE, false, true);\nsetSpecies(PROMISE);\n\nPromiseWrapper = getBuiltIn(PROMISE);\n\n// statics\n$({ target: PROMISE, stat: true, forced: FORCED }, {\n  // `Promise.reject` method\n  // https://tc39.es/ecma262/#sec-promise.reject\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    capability.reject.call(undefined, r);\n    return capability.promise;\n  }\n});\n\n$({ target: PROMISE, stat: true, forced: IS_PURE || FORCED }, {\n  // `Promise.resolve` method\n  // https://tc39.es/ecma262/#sec-promise.resolve\n  resolve: function resolve(x) {\n    return promiseResolve(IS_PURE && this === PromiseWrapper ? PromiseConstructor : this, x);\n  }\n});\n\n$({ target: PROMISE, stat: true, forced: INCORRECT_ITERATION }, {\n  // `Promise.all` method\n  // https://tc39.es/ecma262/#sec-promise.all\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aFunction(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        $promiseResolve.call(C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  },\n  // `Promise.race` method\n  // https://tc39.es/ecma262/#sec-promise.race\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aFunction(C.resolve);\n      iterate(iterable, function (promise) {\n        $promiseResolve.call(C, promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","'use strict';\nvar aFunction = require('../internals/a-function');\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n};\n\n// 25.4.1.5 NewPromiseCapability(C)\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","var hiddenKeys = require('../internals/hidden-keys');\nvar isObject = require('../internals/is-object');\nvar has = require('../internals/has');\nvar defineProperty = require('../internals/object-define-property').f;\nvar uid = require('../internals/uid');\nvar FREEZING = require('../internals/freezing');\n\nvar METADATA = uid('meta');\nvar id = 0;\n\n// eslint-disable-next-line es/no-object-isextensible -- safe\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + ++id, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && meta.REQUIRED && isExtensible(it) && !has(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar meta = module.exports = {\n  REQUIRED: false,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var global = require('../internals/global');\n\nmodule.exports = global.Promise;\n"],"sourceRoot":""}